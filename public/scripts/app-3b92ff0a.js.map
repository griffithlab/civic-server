{"version":3,"sources":["scripts/app-3b92ff0a.js"],"names":["sessionInfo","ConfigService","restrict","template","link","scope","conf","appConfig","$uiViewScrollProvider","$anchorScrollProvider","formlyConfigProvider","$compileProvider","window","apiCheck","disabled","extras","removeChromeAutoComplete","useAnchorScroll","disableAutoScrolling","debugInfoEnabled","appRun","Security","$rootScope","$state","$analytics","$window","$location","_","loading_screen","finish","view","$on","event","toState","navMode","data","isEmpty","hash","prevScroll","eventTrack","name","pageTrack","location","requestCurrentUser","evt","to","toP","from","fromP","err","angular","module","run","config","$inject","routesConfig","$stateProvider","$urlRouterProvider","otherwise","when","state","url","controller","templateUrl","titleExp","controllerAs","labelifyFilter","input","replace","a","toUpperCase","words","isNaN","inputWords","split","length","slice","join","arrayToListFilter","limitTo","terminator","showTotal","parseInt","isArray","output","concat","String","encodeUri","encodeURIComponent","decodeUri","decodeURIComponent","keyToLabel","isNull","isUndefined","substring","capitalizeFilter","toLowerCase","ifEmpty","defaultValue","unsafe","$sce","trustAsHtml","ordinal","suffix","n","Math","floor","num","filter","formlyTemplatesRun","formlyValidationMessages","addTemplateOptionValueMessage","addStringMessage","constant","options","labelColWidth","inputColWidth","helpColWidth","validationMessages","400","401","403","404","405","406","409","500","501","errorPrompts","formlyWrappersConfig","formConfig","setWrapper","commentConfig","setType","extends","wrapper","users","entities","$scope","$filter","CommentSuggestions","searchUsers","term","getUserSuggestions","then","response","getUser","user","display_name","searchEntities","getEntitySuggestions","map","entity","display_type","type","getEntity","types","gene","variant","variant_group","evidence_item","revision","id","typedTerm","basicFieldTypesConfig","ratingConfig","overStar","model","rating","hoveringOver","value","leave","typeaheadConfig","multiInputConfig","defaultOptions","noFormControl","templateOptions","inputOptions","deleteItem","index","splice","addItem","copyItemOptions","copy","publicationConfig","PublicationController","Publications","validatePublication","pubmedId","verify","geneConfig","GeneController","Genes","validateGene","geneId","diseaseConfig","DiseaseController","Diseases","validateDisease","doid","LoginFormController","absUrl","cancelLogin","$http","$q","RetryQueue","dialogs","$log","redirect","reload","openLoginDialog","loginDialog","Error","create","backdrop","result","onLoginDialogClose","closeLoginDialog","success","info","close","retryAll","cancelAll","onItemAddedCallbacks","push","hasMore","service","showLogin","getLoginReason","retryReason","login","request","get","currentUser","isAuthenticated","logout","redirectTo","warn","JSON","stringify","Object","keys","reloadCurrentUser","isEditor","role","isCurator","factory","retryQueue","retryItem","forEach","cb","e","error","pushRetryFn","reason","retryFn","arguments","undefined","deferred","defer","retry","resolve","reject","cancel","promise","shift","Interceptor","$injector","responseError","provider","requireAdminUser","Authorization","requireAuthenticatedUser","$get","GenesResource","$resource","$cacheFactory","cache","cacheInterceptor","remove","$promise","query","method","getName","params","detailed","update","interceptor","delete","apply","search","beginsWith","getMyGeneInfo","transformResponse","parse","srcMap","kegg","reactome","pharmgkb","humancyc","smpdb","pid","wikipathways","netpath","biocarta","inoh","signalink","ehmn","pathways","pathway","pathwaysFinal","src","p","alias","interpro","queryVariants","queryVariantGroups","queryComments","getComment","commentId","submitComment","updateComment","deleteComment","GenesService","initBase","all","initComments","records","collection","item","reqObj","myGeneInfo","variants","variantGroups","comments","GeneRevisionsResource","cacheResponseInterceptor","revisionId","submitRevision","getPendingFields","acceptRevision","force","rejectRevision","GeneRevisionsService","initRevisions","toJSON","pendingFields","comment","parent","GeneHistoryResource","last","queryFresh","lastFresh","GeneHistoryService","VariantGroupsResource","variantGroupId","add","VariantGroupsService","VariantGroupRevisionsResource","VariantGroupRevisionsService","VariantGroups","each","gene_ids","VariantGroupHistoryResource","variantId","VariantGroupHistoryService","VariantsResource","queryEvidence","queryVariantTypes","count","page","VariantsService","evidence","VariantRevisionsResource","VariantRevisionsService","Variants","gene_id","VariantHistoryResource","VariantHistoryService","EvidenceResource","evidenceId","accept","EvidenceService","EvidenceRevisionsResource","getFresh","queryCommentsFresh","getCommentFresh","EvidenceRevisionsService","Evidence","EvidenceHistoryResource","EvidenceHistoryService","serverUrl","mainMenuItems","label","footerMenuItems","evidenceAttributeDescriptions","variant_origin","Somatic Mutation","Germline Mutation","Germline Polymorphism","Unknown","N/A","evidence_type","Predictive","Diagnostic","Prognostic","evidence_level","A","B","C","D","E","evidence_direction","Supports","Does Not Support","clinical_significance","Sensitivity","Resistance or Non-Response","Better Outcome","Poor Outcome","Positive","Negative","Adverse Response","drug_interaction_type","Combination","Sequential","Substitutes",1,2,3,4,5,"DatatablesResource","mode","events","key","DatatablesService","TypeAheadResultsService","TypeAheadResults","limit","GlossaryService","Glossary","MyGeneInfoResource","MyGeneInfoService","entrez_id","TitleService","Users","$parse","toParams","genePromise","variantPromise","variantGroupsPromise","evidencePromise","usersPromise","title","titleScope","variantGroup","has","userId","resolutions","$broadcast","newTitle","ng","propGetterFactory","prop","obj","lodashModule","utilsModule","filtersModule","fnName","wrap","fn","args","toArray","isString","injector","invoke","select","exp","diff","bind","difference","methods","methodName","register","adapList","filterNames","filterFactory","filterName","ReleasesResource","ReleasesService","PublicationsResource","PublicationsService","DiseasesResource","DiseasesService","PubchemTypeaheadResource","dict","PubchemTypeaheadService","q","autocp_array","DrugSuggestionsResource","DrugSuggestionsService","str","StatsResource","site","StatsService","EventsResource","EventsService","UsersResource","queryEvents","UsersService","SearchResource","SearchService","token","post","reset","results","CommunityResource","leaderboards","CommunityService","getLeaderboards","CommentPreviewResource","preview","CommentPreviewService","getPreview","markdown","CurrentUserResource","getStats","ur1l","getEvents","getFeed","markAllAsRead","markAsRead","CurrentUserService","stats","feed","t","Date","toISOString","upto","updated","updatedIds","notification","includes","seen","notification_ids","mentions","CommentSuggestionsResource","CommentSuggestionsService","username","userSuggestions","entitySuggestions","HomeCtrl","$interval","Stats","Events","vm","isDefined","helpViewConfig","abstract","HelpViewController","$modal","tabs","main","heading","active","imgPopup","open","animation","size","AboutCtrl","experts","area_of_expertise","avatars","x14","x270","description","partners","ContactCtrl","loadedMsg","GlossaryCtrl","glossary","terms","ParticipateCtrl","ReleasesController","Releases","this","releases","release","fileNames","files","filename","fileUrls","origin","titleDirective","$timeout","directive","listener","subheader","SubheaderCtrl","addEvidenceUrlBase","addEvidenceUrl","$watchCollection","stateParams","stateTitle","quickSearch","quickSearchCtrl","topResult","getVariants","val","labelLimit","entrez_gene","aliasLabel","gene_aliases","drugLabel","drug_names","diseaseLabel","disease_names","trunc","entrez_name","variant_id","onSelect","$item","go","asyncSelected","onGo","mainMenu","mainMenuController","menuItems","footerMenu","FooterMenuController","headerSearch","HeaderSearchController","civicLogo","civicLogoController","pageTitle","cancelButton","cancelButtonController","$previousState","loginToolbar","adminUrl","$watch","status","isopen","toggleDropdown","$event","preventDefault","stopPropagation","currentUrl","loginButton","totalNotifications","reduce","unread_notifications","acc","hasNotifications","userImageDirective","height","width","UserImageController","ctrl","hasAvatar","statsBlock","iconUrl","cols","StatsBlockController","icon","eventItem","theme","eventItemController","state_params","entityNames","entityName","compact","eventClick","subjectStates","genes","variantgroups","evidenceitems","subject_type","suggested_change","suggestedchanges","stateExtension","commented","submitted","accepted","rejected","change suggested","change accepted","change rejected","entityId","event_type","mentionItem","mention","mentionItemController","userBlockDirective","userCardDirective","bindToController","UserCardController","last_event","userClick","ActivityView","ActivityController","activityGrid","ActivityGridController","uiGridConstants","updateData","fetchData","sorting","filters","gridOptions","totalItems","total","field","sort","direction","maxRows","Number","isFiltered","totalPages","ceil","enablePaginationControls","useExternalFiltering","useExternalSorting","useExternalPaging","paginationPageSizes","paginationPageSize","minRowsToShow","enableHorizontalScrollbar","scrollbars","NEVER","enableVerticalScrollbar","enableFiltering","enableColumnMenus","enableSorting","enableRowSelection","enableRowHeaderSelection","multiSelect","modifierKeysToMultiSelect","noUnselect","columnDefs","displayName","allowCellFocus","cellTemplate","condition","CONTAINS","DESC","onRegisterApi","gridApi","pageChanged","core","on","filterChanged","filteredCols","grid","columns","col","sortChanged","sortColumns","selection","rowSelectionChanged","row","SearchView","reloadOnSearch","SearchViewController","current","SearchController","fields","evidence_items","rowFields","required","onChange","parameters","conditionFields","pubmed_id","className","pullAt","hideExpression","disease_name","disease_doid","drug_name","drug_id","suggested_changes_count","gene_name","variant_name","submitter","submitter_id","aliases","variant_types","reference_build","ensembl_version","reference_bases","variant_bases","chromosome","start","stop","representative_transcript","chromosome2","start2","stop2","representative_transcript2","contains_variant","variant_count","queryBuilder","QueryBuilderController","$stateParams","Search","onSubmit","debug","save","searchResults","showGrid","transitionTo","notify","init","operator","queries","buttonLabel","operatorField","queryBuilderConfig","unique","getter","setter","assign","copyFields","addRandomIds","addNew","repeatsection","newsection","fieldGroup","getRandomInt","min","max","random","formOptions","formState","BrowseViewConfig","BrowseController","browseGrid","BrowseGridController","Datatables","modeColumnDefs","pageCount","rowTemplate","#","EventsViewConfig","onExit","$deepStateRedirect","EntityViewController","entityViewModel","viewModel","entityViewRevisions","viewRevisions","entityViewOptions","viewOptions","transclude","entityTabsDirective","showCorner","justified","vertical","require","entityTabsLink","element","attributes","entityView","ready","scroll","word","actions","lifecycle_actions","hasPendingFields","anchorId","kebabCase","viewBackground","styles","backgroundColor","viewForeground","foregroundColor","tabData","unbindStateChangeSuccess","update_tabs","EntityTabsController","$document","loc","elem","document","getElementById","scrollToElementAnimated","unwatch","currentStateEqualTo","tab","isEqual","is","route","contains","dropRightWhile","r","isAncestorOfCurrentRoute","omit","editableField","EditableFieldController","baseState","gstateParams","mouseOver","hover","mouseLeave","click","EntityTalkViewController","revisionsModel","entityTalkTabsDirective","entityTalkTabsLink","entityTalkView","tabRowBackground","EntityTalkTabsController","entityLogEntryDirective","entryData","EntityLogEntryController","entry","EntityTalkRevisionsViewController","entityTalkRevisionsViewModel","entityTalkRevisionsViewOptions","revisionsGrid","changes","RevisionsGridController","rowsToShow","revisionsGridOptions","ALWAYS","cellFilter","rowEntity","find","rowsRendered","selectRow","scrollTo","merge","newState","entityUsersPopoverDirective","EntityUsersPopoverController","usersPopover","actionBlockDirective","ActionBlockController","evidenceGrid","rows","showGeneCol","showVariantCol","context","rounded","EvidenceGridController","uiGridExporterConstants","filterByStatus","lastSelectedRow","statusFilters","pull","queueGridRefresh","showGridKey","keyPopover","exportPopover","include","tooltipPopupDelay","evidenceLevels","evidenceGridOptions","exporterOlderExcelCompatibility","exporterHeaderFilter","headerTooltip","exporterPdfDefaultStyle","fontSize","exporterPdfPageSize","exporterPdfOrientation","exporterPdfTableStyle","margin","exporterPdfTableHeaderStyle","bold","italics","color","exporterPdfMaxGridWidth","exporterPdfTableLayout","exporterMenuCsv","exporterMenuPdf","enableGridMenu","gridMenuShowHideColumns","gridMenuCustomItems","action","visible","noTerm","searchTerm","cellValue","headerCellTemplate","minWidth","SELECT","disableCancelFilterButton","selectOptions","ASC","GREATER_THAN_OR_EQUAL","prepareDrugArray","drugs","druglist","chain","pluck","getFilename","dateTime","suppressGo","exportData","exporterCsvFilename","ALL","VISIBLE","exporter","csvExport","pdfExport","every","queueRefresh","entityCommentDirective","commentData","entityModel","EntityCommentController","security","isAdmin","entityCommenntFormDirective","EntityCommentFormController","CommentPreview","previewLoading","previewText","commentMessage","showMarkdownHelp","showMacroHelp","switchMode","newComment","text","html","newCommentFields","ngModelElAttrs","msd-elastic","mentio","mentio-id","minimum_length","validators","expression","viewValue","modelValue","message","submit","resetModel","mentioHighlightEntity","escapeRegexp","queryToEscape","matchItem","hightlightClass","drop","replaceText","RegExp","GenesConfig","initGene","deepStateRedirect","refreshGene","GenesViewOptions","baseParams","baseUrl","href","summary","variantMenu","edit","summaryBackgroundColor","GenesController","GeneRevisions","GenesViewModel","GenesViewRevisions","GeneSummaryController","showMenu","GeneDescriptionController","isEdit","geneData","MyGeneInfoController","ngDialog","popupOptions","openDialog","dialog","closeDialog","closePromise","MyGeneInfoDialogController","$parent","proteinDomains","geneInfo","VariantMenuController","addVarGroupUrlBase","addVarGroupUrl","vg","singleGene","geneEditConfig","initGeneEdit","GeneHistory","GeneEditViewOptions","editBackgroundColor","talkBackgroundColor","GeneEditController","GeneEditViewModel","GeneRevisionsModel","geneEditBasicDirective","GeneEditBasicController","geneModel","pendingFieldsList","charAt","geneRevisions","geneHistory","geneEdit","source_ids","sources","formErrors","formMessages","errorMessages","serverMsg","newRevisionId","showForm","showSuccessMessage","showInstructions","geneFields","helpText","focus","minLength","modelOptions","updateOn","allowInvalid","debounce","default","blur","validPubmedId","$viewValue","$modelValue","loading","submitSuccess","applySuccess","revisionsClick","geneTalkConfig","initGeneTalk","GenesTalkViewOptions","GeneTalkController","GenesTalkViewModel","geneTalkLogDirective","GeneTalkLogController","revisions","history","collections","change","logItems","timestamp","updated_at","created_at","sortBy","reverse","geneTalkCommentsDirective","GeneTalkCommentsController","geneTalkModel","geneTalkRevisionsConfig","initGeneTalkRevisions","initRevisionList","initRevision","GeneTalkRevisionsViewOptions","GeneTalkRevisionsController","GeneTalkRevisionsRevisionsViewOptions","geneTalkRevisionsDirective","geneTalkRevisionSummary","GeneTalkRevisionSummaryController","acceptSuccess","rejectSuccess","VariantsConfig","initVariant","refreshVariant","VariantsViewOptions","VariantsController","VariantRevisions","VariantsViewModel","VariantsViewRevisions","VariantSummaryController","editClick","showEvidenceGrid","variantEditConfig","initVariantEdit","VariantHistory","VariantEditViewOptions","VariantEditController","VariantEditViewModel","VariantRevisionsModel","variantEditBasicDirective","VariantEditBasicController","variantModel","variantRevisions","variantHistory","variantEdit","myVariantInfo","variantFields","formatter","typeahead","typeaheadSearch","coordinates","ngOptions","variantTalkConfig","initVariantTalk","VariantsTalkViewOptions","VariantTalkController","VariantsTalkViewModel","variantTalkLogDirective","VariantTalkLogController","variantTalkCommentsDirective","VariantTalkCommentsController","variantTalkModel","variantTalkRevisionsConfig","initVariantTalkRevisions","VariantTalkRevisionsViewOptions","VariantTalkRevisionsController","VariantTalkRevisionsRevisionsViewOptions","variantTalkRevisionsDirective","variantTalkRevisionSummary","VariantTalkRevisionSummaryController","EvidenceConfig","initEvidence","EvidenceViewOptions","EvidenceController","EvidenceRevisions","EvidenceViewModel","EvidenceViewRevisions","EvidenceSummaryController","tipText","evidence_levels","evidence_level_string","drugsStr","acceptItem","rejectItem","evidenceEditConfig","initEvidenceEdit","EvidenceHistory","EvidenceEditViewOptions","EvidenceEditController","EvidenceEditViewModel","EvidenceRevisionsModel","evidenceEditBasicDirective","EvidenceEditBasicController","DrugSuggestions","evidenceRevisions","evidenceHistory","evidenceEdit","evidenceFields","valueProp","labelProp","attributeDefinition","attributeDefinitions","disease","edField","updateDefinition","expressionProperties","templateOptions.disabled","clinicalSignificanceOptions","templateOptions.options","option","inputFormatter","editable","pushNew","drugname","without","evidenceTalkConfig","initEvidenceTalk","EvidenceTalkViewOptions","EvidenceTalkController","EvidenceTalkViewModel","evidenceTalkLogDirective","EvidenceTalkLogController","evidenceTalkCommentsDirective","EvidenceTalkCommentsController","evidenceTalkModel","evidenceTalkRevisionsConfig","initEvidenceTalkRevisions","EvidenceTalkRevisionsViewOptions","EvidenceTalkRevisionsController","EvidenceTalkRevisionsDirective","evidenceTalkRevisionSummary","EvidenceTalkRevisionSummaryController","VariantGroupsConfig","initVariantGroups","refreshVariantGroups","VariantGroupsViewOptions","myVariantGroupsInfo","VariantGroupsController","VariantGroupRevisions","VariantGroupsViewModel","VariantGroupsViewRevisions","VariantGroupSummaryController","showVariantGrid","variantGrid","VariantGridController","variantGridOptions","enablePaging","prepVariantGroups","variant_groups","variant_group_list","variantGroupEditConfig","initVariantGroupEdit","VariantGroupHistory","VariantGroupEditViewOptions","VariantGroupEditController","VariantGroupEditViewModel","VariantGroupRevisionsModel","variantGroupEditBasicDirective","VariantGroupEditBasicController","variantGroupModel","variantGroupRevisions","variantGroupHistory","variantGroupEdit","variantsEdit","variantGroupFields","initVariantGroupTalk","VariantGroupsTalkViewOptions","VariantGroupsTalkController","VariantGroupsTalkViewModel","variantGroupTalkLogDirective","VariantGroupTalkLogController","VariantGroupTalkCommentsDirective","VariantGroupTalkCommentsController","variantGroupTalkModel","variantGroupTalkRevisionsConfig","initVariantGroupTalkRevisions","VariantGroupTalkRevisionsViewOptions","variantGroupTalkRevisionsDirective","VariantGroupTalkRevisionsController","variantGroupTalkRevisionSummary","VariantGroupTalkRevisionSummaryController","CommunityViewConfig","CommunityViewController","CommunityMainConfig","$resourceProvider","defaults","stripTrailingSlashes","Community","CommunityMainController","sort_by","sort_order","fetchUsers","formFields","colSpan","watcher","newValue","AddViewConfig","AddViewController","AddEvidenceConfig","AddEvidenceViewOptions","AddEvidenceController","AddEvidenceViewModel","addEvidenceBasicDirective","AddEvidenceBasicController","evidenceModel","evidenceOptions","duplicates","newEvidence","noDoid","pick","filter[variant]","searchForDups","values","pubmedName","pubmedField","$watchGroup","templateOptions.required","linkParams","linkNames","AddVariantGroupConfig","AddVariantGroupController","newVariantGroup","newGroupId","newGeneId","UsersViewConfig","UsersViewController","ProfileController","ProfileEditController","userEdit","secondsReturn","submitFail","userEditFields","saveProfile","int","UserSummaryController","AccountView","CurrentUser","AccountViewController","AccountNotificationsController","category","maxOptions","notifications","totalUnseenNotifications","fetch","categories","AccountProfileController","notificationController","markAsSeen","$templateCache","put"],"mappings":"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","file":"scripts/app-3b92ff0a.js","sourcesContent":["(function() {\n  'use strict';\n  angular.module('civicClient', [\n    // vendor modules\n    'ui.router',\n    'ct.ui.router.extras',\n    'angular-loading-bar',\n    'mentio',\n    'ngTouch',\n    'ngDialog',\n    'ngMessages',\n    'duScroll',\n    'ui.bootstrap',\n    'ui.grid',\n    'ui.grid.autoResize',\n    'ui.grid.pagination',\n    'ui.grid.cellNav',\n    'ui.grid.exporter',\n    'formly',\n    'dialogs.main',\n    'yaru22.angular-timeago',\n    'angulartics',\n    'angulartics.google.analytics',\n    'monospaced.elastic',\n\n    // config\n    'civic.states',\n\n    // app services\n    'civic.config',\n    'civic.services',\n    'civic.security',\n    'civic.login',\n    'civic.common',\n    'angular-lodash',\n\n    // app root views\n    'civic.pages',\n    'civic.activity',\n    'civic.search',\n    'civic.account',\n    'civic.browse',\n    'civic.events',\n    'civic.users',\n    'civic.add',\n    'civic.community'\n  ])\n    .run(appRun)\n    .config(appConfig);\n\n// @ngInject\n  function appConfig($uiViewScrollProvider, $anchorScrollProvider, formlyConfigProvider, $compileProvider) {\n    window.apiCheck.disabled = false; // set to true in production\n    formlyConfigProvider.extras.removeChromeAutoComplete = true;\n    $uiViewScrollProvider.useAnchorScroll();\n    $anchorScrollProvider.disableAutoScrolling();\n    $compileProvider.debugInfoEnabled(false);\n  }\n\n// @ngInject\n  function appRun(Security, $rootScope, $state, $analytics, $window, $location, _) {\n    $window.loading_screen.finish();\n    $rootScope.view = {};\n\n    // ensure $state is globally addressable/injectable\n    $rootScope.$state = $state;\n\n    $rootScope.$on('$stateChangeSuccess', function (event, toState) {\n      $rootScope.view.navMode = toState.data.navMode;\n      if(_.isEmpty($location.hash())) { $rootScope.prevScroll = null; }\n      $analytics.eventTrack(toState.name);\n      $analytics.pageTrack(window.location.hash);\n    });\n\n    Security.requestCurrentUser();\n\n    /*  ui-router debug logging - uncomment these if you run into links/routes silently failing. */\n    function message(to, toP, from, fromP) {\n      return from.name + angular.toJson(fromP) + ' -> ' + to.name + angular.toJson(toP);\n    }\n\n    $rootScope.$on('$stateChangeStart', function (evt, to, toP, from, fromP) {\n      console.log('Start:   ' + message(to, toP, from, fromP));\n    });\n    $rootScope.$on('$stateChangeSuccess', function (evt, to, toP, from, fromP) {\n      console.log('Success: ' + message(to, toP, from, fromP));\n    });\n    $rootScope.$on('$stateChangeError', function (evt, to, toP, from, fromP, err) {\n      console.error('Error:   ' + message(to, toP, from, fromP), err);\n    });\n\n  }\n\n// define root modules & dependencies\n  angular.module('civic.security', [\n    'civic.security.authorization',\n    'civic.security.service',\n    'civic.security.interceptor',\n    'civic.security.login'\n  ]);\n  angular.module('civic.config', ['formly', 'formlyBootstrap']);\n  angular.module('civic.states', ['ui.router']);\n  angular.module('civic.services', ['ui.router', 'ngResource', 'angular-lodash/filters']);\n  angular.module('civic.pages', ['civic.security.authorization', 'ui.router']);\n  angular.module('civic.account', ['civic.security.authorization', 'ui.router']);\n  angular.module('civic.common', ['ui.router']);\n  angular.module('civic.login', ['ui.router']);\n  angular.module('civic.browse', ['ui.grid.selection', 'ui.grid.pagination', 'ui.router']);\n  angular.module('civic.search', ['ui.router']);\n  angular.module('civic.activity', ['ui.router']);\n  angular.module('civic.community', ['ui.router']);\n\n  angular.module('civic.users', [\n    'ui.router',\n    'civic.users.profile',\n    'civic.users.common'\n  ]);\n\n  angular.module('civic.add', [\n    'ui.router',\n    'formly',\n    'formlyBootstrap',\n    'civic.add.evidence'\n  ]);\n\n  angular.module('civic.events', [\n    'ui.router',\n    'ui.grid',\n    'ngDialog',\n    'formly',\n    'formlyBootstrap',\n    'angular-lodash/filters',\n    'civic.events.common',\n    'civic.events.genes',\n    'civic.events.variants',\n    'civic.events.variantGroups',\n    'civic.events.evidence'\n  ]);\n\n})();\n\n(function(){\n  'use strict';\n  angular.module('civic.states')\n    .config(routesConfig);\n\n  // @ngInject\n  function routesConfig($stateProvider, $urlRouterProvider) {\n\n    // 404\n    $urlRouterProvider.otherwise('home');\n\n    // abstract state redirects\n    $urlRouterProvider.when('/events/genes/:geneId', '/events/genes/:geneId/summary');\n    $urlRouterProvider.when('/events/genes', '/browse');\n    $urlRouterProvider.when('/events', '/browse');\n\n    // NOTE: data.titleExp in state configs are ng expressions parsed by the TitleService\n\n    // static frontend pages\n    $stateProvider\n      .state('home', {\n        url: '/home',\n        controller: 'HomeCtrl',\n        templateUrl: 'app/pages/home.tpl.html',\n        data: {\n          titleExp: '\"Home\"',\n          navMode: 'home'\n        }\n      })\n      .state('about', {\n        url: '/about',\n        controller: 'AboutCtrl',\n        templateUrl: 'app/pages/about.tpl.html',\n        data: {\n          titleExp: '\"About\"',\n          navMode: 'sub'\n        }\n      })\n      .state('participate', {\n        url: '/participate',\n        controller: 'ParticipateCtrl',\n        templateUrl: 'app/pages/participate.tpl.html',\n        data: {\n          titleExp: '\"Participate\"',\n          navMode: 'sub'\n        }\n      })\n      .state('faq', {\n        url: '/faq',\n        templateUrl: 'app/pages/faq.tpl.html',\n        data: {\n          titleExp: '\"FAQ\"',\n          navMode: 'sub'\n        }\n      })\n      .state('glossary', {\n        url: '/glossary',\n        templateUrl: 'app/pages/glossary.tpl.html',\n        controller: 'GlossaryCtrl',\n        data: {\n          titleExp: '\"Glossary\"',\n          navMode: 'sub'\n        }\n      })\n      .state('releases', {\n        url: '/releases',\n        templateUrl: 'app/pages/releases.tpl.html',\n        controller: 'ReleasesController',\n        controllerAs: 'vm',\n        data: {\n          titleExp: '\"Data Releases\"',\n          navMode: 'sub'\n        }\n      })\n      .state('api', {\n        url: '/api-documentation',\n        templateUrl: 'app/pages/apiDocumentation.tpl.html',\n        data: {\n          titleExp: '\"API Documentation\"',\n          navMode: 'sub'\n        }\n      })\n      .state('graphics', {\n        url: '/graphics',\n        templateUrl: 'app/pages/graphics.tpl.html',\n        data: {\n          titleExp: '\"Presentation Graphics\"',\n          navMode: 'sub'\n        }\n      })\n      .state('contact', {\n        url: '/contact',\n        controller: 'ContactCtrl',\n        templateUrl: 'app/pages/contact.tpl.html',\n        data: {\n          titleExp: '\"Contact\"',\n          navMode: 'sub'\n        }\n      });\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.common')\n    .filter('labelify', labelifyFilter)\n    .filter('arrayToList', arrayToListFilter)\n    .filter('encodeUri', encodeUri)\n    .filter('capitalize', capitalizeFilter)\n    .filter('decodeUri', decodeUri)\n    .filter('ifEmpty', ifEmpty)\n    .filter('unsafe', unsafe)\n    .filter('ordinal', ordinal)\n    .filter('keyToLabel', keyToLabel)\n    .filter('words', words);\n\n  // @ngInject\n  function labelifyFilter() {\n    return function (input) {\n      input = input.replace(/_/g, ' ');\n      return input.replace(/(?:^|\\s)\\S/g, function(a) { return a.toUpperCase(); });\n    };\n  }\n\n  // @ngInject\n  function words() {\n    return function (input, words) {\n      if (isNaN(words)) {\n        return input;\n      }\n      if (words <= 0) {\n        return '';\n      }\n      if (input) {\n        var inputWords = input.split(/\\s+/);\n        if (inputWords.length > words) {\n          input = inputWords.slice(0, words).join(' ') + '\\u2026';\n        }\n      }\n      return input;\n    };\n  }\n\n  // @ngInject\n  function arrayToListFilter(_) {\n    return function(input, limitTo, terminator, showTotal) {\n      limitTo = parseInt(limitTo, 10);\n      terminator = terminator ? terminator : '';\n      if (_.isArray(input) && parseInt(limitTo, 10)) {\n        var output = input.slice(0,limitTo).join(', ').concat(terminator);\n        if(showTotal && input.length > limitTo) {\n          output = output + '<span class=\"more\"> (' + String(input.length - limitTo) + ' more)</span>';\n        }\n        return output;\n      } else if (_.isArray(input)) {\n        return input.join(', ');\n      } else {\n        return input;\n      }\n    };\n  }\n\n  // @ngInject\n  function encodeUri($window) {\n    return function (input) {\n      return $window.encodeURIComponent(input);\n    };\n  }\n\n  // @ngInject\n  function decodeUri($window) {\n    return function (input) {\n      return $window.decodeURIComponent(input);\n    };\n  }\n\n  // @ngInject\n  function keyToLabel(_) {\n    return function (input) {\n      if (!_.isNull(input) && !_.isUndefined(input)) {\n        input = input.replace(/_/g, ' ');\n        return input.substring(0, 1).toUpperCase() + input.substring(1);\n      } else {\n        return;\n      }\n    };\n  }\n\n  // @ngInject\n  function capitalizeFilter(_) {\n    return function (input) {\n      if (!_.isNull(input) && !_.isUndefined(input)) {\n        input = input.toLowerCase();\n        return input.substring(0, 1).toUpperCase() + input.substring(1);\n      } else {\n        return;\n      }\n    };\n  }\n\n  // @ngInject\n  function ifEmpty() {\n    return function(input, defaultValue) {\n      if (angular.isUndefined(input) || input === null || input === '') {\n        return defaultValue;\n      }\n\n      return input;\n    };\n  }\n\n  // @ngInject\n  function unsafe($sce) { return $sce.trustAsHtml; }\n\n  // @ngInject\n  function ordinal () {\n    return function(input) {\n      var num = parseInt(input, 10);\n      return isNaN(num) ? input : num + suffix(num);\n    };\n\n    function suffix (n) {\n      return Math.floor(n / 10) === 1\n        ? 'th'\n        : (n % 10 === 1\n        ? 'st'\n        : (n % 10 === 2\n        ? 'nd'\n        : (n % 10 === 3\n        ? 'rd'\n        : 'th')));\n    }\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.config')\n    .constant('formConfig', {\n      options: {\n        labelColWidth: 2,\n        inputColWidth: 5,\n        helpColWidth: 5\n      },\n      validationMessages: {\n        '400': 'Bad Request',\n        '401': 'Unauthorized',\n        '403': 'Forbidden',\n        '404': 'Not Found',\n        '405': 'Method Not Allowed',\n        '406': 'Not Acceptable',\n        '409': 'Conflict',\n        '500': 'Server Error',\n        '501': 'Not Implemented'\n      },\n      errorPrompts: {\n        '400': 'The CIViC Client made a request the server didn\\'t like, check the console output for more information.',\n        '401': 'You must be logged in to perform that action.',\n        '403': 'You do not have sufficient permissions to perform that action.',\n        '404': 'The CIViC client made a request to a route that could not be found, check the console output for more information',\n        '405': 'The CIViC client made a request that is not supported, check the console output for more information',\n        '406': 'TOTALLY UNACCEPTABLE, I CAN\\'T EVEN',\n        '409': 'The attempted update conflicts with an existing record.',\n        '500': 'The CIViC server experienced an unrecoverable error, please check the console output for more information.',\n        '501': 'The CIViC client attempted to utilize an unimplemented route.'\n      }\n    })\n    .run(formlyTemplatesRun);\n\n  // @ngInject\n  function formlyTemplatesRun(formlyValidationMessages) {\n    // default messages\n    formlyValidationMessages.addTemplateOptionValueMessage('minlength', 'minlength', '', 'is the minimum length', 'Too short.');\n    formlyValidationMessages.addTemplateOptionValueMessage('maxlength', 'maxlength', '', 'is the maximum length', 'Too long.');\n    formlyValidationMessages.addStringMessage('required', 'This field is required.');\n    formlyValidationMessages.addStringMessage('notfound', 'Valid entity could not be found.');\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.config')\n    .config(formlyWrappersConfig);\n\n  // @ngInject\n  function formlyWrappersConfig(formlyConfigProvider, formConfig) {\n    var inputColWidth = formConfig.options.inputColWidth;\n    var labelColWidth = formConfig.options.labelColWidth;\n    var helpColWidth = formConfig.options.helpColWidth;\n\n    /*\n     * ERROR MSG WRAPPERS\n     */\n\n    formlyConfigProvider.setWrapper({\n      name: 'validationMessages',\n      template: [\n        '<formly-transclude></formly-transclude>',\n        '<div class=\"validation\"',\n        'ng-if=\"options.validation.errorExistsAndShouldBeVisible\"',\n        'ng-messages=\"options.formControl.$error\">',\n        '<div class=\"field-message-error\" ng-message=\"{{::name}}\" ng-repeat=\"(name, message) in ::options.validation.messages\">',\n        '{{message(options.formControl.$viewValue, options.formControl.$modelValue, this)}}',\n        '</div>',\n        '</div>'\n      ].join(' ')\n    });\n\n    formlyConfigProvider.setWrapper({\n      name: 'mentioCommentMenus',\n      templateUrl: 'components/forms/fieldWrappers/mentioCommentMenus.tpl.html'\n    });\n\n    /*\n     * FIELD WRAPPERS\n     */\n    // TODO: get all template strings into their own files while preserving the ability to define col widths etc.\n    formlyConfigProvider.setWrapper({\n      // horizontal bootstrap row with label\n      name: 'horizontalBootstrapLabel',\n      template: [\n        '<label for=\"{{::id}}\" class=\"col-sm-'+ labelColWidth +' control-label\">',\n        '{{to.label}}',\n        '</label>',\n        '<div class=\"col-sm-' + inputColWidth + '\">',\n        '<formly-transclude></formly-transclude>',\n        '</div>'\n      ].join(' ')\n    });\n\n    // horizontal bootstrap field with label and help column\n    formlyConfigProvider.setWrapper({\n      name: 'horizontalBootstrapHelp',\n      template: [\n        '<label for=\"{{::id}}\" class=\"col-sm-'+ labelColWidth +' control-label\">',\n        '{{to.label}}',\n        '</label>',\n        '<div class=\"col-sm-'+ inputColWidth +'\">',\n        '<formly-transclude></formly-transclude>',\n        //'<p class=\"small\">errors:</p>',\n        //'<div ng-messages-include=\"commentValidation.tpl.html\"></div>',\n        '</div>',\n        '<div class=\"col-sm-'+ helpColWidth +' control-help\">',\n        '<span class=\"small\" ng-bind-html=\"to.helpText\"></span>',\n        '</div>'\n      ].join(' ')\n    });\n\n    // horizontal bootstrap checkbox\n    formlyConfigProvider.setWrapper({\n      name: 'horizontalBootstrapCheckbox',\n      template: [\n        '<div class=\"col-sm-offset-'+ labelColWidth +' col-sm-8\">',\n        '<formly-transclude></formly-transclude>',\n        '</div>'\n      ].join(' ')\n    });\n\n    // horizontal bootstrap with current user (intended for comment forms)\n    formlyConfigProvider.setWrapper({\n      name: 'horizontalBootstrapComment',\n      template: [\n        //'<label for=\"{{::id}}\" class=\"col-sm-1 control-label\">',\n        //'<user-image user=\"to.currentUser\" height=\"32\" width=\"32\"></user-image>',\n        //'</label>',\n        '<div class=\"col-sm-12\">',\n        '<formly-transclude></formly-transclude>',\n        '</div>'\n      ].join(' ')\n    });\n\n    // displays loading animation inside input\n    formlyConfigProvider.setWrapper({\n      name: 'loader',\n      template: [\n        '<formly-transclude></formly-transclude>',\n        '<span class=\"glyphicon glyphicon-refresh loader\" ng-show=\"to.loading\"></span>'\n      ].join(' ')\n    });\n\n    formlyConfigProvider.setWrapper({\n      name: 'pubdisplay',\n      template: [\n        '<formly-transclude></formly-transclude>',\n        '<span class=\"small\">Citation: {{ to.data.description }}</span>'\n      ].join(' ')\n    });\n\n    formlyConfigProvider.setWrapper({\n      name: 'genedisplay',\n      template: [\n        '<formly-transclude></formly-transclude>',\n        '<span class=\"small\">Gene: {{ to.data.name }}</span>'\n      ].join(' ')\n    });\n\n    formlyConfigProvider.setWrapper({\n      name: 'entrezIdDisplay',\n      template: [\n        '<formly-transclude></formly-transclude>',\n        '<span class=\"small\">Entrez ID: {{ to.data.entrez_id }}</span>'\n      ].join(' ')\n    });\n\n    formlyConfigProvider.setWrapper({\n      name: 'diseasedisplay',\n      template: [\n        '<formly-transclude></formly-transclude>',\n        '<span class=\"small\">Disease Ontology ID: {{ to.data.doid}}</span>'\n      ].join(' ')\n    });\n\n    formlyConfigProvider.setWrapper({\n      name: 'attributeDefinition',\n      template: [\n        '<formly-transclude></formly-transclude>',\n        '<span class=\"small\" ng-bind-html=\"to.data.attributeDefinition\"></span>'\n      ].join(' ')\n    });\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.config')\n    .config(commentConfig);\n\n  // @ngInject\n  function commentConfig(formlyConfigProvider) {\n    formlyConfigProvider.setType({\n      name: 'comment',\n      extends: 'textarea',\n      wrapper: ['validationMessages', 'horizontalBootstrapComment', 'bootstrapHasError', 'mentioCommentMenus'],\n      data: {\n        users: [],\n        entities: []\n      },\n      controller: /* @ngInject */ function($scope, $filter, CommentSuggestions) {\n        $scope.searchUsers = function(term) {\n          CommentSuggestions.getUserSuggestions(term).then(function(response) {\n            $scope.users = response;\n          });\n        };\n\n        $scope.getUser = function(user) {\n          return '@' + user.display_name;\n        };\n\n        $scope.searchEntities = function(term) {\n          CommentSuggestions.getEntitySuggestions(term).then(function(response) {\n            $scope.entities = _.map(response, function(entity) {\n              entity.display_type = $filter('keyToLabel')(entity.type).toUpperCase();\n              return entity;\n            });\n          });\n        };\n\n        $scope.getEntity= function(entity) {\n          var types = {\n            gene: 'G',\n            variant: 'V',\n            variant_group: 'VG',\n            evidence_item: 'E',\n            revision: 'R'\n          };\n          return '#' + types[entity.type] + entity.id;\n        };\n\n        $scope.typedTerm = '';\n      }\n    });\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.config')\n    .config(basicFieldTypesConfig);\n\n  // @ngInject\n  function basicFieldTypesConfig(formlyConfigProvider) {\n    /*\n     * BASIC FIELD TYPES\n     * Two versions of each basic field type, one with a help column and one without\n     */\n    // input\n    formlyConfigProvider.setType({\n      name: 'horizontalInput',\n      extends: 'input',\n      wrapper: ['horizontalBootstrapLabel', 'bootstrapHasError']\n    });\n\n    formlyConfigProvider.setType({\n      name: 'horizontalInputHelp',\n      extends: 'input',\n      wrapper: ['horizontalBootstrapHelp', 'bootstrapHasError']\n    });\n\n    // select\n    formlyConfigProvider.setType({\n      name: 'horizontalSelect',\n      extends: 'select',\n      wrapper: ['horizontalBootstrapLabel', 'bootstrapHasError']\n    });\n\n    formlyConfigProvider.setType({\n      name: 'horizontalSelectHelp',\n      extends: 'select',\n      wrapper: ['horizontalBootstrapHelp', 'bootstrapHasError']\n    });\n\n    // textarea\n    formlyConfigProvider.setType({\n      name: 'horizontalTextarea',\n      extends: 'textarea',\n      wrapper: ['validationMessages', 'horizontalBootstrapLabel', 'bootstrapHasError']\n    });\n\n    formlyConfigProvider.setType({\n      name: 'horizontalTextareaHelp',\n      extends: 'textarea',\n      wrapper: ['horizontalBootstrapHelp', 'bootstrapHasError']\n    });\n\n\n    // checkbox\n    formlyConfigProvider.setType({\n      name: 'horizontalCheckbox',\n      extends: 'checkbox',\n      wrapper: ['horizontalBootstrapCheckbox', 'bootstrapHasError']\n    });\n\n    formlyConfigProvider.setType({\n      name: 'horizontalCheckboxHelp',\n      extends: 'checkbox',\n      wrapper: ['horizontalBootstrapHelp', 'bootstrapHasError']\n    });\n\n    formlyConfigProvider.setType({\n      name: 'horizontalCommentHelp',\n      extends: 'comment',\n      wrapper: ['horizontalBootstrapHelp', 'bootstrapHasError']\n    });\n\n    /*\n    * EXTENDED FIELD TYPES\n    * (more complex behavior than the basics, but no controller, template, or additional logic)\n    */\n\n    formlyConfigProvider.setType({\n      name: 'input-loader',\n      extends: 'input',\n      wrapper: ['loader']\n    });\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.config')\n    .config(ratingConfig);\n\n  // @ngInject\n  function ratingConfig(formlyConfigProvider) {\n    formlyConfigProvider.setType({\n      name: 'rating',\n      templateUrl: 'components/forms/fieldTypes/rating.tpl.html',\n      controller: /* @ngInject */ function($scope) {\n        $scope.overStar = $scope.model.rating;\n        $scope.hoveringOver= function(value) {\n          $scope.overStar = value;\n        };\n\n        $scope.leave = function() {\n          $scope.model.rating === 0 ? $scope.overStar = 0 : $scope.overStar = $scope.model.rating;\n        };\n      }\n    });\n\n    formlyConfigProvider.setType({\n      name: 'horizontalRating',\n      extends: 'rating',\n      wrapper: ['horizontalBootstrapLabel', 'bootstrapHasError']\n    });\n\n    formlyConfigProvider.setType({\n      name: 'horizontalRatingHelp',\n      extends: 'rating',\n      wrapper: ['horizontalBootstrapHelp', 'bootstrapHasError']\n    });\n\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.config')\n    .config(typeaheadConfig);\n\n  // @ngInject\n  function typeaheadConfig(formlyConfigProvider) {\n    formlyConfigProvider.setType({\n      name: 'typeahead',\n      templateUrl: 'components/forms/fieldTypes/typeahead.tpl.html'\n    });\n\n    formlyConfigProvider.setType({\n      name: 'horizontalTypeaheadHelp',\n      extends: 'typeahead',\n      wrapper: ['horizontalBootstrapHelp', 'bootstrapHasError']\n    });\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.config')\n    .config(multiInputConfig);\n\n  // @ngInject\n  function multiInputConfig(formlyConfigProvider) {\n    formlyConfigProvider.setType({\n      name: 'multiInput',\n      templateUrl: 'components/forms/fieldTypes/multiInput.tpl.html',\n      defaultOptions: {\n        noFormControl: true,\n        wrapper: ['horizontalBootstrapHelp', 'bootstrapHasError'],\n        templateOptions: {\n          inputOptions: {\n            // wrapper: null\n          }\n        }\n      },\n      controller: /* @ngInject */ function($scope) {\n        $scope.copyItemOptions = copyItemOptions;\n        $scope.deleteItem = deleteItem;\n        $scope.addItem = addItem;\n\n        function deleteItem(model, index) {\n          model.splice(index,1);\n        }\n\n        function addItem(model, index) {\n          model.splice(index+1, 0, '');\n        }\n\n        function copyItemOptions() {\n          return angular.copy($scope.to.inputOptions);\n        }\n      }\n    });\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.config')\n    .config(publicationConfig)\n    .controller('PublicationController', PublicationController);\n\n  // @ngInject\n  function publicationConfig(formlyConfigProvider) {\n    formlyConfigProvider.setType({\n      name: 'publication',\n      extends: 'input',\n      wrapper: ['loader', 'pubdisplay', 'validationMessages', 'horizontalBootstrapHelp', 'bootstrapHasError']\n    });\n    formlyConfigProvider.setType({\n      name: 'publication-multi',\n      extends: 'input',\n      wrapper: ['loader','pubdisplay']\n    });\n  }\n\n  // @ngInject\n  function PublicationController($scope, Publications) {\n    console.log('PublicationController called.');\n    $scope.validatePublication = function(pubmedId) {\n      return Publications.verify(pubmedId);\n    };\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.config')\n    .config(geneConfig)\n    .controller('GeneController', GeneController);\n\n  // @ngInject\n  function geneConfig(formlyConfigProvider) {\n    formlyConfigProvider.setType({\n      name: 'gene',\n      extends: 'input',\n      wrapper: ['loader', 'genedisplay', 'validationMessages', 'horizontalBootstrapHelp', 'bootstrapHasError']\n    });\n    formlyConfigProvider.setType({\n      name: 'gene-multi',\n      extends: 'input',\n      wrapper: ['loader','genedisplay']\n    });\n  }\n\n  // @ngInject\n  function GeneController($scope, Genes) {\n    console.log('GeneController called.');\n    $scope.validateGene = function(geneId) {\n      return Genes.verify(geneId);\n    };\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.config')\n    .config(diseaseConfig)\n    .controller('DiseaseController', DiseaseController);\n\n  // @ngInject\n  function diseaseConfig(formlyConfigProvider) {\n    formlyConfigProvider.setType({\n      name: 'disease',\n      extends: 'input',\n      wrapper: ['loader', 'diseasedisplay', 'validationMessages', 'horizontalBootstrapHelp', 'bootstrapHasError']\n    });\n    formlyConfigProvider.setType({\n      name: 'disease-multi',\n      extends: 'input',\n      wrapper: ['loader','diseasedisplay']\n    });\n  }\n\n  // @ngInject\n  function DiseaseController($scope, Diseases) {\n    console.log('DiseaseController called.');\n    $scope.validateDisease = function(doid) {\n      return Diseases.verify(doid);\n    };\n  }\n\n})();\n\nangular.module('civic.security.login', ['civic.security.login.form', 'civic.security.login.toolbar']);\n(function() {\n  'use strict';\n  angular.module('civic.security.login.form', [])\n    .controller('LoginFormController', LoginFormController);\n\n  /**\n   * @name LoginFormController\n   * @desc provides the behaviour behind a reusable form to allow users to authenticate. This controller and\n   * its template (login/form.tpl.html) are used in a modal dialog box by the security service.\n   * @param $scope\n   * @param security\n   * @constructor\n   * @ngInject\n   */\n  function LoginFormController($scope, Security, $location) {\n    $scope.location = $location.absUrl();\n    var url = $location.url();\n    $scope.cancelLogin = function() {\n      Security.cancelLogin(url);\n    };\n  }\n})();\n\n// Based loosely around work by Witold Szczerba - https://github.com/witoldsz/angular-http-auth\n(function() {\n  'use strict';\n  angular.module('civic.security.service', [\n    'civic.security.retryQueue',\n    'civic.security.login',\n    'dialogs.main'\n  ])\n    .factory('Security', Security);\n\n// @ngInject\n  function Security($http, $q, $location, $state, RetryQueue, dialogs, $log) {\n    // Redirect to the given url (defaults to '/')\n    function redirect(url) {\n      url = url || '/';\n      $location.url(url);\n      $state.reload();\n    }\n\n    // Login form dialog stuff\n    var loginDialog = null;\n    function openLoginDialog() {\n      if ( loginDialog ) {\n        throw new Error('Trying to open a dialog that is already open!');\n      }\n      loginDialog= dialogs.create('components/security/login/LoginForm.tpl.html','LoginFormController',{},{backdrop: 'static'});\n      loginDialog.result.then(onLoginDialogClose);\n    }\n    function closeLoginDialog(success) {\n      $log.info('Security.closeLoginDialog() called.');\n      if (loginDialog) {\n        loginDialog.close(success);\n      }\n    }\n    function onLoginDialogClose(success) {\n      loginDialog = null;\n      if ( success ) {\n        RetryQueue.retryAll();\n      } else {\n        RetryQueue.cancelAll();\n        // redirect();\n      }\n    }\n\n    // Register a handler for when an item is added to the retry queue\n    RetryQueue.onItemAddedCallbacks.push(function() {\n      if ( RetryQueue.hasMore() ) {\n        service.showLogin();\n      }\n    });\n\n    // The public API of the service\n    var service = {\n\n      // Get the first reason for needing a login\n      getLoginReason: function() {\n        return RetryQueue.retryReason();\n      },\n\n      // Show the modal login dialog\n      showLogin: function() {\n        openLoginDialog();\n      },\n\n      // Attempt to authenticate a user by the given email and password\n      login: function() {\n        var request = $http.get('/api/current_user.json');\n        return request.then(function(response) {\n          service.currentUser = response.data.user;\n          if ( service.isAuthenticated() ) {\n            closeLoginDialog(true);\n          }\n          return service.isAuthenticated();\n        });\n      },\n\n      // Give up trying to login and clear the retry queue\n      cancelLogin: function(url) {\n        closeLoginDialog(false);\n        redirect(url);\n      },\n\n      // Logout the current user and redirect\n      logout: function(redirectTo) {\n        $http.get('/api/sign_out').then(function() { // success\n          service.currentUser = null;\n          redirect(redirectTo);\n        }, function(response) { // failure\n          $log.warn('COULD NOT LOG OUT' + JSON.stringify(response));\n        });\n      },\n\n      // Ask the backend to see if a user is already authenticated - this may be from a previous session.\n      requestCurrentUser: function() {\n        if ( service.isAuthenticated() ) {\n          return $q.when(service.currentUser);\n        } else {\n          return $http.get('/api/current_user.json').then(function(response) {\n            // unauthenticated request returns an empty JSON object, so we count the keys\n            // and if there are any we assume an authenticated user\n            if(Object.keys(response.data).length > 0) {\n              service.currentUser = response.data;\n            } else {\n              service.currentUser = null;\n            }\n            return service.currentUser;\n          });\n        }\n      },\n\n      reloadCurrentUser: function() {\n        return $http.get('/api/current_user.json').then(function(response) {\n          // unauthenticated request returns an empty JSON object, so we count the keys\n          // and if there are any we assume an authenticated user\n          if(Object.keys(response.data).length > 0) {\n            service.currentUser = response.data;\n          } else {\n            service.currentUser = null;\n          }\n          return service.currentUser;\n        });\n      },\n\n      // Information about the current user\n      currentUser: null,\n\n      // Is the current user authenticated?\n      isAuthenticated: function(){\n        return !!service.currentUser;\n      },\n\n      // Is the current user an editor?\n      isEditor: function() {\n        return !!(service.currentUser && service.currentUser.role === 'editor' ||\n        service.currentUser && service.currentUser.role === 'admin');\n      },\n\n      // Is the current user an editor?\n      isCurator: function() {\n        return !!(service.currentUser && (service.currentUser.role === 'curator' || service.currentUser.role === 'editor'));\n      }\n    };\n\n    return service;\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.security.retryQueue', [])\n    .factory('RetryQueue', RetryQueue);\n\n  /**\n   * @name RetryQueue\n   * @desc This is a generic retry queue for security failures.  Each item is expected to expose two functions: retry and cancel.\n   * @param $q\n   * @param $log\n   * @returns {{onItemAddedCallbacks: Array, hasMore: hasMore, push: push, pushRetryFn: pushRetryFn, retryReason: retryReason, cancelAll: cancelAll, retryAll: retryAll}}\n   * @ngInject\n   */\n  function RetryQueue($q, $log) {\n    var retryQueue = [];\n    var service = {\n      // The security service puts its own handler in here!\n      onItemAddedCallbacks: [],\n\n      hasMore: function() {\n        return retryQueue.length > 0;\n      },\n      push: function(retryItem) {\n        $log.info('retryQueue.push() called with item: ' + retryItem);\n        retryQueue.push(retryItem);\n        // Call all the onItemAdded callbacks\n        angular.forEach(service.onItemAddedCallbacks, function(cb) {\n          try {\n            cb(retryItem);\n          } catch(e) {\n            $log.error('securityRetryQueue.push(retryItem): callback threw an error' + e);\n          }\n        });\n      },\n      pushRetryFn: function(reason, retryFn) {\n        // The reason parameter is optional\n        if ( arguments.length === 1) {\n          retryFn = reason;\n          reason = undefined;\n        }\n\n        // The deferred object that will be resolved or rejected by calling retry or cancel\n        var deferred = $q.defer();\n        var retryItem = {\n          reason: reason,\n          retry: function() {\n            // Wrap the result of the retryFn into a promise if it is not already\n            $q.when(retryFn()).then(function(value) {\n              // If it was successful then resolve our deferred\n              deferred.resolve(value);\n            }, function(value) {\n              // Othewise reject it\n              deferred.reject(value);\n            });\n          },\n          cancel: function() {\n            // Give up on retrying and reject our deferred\n            deferred.reject();\n          }\n        };\n        service.push(retryItem);\n        return deferred.promise;\n      },\n      retryReason: function() {\n        return service.hasMore() && retryQueue[0].reason;\n      },\n      cancelAll: function() {\n        while(service.hasMore()) {\n          retryQueue.shift().cancel();\n        }\n      },\n      retryAll: function() {\n        $log.info('RetryQueue.retryall() called.');\n        while(service.hasMore()) {\n          retryQueue.shift().retry();\n        }\n      }\n    };\n    return service;\n  }\n})();\n(function() {\n  'use strict';\n  angular.module('civic.security.interceptor', ['civic.security.retryQueue'])\n    .factory('Interceptor', Interceptor);\n    // .config(interceptorServiceConfig);\n\n  /**\n   * @name Interceptor\n   * @desc listens for authentication failures\n   * @param $injector\n   * @param RetryQueue\n   * @returns {Function}\n   * @ngInject\n   */\n  function Interceptor($injector, RetryQueue) {\n    return {\n      response: function(response) { // success - just pass the response through\n        return response;\n      },\n      responseError: function(response) {\n        // The request bounced because it was not authorized - add a new request to the retry RetryQueue\n        var $q = RetryQueue.pushRetryFn('unauthorized-server', function retryRequest() {\n          // We must use $injector to get the $http service to prevent circular dependency\n          return $injector.get('$http')(response.config);\n        });\n        return response || $q.when(response);\n        //return response;\n      }\n    };\n\n  }\n\n  /**\n   * @name interceptorServiceConfig\n   * @desc We have to add the interceptor to the RetryQueue as a string because the interceptor depends upon service instances that are not available in the config block.\n   * @param $httpProvider\n   * @ngInject\n   */\n  //function interceptorServiceConfig($httpProvider) {\n  //  // $httpProvider.interceptors.push('Interceptor');\n  //}\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.security.authorization', ['civic.security.service'])\n    // This service provides guard methods to support AngularJS routes.\n    // You can add them as resolves to routes to require authorization levels\n    // before allowing a route change to complete\n    .provider('Authorization', {\n      requireAdminUser: /*@ngInject*/ function(Authorization) {\n        return Authorization.requireAdminUser();\n      },\n\n      requireAuthenticatedUser: /*@ngInject*/ function(Authorization) {\n        return Authorization.requireAuthenticatedUser();\n      },\n\n      $get: /*@ngInject*/ function(Security, RetryQueue) {\n        var service = {\n\n          // Require that there is an authenticated user\n          // (use this in a route resolve to prevent non-authenticated users from entering that route)\n          requireAuthenticatedUser: function() {\n            var promise = Security.requestCurrentUser().then(function() {\n              if ( !Security.isAuthenticated() ) {\n                return RetryQueue.pushRetryFn('unauthenticated-client', service.requireAuthenticatedUser);\n              }\n            });\n            return promise;\n          },\n\n          // Require that there is an administrator logged in\n          // (use this in a route resolve to prevent non-administrators from entering that route)\n          requireAdminUser: function() {\n            var promise = Security.requestCurrentUser().then(function() {\n              if ( !Security.isEditor() ) {\n                return RetryQueue.pushRetryFn('unauthorized-client', service.requireAdminUser);\n              }\n            });\n            return promise;\n          }\n\n        };\n\n        return service;\n      }\n    });\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.services')\n    .factory('GenesResource', GenesResource)\n    .factory('Genes', GenesService);\n\n  // @ngInject\n  function GenesResource($resource, $cacheFactory, _) {\n    var cache = $cacheFactory.get('$http');\n\n    var cacheInterceptor = function(response) {\n      // console.log(['GenesResource: removing', response.config.url, 'from $http cache.'].join(' '));\n      cache.remove(response.config.url);\n      return response.$promise;\n    };\n\n    return $resource('/api/genes/:geneId',\n      {\n        geneId: '@geneId'\n      },\n      {\n        // Base Gene Resources\n        query: {\n          method: 'GET',\n          isArray: false,\n          cache: cache\n        },\n        get: { // get a single gene\n          method: 'GET',\n          isArray: false,\n          cache: cache\n        },\n        getName: { // get a single gene's name and entrez_id\n          url: '/api/genes/:geneId',\n          params: { detailed: 'false' },\n          method: 'GET',\n          isArray: false,\n          cache: cache\n        },\n        update: {\n          method: 'PATCH',\n          interceptor: {\n            response: cacheInterceptor\n          }\n        },\n        delete: {\n          method: 'DELETE',\n          interceptor: {\n            response: cacheInterceptor\n          }\n        },\n        apply: {\n          method: 'PATCH',\n          cache: false\n        },\n        verify: {\n          method: 'GET',\n          url: '/api/genes/existence/:geneId',\n          isArray: false,\n          cache: cache\n        },\n        search: {\n\n        },\n        beginsWith: {\n          method: 'GET',\n          url: '/api/genes?name=:name&detailed=false',\n          isArray: true,\n          cache: cache\n        },\n\n        // Gene Additional Info\n        getMyGeneInfo: {\n          url: '/api/genes/:geneId/mygene_info_proxy',\n          params: {\n            geneId: '@geneId'\n          },\n          cache: cache,\n          transformResponse: function(data) {\n            if(typeof data === 'string') {\n              data = JSON.parse(data);\n            }\n            var srcMap = {\n              kegg: 'http://www.genome.jp/kegg-bin/show_pathway?',\n              reactome: 'http://www.reactome.org/cgi-bin/control_panel_st_id?ST_ID=',\n              pharmgkb: 'https://www.pharmgkb.org/pathway/',\n              humancyc: 'http://humancyc.org/HUMAN/NEW-IMAGE?type=PATHWAY&object=',\n              smpdb: 'http://www.smpdb.ca/view/',\n              pid: 'http://pid.nci.nih.gov/search/pathway_landing.shtml?what=graphic&jpg=on&pathway_id=',\n              wikipathways: 'http://wikipathways.org/index.php/Pathway:',\n              netpath: null,\n              biocarta: null,\n              inoh: null,\n              signalink: null,\n              ehmn: null\n            };\n            var pathways = data.pathway || [];\n            var pathwaysFinal = [];\n            var link;\n            for(var src in pathways){\n              if(!angular.isArray(pathways[src])){\n                pathways[src] = [pathways[src]];\n              }\n              for(var p in pathways[src]){\n                link = srcMap[src]+pathways[src][p].id;\n                if(srcMap[src] === null){\n                  link = null;\n                }\n                pathwaysFinal.push({\n                  name: pathways[src][p].name,\n                  link: link,\n                  src: src\n                });\n              }\n            }\n            data.pathway = pathwaysFinal;\n            if(!_.isArray(data.alias) && data.alias){\n              data.alias = [data.alias];\n            }\n            if(!_.isArray(data.interpro) && data.interpro){\n              data.interpro = [data.interpro];\n            }\n            return data;\n          }\n        },\n\n        // Gene Collections\n        queryVariants: {\n          method: 'GET',\n          url: '/api/genes/:geneId/variants',\n          isArray: false,\n          cache: cache\n        },\n        queryVariantGroups: {\n          method: 'GET',\n          url: '/api/genes/:geneId/variant_groups',\n          isArray: false,\n          cache: cache\n        },\n\n        // Gene Comments Resources\n        queryComments: {\n          method: 'GET',\n          url: '/api/genes/:geneId/comments',\n          isArray: true,\n          cache: cache\n        },\n        getComment: {\n          method: 'GET',\n          url: '/api/genes/:geneId/comments/:commentId',\n          params: {\n            geneId: '@geneId',\n            commentId: '@commentId'\n          },\n          isArray: false,\n          cache: cache\n        },\n\n        submitComment: {\n          method: 'POST',\n          url: '/api/genes/:geneId/comments',\n          params: {\n            geneId: '@geneId'\n          },\n          cache: false\n        },\n        updateComment: {\n          method: 'PATCH',\n          url: '/api/genes/:geneId/comments/:commentId',\n          params: {\n            geneId: '@geneId',\n            commentId: '@commentId'\n          },\n          cache: false\n        },\n        deleteComment: {\n          method: 'DELETE',\n          url: '/api/genes/:geneId/comments/:commentId',\n          params: {\n            geneId: '@geneId',\n            commentId: '@commentId'\n          },\n          cache: false\n        }\n      }\n    );\n  }\n\n  // @ngInject\n  function GenesService(GenesResource, $q, $cacheFactory) {\n    var cache = $cacheFactory.get('$http');\n\n    // Base Gene and Gene Collection\n    var item = {};\n    var collection = [];\n\n    // Additional Gene Data\n    var myGeneInfo = {};\n\n    // Gene Collections\n    var variants = [];\n    var variantGroups = [];\n    var comments = [];\n\n    return {\n      initBase: initBase,\n      initComments: initComments,\n      data: {\n        item: item,\n        collection: collection,\n        myGeneInfo: myGeneInfo,\n        variants: variants,\n        variantGroups: variantGroups,\n        comments: comments\n      },\n\n      // Gene Base\n      query: query,\n      get: get,\n      getName: getName,\n      update: update,\n      delete: deleteItem,\n      apply: apply,\n\n      // Gene Additional Info\n      getMyGeneInfo: getMyGeneInfo,\n\n      // Verify\n      verify: verify,\n\n      // Gene Collections\n      queryVariants: queryVariants,\n      queryVariantGroups: queryVariantGroups,\n\n      // Gene Comments\n      queryComments: queryComments,\n      getComment: getComment,\n      submitComment: submitComment,\n      updateComment: updateComment,\n      deleteComment: deleteComment,\n\n      // Misc\n      beginsWith: beginsWith\n    };\n\n    function initBase(geneId) {\n      return $q.all([\n        get(geneId),\n        getMyGeneInfo(geneId),\n        queryVariants(geneId),\n        queryVariantGroups(geneId)\n      ]);\n    }\n\n    function initComments(geneId) {\n      return $q.all([\n        queryComments(geneId)\n      ]);\n    }\n    // Gene Base\n    function query() {\n      return GenesResource.query().$promise\n        .then(function(response) {\n          angular.copy(response.records, collection);\n          return response.$promise;\n        });\n    }\n    function get(geneId) {\n      return GenesResource.get({geneId: geneId}).$promise\n        .then(function(response) {\n          angular.copy(response, item);\n          return response.$promise;\n        });\n    }\n    function getName(geneId) {\n      return GenesResource.getName({geneId: geneId}).$promise\n        .then(function(response) {\n          return response.$promise;\n        });\n    }\n    function update(reqObj) {\n      return GenesResource.update(reqObj).$promise\n        .then(function(response) {\n          angular.copy(response, item);\n          return response.$promise;\n        });\n    }\n    function deleteItem(geneId) {\n      return GenesResource.delete({geneId: geneId}).$promise\n        .then(function(response) {\n          item = null;\n          return response.$promise;\n        });\n    }\n    function apply(reqObj) {\n      return GenesResource.apply(reqObj).$promise.then(\n        function(response) { // success\n          cache.remove('/api/genes/' + response.id);\n          get(reqObj.geneId);\n          return $q.when(response);\n        },\n        function(error) { // fail\n          return $q.reject(error);\n        });\n    }\n    function verify(geneId) {\n      return GenesResource.verify({geneId: geneId}).$promise\n        .then(function(response) {\n          return response.$promise;\n        });\n    }\n\n    function beginsWith(name) {\n      return GenesResource.beginsWith({name: name}).$promise\n        .then(function(response) {\n          return response.$promise;\n        });\n    }\n\n    // Gene Additional Data\n    function getMyGeneInfo(geneId) {\n      return GenesResource.getMyGeneInfo({geneId: geneId}).$promise\n        .then(function(response) {\n          angular.copy(response, myGeneInfo);\n          return response.$promise;\n        });\n    }\n\n    // Gene Collections\n    function queryVariants(geneId) {\n      return GenesResource.queryVariants({geneId: geneId}).$promise\n        .then(function(response) {\n          angular.copy(response.records, variants);\n          return response.$promise;\n        });\n    }\n    function queryVariantGroups(geneId) {\n      return GenesResource.queryVariantGroups({geneId: geneId}).$promise\n        .then(function(response) {\n          angular.copy(response.records, variantGroups);\n          return response.$promise;\n        });\n    }\n\n    // Gene Comments\n    function queryComments(geneId) {\n      return GenesResource.queryComments({geneId: geneId}).$promise\n        .then(function(response) {\n          angular.copy(response, comments);\n          return response.$promise;\n        });\n    }\n    function getComment(geneId, commentId) {\n      return GenesResource.getComment({geneId: geneId, commentId: commentId}).$promise\n        .then(function(response) {\n          return response.$promise;\n        });\n    }\n    function submitComment(reqObj) {\n      return GenesResource.submitComment(reqObj).$promise\n        .then(function(response) {\n          cache.remove('/api/genes/' + reqObj.geneId + '/comments');\n          queryComments(reqObj.geneId);\n          return response.$promise;\n        });\n    }\n    function updateComment(reqObj) {\n      return GenesResource.updateComment(reqObj).$promise\n        .then(function(response) {\n          cache.remove('/api/genes/' + reqObj.geneId + '/comments');\n          queryComments(reqObj.geneId);\n          return response.$promise;\n        });\n    }\n    function deleteComment(commentId) {\n      return GenesResource.deleteComment({geneId: item.id, commentId: commentId}).$promise\n        .then(function(response) {\n          cache.remove('/api/genes/' + item.id + '/comments');\n          queryComments(item.id);\n          return response.$promise;\n        });\n    }\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.services')\n    .factory('GeneRevisionsResource', GeneRevisionsResource)\n    .factory('GeneRevisions', GeneRevisionsService);\n\n  function GeneRevisionsResource($resource, $cacheFactory) {\n    var cache = $cacheFactory.get('$http');\n\n    // adding this interceptor to a route will remove cached record\n    var cacheResponseInterceptor = function(response) {\n      cache.remove(response.config.url);\n      return response.$promise;\n    };\n\n    return $resource('/api/genes/:geneId/suggested_changes/:revisionId',\n      {\n        geneId: '@geneId',\n        revisionId: '@revisionId'\n      },\n      {\n        // Base Gene Revisions Resources\n        query: {\n          method: 'GET',\n          isArray: true,\n          cache: cache\n        },\n        get: {\n          method: 'GET',\n          isArray: false,\n          cache: cache\n        },\n        submitRevision: {\n          method: 'POST',\n          cache: false\n        },\n        getPendingFields: {\n          method: 'GET',\n          url: '/api/genes/:geneId/fields_with_pending_changes',\n          params: {\n            geneId: '@geneId'\n          },\n          cache: false\n        },\n        acceptRevision: {\n          method: 'POST',\n          url: '/api/genes/:geneId/suggested_changes/:revisionId/accept',\n          params: {\n            geneId: '@geneId',\n            revisionId: '@revisionId',\n            force: true\n          },\n          cache: false\n        },\n        rejectRevision: {\n          method: 'POST',\n          url: '/api/genes/:geneId/suggested_changes/:revisionId/reject',\n          params: {\n            geneId: '@geneId',\n            revisionId: '@revisionId',\n            force: true\n          },\n          cache: false\n        },\n\n        // Gene Revisions Comments Resources\n        submitComment: {\n          method: 'POST',\n          url: '/api/genes/:geneId/suggested_changes/:revisionId/comments',\n          params: {\n            geneId: '@geneId',\n            revisionId: '@revisionId'\n          },\n          cache: false\n        },\n        updateComment: {\n          method: 'PATCH',\n          url: '/api/genes/:geneId/suggested_changes/:revisionId/comments/:commentId',\n          params: {\n            geneId: '@geneId',\n            revisionId: '@revisionId',\n            commentId: '@commentId'\n          },\n          interceptor: {\n            response: cacheResponseInterceptor\n          }\n        },\n        queryComments: {\n          method: 'GET',\n          url: '/api/genes/:geneId/suggested_changes/:revisionId/comments',\n          params: {\n            geneId: '@geneId',\n            revisionId: '@revisionId'\n          },\n          isArray: true,\n          cache: cache\n        },\n        getComment: {\n          method: 'GET',\n          url: '/api/genes/:geneId/suggested_changes/:revisionId/comments/:commentId',\n          params: {\n            geneId: '@geneId',\n            revisionId: '@revisionId',\n            commentId: '@commentId'\n          },\n          isArray: false,\n          cache: cache\n        },\n        deleteComment: {\n          method: 'DELETE',\n          url: '/api/genes/:geneId/suggested_changes/:revisionId/comments/:commentId',\n          params: {\n            geneId: '@geneId',\n            revisionId: '@revisionId',\n            commentId: '@commentId'\n          },\n          cache: false\n        }\n      }\n    );\n  }\n\n  function GeneRevisionsService(GeneRevisionsResource, Genes, $cacheFactory, $q) {\n    // fetch genes cache, need to delete gene record when revision is submitted\n    var cache = $cacheFactory.get('$http');\n\n    // Base Gene Revision and Gene Revisions Collection\n    var item = {};\n    var parent = Genes.data.item;\n    var collection = [];\n\n    // Gene Revisions Comments\n    var comment = {};\n    var comments = [];\n\n    var pendingFields = {};\n\n    return {\n      initBase: initBase,\n      initRevisions: initRevisions,\n      initComments: initComments,\n      data: {\n        item: item,\n        parent: parent,\n        collection: collection,\n        comment: comment,\n        comments: comments,\n        pendingFields: pendingFields\n      },\n\n      // Gene Revisions Base\n      query: query,\n      get: get,\n      getPendingFields: getPendingFields,\n      submitRevision: submitRevision,\n      acceptRevision: acceptRevision,\n      rejectRevision: rejectRevision,\n\n      // Gene Revisions Comments\n      queryComments: queryComments,\n      getComment: getComment,\n      submitComment: submitComment,\n      updateComment: updateComment,\n      deleteComment: deleteComment\n    };\n\n    function initBase(geneId, revisionId) {\n      return $q.all([\n        query(geneId, revisionId)\n      ]);\n    }\n\n    function initRevisions(geneId) {\n      return $q.all([\n        query(geneId)\n      ]);\n    }\n\n    function initComments(geneId, revisionId) {\n      return $q.all([\n        query(geneId, revisionId)\n      ]);\n    }\n\n    // Gene Revisions Base\n    function query(geneId) {\n      return GeneRevisionsResource.query({ geneId: geneId }).$promise\n        .then(function(response) {\n          angular.copy(response, collection);\n          return response.$promise;\n        });\n    }\n    function get(geneId, revisionId) {\n      return GeneRevisionsResource.get({ geneId: geneId, revisionId: revisionId }).$promise\n        .then(function(response) {\n          angular.copy(response, item);\n          return response.$promise;\n        });\n    }\n\n    function getPendingFields(geneId) {\n      return GeneRevisionsResource.getPendingFields({ geneId: geneId }).$promise\n        .then(function(response) {\n          angular.copy(response.toJSON(), pendingFields);\n          return response.$promise;\n        });\n    }\n\n    function submitRevision(reqObj) {\n      return GeneRevisionsResource.submitRevision(reqObj).$promise.then(\n        function(response) { // success\n          cache.remove('/api/genes/' + reqObj.id + '/suggested_changes/');\n          return $q.when(response);\n        },\n        function(error) { //fail\n          return $q.reject(error);\n        });\n    }\n\n    function acceptRevision(geneId, revisionId) {\n      return GeneRevisionsResource.acceptRevision({ geneId: geneId, revisionId: revisionId }).$promise.then(\n        function(response) {\n          cache.remove('/api/genes/' + geneId + '/suggested_changes/');\n          query(geneId);\n          cache.remove('/api/genes/' + geneId + '/suggested_changes/' + revisionId);\n          get(geneId, revisionId);\n          cache.remove('/api/genes/' + geneId );\n          Genes.get(geneId);\n          return $q.when(response);\n        },\n        function(error) {\n          return $q.reject(error);\n        });\n    }\n    function rejectRevision(geneId, revisionId) {\n      return GeneRevisionsResource.rejectRevision({ geneId: geneId, revisionId: revisionId }).$promise.then(\n        function(response) {\n          cache.remove('/api/genes/' + response.id + '/suggested_changes/');\n          query(geneId);\n          cache.remove('/api/genes/' + response.id + '/suggested_changes/' + revisionId);\n          get(geneId, revisionId);\n          return $q.when(response);\n        },\n        function(error) {\n          return $q.reject(error);\n        });\n    }\n\n    // Gene Revisions Comments\n    function queryComments(geneId, revisionId) {\n      return GeneRevisionsResource.queryComments({ geneId: geneId, revisionId: revisionId }).$promise\n        .then(function(response) {\n          angular.copy(response, comments);\n          return response.$promise;\n        });\n    }\n    function getComment(geneId, revisionId, commentId) {\n      return GeneRevisionsResource.getComment({ geneId: geneId, revisionId: revisionId, commentId: commentId }).$promise\n        .then(function(response) {\n          angular.copy(response, comment);\n          return response.$promise;\n        });\n    }\n    function submitComment(reqObj) {\n      return GeneRevisionsResource.submitComment(reqObj).$promise\n        .then(function(response) {\n          cache.remove('/api/genes/' + reqObj.geneId + '/suggested_changes/' + reqObj.revisionId + '/comments');\n          queryComments(reqObj.geneId, reqObj.revisionId);\n          return response.$promise;\n        });\n    }\n    function updateComment(reqObj) {\n      return GeneRevisionsResource.updateComment(reqObj).$promise\n        .then(function(response) {\n          angular.copy(response, comment);\n          cache.remove('/api/genes/' + reqObj.geneId + '/suggested_changes/' + reqObj.revisionId + '/comments');\n          cache.remove('/api/genes/' + reqObj.geneId + '/suggested_changes/' + reqObj.revisionId + '/comments/' + reqObj.commentId);\n          queryComments(reqObj.geneId, reqObj.revisionId);\n          return response.$promise;\n        });\n    }\n    function deleteComment(commentId) {\n      return GeneRevisionsResource.deleteComment({ geneId: parent.id, revisionId: item.id, commentId: commentId }).$promise\n        .then(function(response) {\n          cache.remove('/api/genes/' + parent.id + '/suggested_changes/' + item.id+ '/comments');\n          queryComments(parent.id, item.id);\n          return response.$promise;\n        });\n    }\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.services')\n    .factory('GeneHistoryResource', GeneHistoryResource)\n    .factory('GeneHistory', GeneHistoryService);\n\n  function GeneHistoryResource($resource, $cacheFactory) {\n    var cache = $cacheFactory.get('$http');\n\n    // adding this interceptor to a route will remove cached record\n    //var cacheInterceptor = function(response) {\n    //  cache.remove(response.config.url);\n    //  return response.$promise;\n    //};\n    return $resource('/api/genes/:geneId/revisions',\n      {\n        geneId: '@geneId'\n      },\n      {\n        // Base Gene Revisions Resources\n        query: {\n          method: 'GET',\n          isArray: true,\n          cache: cache\n        },\n        last: {\n          method: 'GET',\n          isArray: false,\n          cache: cache\n        },\n\n        // Base Gene History Refresh\n        queryFresh: {\n          method: 'GET',\n          isArray: true,\n          cache: false\n        },\n        lastFresh: {\n          method: 'GET',\n          isArray: false,\n          cache: false\n        }\n      }\n    );\n  }\n\n  function GeneHistoryService(GeneHistoryResource, $q) {\n    // Gene History Base\n    var item = {};\n    var collection = [];\n\n    return {\n      initBase: initBase,\n      data: {\n        item: item,\n        collection: collection,\n      },\n\n      // Gene History Base\n      query: query,\n      last: last,\n\n      // Gene History Base Refresh\n      queryFresh: queryFresh,\n      lastFresh: lastFresh\n    };\n\n    function initBase(geneId) {\n      return $q.all([\n        query(geneId)\n      ]);\n    }\n\n    // Gene History Base\n    function query(geneId) {\n      return GeneHistoryResource.query({ geneId: geneId }).$promise\n        .then(function(response) {\n          angular.copy(response, collection);\n          return response.$promise;\n        });\n    }\n    function last(geneId) {\n      return GeneHistoryResource.last({ geneId: geneId }).$promise\n        .then(function(response) {\n          angular.copy(response, item);\n          return response.$promise;\n        });\n    }\n\n    // Gene History Base Refresh\n    function queryFresh(geneId) {\n      return GeneHistoryResource.queryFresh({ geneId: geneId }).$promise\n        .then(function(response) {\n          angular.copy(response, collection);\n          return response.$promise;\n        });\n    }\n    function lastFresh(geneId) {\n      return GeneHistoryResource.lastFresh({ geneId: geneId }).$promise\n        .then(function(response) {\n          angular.copy(response, item);\n          return response.$promise;\n        });\n    }\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.services')\n    .factory('VariantGroupsResource', VariantGroupsResource)\n    .factory('VariantGroups', VariantGroupsService);\n\n  // @ngInject\n  function VariantGroupsResource($resource, $cacheFactory) {\n    var cache = $cacheFactory.get('$http');\n\n    var cacheInterceptor = function(response) {\n      console.log(['VariantGroupsResource: removing', response.config.url, 'from $http cache.'].join(' '));\n      cache.remove(response.config.url);\n      return response;\n    };\n\n    return $resource('/api/variant_groups/:variantGroupId',\n      {\n        variantGroupId: '@variantGroupId'\n      },\n      {\n        // Base VariantGroup Resources\n        query: {\n          method: 'GET',\n          isArray: true,\n          cache: cache\n        },\n        get: {\n          method: 'GET',\n          isArray: false,\n          cache: cache\n        },\n        update: {\n          method: 'PATCH',\n          interceptor: {\n            response: cacheInterceptor\n          }\n        },\n        delete: {\n          method: 'DELETE',\n          interceptor: {\n            response: cacheInterceptor\n          }\n        },\n        apply: {\n          method: 'PATCH'\n        },\n        add: {\n          method: 'POST',\n          cache: false\n        },\n\n        // VariantGroup Collections Resources\n        queryVariants: {\n          method: 'GET',\n          url: '/api/variant_groups/:variantGroupId/variants',\n          isArray: true,\n          cache: cache\n        },\n\n        // VariantGroup Comments Resources\n        queryComments: {\n          method: 'GET',\n          url: '/api/variant_groups/:variantGroupId/comments',\n          isArray: true,\n          cache: cache\n        },\n        getComment: {\n          method: 'GET',\n          url: '/api/variant_groups/:variantGroupId/comments/:commentId',\n          params: {\n            variantGroupId: '@variantGroupId',\n            commentId: '@commentId'\n          },\n          isArray: false,\n          cache: cache\n        },\n\n        submitComment: {\n          method: 'POST',\n          url: '/api/variant_groups/:variantGroupId/comments',\n          params: {\n            variantGroupId: '@variantGroupId'\n          },\n          cache: false\n        },\n        updateComment: {\n          method: 'PATCH',\n          url: '/api/variant_groups/:variantGroupId/comments/:commentId',\n          params: {\n            variantGroupId: '@variantGroupId',\n            commentId: '@commentId'\n          },\n          cache: false\n        },\n        deleteComment: {\n          method: 'DELETE',\n          url: '/api/variant_groups/:variantGroupId/comments/:commentId',\n          params: {\n            variantGroupId: '@variantGroupId',\n            commentId: '@commentId'\n          },\n          cache: false\n        }\n      }\n    );\n  }\n\n  // @ngInject\n  function VariantGroupsService(VariantGroupsResource, $q, $cacheFactory) {\n    var cache = $cacheFactory.get('$http');\n    // Base VariantGroup and VariantGroup Collection\n    var item = {};\n    var collection = [];\n\n    // VariantGroup Collections\n    var variants = [];\n    var comments = [];\n\n    return {\n      initBase: initBase,\n      initComments: initComments,\n      data: {\n        item: item,\n        collection: collection,\n        variants: variants,\n        comments: comments\n      },\n\n      // VariantGroup Base\n      query: query,\n      get: get,\n      update: update,\n      delete: deleteItem,\n      apply: apply,\n      add: add,\n\n      // VariantGroup Collections\n      queryVariants: queryVariants,\n\n      // VariantGroup Comments\n      queryComments: queryComments,\n      getComment: getComment,\n      submitComment: submitComment,\n      updateComment: updateComment,\n      deleteComment: deleteComment\n\n    };\n\n    function initBase(variantGroupId) {\n      return $q.all([\n        get(variantGroupId),\n        queryVariants(variantGroupId)\n      ]);\n    }\n\n    function initComments(variantGroupId) {\n      return $q.all([\n        queryComments(variantGroupId)\n      ]);\n    }\n    // VariantGroup Base\n    function query() {\n      return VariantGroupsResource.query().$promise\n        .then(function(response) {\n          angular.copy(response, collection);\n          return response.$promise;\n        });\n    }\n    function get(variantGroupId) {\n      return VariantGroupsResource.get({variantGroupId: variantGroupId}).$promise\n        .then(function(response) {\n          angular.copy(response, item);\n          angular.copy(response.variants, variants);\n          return response.$promise;\n        });\n    }\n    function update(reqObj) {\n      return VariantGroupsResource.update(reqObj).$promise\n        .then(function(response) {\n          angular.copy(response, item);\n          return response.$promise;\n        });\n    }\n    function deleteItem(variantGroupId) {\n      return VariantGroupsResource.delete({variantGroupId: variantGroupId}).$promise\n        .then(function(response) {\n          item = null;\n          return response.$promise;\n        });\n    }\n    function apply(reqObj) {\n      return VariantGroupsResource.apply(reqObj).$promise.then(\n        function(response) { // success\n          cache.remove('/api/variant_groups/' + response.id);\n          get(reqObj.variantGroupId);\n          return $q.when(response);\n        },\n        function(error) { // fail\n          return $q.reject(error);\n        });\n    }\n    function add(reqObj) {\n      return VariantGroupsResource.add(reqObj).$promise\n        .then(function(response) {\n          return response.$promise;\n        });\n    }\n\n    // VariantGroup Collections\n    function queryVariants() {\n      console.warn('returning copy of variantGroups.variants');\n      return $q.when(variants);\n      //return VariantGroupsResource.queryVariants({variantGroupId: variantGroupId}).$promise\n      //  .then(function(response) {\n      //    angular.copy(response, variants);\n      //    return response.$promise;\n      //  });\n    }\n\n    // VariantGroup Comments\n    function queryComments(variantGroupId) {\n      return VariantGroupsResource.queryComments({variantGroupId: variantGroupId}).$promise\n        .then(function(response) {\n          angular.copy(response, comments);\n          return response.$promise;\n        });\n    }\n    function getComment(variantGroupId, commentId) {\n      return VariantGroupsResource.getComment({variantGroupId: variantGroupId, commentId: commentId}).$promise\n        .then(function(response) {\n          return response.$promise;\n        });\n    }\n    function submitComment(reqObj) {\n      return VariantGroupsResource.submitComment(reqObj).$promise\n        .then(function(response) {\n          cache.remove('/api/variant_groups/' + reqObj.variantGroupId + '/comments');\n          queryComments(reqObj.variantGroupId);\n          return response.$promise;\n        });\n    }\n    function updateComment(reqObj) {\n      return VariantGroupsResource.updateComment(reqObj).$promise\n        .then(function(response) {\n          // TODO: delete comment from cache, refresh comments\n          return response.$promise;\n        });\n    }\n    function deleteComment(commentId) {\n      return VariantGroupsResource.deleteComment({variantGroupId: item.id, commentId: commentId}).$promise\n        .then(function(response) {\n          cache.remove('/api/variant_groups/' + item.id + '/comments');\n          queryComments(item.id);\n          return response.$promise;\n        });\n    }\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.services')\n    .factory('VariantGroupRevisionsResource', VariantGroupRevisionsResource)\n    .factory('VariantGroupRevisions', VariantGroupRevisionsService);\n\n  // @ngInject\n  function VariantGroupRevisionsResource($resource, $cacheFactory) {\n    var cache = $cacheFactory.get('$http');\n\n    // adding this interceptor to a route will remove cached record\n    var cacheResponseInterceptor = function(response) {\n      cache.remove(response.config.url);\n      return response.$promise;\n    };\n\n    return $resource('/api/variant_groups/:variantGroupId/suggested_changes/:revisionId',\n      {\n        variantGroupId: '@variantGroupId',\n        revisionId: '@revisionId'\n      },\n      {\n        // Base VariantGroup Revisions Resources\n        query: {\n          method: 'GET',\n          isArray: true,\n          cache: cache\n        },\n        get: {\n          method: 'GET',\n          isArray: false,\n          cache: cache\n        },\n        getPendingFields: {\n          method: 'GET',\n          url: '/api/variant_groups/:variantGroupId/fields_with_pending_changes',\n          params: {\n            variantGroupId: '@variantGroupId'\n          },\n          cache: false\n        },\n        submitRevision: {\n          method: 'POST',\n          cache: false\n        },\n        acceptRevision: {\n          method: 'POST',\n          url: '/api/variant_groups/:variantGroupId/suggested_changes/:revisionId/accept',\n          params: {\n            variantGroupId: '@variantGroupId',\n            revisionId: '@revisionId',\n            force: true\n          },\n          cache: false\n        },\n        rejectRevision: {\n          method: 'POST',\n          url: '/api/variant_groups/:variantGroupId/suggested_changes/:revisionId/reject',\n          params: {\n            variantGroupId: '@variantGroupId',\n            revisionId: '@revisionId',\n            force: true\n          },\n          cache: cache\n        },\n\n        // VariantGroup Revisions Comments Resources\n        submitComment: {\n          method: 'POST',\n          url: '/api/variant_groups/:variantGroupId/suggested_changes/:revisionId/comments',\n          params: {\n            variantGroupId: '@variantGroupId',\n            revisionId: '@revisionId'\n          },\n          cache: false\n        },\n        updateComment: {\n          method: 'PATCH',\n          url: '/api/variant_groups/:variantGroupId/suggested_changes/:revisionId/comments/:commentId',\n          params: {\n            variantGroupId: '@variantGroupId',\n            revisionId: '@revisionId',\n            commentId: '@commentId'\n          },\n          interceptor: {\n            response: cacheResponseInterceptor\n          }\n        },\n        queryComments: {\n          method: 'GET',\n          url: '/api/variant_groups/:variantGroupId/suggested_changes/:revisionId/comments',\n          params: {\n            variantGroupId: '@variantGroupId',\n            revisionId: '@revisionId'\n          },\n          isArray: true,\n          cache: cache\n        },\n        getComment: {\n          method: 'GET',\n          url: '/api/variant_groups/:variantGroupId/suggested_changes/:revisionId/comments/:commentId',\n          params: {\n            variantGroupId: '@variantGroupId',\n            revisionId: '@revisionId',\n            commentId: '@commentId'\n          },\n          isArray: false,\n          cache: cache\n        },\n        deleteComment: {\n          method: 'DELETE',\n          url: '/api/variant_groups/:variantGroupId/suggested_changes/:revisionId/comments/:commentId',\n          params: {\n            variantGroupId: '@variantGroupId',\n            revisionId: '@revisionId',\n            commentId: '@commentId'\n          },\n          cache: false\n        }\n      }\n    );\n  }\n\n  // @ngInject\n  function VariantGroupRevisionsService(VariantGroupRevisionsResource,\n                                        VariantGroups,\n                                        Genes,\n                                        $cacheFactory,\n                                        $q,\n                                        _) {\n    var cache = $cacheFactory.get('$http');\n\n    // Base VariantGroup Revision and VariantGroup Revisions Collection\n    var item = {};\n    var parent = VariantGroups.data.item;\n    var collection = [];\n\n    // VariantGroup Revisions Comments\n    var comment = {};\n    var comments = [];\n\n    var pendingFields = {};\n\n    return {\n      initBase: initBase,\n      initRevisions: initRevisions,\n      initComments: initComments,\n      data: {\n        item: item,\n        parent: parent,\n        collection: collection,\n        comment: comment,\n        comments: comments,\n        pendingFields: pendingFields\n      },\n\n      // VariantGroup Revisions Base\n      query: query,\n      get: get,\n      getPendingFields: getPendingFields,\n      submitRevision: submitRevision,\n      acceptRevision: acceptRevision,\n      rejectRevision: rejectRevision,\n\n      // VariantGroup Revisions Comments\n      queryComments: queryComments,\n      getComment: getComment,\n      submitComment: submitComment,\n      updateComment: updateComment,\n      deleteComment: deleteComment\n\n    };\n\n    function initBase(variantGroupId, revisionId) {\n      return $q.all([\n        query(variantGroupId, revisionId)\n      ]);\n    }\n\n    function initRevisions(variantGroupId) {\n      return $q.all([\n        query(variantGroupId)\n      ]);\n    }\n\n    function initComments(variantGroupId, revisionId) {\n      return $q.all([\n        query(variantGroupId, revisionId)\n      ]);\n    }\n\n    // VariantGroup Revisions Base\n    function query(variantGroupId) {\n      return VariantGroupRevisionsResource.query({ variantGroupId: variantGroupId }).$promise\n        .then(function(response) {\n          angular.copy(response, collection);\n          return response.$promise;\n        });\n    }\n    function get(variantGroupId, revisionId) {\n      return VariantGroupRevisionsResource.get({ variantGroupId: variantGroupId, revisionId: revisionId }).$promise\n        .then(function(response) {\n          angular.copy(response, item);\n          return response.$promise;\n        });\n    }\n\n    function getPendingFields(variantGroupId) {\n      return VariantGroupRevisionsResource.getPendingFields({ variantGroupId: variantGroupId }).$promise\n        .then(function(response) {\n          angular.copy(response.toJSON(), pendingFields);\n          return response.$promise;\n        });\n    }\n\n    function submitRevision(reqObj) {\n      return VariantGroupRevisionsResource.submitRevision(reqObj).$promise.then(\n        function(response) { // success\n          cache.remove('/api/variant_groups/' + reqObj.id + '/suggested_changes/');\n          return $q.when(response);\n        },\n        function(error) { //fail\n          return $q.reject(error);\n        });\n    }\n\n    function acceptRevision(variantGroupId, revisionId) {\n      return VariantGroupRevisionsResource.acceptRevision({ variantGroupId: variantGroupId, revisionId: revisionId }).$promise.then(\n        function(response) {\n          cache.remove('/api/variant_groups/' + variantGroupId + '/suggested_changes/');\n          query(variantGroupId);\n          cache.remove('/api/variant_groups/' + variantGroupId + '/suggested_changes/' + revisionId);\n          get(variantGroupId, revisionId);\n          cache.remove('/api/variant_groups/' + variantGroupId );\n          VariantGroups.get(variantGroupId);\n\n          // flush/query all gene variant group caches with this variant group\n          _.each(response.gene_ids, function(id) {\n            cache.remove('/api/genes/' + id + '/variant_groups');\n            Genes.queryVariantGroups(id);\n          });\n          return $q.when(response);\n        },\n        function(error) {\n          return $q.reject(error);\n        });\n    }\n    function rejectRevision(variantGroupId, revisionId) {\n      return VariantGroupRevisionsResource.rejectRevision({ variantGroupId: variantGroupId, revisionId: revisionId }).$promise.then(\n        function(response) {\n          cache.remove('/api/variant_groups/' + response.id + '/suggested_changes/');\n          query(variantGroupId);\n          cache.remove('/api/variant_groups/' + response.id + '/suggested_changes/' + revisionId);\n          get(variantGroupId, revisionId);\n          return $q.when(response);\n        },\n        function(error) {\n          return $q.reject(error);\n        });\n    }\n\n    // VariantGroup Revisions Comments\n    function queryComments(variantGroupId, revisionId) {\n      return VariantGroupRevisionsResource.queryComments({ variantGroupId: variantGroupId, revisionId: revisionId }).$promise\n        .then(function(response) {\n          angular.copy(response, comments);\n          return response.$promise;\n        });\n    }\n    function getComment(variantGroupId, revisionId, commentId) {\n      return VariantGroupRevisionsResource.getComment({ variantGroupId: variantGroupId, revisionId: revisionId, commentId: commentId }).$promise\n        .then(function(response) {\n          angular.copy(response, comment);\n          return response.$promise;\n        });\n    }\n    function submitComment(reqObj) {\n      return VariantGroupRevisionsResource.submitComment(reqObj).$promise\n        .then(function(response) {\n          cache.remove('/api/variant_groups/' + reqObj.variantGroupId + '/suggested_changes/' + reqObj.revisionId + '/comments');\n          queryComments(reqObj.variantGroupId, reqObj.revisionId);\n          return response.$promise;\n        });\n    }\n    function updateComment(reqObj) {\n      return VariantGroupRevisionsResource.updateComment(reqObj).$promise\n        .then(function(response) {\n          cache.remove('/api/variant_groups/' + reqObj.variantGroupId + '/suggested_changes/' + reqObj.revisionId + '/comments');\n          return response.$promise;\n        });\n    }\n    function deleteComment(commentId) {\n      return VariantGroupRevisionsResource.deleteComment({ variantGroupId: parent.id, revisionId: item.id, commentId: commentId }).$promise\n        .then(function(response) {\n          cache.remove('/api/variant_groups/' + parent.id + '/suggested_changes/' + item.id + '/comments');\n          queryComments(parent.id, item.id);\n          return response.$promise;\n        });\n    }\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.services')\n    .factory('VariantGroupHistoryResource', VariantGroupHistoryResource)\n    .factory('VariantGroupHistory', VariantGroupHistoryService);\n\n  function VariantGroupHistoryResource($resource, $cacheFactory) {\n    var cache = $cacheFactory.get('$http');\n\n    // adding this interceptor to a route will remove cached record\n    //var cacheInterceptor = function(response) {\n    //  cache.remove(response.config.url);\n    //  return response.$promise;\n    //};\n    return $resource('/api/variants/:variantId/revisions',\n      {\n        variantId: '@variantId'\n      },\n      {\n        // Base Variant History Resources\n        query: {\n          method: 'GET',\n          isArray: true,\n          cache: cache\n        },\n        last: {\n          method: 'GET',\n          isArray: false,\n          cache: cache\n        },\n\n        // Base Variant History Refresh\n        queryFresh: {\n          method: 'GET',\n          isArray: true,\n          cache: false\n        },\n        lastFresh: {\n          method: 'GET',\n          isArray: false,\n          cache: false\n        }\n      }\n    );\n  }\n\n  function VariantGroupHistoryService(VariantGroupHistoryResource, $q) {\n    // Variant History Base\n    var item = {};\n    var collection = [];\n\n    return {\n      initBase: initBase,\n      data: {\n        item: item,\n        collection: collection,\n      },\n\n      // Variant History Base\n      query: query,\n      last: last,\n\n      // Variant History Base Refresh\n      queryFresh: queryFresh,\n      lastFresh: lastFresh\n    };\n\n    function initBase(variantId) {\n      return $q.all([\n        query(variantId)\n      ]);\n    }\n\n    // Variant History Base\n    function query(variantId) {\n      return VariantGroupHistoryResource.query({ variantId: variantId }).$promise\n        .then(function(response) {\n          angular.copy(response, collection);\n          return response.$promise;\n        });\n    }\n    function last(variantId) {\n      return VariantGroupHistoryResource.last({ variantId: variantId }).$promise\n        .then(function(response) {\n          angular.copy(response, item);\n          return response.$promise;\n        });\n    }\n\n    // Variant History Base Refresh\n    function queryFresh(variantId) {\n      return VariantGroupHistoryResource.queryFresh({ variantId: variantId }).$promise\n        .then(function(response) {\n          angular.copy(response, collection);\n          return response.$promise;\n        });\n    }\n    function lastFresh(variantId) {\n      return VariantGroupHistoryResource.lastFresh({ variantId: variantId }).$promise\n        .then(function(response) {\n          angular.copy(response, item);\n          return response.$promise;\n        });\n    }\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.services')\n    .factory('VariantsResource', VariantsResource)\n    .factory('Variants', VariantsService);\n\n  // @ngInject\n  function VariantsResource($resource, $cacheFactory) {\n    var cache = $cacheFactory.get('$http');\n\n    var cacheInterceptor = function(response) {\n      // console.log(['VariantsResource: removing', response.config.url, 'from $http cache.'].join(\" \"));\n      cache.remove(response.config.url);\n      return response.$promise;\n    };\n\n    return $resource('/api/variants/:variantId',\n      {\n        variantId: '@variantId'\n      },\n      {\n        // Base Variant Resources\n        query: {\n          method: 'GET',\n          isArray: false,\n          cache: cache\n        },\n        get: {\n          method: 'GET',\n          isArray: false,\n          cache: cache\n        },\n        update: {\n          method: 'PATCH',\n          interceptor: {\n            response: cacheInterceptor\n          }\n        },\n        delete: {\n          method: 'DELETE',\n          interceptor: {\n            response: cacheInterceptor\n          }\n        },\n        apply: {\n          method: 'PATCH',\n          cache: false\n        },\n\n        // Variant Collections\n        queryEvidence: {\n          method: 'GET',\n          url: '/api/variants/:variantId/evidence_items',\n          isArray: false,\n          cache: cache\n        },\n\n        // Variant Comments Resources\n        queryComments: {\n          method: 'GET',\n          url: '/api/variants/:variantId/comments',\n          isArray: true,\n          cache: cache\n        },\n        getComment: {\n          method: 'GET',\n          url: '/api/variants/:variantId/comments/:commentId',\n          params: {\n            variantId: '@variantId',\n            commentId: '@commentId'\n          },\n          isArray: false,\n          cache: cache\n        },\n        submitComment: {\n          method: 'POST',\n          url: '/api/variants/:variantId/comments',\n          params: {\n            variantId: '@variantId'\n          },\n          cache: false\n        },\n        updateComment: {\n          method: 'PATCH',\n          url: '/api/variants/:variantId/comments/:commentId',\n          params: {\n            variantId: '@variantId',\n            commentId: '@commentId'\n          },\n          cache: false\n        },\n        deleteComment: {\n          method: 'DELETE',\n          url: '/api/variants/:variantId/comments/:commentId',\n          params: {\n            variantId: '@variantId',\n            commentId: '@commentId'\n          },\n          cache: false\n        },\n        queryVariantTypes: {\n          method: 'GET',\n          url: '/api/variant_types',\n          params: {\n            name: '@name',\n            count: '@count',\n            page: '@page'\n          },\n          cache: false\n        }\n      }\n    );\n  }\n\n  // @ngInject\n  function VariantsService(VariantsResource, $q, $cacheFactory) {\n    var cache = $cacheFactory.get('$http');\n\n    // Base Variant and Variant Collection\n    var item = {};\n    var collection = [];\n\n    // Variant Collections\n    var evidence = [];\n    var comments = [];\n\n    return {\n      initBase: initBase,\n      initComments: initComments,\n      data: {\n        item: item,\n        collection: collection,\n        evidence: evidence,\n        comments: comments\n      },\n\n      // Variant Base\n      query: query,\n      get: get,\n      update: update,\n      delete: deleteItem,\n      apply: apply,\n\n      // Variant Collections\n      queryEvidence: queryEvidence,\n\n      // Variant Comments\n      queryComments: queryComments,\n      getComment: getComment,\n      submitComment: submitComment,\n      updateComment: updateComment,\n      deleteComment: deleteComment,\n\n      queryVariantTypes: queryVariantTypes\n    };\n\n    function initBase(variantId) {\n      return $q.all([\n        get(variantId),\n        queryEvidence(variantId)\n      ]);\n    }\n\n    function initComments(variantId) {\n      return $q.all([\n        queryComments(variantId)\n      ]);\n    }\n    // Variant Base\n    function query() {\n      return VariantsResource.query().$promise\n        .then(function(response) {\n          angular.copy(response.records, collection);\n          return response.$promise;\n        });\n    }\n    function get(variantId) {\n      return VariantsResource.get({variantId: variantId}).$promise\n        .then(function(response) {\n          angular.copy(response, item);\n          return response.$promise;\n        });\n    }\n    function update(reqObj) {\n      return VariantsResource.update(reqObj).$promise\n        .then(function(response) {\n          angular.copy(response, item);\n          return response.$promise;\n        });\n    }\n    function deleteItem(variantId) {\n      return VariantsResource.delete({variantId: variantId}).$promise\n        .then(function(response) {\n          item = null;\n          return response.$promise;\n        });\n    }\n    function apply(reqObj) {\n      return VariantsResource.apply(reqObj).$promise.then(\n        function(response) { // success\n          cache.remove('/api/variants/' + response.id);\n          get(reqObj.variantId);\n          return $q.when(response);\n        },\n        function(error) { // fail\n          return $q.reject(error);\n        });\n    }\n\n    // Variant Collections\n    function queryEvidence(variantId) {\n      return VariantsResource.queryEvidence({variantId: variantId}).$promise\n        .then(function(response) {\n          angular.copy(response.records, evidence);\n          return response.$promise;\n        });\n    }\n\n    // Variant Comments\n    function queryComments(variantId) {\n      return VariantsResource.queryComments({variantId: variantId}).$promise\n        .then(function(response) {\n          angular.copy(response, comments);\n          return response.$promise;\n        });\n    }\n    function getComment(variantId, commentId) {\n      return VariantsResource.getComment({variantId: variantId, commentId: commentId}).$promise\n        .then(function(response) {\n          return response.$promise;\n        });\n    }\n    function submitComment(reqObj) {\n      return VariantsResource.submitComment(reqObj).$promise\n        .then(function(response) {\n          cache.remove('/api/variants/' + reqObj.variantId + '/comments');\n          queryComments(reqObj.variantId);\n          return response.$promise;\n        });\n    }\n    function updateComment(reqObj) {\n      return VariantsResource.updateComment(reqObj).$promise\n        .then(function(response) {\n          cache.remove('/api/variants/' + reqObj.variantId + '/comments/' + reqObj.id);\n          cache.remove('/api/variants/' + reqObj.variantId + '/comments');\n          queryComments(reqObj.variantId);\n          return response.$promise;\n        });\n    }\n    function deleteComment(commentId) {\n      return VariantsResource.deleteComment({variantId: item.id, commentId: commentId}).$promise\n        .then(function(response) {\n          cache.remove('/api/variants/' + item.id + '/comments');\n          queryComments(item.id);\n          return response.$promise;\n        });\n    }\n    function queryVariantTypes(reqObj) {\n      return VariantsResource.queryVariantTypes(reqObj).$promise\n        .then(function(response) {\n          return response.$promise;\n        });\n    }\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.services')\n    .factory('VariantRevisionsResource', VariantRevisionsResource)\n    .factory('VariantRevisions', VariantRevisionsService);\n\n  function VariantRevisionsResource($resource, $cacheFactory) {\n    var cache = $cacheFactory.get('$http');\n\n    // adding this interceptor to a route will remove cached record\n    var cacheResponseInterceptor = function(response) {\n      cache.remove(response.config.url);\n      return response.$promise;\n    };\n\n    return $resource('/api/variants/:variantId/suggested_changes/:revisionId',\n      {\n        variantId: '@variantId',\n        revisionId: '@revisionId'\n      },\n      {\n        // Base Variant Revisions Resources\n        query: {\n          method: 'GET',\n          isArray: true,\n          cache: cache\n        },\n        get: {\n          method: 'GET',\n          isArray: false,\n          cache: cache\n        },\n        getPendingFields: {\n          method: 'GET',\n          url: '/api/variants/:variantId/fields_with_pending_changes',\n          params: {\n            variantId: '@variantId'\n          },\n          cache: false\n        },\n        submitRevision: {\n          method: 'POST',\n          cache: false\n        },\n        acceptRevision: {\n          method: 'POST',\n          url: '/api/variants/:variantId/suggested_changes/:revisionId/accept',\n          params: {\n            variantId: '@variantId',\n            revisionId: '@revisionId',\n            force: true\n          },\n          cache: false\n        },\n        rejectRevision: {\n          method: 'POST',\n          url: '/api/variants/:variantId/suggested_changes/:revisionId/reject',\n          params: {\n            variantId: '@variantId',\n            revisionId: '@revisionId',\n            force: true\n          },\n          cache: cache\n        },\n\n        // Variant Revisions Comments Resources\n        submitComment: {\n          method: 'POST',\n          url: '/api/variants/:variantId/suggested_changes/:revisionId/comments',\n          params: {\n            variantId: '@variantId',\n            revisionId: '@revisionId'\n          },\n          cache: false\n        },\n        updateComment: {\n          method: 'PATCH',\n          url: '/api/variants/:variantId/suggested_changes/:revisionId/comments/:commentId',\n          params: {\n            variantId: '@variantId',\n            revisionId: '@revisionId',\n            commentId: '@commentId'\n          },\n          interceptor: {\n            response: cacheResponseInterceptor\n          }\n        },\n        queryComments: {\n          method: 'GET',\n          url: '/api/variants/:variantId/suggested_changes/:revisionId/comments',\n          params: {\n            variantId: '@variantId',\n            revisionId: '@revisionId'\n          },\n          isArray: true,\n          cache: cache\n        },\n        getComment: {\n          method: 'GET',\n          url: '/api/variants/:variantId/suggested_changes/:revisionId/comments/:commentId',\n          params: {\n            variantId: '@variantId',\n            revisionId: '@revisionId',\n            commentId: '@commentId'\n          },\n          isArray: false,\n          cache: cache\n        },\n        deleteComment: {\n          method: 'DELETE',\n          url: '/api/variants/:variantId/suggested_changes/:revisionId/comments/:commentId',\n          params: {\n            variantId: '@variantId',\n            revisionId: '@revisionId',\n            commentId: '@commentId'\n          },\n          cache: false\n        }\n      }\n    );\n  }\n\n  function VariantRevisionsService(VariantRevisionsResource,\n                                   Variants,\n                                   Genes,\n                                   $cacheFactory,\n                                   $q) {\n    // fetch variants cache, need to delete variant record when revision is submitted\n    var cache = $cacheFactory.get('$http');\n\n    // Base Variant Revision and Variant Revisions Collection\n    var item = {};\n    var parent = Variants.data.item;\n    var collection = [];\n\n    // Variant Revisions Comments\n    var comment = {};\n    var comments = [];\n\n    var pendingFields = {};\n\n    return {\n      initBase: initBase,\n      initRevisions: initRevisions,\n      initComments: initComments,\n      data: {\n        item: item,\n        parent: parent,\n        collection: collection,\n        comment: comment,\n        comments: comments,\n        pendingFields: pendingFields\n      },\n\n      // Variant Revisions Base\n      query: query,\n      get: get,\n      getPendingFields: getPendingFields,\n      submitRevision: submitRevision,\n      acceptRevision: acceptRevision,\n      rejectRevision: rejectRevision,\n\n      // Variant Revisions Comments\n      queryComments: queryComments,\n      getComment: getComment,\n      submitComment: submitComment,\n      updateComment: updateComment,\n      deleteComment: deleteComment\n    };\n\n    function initBase(variantId, revisionId) {\n      return $q.all([\n        query(variantId, revisionId)\n      ]);\n    }\n\n    function initRevisions(variantId) {\n      return $q.all([\n        query(variantId)\n      ]);\n    }\n\n    function initComments(variantId, revisionId) {\n      return $q.all([\n        query(variantId, revisionId)\n      ]);\n    }\n\n    // Variant Revisions Base\n    function query(variantId) {\n      return VariantRevisionsResource.query({ variantId: variantId }).$promise\n        .then(function(response) {\n          angular.copy(response, collection);\n          return response.$promise;\n        });\n    }\n    function get(variantId, revisionId) {\n      return VariantRevisionsResource.get({ variantId: variantId, revisionId: revisionId }).$promise\n        .then(function(response) {\n          angular.copy(response, item);\n          return response.$promise;\n        });\n    }\n\n    function getPendingFields(variantId) {\n      return VariantRevisionsResource.getPendingFields({ variantId: variantId }).$promise\n        .then(function(response) {\n          angular.copy(response.toJSON(), pendingFields);\n          return response.$promise;\n        });\n    }\n\n    function submitRevision(reqObj) {\n      return VariantRevisionsResource.submitRevision(reqObj).$promise.then(\n        function(response) { // success\n          cache.remove('/api/variants/' + reqObj.id + '/suggested_changes/');\n          return $q.when(response);\n        },\n        function(error) { //fail\n          return $q.reject(error);\n        });\n    }\n\n    function acceptRevision(variantId, revisionId) {\n      return VariantRevisionsResource.acceptRevision({\n        variantId: variantId,\n        revisionId: revisionId\n      }).$promise.then(\n        function(response) {\n          // flush variant cache and refresh\n          cache.remove('/api/variants/' + variantId );\n          Variants.get(variantId);\n\n          // flush variant suggested_changes and refresh\n          cache.remove('/api/variants/' + variantId + '/suggested_changes/');\n          query(variantId);\n\n          // flush revision and refresh\n          cache.remove('/api/variants/' + variantId + '/suggested_changes/' + revisionId);\n          get(variantId, revisionId);\n\n          // flush gene variants and refresh (for variant menu)\n          cache.remove('/api/genes/' + response.gene_id + '/variants');\n          Genes.queryVariants(response.gene_id);\n          return $q.when(response);\n        },\n        function(error) {\n          return $q.reject(error);\n        });\n    }\n\n    function rejectRevision(variantId, revisionId) {\n      return VariantRevisionsResource.rejectRevision({ variantId: variantId, revisionId: revisionId }).$promise.then(\n        function(response) {\n          // flush variant suggested_changes and refresh\n          cache.remove('/api/variants/' + variantId + '/suggested_changes/');\n          query(variantId);\n\n          // flush revision and refresh\n          cache.remove('/api/variants/' + variantId + '/suggested_changes/' + revisionId);\n          get(variantId, revisionId);\n\n          return $q.when(response);\n        },\n        function(error) {\n          return $q.reject(error);\n        });\n    }\n\n    // Variant Revisions Comments\n    function queryComments(variantId, revisionId) {\n      return VariantRevisionsResource.queryComments({ variantId: variantId, revisionId: revisionId }).$promise\n        .then(function(response) {\n          angular.copy(response, comments);\n          return response.$promise;\n        });\n    }\n    function getComment(variantId, revisionId, commentId) {\n      return VariantRevisionsResource.getComment({ variantId: variantId, revisionId: revisionId, commentId: commentId }).$promise\n        .then(function(response) {\n          return response.$promise;\n        });\n    }\n    function submitComment(reqObj) {\n      return VariantRevisionsResource.submitComment(reqObj).$promise\n        .then(function(response) {\n          cache.remove('/api/variants/' + reqObj.variantId + '/suggested_changes/' + reqObj.revisionId + '/comments');\n          queryComments(reqObj.variantId, reqObj.revisionId);\n          return response.$promise;\n        });\n    }\n    function updateComment(reqObj) {\n      return VariantRevisionsResource.updateComment(reqObj).$promise\n        .then(function(response) {\n          cache.remove('/api/variants/' + reqObj.variantId + '/suggested_changes/' + reqObj.revisionId + '/comments/' + reqObj.commentId );\n          queryComments(reqObj.variantId, reqObj.revisionId);\n          return response.$promise;\n        });\n    }\n    function deleteComment(commentId) {\n      return VariantRevisionsResource.deleteComment({ variantId: parent.id, revisionId: item.id, commentId: commentId }).$promise\n        .then(function(response) {\n          cache.remove('/api/variants/' + parent.id + '/suggested_changes/' + item.id + '/comments');\n          queryComments(parent.id, item.id);\n          return response.$promise;\n        });\n    }\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.services')\n    .factory('VariantHistoryResource', VariantHistoryResource)\n    .factory('VariantHistory', VariantHistoryService);\n\n  function VariantHistoryResource($resource, $cacheFactory) {\n    var cache = $cacheFactory.get('$http');\n\n    //// adding this interceptor to a route will remove cached record\n    //var cacheInterceptor = function(response) {\n    //  cache.remove(response.config.url);\n    //  return response.$promise;\n    //};\n    return $resource('/api/variants/:variantId/revisions',\n      {\n        variantId: '@variantId'\n      },\n      {\n        // Base Variant History Resources\n        query: {\n          method: 'GET',\n          isArray: true,\n          cache: cache\n        },\n        last: {\n          method: 'GET',\n          isArray: false,\n          cache: cache\n        },\n\n        // Base Variant History Refresh\n        queryFresh: {\n          method: 'GET',\n          isArray: true,\n          cache: false\n        },\n        lastFresh: {\n          method: 'GET',\n          isArray: false,\n          cache: false\n        }\n      }\n    );\n  }\n\n  function VariantHistoryService(VariantHistoryResource, $q) {\n    // Variant History Base\n    var item = {};\n    var collection = [];\n\n    return {\n      initBase: initBase,\n      data: {\n        item: item,\n        collection: collection,\n      },\n\n      // Variant History Base\n      query: query,\n      last: last,\n\n      // Variant History Base Refresh\n      queryFresh: queryFresh,\n      lastFresh: lastFresh\n    };\n\n    function initBase(variantId) {\n      return $q.all([\n        query(variantId)\n      ]);\n    }\n\n    // Variant History Base\n    function query(variantId) {\n      return VariantHistoryResource.query({ variantId: variantId }).$promise\n        .then(function(response) {\n          angular.copy(response, collection);\n          return response.$promise;\n        });\n    }\n    function last(variantId) {\n      return VariantHistoryResource.last({ variantId: variantId }).$promise\n        .then(function(response) {\n          angular.copy(response, item);\n          return response.$promise;\n        });\n    }\n\n    // Variant History Base Refresh\n    function queryFresh(variantId) {\n      return VariantHistoryResource.queryFresh({ variantId: variantId }).$promise\n        .then(function(response) {\n          angular.copy(response, collection);\n          return response.$promise;\n        });\n    }\n    function lastFresh(variantId) {\n      return VariantHistoryResource.lastFresh({ variantId: variantId }).$promise\n        .then(function(response) {\n          angular.copy(response, item);\n          return response.$promise;\n        });\n    }\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.services')\n    .factory('EvidenceResource', EvidenceResource)\n    .factory('Evidence', EvidenceService);\n\n  // @ngInject\n  function EvidenceResource($resource, $cacheFactory) {\n    var cache = $cacheFactory.get('$http');\n\n    var cacheInterceptor = function(response) {\n      console.log(['EvidenceResource: removing', response.config.url, 'from $http cache.'].join(' '));\n      cache.remove(response.config.url);\n      return response.$promise;\n    };\n\n    return $resource('/api/evidence_items/:evidenceId',\n      {\n        evidenceId: '@evidenceId'\n      },\n      {\n        // Base Evidence Resources\n        query: {\n          method: 'GET',\n          isArray: true,\n          cache: cache\n        },\n        get: { // get a single evidence\n          method: 'GET',\n          isArray: false,\n          cache: cache\n        },\n        update: {\n          method: 'PATCH',\n          interceptor: {\n            response: cacheInterceptor\n          }\n        },\n        delete: {\n          method: 'DELETE',\n          interceptor: {\n            response: cacheInterceptor\n          }\n        },\n        add: {\n          method: 'POST',\n          cache: false\n        },\n        apply: {\n          method: 'PATCH',\n          cache: false\n        },\n        accept: {\n          url: '/api/evidence_items/:evidenceId/accept',\n          method: 'POST',\n          cache: false\n        },\n        reject: {\n          url: '/api/evidence_items/:evidenceId/reject',\n          method: 'POST',\n          cache: false\n        },\n\n        // Evidence Comments Resources\n        queryComments: {\n          method: 'GET',\n          url: '/api/evidence_items/:evidenceId/comments',\n          isArray: true,\n          cache: cache\n        },\n        getComment: {\n          method: 'GET',\n          url: '/api/evidence_items/:evidenceId/comments/:commentId',\n          params: {\n            evidenceId: '@evidenceId',\n            commentId: '@commentId'\n          },\n          isArray: false,\n          cache: cache\n        },\n\n        submitComment: {\n          method: 'POST',\n          url: '/api/evidence_items/:evidenceId/comments',\n          params: {\n            evidenceId: '@evidenceId'\n          },\n          cache: false\n        },\n        updateComment: {\n          method: 'PATCH',\n          url: '/api/evidence_items/:evidenceId/comments/:commentId',\n          params: {\n            evidenceId: '@evidenceId',\n            commentId: '@commentId'\n          },\n          cache: false\n        },\n        deleteComment: {\n          method: 'DELETE',\n          url: '/api/evidence_items/:evidenceId/comments/:commentId',\n          params: {\n            evidenceId: '@evidenceId',\n            commentId: '@commentId'\n          },\n          cache: false\n        }\n      }\n    );\n  }\n\n  // @ngInject\n  function EvidenceService(EvidenceResource, Variants, $q, $cacheFactory) {\n    var cache = $cacheFactory.get('$http');\n\n    // Base Evidence and Evidence Collection\n    var item = {};\n    var collection = [];\n\n    // Evidence Collections\n    var comments = [];\n\n    return {\n      initBase: initBase,\n      initComments: initComments,\n      data: {\n        item: item,\n        collection: collection,\n        comments: comments\n      },\n\n      // Evidence Base\n      add: add,\n      query: query,\n      get: get,\n      update: update,\n      delete: deleteItem,\n      apply: apply,\n      accept: accept,\n      reject: reject,\n\n      // Evidence Comments\n      queryComments: queryComments,\n      getComment: getComment,\n      submitComment: submitComment,\n      updateComment: updateComment,\n      deleteComment: deleteComment\n    };\n\n    function initBase(evidenceId) {\n      return $q.all([\n        get(evidenceId)\n      ]);\n    }\n\n    function initComments(evidenceId) {\n      return $q.all([\n        queryComments(evidenceId)\n      ]);\n    }\n    // Evidence Base\n    function add(reqObj) {\n      return EvidenceResource.add(reqObj).$promise\n        .then(function(response) {\n          // flush cached variant and evidence item lists\n          cache.remove('/api/variants/' + response.variant.id);\n          cache.remove('/api/variants/' + response.variant.id + '/evidence_items');\n          return response.$promise;\n        });\n    }\n    function accept(evidenceId, variantId) {\n      return EvidenceResource.accept({ evidenceId: evidenceId }).$promise\n        .then(function(response) {\n          // flush cached variant and evidence item lists\n          cache.remove('/api/evidence_items/' + response.id);\n          cache.remove('/api/variants/' + variantId);\n          cache.remove('/api/variants/' + variantId + '/evidence_items');\n          get(response.id);\n          Variants.get(variantId);\n          return response.$promise;\n        });\n    }\n    function reject(evidenceId, variantId) {\n      return EvidenceResource.reject({ evidenceId: evidenceId }).$promise\n        .then(function(response) {\n          // flush cached variant and evidence item lists\n          cache.remove('/api/evidence_items/' + response.id);\n          cache.remove('/api/variants/' + variantId);\n          cache.remove('/api/variants/' + variantId + '/evidence_items');\n          get(response.id);\n          Variants.get(variantId);\n          return response.$promise;\n        });\n    }\n    function query() {\n      return EvidenceResource.query().$promise\n        .then(function(response) {\n          angular.copy(response, collection);\n          return response.$promise;\n        });\n    }\n    function get(evidenceId) {\n      return EvidenceResource.get({evidenceId: evidenceId}).$promise\n        .then(function(response) {\n          angular.copy(response, item);\n          return response.$promise;\n        });\n    }\n    function update(reqObj) {\n      return EvidenceResource.update(reqObj).$promise\n        .then(function(response) {\n          angular.copy(response, item);\n          return response.$promise;\n        });\n    }\n    function deleteItem(evidenceId) {\n      return EvidenceResource.delete({evidenceId: evidenceId}).$promise\n        .then(function(response) {\n          item = null;\n          return response.$promise;\n        });\n    }\n    function apply(reqObj) {\n      return EvidenceResource.apply(reqObj).$promise.then(\n        function(response) { // success\n          cache.remove('/api/evidence_items/' + response.id);\n          get(reqObj.evidenceId);\n          return $q.when(response);\n        },\n        function(error) { // fail\n          return $q.reject(error);\n        });\n    }\n\n    // Evidence Comments\n    function queryComments(evidenceId) {\n      return EvidenceResource.queryComments({evidenceId: evidenceId}).$promise\n        .then(function(response) {\n          angular.copy(response, comments);\n          return response.$promise;\n        });\n    }\n    function getComment(evidenceId, commentId) {\n      return EvidenceResource.getComment({evidenceId: evidenceId, commentId: commentId}).$promise\n        .then(function(response) {\n          return response.$promise;\n        });\n    }\n    function submitComment(reqObj) {\n      return EvidenceResource.submitComment(reqObj).$promise\n        .then(function(response) {\n          cache.remove('/api/evidence_items/' + reqObj.evidenceId + '/comments');\n          queryComments(reqObj.evidenceId);\n          return response.$promise;\n        });\n    }\n    function updateComment(reqObj) {\n      return EvidenceResource.updateComment(reqObj).$promise\n        .then(function(response) {\n          cache.remove('/api/evidence_items/' + reqObj.evidenceId + '/comments/' + reqObj.commentId);\n          queryComments(reqObj.evidenceId);\n          return response.$promise;\n        });\n    }\n    function deleteComment(commentId) {\n      return EvidenceResource.deleteComment({evidenceId: item.id, commentId: commentId}).$promise\n        .then(function(response) {\n          cache.remove('/api/evidence_items/' + item.id + '/comments');\n          queryComments(item.id);\n          return response.$promise;\n        });\n    }\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.services')\n    .factory('EvidenceRevisionsResource', EvidenceRevisionsResource)\n    .factory('EvidenceRevisions', EvidenceRevisionsService);\n\n  function EvidenceRevisionsResource($resource, $cacheFactory) {\n    var cache = $cacheFactory.get('$http');\n\n    // adding this interceptor to a route will remove cached record\n    var cacheResponseInterceptor = function(response) {\n      cache.remove(response.config.url);\n      return response.$promise;\n    };\n\n    return $resource('/api/evidence_items/:evidenceId/suggested_changes/:revisionId',\n      {\n        evidenceId: '@evidenceId',\n        revisionId: '@revisionId'\n      },\n      {\n        // Base Evidence Revisions Resources\n        query: {\n          method: 'GET',\n          isArray: true,\n          cache: cache\n        },\n        get: {\n          method: 'GET',\n          isArray: false,\n          cache: cache\n        },\n        getPendingFields: {\n          method: 'GET',\n          url: '/api/evidence_items/:evidenceId/fields_with_pending_changes',\n          params: {\n            evidenceId: '@evidenceId'\n          },\n          cache: false\n        },\n        submitRevision: {\n          method: 'POST',\n          cache: false\n        },\n        acceptRevision: {\n          method: 'POST',\n          url: '/api/evidence_items/:evidenceId/suggested_changes/:revisionId/accept',\n          params: {\n            evidenceId: '@evidenceId',\n            revisionId: '@revisionId',\n            force: true\n          },\n          cache: false\n        },\n        rejectRevision: {\n          method: 'POST',\n          url: '/api/evidence_items/:evidenceId/suggested_changes/:revisionId/reject',\n          params: {\n            evidenceId: '@evidenceId',\n            revisionId: '@revisionId',\n            force: true\n          },\n          cache: cache\n        },\n\n        // Base Evidence Revisions Refresh\n        queryFresh: {\n          method: 'GET',\n          isArray: true,\n          cache: false\n        },\n        getFresh: {\n          method: 'GET',\n          isArray: false,\n          cache: false\n        },\n\n        // Evidence Revisions Comments Resources\n        submitComment: {\n          method: 'POST',\n          url: '/api/evidence_items/:evidenceId/suggested_changes/:revisionId/comments',\n          params: {\n            evidenceId: '@evidenceId',\n            revisionId: '@revisionId'\n          },\n          cache: false\n        },\n        updateComment: {\n          method: 'PATCH',\n          url: '/api/evidence_items/:evidenceId/suggested_changes/:revisionId/comments/:commentId',\n          params: {\n            evidenceId: '@evidenceId',\n            revisionId: '@revisionId',\n            commentId: '@commentId'\n          },\n          interceptor: {\n            response: cacheResponseInterceptor\n          }\n        },\n        queryComments: {\n          method: 'GET',\n          url: '/api/evidence_items/:evidenceId/suggested_changes/:revisionId/comments',\n          params: {\n            evidenceId: '@evidenceId',\n            revisionId: '@revisionId'\n          },\n          isArray: true,\n          cache: cache\n        },\n        getComment: {\n          method: 'GET',\n          url: '/api/evidence_items/:evidenceId/suggested_changes/:revisionId/comments/:commentId',\n          params: {\n            evidenceId: '@evidenceId',\n            revisionId: '@revisionId',\n            commentId: '@commentId'\n          },\n          isArray: false,\n          cache: cache\n        },\n        deleteComment: {\n          method: 'DELETE',\n          url: '/api/evidence_items/:evidenceId/suggested_changes/:revisionId/comments/:commentId',\n          params: {\n            evidenceId: '@evidenceId',\n            revisionId: '@revisionId',\n            commentId: '@commentId'\n          },\n          cache: false\n        },\n\n        // Evidence Revisions Comments Resources Refresh\n        queryCommentsFresh: {\n          method: 'GET',\n          url: '/api/evidence_items/:evidenceId/suggested_changes/:revisionId/comments',\n          params: {\n            evidenceId: '@evidenceId',\n            revisionId: '@revisionId'\n          },\n          isArray: true,\n          cache: false\n        },\n        getCommentFresh: {\n          method: 'GET',\n          url: '/api/evidence_items/:evidenceId/suggested_changes/:revisionId/comments/:commentId',\n          params: {\n            evidenceId: '@evidenceId',\n            revisionId: '@revisionId',\n            commentId: '@commentId'\n          },\n          isArray: false,\n          cache: false\n        }\n      }\n    );\n  }\n\n  function EvidenceRevisionsService(\n    $cacheFactory,\n    $q,\n    Variants,\n    EvidenceRevisionsResource,\n    Evidence) {\n    // fetch evidence cache, need to delete evidence record when revision is submitted\n    var cache = $cacheFactory.get('$http');\n\n    // Base Evidence Revision and Evidence Revisions Collection\n    var item = {};\n    var parent = Evidence.data.item;\n    var collection = [];\n\n    // Evidence Revisions Comments\n    var comment = {};\n    var comments = [];\n\n    var pendingFields = {};\n\n    return {\n      initBase: initBase,\n      initRevisions: initRevisions,\n      initComments: initComments,\n      data: {\n        item: item,\n        parent: parent,\n        collection: collection,\n        comment: comment,\n        comments: comments,\n        pendingFields: pendingFields\n      },\n\n      // Evidence Revisions Base\n      query: query,\n      get: get,\n      getPendingFields: getPendingFields,\n      submitRevision: submitRevision,\n      acceptRevision: acceptRevision,\n      rejectRevision: rejectRevision,\n\n      // Evidence Revisions Base Refresh\n      queryFresh: queryFresh,\n      getFresh: getFresh,\n\n      // Evidence Revisions Comments\n      queryComments: queryComments,\n      getComment: getComment,\n      submitComment: submitComment,\n      updateComment: updateComment,\n      deleteComment: deleteComment,\n\n      // Evidence Revisions Comments Refresh\n      queryCommentsFresh: queryCommentsFresh,\n      getCommentFresh: getCommentFresh\n    };\n\n    function initBase(evidenceId, revisionId) {\n      return $q.all([\n        query(evidenceId, revisionId)\n      ]);\n    }\n\n    function initRevisions(evidenceId) {\n      console.log('EvidenceRevisionsService.initRevisions called.');\n      return $q.all([\n        query(evidenceId)\n      ]);\n    }\n\n    function initComments(evidenceId, revisionId) {\n      return $q.all([\n        query(evidenceId, revisionId)\n      ]);\n    }\n\n    // Evidence Revisions Base\n    function query(evidenceId) {\n      return EvidenceRevisionsResource.query({ evidenceId: evidenceId }).$promise\n        .then(function(response) {\n          angular.copy(response, collection);\n          return response.$promise;\n        });\n    }\n    function get(evidenceId, revisionId) {\n      return EvidenceRevisionsResource.get({ evidenceId: evidenceId, revisionId: revisionId }).$promise\n        .then(function(response) {\n          angular.copy(response, item);\n          return response.$promise;\n        });\n    }\n\n    function getPendingFields(evidenceId) {\n      return EvidenceRevisionsResource.getPendingFields({ evidenceId: evidenceId }).$promise\n        .then(function(response) {\n          angular.copy(response.toJSON(), pendingFields);\n          return response.$promise;\n        });\n    }\n\n    function submitRevision(reqObj) {\n      return EvidenceRevisionsResource.submitRevision(reqObj).$promise.then(\n        function(response) { // success\n          cache.remove('/api/evidence_items/' + reqObj.id + '/suggested_changes/');\n          return $q.when(response);\n        },\n        function(error) { //fail\n          return $q.reject(error);\n        });\n    }\n\n    function acceptRevision(evidenceId, revisionId, variantId) {\n      return EvidenceRevisionsResource.acceptRevision({ evidenceId: evidenceId, revisionId: revisionId }).$promise.then(\n        function(response) {\n          // flush evidence_item cache and refresh, in order to update the variant summary evidence grid\n          cache.remove('/api/variants/' + variantId);\n          cache.remove('/api/variants/' + variantId + '/evidence_items');\n          Variants.queryEvidence(variantId);\n          // refresh suggested changes\n          cache.remove('/api/evidence_items/' + evidenceId + '/suggested_changes/');\n          query(evidenceId);\n          // refresh revision\n          cache.remove('/api/evidence_items/' + evidenceId + '/suggested_changes/' + revisionId);\n          // refresh evidence item\n          get(evidenceId, revisionId);\n          cache.remove('/api/evidence_items/' + evidenceId );\n          Evidence.get(evidenceId);\n          return $q.when(response);\n        },\n        function(error) {\n          return $q.reject(error);\n        });\n    }\n    function rejectRevision(evidenceId, revisionId) {\n      return EvidenceRevisionsResource.rejectRevision({ evidenceId: evidenceId, revisionId: revisionId }).$promise.then(\n        function(response) {\n          cache.remove('/api/evidence_items/' + response.id + '/suggested_changes/');\n          query(evidenceId);\n          cache.remove('/api/evidence_items/' + response.id + '/suggested_changes/' + revisionId);\n          get(evidenceId, revisionId);\n          return $q.when(response);\n        },\n        function(error) {\n          return $q.reject(error);\n        });\n    }\n\n    // Evidence Revisions Base Refresh\n    function queryFresh(evidenceId) { // works\n      return EvidenceRevisionsResource.queryFresh({ evidenceId: evidenceId }).$promise\n        .then(function(response) {\n          angular.copy(response, collection);\n          return response.$promise;\n        });\n    }\n    function getFresh(evidenceId, revisionId) {\n      return EvidenceRevisionsResource.getFresh({ evidenceId: evidenceId, revisionId: revisionId }).$promise\n        .then(function(response) {\n          angular.copy(response, item);\n          return response.$promise;\n        });\n    }\n\n    // Evidence Revisions Comments\n    function queryComments(evidenceId, revisionId) {\n      return EvidenceRevisionsResource.queryComments({ evidenceId: evidenceId, revisionId: revisionId }).$promise\n        .then(function(response) {\n          angular.copy(response, comments);\n          return response.$promise;\n        });\n    }\n    function getComment(evidenceId, revisionId, commentId) {\n      return EvidenceRevisionsResource.getComment({ evidenceId: evidenceId, revisionId: revisionId, commentId: commentId }).$promise\n        .then(function(response) {\n          angular.copy(response, comment);\n          return response.$promise;\n        });\n    }\n    function submitComment(reqObj) {\n      return EvidenceRevisionsResource.submitComment(reqObj).$promise\n        .then(function(response) {\n          queryCommentsFresh(reqObj.evidenceId, reqObj.revisionId);\n          return response.$promise;\n        });\n    }\n    function updateComment(reqObj) {\n      return EvidenceRevisionsResource.updateComment(reqObj).$promise\n        .then(function(response) {\n          angular.copy(response, comment);\n          getCommentFresh(reqObj);\n          return response.$promise;\n        });\n    }\n    function deleteComment(commentId) {\n      return EvidenceRevisionsResource.deleteComment({ evidenceId: parent.id, revisionId: item.id, commentId: commentId }).$promise\n        .then(function(response) {\n          cache.remove('/api/evidence_items/' + parent.id + '/suggested_changes/' + item.id + '/comments');\n          queryComments(parent.id, item.id);\n          return response.$promise;\n        });\n    }\n\n    // Evidence Revisions Comments Refresh\n    function queryCommentsFresh(evidenceId, revisionId) {\n      return EvidenceRevisionsResource.queryCommentsFresh({ evidenceId: evidenceId, revisionId: revisionId }).$promise\n        .then(function(response) {\n          angular.copy(response, comments);\n          return response.$promise;\n        });\n    }\n    function getCommentFresh(evidenceId, revisionId, commentId) {\n      return EvidenceRevisionsResource.getCommentFresh({ evidenceId: evidenceId, revisionId: revisionId, commentId: commentId }).$promise\n        .then(function(response) {\n          angular.copy(response   , comment);\n          return response.$promise;\n        });\n    }\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.services')\n    .factory('EvidenceHistoryResource', EvidenceHistoryResource)\n    .factory('EvidenceHistory', EvidenceHistoryService);\n\n  function EvidenceHistoryResource($resource, $cacheFactory) {\n    var cache = $cacheFactory.get('$http');\n\n    // adding this interceptor to a route will remove cached record\n    //var cacheInterceptor = function(response) {\n    //  cache.remove(response.config.url);\n    //  return response.$promise;\n    //};\n    return $resource('/api/evidence_items/:evidenceId/revisions',\n      {\n        evidenceId: '@evidenceId'\n      },\n      {\n        // Base Evidence Revisions Resources\n        query: {\n          method: 'GET',\n          isArray: true,\n          cache: cache\n        },\n        last: {\n          method: 'GET',\n          isArray: false,\n          cache: cache\n        },\n\n        // Base Evidence History Refresh\n        queryFresh: {\n          method: 'GET',\n          isArray: true,\n          cache: false\n        },\n        lastFresh: {\n          method: 'GET',\n          isArray: false,\n          cache: false\n        }\n      }\n    );\n  }\n\n  function EvidenceHistoryService(EvidenceHistoryResource, $q) {\n    // Evidence History Base\n    var item = {};\n    var collection = [];\n\n    return {\n      initBase: initBase,\n      data: {\n        item: item,\n        collection: collection\n      },\n\n      // Evidence History Base\n      query: query,\n      last: last,\n\n      // Evidence History Base Refresh\n      queryFresh: queryFresh,\n      lastFresh: lastFresh\n    };\n\n    function initBase(evidenceId) {\n      return $q.all([\n        query(evidenceId)\n      ]);\n    }\n\n    // Evidence History Base\n    function query(evidenceId) {\n      return EvidenceHistoryResource.query({ evidenceId: evidenceId }).$promise\n        .then(function(response) {\n          angular.copy(response, collection);\n          return response.$promise;\n        });\n    }\n    function last(evidenceId) {\n      return EvidenceHistoryResource.last({ evidenceId: evidenceId }).$promise\n        .then(function(response) {\n          angular.copy(response, item);\n          return response.$promise;\n        });\n    }\n\n    // Evidence History Base Refresh\n    function queryFresh(evidenceId) {\n      return EvidenceHistoryResource.queryFresh({ evidenceId: evidenceId }).$promise\n        .then(function(response) {\n          angular.copy(response, collection);\n          return response.$promise;\n        });\n    }\n    function lastFresh(evidenceId) {\n      return EvidenceHistoryResource.lastFresh({ evidenceId: evidenceId }).$promise\n        .then(function(response) {\n          angular.copy(response, item);\n          return response.$promise;\n        });\n    }\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.services')\n    .constant('ConfigService', {\n      serverUrl: 'http://127.0.0.1:3000/',\n      mainMenuItems: [\n        {\n          label: 'About',\n          state: 'about'\n        },\n        {\n          label: 'Participate',\n          state: 'participate'\n        },\n        {\n          label: 'Community',\n          state: 'community.main'\n        },\n        {\n          label: 'Help',\n          state: 'help.introduction'\n        },\n        {\n          label: 'FAQ',\n          state: 'faq'\n        }\n      ],\n      footerMenuItems: [\n        {\n          label: 'Glossary of Terms',\n          state: 'glossary'\n        },\n        {\n          label: 'API Documentation',\n          url: 'https://genome.github.io/civic-api-docs/'\n        },\n        {\n          label: 'Data Releases',\n          state: 'releases'\n        },\n        {\n          label: 'Presentation Graphics',\n          state: 'graphics'\n        },        \n        {\n          label: 'Contact',\n          state: 'contact'\n        }\n      ],\n      evidenceAttributeDescriptions: {\n        variant_origin: {\n          'Somatic Mutation': 'Variant is a mutation, found only in tumor cells, having arisen in a specific tissue (non-germ cell), and is not expected to be inherited or passed to offspring.',\n          'Germline Mutation': 'Variant is a mutation, found in every cell, not restricted to tumor/diseased cells, is expected to have arisen de novo in the germ cells responsible for the current generation or only very recent generations (e.g., close family members), and is not thought to exist in the population at large.',\n          'Germline Polymorphism': 'Variant is found in every cell, not restricted to tumor/diseased cells, and thought to represent common (or relatively rare) variation in the population at large.',\n          'Unknown': 'The variant origin is uncertain based on the available evidence.',\n          'N/A': 'The variant type (e.g., expression) is not compatible (or easily classified) with the CIViC concepts of variant origin.'\n        },\n        evidence_type: {\n          'Predictive': 'Evidence pertains to a variant\\'s effect on therapeutic response',\n          'Diagnostic': 'Evidence pertains to a variant\\'s impact on patient diagnosis',\n          'Prognostic': 'Evidence pertains to a variant\\'s impact on disease progression, severity, or patient survival'\n        },\n        evidence_level: {\n          A: 'Proven/consensus association in human medicine',\n          B: 'Clinical trial or other primary patient data supports association',\n          C: 'Individual case reports from clinical journals',\n          D: 'In vivo or in vitro models support association',\n          E: 'Indirect evidence'\n        },\n        evidence_direction:{\n          'Predictive': {\n            'Supports': 'The experiment or study supports this variant\\'s response to a drug',\n            'Does Not Support': 'The experiment or study does not support, or was inconclusive of an interaction between the variant and a drug'\n          },\n          'Diagnostic': {\n            'Supports': 'The experiment or study supports variant\\'s impact on the diagnosis of disease or subtype',\n            'Does Not Support': 'The experiment or study does not support the variant\\'s impact on diagnosis of disease or subtype'\n          },\n          'Prognostic': {\n            'Supports': 'The experiment or study supports a variant\\'s impact on prognostic outcome',\n            'Does Not Support': 'The experiment or study does not support a prognostic association between variant and outcome'\n          }\n        },\n        clinical_significance: {\n          'Sensitivity': 'Subject exhibits response to drug treatment',\n          'Resistance or Non-Response': 'Subject exhibits a lack of response or active resistance to drug treatment',\n          'Better Outcome': 'Demonstrates better than expected clinical outcome',\n          'Poor Outcome': 'Demonstrates worse than expected clinical outcome',\n          'Positive': 'Associated with diagnosis of disease or subtype',\n          'Negative': 'Associated with lack of disease or subtype',\n          'Adverse Response': 'Subject exhibits an adverse response to drug treatment',\n          'N/A': 'Not applicable'\n        },\n        drug_interaction_type: {\n          'Combination': 'The drugs listed were used in as part of a combination therapy approach',\n          'Sequential': 'The drugs listed were used at separate timepoints in the same treatment plan',\n          'Substitutes': 'The drugs listed are often considered to be of the same family, or behave similarly in a treatment setting'\n        },\n        rating: {\n          1: 'Poor -  Claim is not supported well by experimental evidence. Results are not reproducible, or have very small sample size. No follow-up is done to validate novel claims.',\n          2: 'Adequate - Evidence is not well supported by experimental data, and little follow-up data is available. Publication is from a journal with low academic impact. Experiments may lack proper controls, have small sample size, or are not statistically convincing.',\n          3: 'Average - Evidence is convincing, but not supported by a breadth of experiments. May be smaller scale projects, or novel results without many follow-up experiments. Discrepancies from expected results are explained and not concerning.',\n          4: 'Strong - Well supported evidence. Experiments are well controlled, and results are convincing. Any discrepancies from expected results are well-explained and not concerning.',\n          5: 'Excellent - Solid, well supported evidence from a lab or journal with respected academic standing. Experiments are well controlled, and results are clean and reproducible across multiple replicates. Evidence confirmed using separate methods.'\n        }\n      }\n    }\n  );\n})();\n\n\n(function() {\n  'use strict';\n  angular.module('civic.services')\n    .factory('DatatablesResource', DatatablesResource)\n    .factory('Datatables', DatatablesService);\n\n  // ?count=10&page=2&sorting[entrez_gene]=asc&sorting[variant]=desc&filter[entrez_gene]=flt\n  // @ngInject\n  function DatatablesResource($resource, _) {\n    return $resource('/api/datatables/:mode',\n      {\n        mode: '@mode',\n        count: '@count',\n        page: '@page'\n      },\n      {\n        query: {\n          method: 'GET',\n          isArray: false,\n          transformResponse: function(data) {\n            var events = JSON.parse(data);\n            // convert arrays to comma-fied strings\n            events.result = _.map(events.result, function (event) {\n              _.forEach(_.keys(event), function(key) {\n                if(_.isArray(event[key])) {\n                  event[key] = event[key].join(', ');\n                }\n              });\n              return event;\n            });\n            return events;\n          },\n          cache: false\n        }\n      });\n  }\n\n  // @ngInject\n  function DatatablesService(DatatablesResource) {\n    return {\n      query: function(reqObj) {\n        return DatatablesResource.query(reqObj).$promise\n          .then(function(response) {\n            return response.$promise;\n          });\n      }\n    };\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.services')\n    .factory('TypeAheadResults', TypeAheadResultsService);\n\n  // @ngInject\n  function TypeAheadResultsService($resource) {\n    var TypeAheadResults = $resource('/api/variants/typeahead_results',\n      {\n        query: '@query',\n        limit: '@limit'\n      },\n      {\n        query: { // get matching variants\n          method: 'GET',\n          isArray: false,\n          cache: true\n        },\n        variants: {\n          url: '/api/typeahead_searches/variants',\n          method: 'GET',\n          params: {\n            query: '@query',\n            count: '@count'\n          },\n          isArray: false,\n          cache: true\n        }\n      });\n\n    return TypeAheadResults;\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.services')\n    .factory('Glossary', GlossaryService);\n\n  // @ngInject\n  function GlossaryService($resource, $cacheFactory) {\n    var cache = $cacheFactory('glossaryCache');\n\n    var Glossary = $resource('/api/text/:term',\n      {},\n      {\n        query: { // get a list of all glossary items\n          method: 'GET',\n          isArray: false,\n          cache: cache\n        },\n        get: { // get a single glossary item\n          method: 'GET',\n          isArray: false,\n          cache: cache\n        }\n      });\n\n    return Glossary;\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.services')\n    .factory('MyGeneInfoResource', MyGeneInfoResource)\n    .factory('MyGeneInfo', MyGeneInfoService);\n\n  // @ngInject\n  function MyGeneInfoResource($resource, $cacheFactory, _) {\n\n    var cache = $cacheFactory('MyGeneInfo'); // default cache doesn't work for some reason\n\n    return $resource('/api/genes/mygene_info_proxy/:geneId',\n      {\n        geneId: '@geneId'\n      },\n      {\n        get: {\n          // isArray: false,\n          cache: cache,\n          transformResponse: function(data) {\n            if(typeof data === 'string') {\n              data = JSON.parse(data);\n            }\n            var srcMap = {\n              kegg: 'http://www.genome.jp/kegg-bin/show_pathway?',\n              reactome: 'http://www.reactome.org/cgi-bin/control_panel_st_id?ST_ID=',\n              pharmgkb: 'https://www.pharmgkb.org/pathway/',\n              humancyc: 'http://humancyc.org/HUMAN/NEW-IMAGE?type=PATHWAY&object=',\n              smpdb: 'http://www.smpdb.ca/view/',\n              pid: 'http://pid.nci.nih.gov/search/pathway_landing.shtml?what=graphic&jpg=on&pathway_id=',\n              wikipathways: 'http://wikipathways.org/index.php/Pathway:',\n              netpath: null,\n              biocarta: null,\n              inoh: null,\n              signalink: null,\n              ehmn: null\n            };\n            var pathways = data.pathway || [];\n            var pathwaysFinal = [];\n            var link;\n            for(var src in pathways){\n              if(!angular.isArray(pathways[src])){\n                pathways[src] = [pathways[src]];\n              }\n              for(var p in pathways[src]){\n                link = srcMap[src]+pathways[src][p].id;\n                if(srcMap[src] === null){\n                  link = null;\n                }\n                pathwaysFinal.push({\n                  name: pathways[src][p].name,\n                  link: link,\n                  src: src\n                });\n              }\n            }\n            data.pathway = pathwaysFinal;\n            if(!_.isArray(data.alias) && data.alias){\n              data.alias = [data.alias];\n            }\n            if(!_.isArray(data.interpro) && data.interpro){\n              data.interpro = [data.interpro];\n            }\n            return data;\n          }\n        }\n\n      });\n  }\n\n  // @ngInject\n  function MyGeneInfoService(MyGeneInfoResource) {\n    return {\n      get: function(entrez_id) {\n        return MyGeneInfoResource.get({geneId: entrez_id}).$promise\n          .then(function(response) {\n            return response;\n        });\n      }\n    };\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.services')\n    .service('TitleService', TitleService);\n\n  // @ngInject\n  // Titles are constructed by parsing the state's data.titleExp string within a scope constructed\n  // of the relevant CIViC entities (gene, variant, evidenceItem, variantGroup)\n  function TitleService($rootScope, Genes, Variants, Evidence, VariantGroups, Users, _, $q, $parse) {\n    $rootScope.$on('$stateChangeSuccess',function(event, toState, toParams) {\n      var title = '';\n\n      var titleScope = {\n        gene: {},\n        variant: {},\n        evidence: {},\n        variantGroup: {},\n        user: {}\n      };\n\n      var genePromise, variantPromise, variantGroupsPromise, evidencePromise, usersPromise;\n\n      // TODO: get needed entity resources by querying $state.$current.globals\n      // note: requires that all resources necessary for parsing a state's titleExp must be resolved by ui-router state config\n\n      // construct promises for relevant entities\n      if(_.has(toParams, 'geneId') && titleScope.gene.entrez_id !== toParams.geneId) {\n        genePromise = Genes.get(toParams.geneId);\n      }\n\n      if(_.has(toParams, 'variantId') && titleScope.variant.id !== toParams.variantId) {\n        variantPromise = Variants.get(toParams.variantId);\n      }\n\n      if(_.has(toParams, 'variantGroupId') && titleScope.variantGroup.id !== toParams.variantGroupId) {\n        variantGroupsPromise = VariantGroups.get(toParams.variantGroupId);\n      }\n\n      if(_.has(toParams, 'evidenceId') && titleScope.evidence.id !== toParams.evidenceId) {\n        evidencePromise = Evidence.get(toParams.evidenceId);\n      }\n\n      if(_.has(toParams, 'userId') && titleScope.user.id !== toParams.userId) {\n        usersPromise = Users.get(toParams.userId);\n      }\n\n      // resolve promises, apply $parse with constructed title scope\n      $q.all({\n        gene: genePromise,\n        variant: variantPromise,\n        evidence: evidencePromise,\n        variantGroup: variantGroupsPromise,\n        user: usersPromise})\n        .then(function(resolutions) {\n          titleScope.gene = resolutions.gene;\n          titleScope.variant = resolutions.variant;\n          titleScope.evidence = resolutions.evidence;\n          titleScope.variantGroup = resolutions.variantGroup;\n          titleScope.user = resolutions.user;\n\n          title = $parse(toState.data.titleExp)(titleScope);\n\n          $rootScope.$broadcast('title:update', { newTitle: title });\n        });\n    });\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.services')\n    .factory('_', function ($window) {\n      return $window._;\n    });\n})();\n(function (ng, _) {\n  'use strict';\n\n  var\n    lodashModule = ng.module('angular-lodash', []),\n    utilsModule = ng.module('angular-lodash/utils', []),\n    filtersModule = ng.module('angular-lodash/filters', []);\n\n  // begin custom _\n\n  function propGetterFactory(prop) {\n    return function(obj) {return obj[prop];};\n  }\n\n  _._ = _;\n\n  // Shiv \"min\", \"max\" ,\"sortedIndex\" to accept property predicate.\n  _.each(['min', 'max', 'sortedIndex'], function(fnName) {\n    _[fnName] = _.wrap(_[fnName], function(fn) {\n      var args = _.toArray(arguments).slice(1);\n\n      if(_.isString(args[2])) {\n        // for \"sortedIndex\", transmuting str to property getter\n        args[2] = propGetterFactory(args[2]);\n      }\n      else if(_.isString(args[1])) {\n        // for \"min\" or \"max\", transmuting str to property getter\n        args[1] = propGetterFactory(args[1]);\n      }\n\n      return fn.apply(_, args);\n    });\n  });\n\n  // Shiv \"filter\", \"reject\" to angular's built-in,\n  // and reserve lodash's feature(works on obj).\n  ng.injector(['ng']).invoke(['$filter', function($filter) {\n    _.filter = _.select = _.wrap($filter('filter'), function(filter, obj, exp) {\n      if(!(_.isArray(obj))) {\n        obj = _.toArray(obj);\n      }\n\n      return filter(obj, exp);\n    });\n\n    _.reject = function(obj, exp) {\n      // use angular built-in negated predicate\n      if(_.isString(exp)) {\n        return _.filter(obj, '!' + exp);\n      }\n\n      var diff = _.bind(_.difference, _, obj);\n\n      return diff(_.filter(obj, exp));\n    };\n  }]);\n\n  // end custom _\n\n\n  // begin register angular-lodash/utils\n\n  _.each(_.methods(_), function(methodName) {\n    function register($rootScope) {$rootScope[methodName] = _.bind(_[methodName], _);}\n\n    _.each([\n      lodashModule,\n      utilsModule,\n      ng.module('angular-lodash/utils/' + methodName, [])\n    ], function(module) {\n      module.run(['$rootScope', register]);\n    });\n  });\n\n  // end register angular-lodash/utils\n\n\n  // begin register angular-lodash/filters\n\n  var\n    adapList = [\n      ['map', 'collect'],\n      ['reduce', 'inject', 'foldl'],\n      ['reduceRight', 'foldr'],\n      ['find', 'detect'],\n      ['filter', 'select'],\n      'where',\n      'findWhere',\n      'reject',\n      'invoke',\n      'pluck',\n      'max',\n      'min',\n      'sortBy',\n      'groupBy',\n      'countBy',\n      'shuffle',\n      'toArray',\n      'size',\n      ['first', 'head', 'take'],\n      'initial',\n      'last',\n      ['rest', 'tail', 'drop'],\n      'compact',\n      'flatten',\n      'without',\n      'union',\n      'intersection',\n      'difference',\n      ['uniq', 'unique'],\n      'zip',\n      'object',\n      'indexOf',\n      'lastIndexOf',\n      'sortedIndex',\n      'keys',\n      'values',\n      'pairs',\n      'invert',\n      ['functions', 'methods'],\n      'pick',\n      'omit',\n      'tap',\n      'identity',\n      'uniqueId',\n      'escape',\n      'result',\n      'template'\n    ];\n\n  _.each(adapList, function(filterNames) {\n    if(!(_.isArray(filterNames))) {\n      filterNames = [filterNames];\n    }\n\n    var\n      filter = _.bind(_[filterNames[0]], _),\n      filterFactory = function() {return filter;};\n\n    _.each(filterNames, function(filterName) {\n      _.each([\n        lodashModule,\n        filtersModule,\n        ng.module('angular-lodash/filters/' + filterName, [])\n      ], function(module) {\n        module.filter(filterName, filterFactory);\n      });\n    });\n  });\n\n  // end register angular-lodash/filters\n\n}(angular, window._));\n\n(function() {\n  'use strict';\n  angular.module('civic.services')\n    .factory('ReleasesResource', ReleasesResource)\n    .factory('Releases', ReleasesService);\n\n  // @ngInject\n  function ReleasesResource($resource, $cacheFactory) {\n    var cache = $cacheFactory.get('$http');\n\n    //var cacheInterceptor = function(response) {\n    //  console.log(['ReleasesResource: removing', response.config.url, 'from $http cache.'].join(\" \"));\n    //  cache.remove(response.config.url);\n    //  return response.$promise;\n    //};\n\n    return $resource('/api/releases',\n      {\n        // Base Release Resources\n        query: {\n          method: 'GET',\n          isArray: true,\n          cache: cache\n        }\n      }\n    );\n  }\n\n  // @ngInject\n  function ReleasesService(ReleasesResource, $q) {\n    //var cache = $cacheFactory.get('$http');\n\n    var collection = [];\n\n    return {\n      initBase: initBase,\n      data: {\n        collection: collection\n      },\n\n      // Release Base\n      query: query\n    };\n\n    function initBase() {\n      return $q.all([\n        query()\n      ]);\n    }\n\n    // Release Base\n    function query() {\n      return ReleasesResource.query().$promise\n        .then(function(response) {\n          angular.copy(response, collection);\n          return response.$promise;\n        });\n    }\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.services')\n    .factory('PublicationsResource', PublicationsResource)\n    .factory('Publications', PublicationsService);\n\n  // @ngInject\n  function PublicationsResource($resource) {\n    return $resource('/api/sources',\n      {},\n      {\n        query: {\n          method: 'GET',\n          isArray: true,\n          cache: true\n        },\n        get: {\n          method: 'GET',\n          url: '/api/sources/existence/:pubmedId',\n          isArray: false,\n          cache: true\n        },\n        verify: {\n          method: 'GET',\n          url: '/api/sources/existence/:pubmedId',\n          isArray: false,\n          cache: true\n        }\n      }\n    );\n  }\n\n  // @ngInject\n  function PublicationsService(PublicationsResource) {\n    var item = {};\n    var collection = [];\n\n    return {\n      data: {\n        item: item,\n        collection: collection\n      },\n      query: query,\n      get: get,\n      verify: verify\n    };\n\n    function query() {\n      return PublicationsResource.query().$promise\n        .then(function(response) {\n          angular.copy(response, collection);\n          return response.$promise;\n        });\n    }\n\n    function get(pubmedId) {\n      return PublicationsResource.get({pubmedId: pubmedId}).$promise\n        .then(function(response) {\n          angular.copy(response, item);\n          return response.$promise;\n        });\n    }\n\n    function verify(pubmedId) {\n      return PublicationsResource.verify({pubmedId: pubmedId}).$promise\n        .then(function(response) {\n          return response.$promise;\n        });\n    }\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.services')\n    .factory('DiseasesResource', DiseasesResource)\n    .factory('Diseases', DiseasesService);\n\n  // @ngInject\n  function DiseasesResource($resource) {\n    return $resource('/api/diseases',\n      {},\n      {\n        query: {\n          method: 'GET',\n          isArray: true,\n          cache: true\n        },\n        get: {\n          method: 'GET',\n          url: '/api/diseases/existence/:doid',\n          isArray: false,\n          cache: true\n        },\n        verify: {\n          method: 'GET',\n          url: '/api/diseases/existence/:doid',\n          isArray: false,\n          cache: true\n        },\n        beginsWith: {\n          method: 'GET',\n          url: '/api/diseases?name=:name',\n          isArray: true,\n          cache: true\n        }\n      }\n    );\n  }\n\n  // @ngInject\n  function DiseasesService(DiseasesResource) {\n    var item = {};\n    var collection = [];\n\n    return {\n      data: {\n        item: item,\n        collection: collection\n      },\n      query: query,\n      get: get,\n      verify: verify,\n      beginsWith: beginsWith\n    };\n\n    function query() {\n      return DiseasesResource.query().$promise\n        .then(function(response) {\n          angular.copy(response, collection);\n          return response.$promise;\n        });\n    }\n\n    function get(doid) {\n      return DiseasesResource.get({doid: doid}).$promise\n        .then(function(response) {\n          angular.copy(response, item);\n          return response.$promise;\n        });\n    }\n\n    function verify(doid) {\n      return DiseasesResource.verify({doid: doid}).$promise\n        .then(function(response) {\n          return response.$promise;\n        });\n    }\n    function beginsWith(name) {\n      return DiseasesResource.beginsWith({name: name}).$promise\n        .then(function(response) {\n          return response.$promise;\n        });\n    }\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.services')\n    .factory('PubchemTypeaheadResource', PubchemTypeaheadResource)\n    .factory('PubchemTypeahead', PubchemTypeaheadService);\n\n  /*\n   * This resource uses the Pubchem autocomplete service, as documented here:\n   * https://pubchem.ncbi.nlm.nih.gov/widget/docs/widget_autocomplete_help.html#pc_compoundnames\n   */\n\n  // @ngInject\n  function PubchemTypeaheadResource($resource) {\n    return $resource('https://pubchem.ncbi.nlm.nih.gov/pcautocp/pcautocp.cgi',\n      {\n        dict: 'pc_compoundnames',\n        n: '20'\n      },\n      {\n        get: {\n          method: 'GET',\n          isArray: false,\n          cache: true\n        }\n      }\n    );\n  }\n\n  // @ngInject\n  function PubchemTypeaheadService(PubchemTypeaheadResource) {\n    var collection = [];\n\n    return {\n      data: {\n        collection: collection\n      },\n      get: get\n    };\n\n    function get(query) {\n      return PubchemTypeaheadResource.get({q: query}).$promise\n        .then(function(response) {\n          angular.copy(response.autocp_array, collection);\n          return response.$promise;\n        });\n    }\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular.module('civic.services')\n    .factory('DrugSuggestionsResource', DrugSuggestionsResource)\n    .factory('DrugSuggestions', DrugSuggestionsService);\n\n  // @ngInject\n  function DrugSuggestionsResource($resource) {\n    return $resource('/api/drugs/suggestions',\n      {},\n      {\n        query: {\n          method: 'GET',\n          isArray: true,\n          cache: false\n        }\n      }\n    );\n  }\n\n  // @ngInject\n  function DrugSuggestionsService(DrugSuggestionsResource) {\n    return {\n      query: function(str) {\n        var reqObj = { q: str };\n        return DrugSuggestionsResource.query(reqObj).$promise\n          .then(function(response) {\n            return response.$promise;\n          })\n      }\n    };\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.services')\n    .factory('StatsResource', StatsResource)\n    .factory('Stats', StatsService);\n\n  // @ngInject\n  function StatsResource($resource) {\n\n    return $resource('',\n      { },\n      {\n        site: {\n          url: '/api/stats/site',\n          method: 'GET',\n          isArray: false,\n          cache: false\n        },\n        user: {\n          url: '/api/users/:userId/stats',\n          params: {\n            userId: '@userId'\n          },\n          method: 'GET',\n          isArray: false,\n          cache: false\n        }\n      }\n    );\n  }\n\n  // @ngInject\n  function StatsService(StatsResource) {\n    var item = { };\n\n    return {\n      data: {\n        item: item\n      },\n      site: site,\n      user: user\n    };\n\n    function site() {\n      return StatsResource.site().$promise\n        .then(function(response) {\n          return response.$promise;\n        });\n    }\n\n    function user(userId) {\n      return StatsResource.user({ userId: userId}).$promise\n        .then(function(response) {\n          return response.$promise;\n        });\n    }\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.services')\n    .factory('EventsResource', EventsResource)\n    .factory('Events', EventsService);\n\n  // @ngInject\n  function EventsResource($resource) {\n\n    return $resource('/api/events',\n      {\n        count: '@count',\n        page: '@page'\n      },\n      {\n        query: {\n          method: 'GET',\n          isArray: false,\n          cache: false\n        }\n      }\n    );\n  }\n\n  // @ngInject\n  function EventsService(EventsResource) {\n    var collection = [];\n\n    return {\n      data: {\n        collection: collection\n      },\n      query: query\n    };\n\n    function query(reqObj) {\n      return EventsResource.query(reqObj).$promise\n        .then(function(response) {\n          angular.copy(response, collection);\n          return response.$promise;\n        });\n    }\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.services')\n    .factory('UsersResource', UsersResource)\n    .factory('Users', UsersService);\n\n  // @ngInject\n  function UsersResource($resource) {\n    //var cache = $cacheFactory.get('$http');\n\n    //var cacheInterceptor = function(response) {\n    //  console.log(['EvidenceResource: removing', response.config.url, 'from $http cache.'].join(' '));\n    //  cache.remove(response.config.url);\n    //  return response.$promise;\n    //};\n\n\n    return $resource('/api/users/:userId',\n      {\n        userId: '@userId'\n      },\n      {\n        get: {\n          method: 'GET',\n          isArray: false,\n          cache: false\n        },\n        query: {\n          method: 'GET',\n          isArray: false,\n          cache: false\n        },\n        update: {\n          method: 'PATCH',\n          params: {\n            userId: '@id'\n          },\n          cache: false\n        },\n        queryEvents: {\n          url: '/api/users/:userId/events',\n          method: 'GET',\n          isArray: false,\n          cache: false\n        }\n      }\n    );\n  }\n\n  // @ngInject\n  function UsersService(UsersResource) {\n    var item = { };\n    var collection = [];\n    var events = [];\n\n    return {\n      data: {\n        item: item,\n        collection: collection,\n        events: events\n      },\n      get: get,\n      query: query,\n      queryEvents: queryEvents,\n      update: update\n    };\n\n    function get(userId) {\n      return UsersResource.get({userId: userId}).$promise\n        .then(function(response) {\n          angular.copy(response, item);\n          return response.$promise;\n        });\n    }\n    function query(reqObj) {\n      return UsersResource.query(reqObj).$promise\n        .then(function(response) {\n          angular.copy(response, collection);\n          return response.$promise;\n        });\n    }\n    function queryEvents(userId) {\n      return UsersResource.queryEvents({userId: userId}).$promise\n        .then(function(response) {\n          angular.copy(response, events);\n          return response.$promise;\n        });\n    }\n    function update(user) {\n      return UsersResource.update(user).$promise\n        .then(function(response) {\n          return response.$promise;\n        });\n    }\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.services')\n    .factory('SearchResource',SearchResource)\n    .factory('Search', SearchService);\n\n  // @ngInject\n  function SearchResource($resource) {\n    var SearchService = $resource('/api/:entity/search/:token',\n      {\n        token: '@token',\n        entity: '@entity'\n      },\n      {\n        post: {\n          method: 'POST',\n          isArray: false,\n          cache: false\n        }\n      },\n      {\n        get: {\n          method: 'GET',\n          isArray: false,\n          cache: false\n        }\n      }\n    );\n\n    return SearchService;\n  }\n\n  // @ngInject\n  function SearchService(SearchResource) {\n    var results = {};\n\n    return {\n      results: results,\n      post: post,\n      get: get,\n      reset: reset\n    };\n\n    function reset() {\n      results = {};\n    }\n\n    // @ngInject\n    function post(reqObj) {\n      return SearchResource.post(reqObj).$promise\n        .then(function(response) {\n          angular.copy(response, results);\n          return response.$promise;\n        });\n    }\n\n    // @ngInject\n    function get(reqObj) {\n      return SearchResource.get(reqObj).$promise\n        .then(function(response) {\n          angular.copy(response, results);\n          return response.$promise;\n        });\n    }\n\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.services')\n    .factory('CommunityResource', CommunityResource)\n    .factory('Community', CommunityService);\n\n  // @ngInject\n  function CommunityResource($resource) {\n    //var cache = $cacheFactory.get('$http');\n\n    //var cacheInterceptor = function(response) {\n    //  console.log(['EvidenceResource: removing', response.config.url, 'from $http cache.'].join(' '));\n    //  cache.remove(response.config.url);\n    //  return response.$promise;\n    //};\n\n\n    return $resource('/api/community',\n      {},\n      {\n        leaderboards: {\n          url: '/api/community/leaderboards/',\n          method: 'GET',\n          isArray: false,\n          cache: false\n        }\n      }\n    );\n  }\n\n  // @ngInject\n  function CommunityService(CommunityResource) {\n    var leaderboards = { };\n\n    return {\n      data: {\n        leaderboards: leaderboards\n      },\n      getLeaderboards: getLeaderboards\n    };\n\n    function getLeaderboards() {\n      return CommunityResource.leaderboards().$promise\n        .then(function(response) {\n          angular.copy(response, leaderboards);\n          return response.$promise;\n        });\n    }\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.services')\n    .factory('CommentPreviewResource', CommentPreviewResource)\n    .factory('CommentPreview', CommentPreviewService);\n\n  // @ngInject\n  function CommentPreviewResource($resource) {\n    return $resource('/api/markdown',\n      {},\n      {\n        preview: {\n          method: 'POST',\n          isArray: false,\n          cache: false\n        }\n      }\n    );\n  }\n\n  // @ngInject\n  function CommentPreviewService(CommentPreviewResource) {\n    var preview = '';\n\n    return {\n      data: {\n        preview: preview\n      },\n      getPreview: getPreview\n    };\n\n    function getPreview(markdown) {\n      return CommentPreviewResource.preview({markdown: markdown}).$promise\n        .then(function(response) {\n          angular.copy(response, preview);\n          return response.$promise;\n        });\n    }\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.services')\n    .factory('CurrentUserResource', CurrentUserResource)\n    .factory('CurrentUser', CurrentUserService);\n\n  // @ngInject\n  function CurrentUserResource($resource) {\n    //var cache = $cacheFactory.get('$http');\n\n    //var cacheInterceptor = function(response) {\n    //  console.log(['EvidenceResource: removing', response.config.url, 'from $http cache.'].join(' '));\n    //  cache.remove(response.config.url);\n    //  return response.$promise;\n    //};\n\n\n    return $resource('/api/current_user',\n      {},\n      {\n        get: {\n          method: 'GET',\n          isArray: false,\n          cache: false\n        },\n        getStats: {\n          ur1l:'/api/current_user/stats',\n          isArray: false,\n          cache: false\n        },\n        getEvents: {\n          url:'/api/current_user/events',\n          isArray: false,\n          cache: false\n        },\n        getFeed: {\n          url:'/api/current_user/feed',\n          isArray: false,\n          cache: false\n        },\n        markAllAsRead: {\n          method: 'PATCH',\n          url: '/api/current_user/feed',\n          isArray: false,\n          cache: false\n        },\n        markAsRead: {\n          method: 'PATCH',\n          url: '/api/current_user/feed',\n          isArray: false,\n          cache: false\n        }\n      }\n    );\n  }\n\n  // @ngInject\n  function CurrentUserService(CurrentUserResource, _) {\n    var user = {};\n    var events = [];\n    var stats = [];\n    var feed = [];\n    var unread = {};\n    var mentions = [];\n\n    return {\n      data: {\n        user: user,\n        events: events,\n        stats: stats,\n        feed: feed,\n        mentions: mentions\n      },\n      get: get,\n      getStats: getStats,\n      getEvents: getEvents,\n      getFeed: getFeed,\n      markAllAsRead: markAllAsRead,\n      markAsRead: markAsRead\n    };\n\n    function get() {\n      return CurrentUserResource.get().$promise\n        .then(function(response) {\n          angular.copy(response, user);\n          return response.$promise;\n        });\n    }\n\n    function getStats() {\n      return CurrentUserResource.getStats().$promise\n        .then(function(response) {\n          angular.copy(response, stats);\n          return response.$promise;\n        });\n    }\n\n    function getEvents() {\n      return CurrentUserResource.getEvents().$promise\n        .then(function(response) {\n          angular.copy(response, stats);\n          return response.$promise;\n        });\n    }\n\n    function getFeed(reqObj) {\n      return CurrentUserResource.getFeed(reqObj).$promise\n        .then(function(response) {\n          angular.copy(response.records, feed);\n          return response.$promise;\n        });\n    }\n\n    function markAllAsRead() {\n      var t = new Date().toISOString();\n      return CurrentUserResource.markAllAsRead({ upto: t }).$promise\n        .then(function(response) {\n          var updated= response.records;\n          var updatedIds = _.map(updated, 'id');\n\n          _.forEach(feed, function(notification) {\n            if(_.includes(updatedIds, notification.id)) {\n              notification.seen = true;\n            }\n          });\n\n          return response.$promise;\n        })\n    }\n\n    function markAsRead(id) {\n      return CurrentUserResource.markAsRead({notification_ids: [id]}).$promise\n        .then(function(response) {\n          var updated= response.records;\n          var updatedIds = _.map(updated, 'id');\n\n          _.forEach(feed, function(notification) {\n            if(_.includes(updatedIds, notification.id)) {\n              notification.seen = true;\n            }\n          });\n\n          return response.$promise;\n        })\n    }\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.services')\n    .factory('CommentSuggestionsResource', CommentSuggestionsResource)\n    .factory('CommentSuggestions', CommentSuggestionsService);\n\n  // @ngInject\n  function CommentSuggestionsResource($resource) {\n    //var cache = $cacheFactory.get('$http');\n\n    //var cacheInterceptor = function(response) {\n    //  console.log(['EvidenceResource: removing', response.config.url, 'from $http cache.'].join(' '));\n    //  cache.remove(response.config.url);\n    //  return response.$promise;\n    //};\n\n\n    return $resource('/api/entity_suggestions',\n      { },\n      {\n        getEntitySuggestions: {\n          method: 'GET',\n          url: '/api/entity_suggestions',\n          isArray: true,\n          cache: false\n        },\n        getUserSuggestions: {\n          method: 'GET',\n          url: '/api/users/suggestions',\n          isArray: true,\n          cache: false\n        }\n      }\n    );\n  }\n\n  // @ngInject\n  function CommentSuggestionsService(CommentSuggestionsResource) {\n    var userSuggestions = [];\n    var entitySuggestions = [];\n\n    return {\n      data: {\n        userSuggestions: userSuggestions,\n        entitySuggestions: entitySuggestions\n      },\n      getUserSuggestions: getUserSuggestions,\n      getEntitySuggestions: getEntitySuggestions\n    };\n\n    function getUserSuggestions(str) {\n      return CommentSuggestionsResource.getUserSuggestions({username: str}).$promise\n        .then(function(response) {\n          angular.copy(response, userSuggestions);\n          return response.$promise;\n        });\n    }\n    function getEntitySuggestions(str) {\n      return CommentSuggestionsResource.getEntitySuggestions({query: str}).$promise\n        .then(function(response) {\n          angular.copy(response, entitySuggestions);\n          return response.$promise;\n        });\n    }\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.pages')\n    .controller('HomeCtrl', HomeCtrl);\n\n  // @ngInject\n  function HomeCtrl($scope, $interval, Stats, Events) {\n    var vm = $scope.vm = {};\n\n    vm.stats = {};\n    vm.events = [];\n\n    Stats.site().then(function(stats) {\n      vm.stats = stats;\n    });\n    Events.query({count: 7}).then(function(response) {\n      vm.events = response.result;\n    });\n\n    // refresh stats and events periodically\n    var query = $interval(function() {\n      Stats.site().then(function(stats) {\n        vm.stats = stats;\n      });\n      Events.query({count: 7}).then(function(response) {\n        vm.events = response.result;\n      });\n    }, 60000);\n\n    $scope.$on('$destroy', function() {\n      console.log('destroying events query');\n      if(angular.isDefined(query)) { $interval.cancel(query); }\n    });\n\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.pages')\n    .controller('HelpViewController', HelpViewController)\n    .config(helpViewConfig);\n\n  // @ngInject\n  function helpViewConfig($stateProvider) {\n    $stateProvider\n      .state('help', {\n        url: '/help',\n        abstract: true,\n        controller: 'HelpViewController',\n        templateUrl: 'app/pages/help.tpl.html',\n        data: {\n          titleExp: '\"Help\"',\n          navMode: 'sub'\n        }\n      })\n      .state('help.introduction', {\n        url: '/introduction',\n        templateUrl: 'app/pages/help_intro.tpl.html',\n        data: {\n          titleExp: '\"Help: Introduction\"',\n          navMode: 'sub'\n        }\n      })\n      .state('help.evidence', {\n        url: '/evidence',\n        templateUrl: 'app/pages/help_evidence_main.tpl.html',\n        data: {\n          titleExp: '\"Help: Evidence\"',\n          navMode: 'sub'\n        }\n      })\n      .state('help.variants', {\n        url: '/variants',\n        templateUrl: 'app/pages/help_variants.tpl.html',\n        data: {\n          titleExp: '\"Help: Variants\"',\n          navMode: 'sub'\n        }\n      })\n      .state('help.genes', {\n        url: '/genes',\n        templateUrl: 'app/pages/help_genes.tpl.html',\n        data: {\n          titleExp: '\"Help: Genes\"',\n          navMode: 'sub'\n        }\n      })\n      .state('help.variantGroups', {\n        url: '/variantGroups',\n        templateUrl: 'app/pages/help_variant_groups.tpl.html',\n        data: {\n          titleExp: '\"Help: Variant Groups\"',\n          navMode: 'sub'\n        }\n      })\n      .state('help.get', {\n        url: '/get',\n        templateUrl: 'app/pages/help_get.tpl.html',\n        data: {\n          titleExp: '\"Help: Get Help\"',\n          navMode: 'sub'\n        }\n      })\n      .state('help.report', {\n        url: '/report',\n        templateUrl: 'app/pages/help_report_problem.tpl.html',\n        data: {\n          titleExp: '\"Help: Report a Problem\"',\n          navMode: 'sub'\n        }\n      });\n  }\n\n  // @ngInject\n  function HelpViewController($scope, $modal) {\n    var vm = $scope.vm = {};\n    vm.tabs = {\n      main: [\n        {\n          heading: 'Introduction',\n          state: 'help.introduction'\n        },\n        {\n          heading: 'Evidence',\n          state: 'help.evidence'\n        },\n        {\n          heading: 'Variants',\n          state: 'help.variants'\n        },\n        {\n          heading: 'Genes',\n          state: 'help.genes'\n        },\n        {\n          heading: 'Variant Groups',\n          state: 'help.variantGroups'\n        },\n        {\n          heading: 'Get Help',\n          state: 'help.get'\n        },\n        {\n          heading: 'Report Problem',\n          state: 'help.report'\n        }\n      ],\n      evidence: [\n        {\n          heading: 'Overview',\n          template: 'app/pages/help_evidence_overview.tpl.html',\n          active: true\n        },\n        {\n          heading: 'Variant Origin',\n          template: 'app/pages/help_evidence_variant_origin.tpl.html',\n          active: false\n        },\n        {\n          heading: 'Evidence Type',\n          template: 'app/pages/help_evidence_types.tpl.html',\n          active: false\n        },\n        {\n          heading: 'Evidence Level',\n          template: 'app/pages/help_evidence_levels.tpl.html',\n          active: false\n        },\n        {\n          heading: 'Trust Rating',\n          template: 'app/pages/help_evidence_trust_ratings.tpl.html',\n          active: false\n        }\n      ],\n      variant: [\n        {\n          heading: 'Overview',\n          template: 'app/pages/help_variant_overview.tpl.html',\n          active: true\n        },\n        {\n          heading: 'Variant Name',\n          template: 'app/pages/help_variant_naming.tpl.html',\n          active: false\n        },\n        {\n          heading: 'Variant Summary',\n          template: 'app/pages/help_variant_summaries.tpl.html',\n          active: false\n        },\n        {\n          heading: 'Variant Type',\n          template: 'app/pages/help_variant_varianttypes.tpl.html',\n          active: false\n        },\n        {\n          heading: 'Variant Coordinates',\n          template: 'app/pages/help_variant_coordinates.tpl.html',\n          active: false\n        }\n      ],\n      gene: [\n        {\n          heading: 'Overview',\n          template: 'app/pages/help_gene_overview.tpl.html',\n          active: true\n        },\n        {\n          heading: 'Gene Summary',\n          template: 'app/pages/help_gene_summary.tpl.html',\n          active: false\n        }\n      ],\n      variant_group: [\n        {\n          heading: 'Overview',\n          template: 'app/pages/help_variant_group_overview.tpl.html',\n          active: true\n        },\n        {\n          heading: 'Variant Group Summary',\n          template: 'app/pages/help_variant_group_summary.tpl.html',\n          active: false\n        },\n        {\n          heading: 'Create a Variant Group',\n          template: 'app/pages/help_variant_group_create.tpl.html',\n          active: false\n        },\n        {\n          heading: 'Add to a Variant Group',\n          template: 'app/pages/help_variant_group_addto.tpl.html',\n          active: false\n        }\n      ]\n    };\n    vm.imgPopup = function imgPopup() {\n      $modal.open({\n        animation: false,\n        backdrop: true,\n        template: '<div><img src=\"assets/images/GP-113_CIViC_schema-collaboration_SCHEMA_v1a.png\" ' +\n        'class=\"img-fluid\" width=\"100%\" height=\"100%\" ' +\n        'alt=\"CIViC Schema Diagram\" ' +\n        'ng-click=\"$close()\"' +\n        '/></div>',\n        size: 'lg'\n      });\n    };\n  }\n})();\n\n(function() {\n  'use strict';\n  angular\n    .module('civic.pages')\n    .controller('AboutCtrl', AboutCtrl);\n\n// @ngInject\n  function AboutCtrl ($scope, $state) {\n    var vm = $scope.vm = {};\n\n    vm.experts = [\n      {\n        'id': 133,\n        'name': 'Elaine Mardis',\n        'role': 'Editor',\n        'area_of_expertise': 'Research Scientist',\n        'avatars': {\n          'x14': 'assets/images/experts/emardis.jpg',\n          'x270': 'assets/images/experts/emardis.jpg'\n        },\n        'display_name': 'emardis',\n        'description': 'Dr. Mardis is the Robert E. and Louise F. Dunn Distinguished Professor of Medicine and Co-director of the McDonnell Genome Institute at Washington University School of Medicine. She is the Editor-In-Chief of Molecular Case Studies and also serves as an editorial board member of <em>Molecular Cancer Research</em>, <em>Disease Models and Mechanisms</em>, and <em>Annals of Oncology</em>. She helped create methods and automation pipelines for sequencing the human genome and was one of the team leaders to first sequence and analyze a whole cancer genome using next-generation sequencing methods. Her studies of cancer genomes have led to characterization of multiple tumor types including pediatric and adult disease as well as the understanding of acquired resistance to targeted therapies. These studies have led to development of methods to identify and characterize changes in genomic heterogeneity and design novel, personalized vaccines for individual patients.'\n      },\n      {\n        'id': 141,\n        'name': 'Ron Bose',\n        'role': 'Editor',\n        'avatars': {\n          'x14': 'assets/images/experts/rbose.jpg',\n          'x270': 'assets/images/experts/rbose.jpg'\n        },\n        'area_of_expertise': 'Clinical Scientist',\n        'display_name': 'rbose',\n        'description': 'Dr. Bose is Assistant Professor of Medicine with board certifications in medical oncology and internal medicine at Washington University School of Medicine. His lab studies how dysregulation of signal transduction pathways impacts the development of human cancers. In particular his focus is on the HER2 receptor tyrosine kinase, a member of the EGFR growth factor receptor family, a gene amplified and activated in about 20% of human breast cancer cases. His lab discovered that HER2 activating mutations can be found in many solid tumors, including breast cancer.'\n      },\n      {\n        'id': 15,\n        'name': 'Malachi Griffith',\n        'username': 'malachigriffith',\n        'role': 'Admin',\n        'avatars': {\n          'x14': 'assets/images/experts/mgriffith.jpg',\n          'x270': 'assets/images/experts/mgriffith.jpg',\n        },\n        'area_of_expertise': 'Research Scientist',\n        'display_name': 'malachigriffith',\n        'description': 'Dr. Griffith is an Assistant Professor of Genetics and Assistant Director of the McDonnell Genome Institute at Washington University School of Medicine. Dr Griffith has extensive experience in the fields of genomics, bioinformatics, data mining, and cancer research. His research is focused on improving the understanding of cancer biology and the development of personalized medicine strategies for cancer using genomics and informatics technologies. The Griffith lab develops bioinformatics and statistical methods for the analysis of high throughput sequence data and identification of biomarkers for diagnostic, prognostic and drug response prediction. In collaboration with the Washington University Genomics Tumor Board, he is currently leading analyses of sequence data from the genomes and transcriptomes of living cancer patients that have exhausted standard-of-care treatment options. Dr Griffith is also leading the analysis of several large-scale genomics projects to help discover genomic signatures relevant to cancer initiation, progression, and treatment response.  He is a co-creator of the CIViC resource.'\n      },\n      {\n        'id': 3,\n        'name': 'Obi Griffith',\n        'role': 'Admin',\n        'avatars': {\n          'x14': 'assets/images/experts/ogriffith.jpg',\n          'x270': 'assets/images/experts/ogriffith.jpg'\n        },\n        'area_of_expertise': 'Research Scientist',\n        'display_name': 'obigriffith',\n        'description': 'Dr. Griffith is Assistant Professor of Medicine and Assistant Director of the McDonnell Genome Institute at Washington University School of Medicine. He has worked in genomics and bioinformatics since the earliest phase of reference genome sequencing. He contributed to the Mammalian Gene Collection, producing some of the first full-length sequences for many human genes. He also was part of a small team of bioinformaticians that helped sequence and release the first whole genome reference sequence for the severe acute respiratory syndrome (SARS) virus at the height of the 2003 epidemic. He has contributed to the identification of molecular markers at the DNA, RNA and protein level that are useful for diagnosis and prognosis of thyroid, breast, liver and other cancers. His labs research is focused on the development of informatics resources and personalized medicine strategies for cancer using genomic technologies. He is a co-creator of the CIViC resource.'\n      },\n      {\n        'id': 6,\n        'name': 'Kilannin Krysiak',\n        'role': 'Admin',\n        'avatars': {\n          'x14': 'assets/images/experts/kkrysiak.jpg',\n          'x270': 'assets/images/experts/kkrysiak.jpg'\n        },\n        'area_of_expertise': 'Research Scientist',\n        'display_name': 'kkrysiak',\n        'description': 'Dr. Krysiak is a staff scientist at the McDonnell Genome Institute at Washington University School of Medicine where she is involved in the comprehensive genomic analysis of cancer patient cohorts and n-of-1 studies. She received her PhD in Molecular Genetics and Genomics at Washington University in St. Louis where she focused on the genetics of myelodysplastic syndrome through advanced flow cytometry techniques, primary cell culture and mouse models. She is a founding member of the CIViC team, helping to define the CIViC data model, and a leading content curator and feature development consultant.'\n      },\n      {\n        'id': 41,\n        'name': 'Nick Spies',\n        'role': 'Admin',\n        'avatars': {\n          'x14': 'assets/images/experts/nspies.jpg',\n          'x270': 'assets/images/experts/nspies.jpg'\n        },\n        'area_of_expertise': 'Research Scientist',\n        'display_name': 'nickspies',\n        'description': 'Nick Spies is a staff analyst at the McDonnell Genome Institute and an MD student at Washington University School of Medicine. He has made substantial contributions to the development of genome analysis tools and resources at the Genome Institute including the Drug-Gene Interaction Database. He is a founding member of the CIViC team, helping to define the CIViC data model, and a leading content curator and a feature development consultant.'\n      }\n    ];\n    vm.partners = [\n      {\n        'id': 0,\n        'name': 'Personalized Oncogenomics at BC Cancer Agency',\n        'avatars': {\n          'x14': 'assets/images/partners/bc_cancer_agency.png',\n          'x270': 'assets/images/partners/bc_cancer_agency.png'\n        },\n        'description': 'The BC Cancer Agency\\'s Personalized Onco-Genomics (POG) program is a clinical research initiative that is embedding genomic sequencing into real-time treatment planning for BC patients with incurable cancers. Cancer is a complex biological process. We categorize cancers according to their site of origin (e.g. lung, breast, liver, colon) as each one is different, but even within these groupings there are subtypes with differences in response to treatment and overall behaviour. The POG program is a collaborative research study including many BCCA oncologists, pathologists and other clinicians along with the Genome Sciences Centre (GSC), which aims to decode the genome  the entire DNA and RNA inside the cell  of each patient\\'s cancer, to understand what is enabling it to grow. Using this genomic data in clinical decision-making should allow us to develop treatment strategies to block its growth, identify clinical trials that the patient may benefit from and potentially identify less toxic and more effective therapeutic options.'\n      }\n    ];\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.pages')\n    .controller('ContactCtrl', ContactCtrl);\n\n  // @ngInject\n  function ContactCtrl($scope) {\n    $scope.loadedMsg = 'Loaded Contact!';\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.pages')\n    .controller('GlossaryCtrl', GlossaryCtrl);\n\n  // @ngInject\n  function GlossaryCtrl($scope, Glossary) {\n    $scope.glossary = {};\n    Glossary.query().$promise\n      .then(function(response) {\n        $scope.glossary.terms = response;\n      });\n  }\n})();\n\n(function() {\n  'use strict';\n  angular\n    .module('civic.pages')\n    .controller('ParticipateCtrl', ParticipateCtrl);\n\n// @ngInject\n  function ParticipateCtrl ($scope, $modal) {\n    var vm = $scope.vm = {};\n\n    vm.imgPopup = function imgPopup() {\n      $modal.open({\n        animation: false,\n        backdrop: true,\n        template: '<div><img src=\"assets/images/GP-113_CIViC_schema-collaboration_PROCESS_v1a.png\" ' +\n        'class=\"img-fluid\" width=\"100%\" height=\"100%\" ' +\n        'alt=\"CIViC Participate Diagram\" ' +\n        'ng-click=\"$close()\"' +\n        '/></div>',\n        size: 'lg'\n      });\n    };\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.pages')\n    .controller('ReleasesController', ReleasesController);\n\n  // @ngInject\n  function ReleasesController($window, Releases, _) {\n    console.log('ReleasesController loaded.');\n    var vm = this;\n    // TODO move releases init to ui-router state resolve\n    Releases.initBase().then(function(releases){\n      vm.releases = _.map(releases[0], function(release) {\n        release.fileNames = _.map(release.files, function(filename) {\n          return _.last(filename.split('/'));\n        });\n        release.fileUrls = _.map(release.files, function(filename) {\n          return $window.location.origin + filename;\n        });\n        return release;\n      });\n\n    });\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.common')\n    .directive('title', titleDirective);\n\n  // @ngInject\n  /*jshint unused:false  */\n  function titleDirective($rootScope, $timeout, TitleService) {\n    var directive = {\n      restrict: 'E',\n      link: function() {\n        var listener = function(event, data) {\n          // console.log('title title:update listener called. ****************');\n          $timeout(function() {\n            $rootScope.title = (typeof data.newTitle !== 'undefined') ? 'CIViC: ' + data.newTitle : 'CIViC - Clinincal Interpretation of Variants in Cancer';\n          });\n        };\n        $rootScope.$on('title:update', listener); // updates titles app-wide (e.g. 'subheader' directive)\n      }\n    };\n\n    return directive;\n  }\n})();\n\n(function () {\n  'use strict';\n  angular.module('civic.common')\n    .directive('subheader', subheader)\n    .controller('SubheaderCtrl', SubheaderCtrl);\n\n  // @ngInject\n  function subheader(Security) {\n    var directive = {\n      restrict: 'E',\n      scope: true,\n      templateUrl: 'components/directives/subheader.tpl.html',\n      controller: SubheaderCtrl,\n      link: /* @ngInject */ function($scope) {\n        $scope.isAuthenticated = Security.isAuthenticated;\n        $scope.isEditor = Security.isAuthenticated;\n      }\n    };\n    return directive;\n  }\n\n  // @ngInject\n  function SubheaderCtrl($scope, $rootScope, _, Security) {\n    $scope.isAuthenticated = Security.isAuthenticated;\n    $scope.isEditor = Security.isAuthenticated;\n\n    $scope.$rootScope = $rootScope;\n\n    $scope.addEvidenceUrlBase = $scope.addEvidenceUrl = '#/add/evidence/basic';\n\n    $scope.$watchCollection('$rootScope.stateParams', function(stateParams){\n      if(_.has(stateParams, 'geneId')) {\n        $scope.addEvidenceUrl = $scope.addEvidenceUrlBase + '?geneId=' + stateParams.geneId;\n\n        if(_.has(stateParams, 'variantId')) {\n          $scope.addEvidenceUrl = $scope.addEvidenceUrl + '&variantId=' + stateParams.variantId;\n        }\n      }\n    });\n\n    $rootScope.$on('title:update', function(event, data) {\n      $scope.view.stateTitle = data.newTitle;\n    });\n  }\n})();\n\nangular.module('civic.common')\n  .directive('sessionInfo', sessionInfo);\n\n/**\n * @ngInject\n */\nfunction sessionInfo(ConfigService) {\n  'use strict';\n  return {\n    restrict: 'EA',\n    template: '<h2>CIViC Server URL: {{ conf.serverUrl }}</h2>',\n    link: function(scope) {\n      scope.conf = ConfigService;\n    }\n  };\n}\n\n(function() {\n  'use strict';\n  angular.module('civic.common')\n    .directive('quickSearch', quickSearch)\n    .controller('quickSearchCtrl', quickSearchCtrl);\n\n  // @ngInject\n  function quickSearch() {\n    var directive = {\n      templateUrl: 'components/directives/quickSearch.tpl.html',\n      restrict: 'E',\n      scope: true,\n      controller: quickSearchCtrl\n    };\n\n    return directive;\n  }\n\n  // @ngInject\n  function quickSearchCtrl($scope, $state, $log, TypeAheadResults, _) {\n    var topResult = {};\n\n    $scope.getVariants = function (val) {\n      return TypeAheadResults.query({ query: val, limit: 12}).$promise\n        .then(function (response) {\n          var labelLimit = 75;\n          return _.map(response.result, function (event, index) {\n            var result;\n            var label = event.entrez_gene + ' / ' + event.variant;\n\n            if (_.includes(event.terms, 'gene_aliases')) {\n              var aliasLabel = event.gene_aliases.length > 1 ? 'Aliases' : 'Alias';\n              label = label + ' -- ' + aliasLabel + ': ' + event.gene_aliases.join(', ');\n            }\n\n            if (_.includes(event.terms, 'drug_names')) {\n              var drugLabel = event.drug_names.length > 1 ? 'Drugs' : 'Drug';\n              label = label + ' -- ' + drugLabel + ': ' + event.drug_names.join(', ');\n            }\n\n            if (_.includes(event.terms, 'disease_names')) {\n              var diseaseLabel = event.disease_names.length > 1 ? 'Diseases' : 'Disease';\n              label = label + ' -- ' + diseaseLabel + ': ' + event.disease_names.join(', ');\n            }\n\n            if (label.length > labelLimit) { label = _.trunc(label, labelLimit); }\n\n            result = {\n              /*jshint camelcase: false */\n              gene: event.entrez_name,\n              geneId: event.gene_id,\n              label: label,\n              variant: event.variant,\n              variantId: event.variant_id\n            };\n\n            if(index === 0) { topResult = result; }\n\n            return result;\n          });\n        });\n    };\n\n    $scope.onSelect = function($item) {\n      $state.go('events.genes.summary.variants.summary', {geneId: $item.geneId, variantId: $item.variantId});\n      $scope.asyncSelected.model = ''; // clear typeahead\n    };\n\n    $scope.onGo = function() {\n      // NOTE: typeahead control does not make the currently selected item available outside its\n      // scope, so we have no way to know which item the user has highlighted. So the Go button\n      // cheats and just sends them to the first item on the list.\n      // TODO: figure out how to access typeahead dropdown items and current activeIndex\n      // TODO: figure out how to clear typeahead after state transition (asyncSelected.model is unavaiable to this function when called). This doesn't work:\n      // scope.$$childHead.query= ''; // clear typeahead\n      if(!_.isEmpty(topResult)) {\n        $state.go('events.genes.summary.variants.summary', {geneId: topResult.geneId, variantId: topResult.variantId});\n      }\n\n    };\n\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.common')\n    .directive('mainMenu', mainMenu);\n\n  // @ngInject\n  function mainMenu() {\n    var directive = {\n      restrict: 'E',\n      templateUrl: 'components/directives/mainMenu.tpl.html',\n      replace: true,\n      scope: true,\n      controller: mainMenuController\n    };\n\n    return directive;\n  }\n\n  // @ngInject\n  function mainMenuController($scope, ConfigService) {\n    $scope.menuItems = ConfigService.mainMenuItems;\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.common')\n    .directive('footerMenu', footerMenu);\n\n// @ngInject\n  function footerMenu() {\n    var directive = {\n      restrict: 'E',\n      templateUrl: 'components/directives/footerMenu.tpl.html',\n      replace: true,\n      scope: true,\n      controller: FooterMenuController\n    };\n\n    return directive;\n  }\n\n// @ngInject\n  function FooterMenuController($scope, ConfigService) {\n    $scope.menuItems = ConfigService.footerMenuItems;\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.common')\n    .directive('headerSearch', headerSearch);\n\n  function headerSearch() {\n    return {\n      restrict: 'E',\n      templateUrl: 'components/directives/headerSearch.tpl.html',\n      controller: HeaderSearchController\n    };\n\n  }\n\n  // @ngInject\n  function HeaderSearchController($scope, Security) {\n    var vm = $scope.vm = {};\n    vm.isAuthenticated = Security.isAuthenticated;\n    vm.isEditor = Security.isEditor;\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.common')\n    .directive('civicLogo', civicLogo);\n\n  // @ngInject\n  function civicLogo() {\n    var directive = {\n      restrict: 'E',\n      templateUrl: 'components/directives/civicLogo.tpl.html',\n      controller: civicLogoController\n    };\n    return directive;\n  }\n\n  // @ngInject\n  function civicLogoController($scope, $rootScope) {\n    $scope.navMode = $rootScope.navMode;\n    $scope.pageTitle = $rootScope.pageTitle;\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.common')\n    .directive('cancelButton', cancelButton);\n\n  // @ngInject\n  function cancelButton() {\n    return {\n      restrict: 'E',\n      scope: {},\n      templateUrl: 'components/directives/cancelButton.tpl.html',\n      controller: cancelButtonController\n    };\n  }\n\n  // @ngInject\n  function cancelButtonController($scope, $state, $previousState) {\n    $scope.cancel = function() {\n      $previousState.get() ? $previousState.go() : $state.go('browse');\n    };\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.security.login.toolbar', [])\n    .directive('loginToolbar', loginToolbar);\n\n  // @ngInject\n  function loginToolbar() {\n\n    var directive = {\n      templateUrl: 'components/directives/loginToolbar.tpl.html',\n      restrict: 'E',\n      replace: true,\n      scope: true,\n      controller: /* @ngInject */ function($scope, $rootScope, $location, Security, ConfigService) {\n        $scope.isEditor= Security.isEditor;\n        $scope.isAuthenticated = Security.isAuthenticated;\n        $scope.login = Security.showLogin;\n        $scope.logout = Security.logout;\n\n        $scope.adminUrl = ConfigService.serverUrl + 'admin';\n\n        $scope.$watch(function() {\n          return Security.currentUser;\n        }, function(currentUser) {\n          $scope.currentUser = currentUser;\n        });\n\n        $scope.status = {\n          isopen: false\n        };\n\n        $scope.toggleDropdown = function($event) {\n          $event.preventDefault();\n          $event.stopPropagation();\n          $scope.status.isopen = !$scope.status.isopen;\n        };\n\n        if(!$scope.currentUrl) { $scope.currentUrl = $location.url(); }\n        $rootScope.$on('$stateChangeSuccess', function() {\n          $scope.currentUrl = $location.url();\n        });\n      }\n    };\n    return directive;\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.security.login.toolbar')\n    .directive('loginButton', loginButton);\n\n  // @ngInject\n  function loginButton() {\n\n    var directive = {\n      templateUrl: 'components/directives/loginButton.tpl.html',\n      restrict: 'E',\n      replace: true,\n      scope: true,\n      controller: /* @ngInject */ function($scope,\n                                           $rootScope,\n                                           $location,\n                                           _,\n                                           Security,\n                                           ConfigService) {\n        $scope.adminUrl = ConfigService.serverUrl + 'admin';\n        $scope.isEditor = Security.isEditor;\n        $scope.logout = Security.logout;\n        $scope.showLogin = Security.showLogin;\n\n        $scope.$watch(function() {\n          return Security.currentUser;\n        }, function(currentUser) {\n          if(!_.isNull(currentUser)) {\n            $scope.currentUser = currentUser;\n            $scope.totalNotifications = _.reduce(currentUser.unread_notifications, function (acc, value) {\n              return acc + value;\n            });\n            $scope.hasNotifications = _.keys(currentUser.unread_notifications).length > 0;\n          }\n        });\n\n        $scope.status = {\n          isopen: false\n        };\n\n        $scope.toggleDropdown = function($event) {\n          $event.preventDefault();\n          $event.stopPropagation();\n          $scope.status.isopen = !$scope.status.isopen;\n        };\n\n        if(!$scope.currentUrl) { $scope.currentUrl = $location.url(); }\n        $rootScope.$on('$stateChangeSuccess', function() {\n          $scope.currentUrl = $location.url();\n        });\n      }\n    };\n    return directive;\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.common')\n    .directive('userImage', userImageDirective)\n    .controller('UserImageController', UserImageController);\n\n  // @ngInject\n  function userImageDirective() {\n    return {\n      restrict: 'E',\n      scope: {\n        height: '@',\n        width: '@',\n        user: '='\n      },\n      templateUrl: 'components/directives/userImage.tpl.html',\n      controller: 'UserImageController'\n    };\n  }\n\n  // @ngInject\n  function UserImageController($scope, _) {\n    var ctrl = $scope.ctrl = {};\n\n    ctrl.height = $scope.height;\n    ctrl.width = $scope.width;\n    ctrl.user = $scope.user;\n\n    ctrl.hasAvatar = _.has(ctrl.user, 'avatar_url');\n    console.log('has email: ' + ctrl.hasEmail);\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.common')\n    .directive('statsBlock', statsBlock)\n    .controller('StatsBlockController', StatsBlockController);\n\n  // @ngInject\n  function statsBlock() {\n    return {\n      restrict: 'E',\n      scope: {\n        stats: '=',\n        title: '@',\n        iconUrl: '@',\n        cols: '@'\n      },\n      templateUrl: 'components/directives/statsBlock.tpl.html',\n      controller: 'StatsBlockController'\n    };\n  }\n\n  // @ngInject\n  function StatsBlockController($scope) {\n    var vm = $scope.vm = {};\n\n    vm.stats = $scope.stats;\n    vm.title = $scope.title;\n    vm.icon = $scope.icon;\n    vm.cols = $scope.cols;\n\n    $scope.$watchCollection('stats', function(stats) {\n      vm.stats = stats;\n    });\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.common')\n    .directive('eventItem', eventItem);\n\n  // @ngInject\n  function eventItem() {\n    return {\n      restrict: 'E',\n      scope: {\n        event: '=',\n        theme: '='\n      },\n      templateUrl: 'components/directives/eventItem.tpl.html',\n      controller: eventItemController\n    };\n  }\n\n  // @ngInject\n  function eventItemController($scope, $state, _) {\n    console.log('eventItemController called.');\n    var vm = $scope.vm = {};\n    var params = $scope.event.state_params;\n\n    vm.seen = $scope.event.seen;\n\n    vm.entityNames = [];\n\n    if(_.has(params, 'gene')) {vm.entityNames.push(params.gene.name);}\n    if(_.has(params, 'variant')) {vm.entityNames.push(params.variant.name);}\n    if(_.has(params, 'evidence_item')) {vm.entityNames.push(params.evidence_item.name);}\n\n    vm.entityName = _.compact(vm.entityNames).join(' / ');\n\n    vm.eventClick = function(event) {\n      var subjectStates = {\n        genes: 'events.genes',\n        variants: 'events.genes.summary.variants',\n        variantgroups: 'events.genes.summary.variantGroups',\n        evidenceitems: 'events.genes.summary.variants.summary.evidence'\n      };\n\n      // revision comments require some more logic to determine the proper state\n      if(event.subject_type === 'suggestedchanges') {\n        var state;\n        var type = event.state_params.suggested_change.subject_type;\n        if(type === 'evidenceitems') {\n          state = 'events.genes.summary.variants.summary.evidence';\n        } else if (type === 'variantgroups') {\n          state = 'events.genes.summary.variantGroups';\n        } else if (type === 'variants') {\n          state = 'events.genes.summary.variants';\n        } else if (type === 'genes') {\n          state = 'events.genes';\n        }\n        subjectStates.suggestedchanges = state;\n      }\n\n\n      var stateExtension = {\n        'commented': '.talk.comments',\n        'submitted': '.summary',\n        'accepted': '.summary',\n        'rejected': '.summary',\n        'change suggested': '.talk.revisions.list.summary',\n        'change accepted': '.talk.revisions.list.summary',\n        'change rejected': '.talk.revisions.list.summary'\n      };\n\n      // revision comments are shown in their revision's summary view, override commented extension\n      if(event.subject_type === 'suggestedchanges') {\n        stateExtension.commented = '.talk.revisions.list.summary';\n      }\n\n      var stateParams = {};\n      _.each(event.state_params, function(obj, entity) {\n        var entityId;\n        if(entity === 'suggested_change') {\n          entityId = 'revisionId';\n        } else if (entity === 'evidence_item') {\n          entityId = 'evidenceId';\n        } else if (entity === 'variant_group') {\n          entityId = 'variantGroupId';\n        } else {\n          entityId = entity + 'Id';\n        }\n        stateParams[entityId] = obj.id;\n      });\n\n      $state.go(subjectStates[event.subject_type]+stateExtension[event.event_type], stateParams);\n\n    };\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.common')\n    .directive('mentionItem', mentionItem);\n\n  // @ngInject\n  function mentionItem() {\n    return {\n      restrict: 'E',\n      scope: {\n        mention: '=',\n        theme: '='\n      },\n      templateUrl: 'components/directives/mentionItem.tpl.html',\n      controller: mentionItemController\n    };\n  }\n\n  // @ngInject\n  function mentionItemController($scope, $state, _) {\n    console.log('mentionItemController called.');\n    var vm = $scope.vm = {};\n    var params = $scope.mention.event.state_params;\n\n    vm.seen = $scope.mention.seen;\n\n    vm.entityNames = [];\n\n    if(_.has(params, 'gene')) {vm.entityNames.push(params.gene.name);}\n    if(_.has(params, 'variant')) {vm.entityNames.push(params.variant.name);}\n    if(_.has(params, 'evidence_item')) {vm.entityNames.push(params.evidence_item.name);}\n\n    vm.entityName = _.compact(vm.entityNames).join(' / ');\n\n    vm.eventClick = function(event) {\n      var subjectStates = {\n        genes: 'events.genes',\n        variants: 'events.genes.summary.variants',\n        variantgroups: 'events.genes.summary.variantGroups',\n        evidenceitems: 'events.genes.summary.variants.summary.evidence'\n      };\n\n      // revision comments require some more logic to determine the proper state\n      if(event.subject_type === 'suggestedchanges') {\n        var state;\n        var type = event.state_params.suggested_change.subject_type;\n        if(type === 'evidenceitems') {\n          state = 'events.genes.summary.variants.summary.evidence';\n        } else if (type === 'variantgroups') {\n          state = 'events.genes.summary.variantGroups';\n        } else if (type === 'variants') {\n          state = 'events.genes.summary.variants';\n        } else if (type === 'genes') {\n          state = 'events.genes';\n        }\n        subjectStates.suggestedchanges = state;\n      }\n\n\n      var stateExtension = {\n        'commented': '.talk.comments',\n        'submitted': '.summary',\n        'accepted': '.summary',\n        'rejected': '.summary',\n        'change suggested': '.talk.revisions.list.summary',\n        'change accepted': '.talk.revisions.list.summary',\n        'change rejected': '.talk.revisions.list.summary'\n      };\n\n      // revision comments are shown in their revision's summary view, override commented extension\n      if(event.subject_type === 'suggestedchanges') {\n        stateExtension.commented = '.talk.revisions.list.summary';\n      }\n\n      var stateParams = {};\n      _.each(event.state_params, function(obj, entity) {\n        var entityId;\n        if(entity === 'suggested_change') {\n          entityId = 'revisionId';\n        } else if (entity === 'evidence_item') {\n          entityId = 'evidenceId';\n        } else if (entity === 'variant_group') {\n          entityId = 'variantGroupId';\n        } else {\n          entityId = entity + 'Id';\n        }\n        stateParams[entityId] = obj.id;\n      });\n\n      $state.go(subjectStates[event.subject_type]+stateExtension[event.event_type], stateParams);\n\n    };\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular.module('civic.common')\n    .directive('userBlock', userBlockDirective);\n\n\n  // @ngInject\n  function userBlockDirective() {\n    return /* @ngInject */ {\n      restrict: 'E',\n      scope: {\n        user: '='\n      },\n      templateUrl: 'components/directives/userBlock.tpl.html'\n    };\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular.module('civic.common')\n    .directive('userCard', userCardDirective)\n    .controller('UserCardController', UserCardController);\n\n  // @ngInject\n  function userCardDirective() {\n    return /* @ngInject */ {\n      restrict: 'E',\n      scope: {\n        user: '='\n      },\n      controller: 'UserCardController as vm',\n      bindToController: true,\n      templateUrl: 'components/directives/userCard.tpl.html'\n    };\n  }\n\n  // @inject\n  function UserCardController($state, _) {\n    console.log('userCard controller called.');\n    var vm = this;\n\n    if (!_.isUndefined(vm.user.last_event)) {\n      var params = vm.user.last_event.state_params;\n      vm.entityNames = [];\n\n      if (_.has(params, 'gene')) {\n        vm.entityNames.push(params.gene.name);\n      }\n      if (_.has(params, 'variant')) {\n        vm.entityNames.push(params.variant.name);\n      }\n      if (_.has(params, 'evidence_item')) {\n        vm.entityNames.push(params.evidence_item.name);\n      }\n\n      vm.entityName = _.compact(vm.entityNames).join(' / ');\n    }\n\n    vm.userClick = function(id) {\n      $state.go('users.profile', { userId: id});\n    };\n\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.activity')\n    .config(ActivityView);\n\n  // @ngInject\n  function ActivityView($stateProvider) {\n    $stateProvider\n      .state('activity', {\n        url: '/activity',\n        controller: 'ActivityController',\n        templateUrl: 'app/views/activity/activity.tpl.html',\n        data: {\n          titleExp: '\"Activity\"',\n          navMode: 'sub'\n        }\n      });\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.activity')\n    .controller('ActivityController', ActivityController);\n\n  // @ngInject\n  function ActivityController() {\n\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.activity')\n    .directive('activityGrid', activityGrid)\n    .controller('ActivityGridController', ActivityGridController);\n\n  // @ngInject\n  function activityGrid() {\n    var directive = {\n      restrict: 'E',\n      replace: true,\n      scope: {\n      },\n      templateUrl: 'app/views/activity/directives/activityGrid.tpl.html',\n      controller: 'ActivityGridController'\n    };\n    return directive;\n  }\n\n  // @ngInject\n  function ActivityGridController($log,\n                                  $scope,\n                                  $state,\n                                  $location,\n                                  uiGridConstants,\n                                  _,\n                                  Events) {\n    var ctrl = $scope.ctrl = {};\n\n    var maxRows = ctrl.maxRows = 20;\n\n    ctrl.events = $scope.events;\n\n    ctrl.totalItems = Number();\n    ctrl.page = $scope.page || 1;\n    ctrl.count= maxRows;\n\n    ctrl.filters = [];\n    ctrl.sorting = [];\n\n    ctrl.isFiltered = ctrl.filters.length > 0;\n\n    $scope.$watch('ctrl.totalItems', function() {\n      ctrl.totalPages = Math.ceil(ctrl.totalItems / maxRows);\n    });\n\n    ctrl.gridOptions = {\n      enablePaginationControls: false,\n\n      useExternalFiltering: true,\n      useExternalSorting: true,\n      useExternalPaging: true,\n\n      paginationPageSizes: [maxRows],\n      paginationPageSize: maxRows,\n      minRowsToShow: maxRows-1,\n\n      enableHorizontalScrollbar: uiGridConstants.scrollbars.NEVER,\n      enableVerticalScrollbar: uiGridConstants.scrollbars.NEVER,\n\n      enableFiltering: false,\n      enableColumnMenus: false,\n      enableSorting: true,\n      enableRowSelection: true,\n      enableRowHeaderSelection: false,\n      multiSelect: false,\n      modifierKeysToMultiSelect: false,\n      noUnselect: true,\n      columnDefs: [\n        { name: 'user',\n          displayName: 'User',\n          type: 'string',\n          enableFiltering: true,\n          allowCellFocus: false,\n          enableSorting: false,\n          width: '15%',\n          cellTemplate: '<div class=\"ui-grid-cell-contents\"><user-block user=\"row.entity[col.field]\"</div>',\n          filter: {\n            condition: uiGridConstants.filter.CONTAINS\n          }\n        },\n        { name: 'role',\n          field: 'user.role',\n          displayName: 'Role',\n          enableFiltering: true,\n          allowCellFocus: false,\n          enableSorting: false,\n          type: 'string',\n          width: '8%',\n          filter: {\n            condition: uiGridConstants.filter.CONTAINS\n          }\n        },\n        { name: 'event_type',\n          displayName: 'Event Type',\n          enableFiltering: true,\n          allowCellFocus: false,\n          enableSorting: false,\n          type: 'string',\n          width: '20%',\n          filter: {\n            condition: uiGridConstants.filter.CONTAINS\n          }\n        },\n        {\n          name: 'gene',\n          field: 'state_params.gene.name',\n          displayName: 'Gene',\n          type: 'string',\n          allowCellFocus: false,\n          enableFiltering: false,\n          enableSorting: false,\n          filter: {\n            condition: uiGridConstants.filter.CONTAINS\n          }\n        },\n        {\n          name: 'variant',\n          field: 'state_params.variant.name',\n          displayName: 'Variant',\n          type: 'string',\n          width: '15%',\n          allowCellFocus: false,\n          enableFiltering: false,\n          enableSorting: false,\n          filter: {\n            condition: uiGridConstants.filter.CONTAINS\n          }\n        },\n        {\n          name: 'evidence_item',\n          field: 'state_params.evidence_item.name',\n          displayName: 'Item',\n          type: 'string',\n          allowCellFocus: false,\n          enableFiltering: false,\n          enableSorting: false,\n          filter: {\n            condition: uiGridConstants.filter.CONTAINS\n          }\n        },\n        {\n          name: 'timestamp',\n          field: 'timestamp',\n          displayName: 'Timestamp',\n          type: 'date',\n          sort: {direction: uiGridConstants.DESC},\n          allowCellFocus: false,\n          enableFiltering: false,\n          enableSorting: true,\n          cellTemplate: '<div class=\"ui-grid-cell-contents\"><span ng-bind=\"row.entity[col.field]|timeAgo\"></span></div>',\n          filter: {\n            condition: uiGridConstants.filter.CONTAINS\n          }\n        }\n\n      ]\n    };\n    ctrl.gridOptions.onRegisterApi = function(gridApi){\n      ctrl.gridApi = gridApi;\n\n      // called from pagination directive when page changes\n      ctrl.pageChanged = function() {\n        $log.info('page changed: ' + ctrl.page);\n        $location.search('page', ctrl.page);\n        updateData();\n      };\n\n      // reset paging and do some other stuff on filter changes\n      gridApi.core.on.filterChanged($scope, function() {\n        $log.info('filter changed.');\n        // updateData with new filters\n        var filteredCols = _.filter(this.grid.columns, function(col) {\n          return _.has(col.filter, 'term') && !_.isEmpty(col.filter.term) && _.isString(col.filter.term);\n        });\n        if (filteredCols.length > 0) {\n          ctrl.filters = _.map(filteredCols, function(col) {\n            return {\n              'field': col.field,\n              'term': col.filter.term\n            };\n          });\n        } else {\n          ctrl.filters = [];\n        }\n        ctrl.page = 1;\n        updateData();\n      });\n\n      gridApi.core.on.sortChanged($scope, function(grid, sortColumns) {\n        $log.info('sort changed.');\n        if (sortColumns.length > 0) {\n          ctrl.sorting = _.map(sortColumns, function(col) {\n            return {\n              'field': col.field,\n              'direction': col.sort.direction\n            };\n          });\n        } else {\n          ctrl.sorting = [];\n        }\n        updateData();\n      });\n\n      // called when user clicks on a row\n      gridApi.selection.on.rowSelectionChanged($scope, function(row){\n        var event = row.entity;\n        var subjectStates = {\n          genes: 'events.genes',\n          variants: 'events.genes.summary.variants',\n          variantgroups: 'events.genes.summary.variantGroups',\n          evidenceitems: 'events.genes.summary.variants.summary.evidence'\n        };\n\n        // revision comments require some more logic to determine the proper state\n        if(event.subject_type === 'suggestedchanges') {\n          var state;\n          var type = event.state_params.suggested_change.subject_type;\n          if(type === 'evidenceitems') {\n            state = 'events.genes.summary.variants.summary.evidence';\n          } else if (type === 'variantgroups') {\n            state = 'events.genes.summary.variantGroups';\n          } else if (type === 'variants') {\n            state = 'events.genes.summary.variants';\n          } else if (type === 'genes') {\n            state = 'events.genes';\n          }\n          subjectStates.suggestedchanges = state;\n        }\n\n\n        var stateExtension = {\n          'commented': '.talk.comments',\n          'submitted': '.summary',\n          'accepted': '.summary',\n          'change suggested': '.talk.revisions.list.summary',\n          'change accepted': '.talk.revisions.list.summary',\n          'change rejected': '.talk.revisions.list.summary'\n        };\n\n        // revision comments are shown in their revision's summary view, override commented extension\n        if(event.subject_type === 'suggestedchanges') {\n          stateExtension.commented = '.talk.revisions.list.summary';\n        }\n\n        var stateParams = {};\n        _.each(event.state_params, function(obj, entity) {\n          var entityId;\n          if(entity === 'suggested_change') {\n            entityId = 'revisionId';\n          } else if (entity === 'evidence_item') {\n            entityId = 'evidenceId';\n          } else if (entity === 'variant_group') {\n            entityId = 'variantGroupId';\n          } else {\n            entityId = entity + 'Id';\n          }\n          stateParams[entityId] = obj.id;\n        });\n\n        $state.go(subjectStates[event.subject_type]+stateExtension[event.event_type], stateParams);\n      });\n    };\n\n    function updateData() {\n      fetchData(ctrl.count, ctrl.page, ctrl.sorting, ctrl.filters)\n        .then(function(data){\n          ctrl.gridOptions.data = data.result;\n          ctrl.totalItems = data.total;\n        });\n    }\n\n    function fetchData(count, page, sorting, filters) {\n      var request;\n\n      request= {\n        count: count,\n        page: page\n      };\n\n      if (filters.length > 0) {\n        _.each(filters, function(filter) {\n          request['filter[' + filter.field + ']'] = filter.term;\n        });\n      }\n\n      if (sorting.length > 0) {\n        _.each(sorting, function(sort) {\n          request['sorting[' + sort.field + ']'] = sort.direction;\n        });\n      }\n      return Events.query(request);\n    }\n\n    updateData();\n\n  }\n\n})();\n\n(function() {\n  'use strict';\n  console.log('SearchView loaded.');\n  angular.module('civic.search')\n    .controller('SearchViewController', SearchViewController)\n    .config(SearchView);\n\n  // @ngInject\n  function SearchView($stateProvider) {\n    $stateProvider\n      .state('search', {\n        abstract: true,\n        url: '/search',\n        controller: 'SearchViewController',\n        templateUrl: 'app/views/search/search.tpl.html'\n      })\n      .state('search.evidence', {\n        url: '/evidence/:token',\n        reloadOnSearch: false,\n        controller: 'SearchController',\n        templateUrl: 'app/views/search/searchEvidence.tpl.html',\n        data: {\n          titleExp: '\"Search Evidence\"',\n          navMode: 'sub'\n        }\n      })\n      .state('search.genes', {\n        url: '/genes/:token',\n        reloadOnSearch: false,\n        controller: 'SearchController',\n        templateUrl: 'app/views/search/searchGenes.tpl.html',\n        data: {\n          titleExp: '\"Search Genes\"',\n          navMode: 'sub'\n        }\n      })\n      .state('search.variants', {\n        url: '/variants/:token',\n        reloadOnSearch: false,\n        controller: 'SearchController',\n        templateUrl: 'app/views/search/searchVariants.tpl.html',\n        data: {\n          titleExp: '\"Search Variants\"',\n          navMode: 'sub'\n        }\n      })\n      .state('search.variantGroups', {\n        url: '/variantGroups/:token',\n        reloadOnSearch: false,\n        controller: 'SearchController',\n        templateUrl: 'app/views/search/searchVariantGroups.tpl.html',\n        data: {\n          titleExp: '\"Search Variant Groups\"',\n          navMode: 'sub'\n        }\n      });\n  }\n\n  // @ngInject\n  function SearchViewController($scope, $state) {\n    $scope.$watch(function() { return $state.current.name; }, function(state) {\n      $scope.state = $state.current.name;\n    });\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.search')\n    .controller('SearchController', SearchController);\n\n  // @ngInject\n  function SearchController($scope, _) {\n    var vm = $scope.vm = {};\n\n    vm.fields = {};\n\n    vm.fields.evidence_items = [\n      {\n        type: 'queryRow',\n        key: 'queries',\n        templateOptions: {\n          rowFields: [\n            {\n              key: 'field',\n              type: 'queryBuilderSelect',\n              templateOptions: {\n                label: '',\n                required: true,\n                options: [\n                  { value: '', name: 'Please select a field' },\n                  { value: 'description', name: 'Description' },\n                  { value: 'disease_doid', name: 'Disease DOID' },\n                  { value: 'disease_name', name: 'Disease Name' },\n                  { value: 'drug_id', name: 'Drug PubChem ID' },\n                  { value: 'drug_name', name: 'Drug Name' },\n                  { value: 'id', name: 'Evidence ID'},\n                  { value: 'evidence_type', name: 'Evidence Type' },\n                  { value: 'evidence_level', name: 'Evidence Level' },\n                  { value: 'gene_name', name: 'Gene Name' },\n                  { value: 'pubmed_id', name: 'Pubmed ID' },\n                  { value: 'rating', name: 'Rating' },\n                  { value: 'suggested_changes_count', name: 'Suggested Revisions' },\n                  { value: 'status', name: 'Status' },\n                  { value: 'variant_name', name: 'Variant Name' },\n                  { value: 'submitter', name: 'Submitter Display Name' },\n                  { value: 'submitter_id', name: 'Submitter ID' }\n                ],\n                onChange: function(value, options, scope) {\n                  scope.model.condition = {\n                    name: undefined,\n                    parameters: []\n                  };\n                }\n              }\n            }\n          ],\n          conditionFields: {\n            pubmed_id: [\n              {\n                key: 'name',\n                type: 'queryBuilderSelect',\n                className: 'inline-field inline-field-md',\n                data: {\n                  defaultValue: 'is'\n                },\n                templateOptions: {\n                  label: '',\n                  required: true,\n                  options: [\n                    {value: 'is', name: 'is'},\n                    {value: 'is_not', name: 'is not'}\n                  ]\n                }\n              },\n              {\n                key: 'parameters[0]', // pubmed id\n                type: 'input',\n                className: 'inline-field',\n                templateOptions: {\n                  label: '',\n                  required: true\n                }\n              }\n            ],\n            rating: [\n              {\n                key: 'name',\n                type: 'queryBuilderSelect',\n                className: 'inline-field',\n                data: {\n                  defaultValue: 'is_greater_than_or_equal_to'\n                },\n                templateOptions: {\n                  required: true,\n                  label: '',\n                  options: [\n                    { value: 'is_greater_than_or_equal_to', name: 'is greater than or equal to' },\n                    { value: 'is_greater_than', name: 'is greater than' },\n                    { value: 'is_less_than', name: 'is less than' },\n                    { value: 'is_less_than_or_equal_to', name: 'is less than or equal to' },\n                    { value: 'is_equal_to', name: 'is equal to' },\n                    { value: 'is_in_the_range', name: 'is in the range'}\n                  ],\n                  onChange: function(value, options, scope) {\n                    _.pullAt(scope.model.parameters, 1,2);\n                  }\n                }\n              },\n              {\n                key: 'parameters[0]',\n                type: 'rating',\n                className: 'inline-field',\n                templateOptions: {\n                  label: '',\n                  required: true\n                }\n              },\n              {\n                template: 'to',\n                className: 'inline-field',\n                hideExpression: 'model.name != \"is_in_the_range\"'\n              },\n              {\n                key: 'parameters[1]',\n                type: 'rating',\n                className: 'inline-field',\n                hideExpression: 'model.name != \"is_in_the_range\"',\n                templateOptions: {\n                  label: '',\n                  required: true\n                }\n              }\n            ],\n            description: [\n              {\n                key: 'name',\n                type: 'queryBuilderSelect',\n                className: 'inline-field',\n                data: {\n                  defaultValue: 'contains'\n                },\n                templateOptions: {\n                  label: '',\n                  required: true,\n                  options: [\n                    {value: 'contains', name: 'contains'},\n                    {value: 'begins_with', name: 'begins with'},\n                    {value: 'does_not_contain', name: 'does not contain'},\n                    {value: 'is_empty', name: 'is empty'}\n                  ]\n                }\n              },\n              {\n                key: 'parameters[0]',\n                type: 'input',\n                className: 'inline-field',\n                hideExpression: 'model.name === \"is_empty\"',\n                templateOptions: {\n                  label: '',\n                  required: true\n                }\n              }\n            ],\n            disease_name: [\n              {\n                key: 'name',\n                type: 'queryBuilderSelect',\n                className: 'inline-field',\n                data: {\n                  defaultValue: 'contains'\n                },\n                templateOptions: {\n                  label: '',\n                  required: true,\n                  options: [\n                    {value: 'contains', name: 'contains'},\n                    {value: 'begins_with', name: 'begins with'},\n                    {value: 'does_not_contain', name: 'does not contain'},\n                    {value: 'is_empty', name: 'is empty'}\n                  ]\n                }\n              },\n              {\n                key: 'parameters[0]',\n                type: 'input',\n                className: 'inline-field',\n                hideExpression: 'model.name === \"is_empty\"',\n                templateOptions: {\n                  label: '',\n                  required: true\n                }\n              }\n            ],\n            disease_doid: [\n              {\n                key: 'name',\n                type: 'queryBuilderSelect',\n                className: 'inline-field inline-field-small',\n                data: {\n                  defaultValue: 'is'\n                },\n                templateOptions: {\n                  label: '',\n                  required: true,\n                  options: [\n                    {value: 'is', name: 'is'},\n                    {value: 'is_not', name: 'is not'},\n                    {value: 'is_empty', name: 'is empty'}\n                  ]\n                }\n              },\n              {\n                key: 'parameters[0]',\n                type: 'input',\n                className: 'inline-field',\n                hideExpression: 'model.name === \"is_empty\"',\n                templateOptions: {\n                  label: '',\n                  required: true\n                }\n              }\n            ],\n            drug_name: [\n              {\n                key: 'name',\n                type: 'queryBuilderSelect',\n                className: 'inline-field',\n                data: {\n                  defaultValue: 'contains'\n                },\n                templateOptions: {\n                  label: '',\n                  required: true,\n                  options: [\n                    {value: 'is', name: 'is'},\n                    {value: 'contains', name: 'contains'},\n                    {value: 'begins_with', name: 'begins with'},\n                    {value: 'does_not_contain', name: 'does not contain'}\n\n                  ]\n                }\n              },\n              {\n                key: 'parameters[0]',\n                type: 'input',\n                className: 'inline-field',\n                templateOptions: {\n                  label: '',\n                  required: true\n                }\n              }\n            ],\n            drug_id: [\n              {\n                key: 'name',\n                type: 'queryBuilderSelect',\n                className: 'inline-field inline-field-small',\n                data: {\n                  defaultValue: 'is'\n                },\n                templateOptions: {\n                  label: '',\n                  required: true,\n                  options: [\n                    {value: 'is', name: 'is'},\n                    {value: 'is_not', name: 'is not'}\n                  ]\n                }\n              },\n              {\n                key: 'parameters[0]',\n                type: 'input',\n                className: 'inline-field',\n                templateOptions: {\n                  label: '',\n                  required: true\n                }\n              }\n            ],\n            evidence_type: [\n              {\n                key: 'name',\n                type: 'queryBuilderSelect',\n                className: 'inline-field inline-field-md',\n                data: {\n                  defaultValue: 'is_equal_to'\n                },\n                templateOptions: {\n                  label: '',\n                  required: true,\n                  options: [\n                    {value: 'is_equal_to', name: 'is'},\n                    {value: 'is_not_equal_to', name: 'is not'}\n                  ]\n                }\n              },\n              {\n                key: 'parameters[0]',\n                type: 'queryBuilderSelect',\n                className: 'inline-field',\n                data: {\n                  defaultValue: 'Predictive'\n                },\n                templateOptions: {\n                  label: '',\n                  required: true,\n                  options: [\n                    { value: 'Predictive', name: 'Predictive' },\n                    { value: 'Diagnostic', name: 'Diagnostic' },\n                    { value: 'Prognostic', name: 'Prognostic' }\n                  ]\n                }\n              }\n            ],\n            evidence_level: [\n              {\n                key: 'name',\n                type: 'queryBuilderSelect',\n                className: 'inline-field',\n                data: {\n                  defaultValue: 'is_above'\n                },\n                templateOptions: {\n                  label: '',\n                  required: true,\n                  options: [\n                    {value: 'is_equal_to', name: 'is'},\n                    {value: 'is_above', name: 'is above'},\n                    {value: 'is_below', name: 'is below'}\n                  ]\n                }\n              },\n              {\n                key: 'parameters[0]',\n                type: 'queryBuilderSelect',\n                className: 'inline-field',\n                data: {\n                  defaultValue: 'C'\n                },\n                templateOptions: {\n                  label: '',\n                  required: true,\n                  options: [\n                    { value: 'A', name: 'A - Validated'},\n                    { value: 'B', name: 'B - Clinical'},\n                    { value: 'C', name: 'C - Case Study'},\n                    { value: 'D', name: 'D - Preclinical'},\n                    { value: 'E', name: 'E - Inferential'}\n                  ]\n                }\n              }\n            ],\n            status: [\n              {\n                key: 'name',\n                type: 'queryBuilderSelect',\n                className: 'inline-field inline-field-small',\n                data: {\n                  defaultValue: 'is'\n                },\n                templateOptions: {\n                  label: '',\n                  required: true,\n                  options: [\n                    {value: 'is', name: 'is'},\n                    {value: 'is_not', name: 'is not'}\n                  ]\n                }\n              },\n              {\n                key: 'parameters[0]',\n                type: 'queryBuilderSelect',\n                className: 'inline-field',\n                data: {\n                  defaultValue: 'submitted'\n                },\n                templateOptions: {\n                  label: '',\n                  required: true,\n                  options: [\n                    { value: 'submitted', name: 'Submitted'},\n                    { value: 'accepted', name: 'Accepted'},\n                    { value: 'rejected', name: 'Rejected'}\n                  ]\n                }\n              }\n            ],\n            suggested_changes_count: [\n              {\n                template: 'with status',\n                className: 'inline-field'\n              },\n              {\n                key: 'parameters[0]', // status\n                type: 'queryBuilderSelect',\n                className: 'inline-field',\n                data: {\n                  defaultValue: 'new'\n                },\n                templateOptions: {\n                  required: true,\n                  label: '',\n                  options: [\n                    { value: 'new', name: 'new' },\n                    { value: 'applied', name: 'applied' },\n                    { value: 'rejected', name: 'rejected' }\n                  ]\n                }\n              },\n              {\n                key: 'name',\n                type: 'queryBuilderSelect',\n                className: 'inline-field',\n                data: {\n                  defaultValue: 'is_greater_than_or_equal_to'\n                },\n                templateOptions: {\n                  required: true,\n                  label: '',\n                  options: [\n                    { value: 'is_greater_than_or_equal_to', name: 'is greater than or equal to' },\n                    { value: 'is_greater_than', name: 'is greater than' },\n                    { value: 'is_less_than', name: 'is less than' },\n                    { value: 'is_less_than_or_equal_to', name: 'is less than or equal to' },\n                    { value: 'is_equal_to', name: 'is equal to' },\n                    { value: 'is_in_the_range', name: 'is in the range'}\n                  ],\n                  onChange: function(value, options, scope) {\n                    _.pullAt(scope.model.parameters, 1,2);\n                  }\n                }\n              },\n              {\n                key: 'parameters[1]', // from value\n                type: 'input',\n                className: 'inline-field inline-field-xs',\n                templateOptions: {\n                  label: '',\n                  required: true\n                }\n              },\n              {\n                template: 'to',\n                className: 'inline-field',\n                hideExpression: 'model.name.length > 0 && model.name !== \"is_in_the_range\"'\n              },\n              {\n                key: 'parameters[2]', // to value\n                type: 'input',\n                className: 'inline-field inline-field-xs',\n                hideExpression: 'model.name.length > 0 && model.name !== \"is_in_the_range\"',\n                templateOptions: {\n                  label: '',\n                  required: true\n                }\n              }\n            ],\n            id: [\n              {\n                key: 'name',\n                type: 'queryBuilderSelect',\n                className: 'inline-field',\n                data: {\n                  defaultValue: 'is_equal_to'\n                },\n                templateOptions: {\n                  required: true,\n                  label: '',\n                  options: [\n                    { value: 'is_greater_than_or_equal_to', name: 'is greater than or equal to' },\n                    { value: 'is_greater_than', name: 'is greater than' },\n                    { value: 'is_less_than', name: 'is less than' },\n                    { value: 'is_less_than_or_equal_to', name: 'is less than or equal to' },\n                    { value: 'is_equal_to', name: 'is equal to' },\n                    { value: 'is_in_the_range', name: 'is in the range'}\n                  ],\n                  onChange: function(value, options, scope) {\n                    _.pullAt(scope.model.parameters, 1,2);\n                  }\n                }\n              },\n              {\n                key: 'parameters[1]', // from value\n                type: 'input',\n                className: 'inline-field inline-field-sm',\n                templateOptions: {\n                  size: 8,\n                  label: '',\n                  required: true\n                }\n              },\n              {\n                template: 'to',\n                className: 'inline-field',\n                hideExpression: 'model.name.length > 0 && model.name !== \"is_in_the_range\"'\n              },\n              {\n                key: 'parameters[2]', // to value\n                type: 'input',\n                className: 'inline-field inline-field-xs',\n                hideExpression: 'model.name.length > 0 && model.name !== \"is_in_the_range\"',\n                templateOptions: {\n                  label: '',\n                  required: true\n                }\n              }\n            ],\n            gene_name: [\n              {\n                key: 'name',\n                type: 'queryBuilderSelect',\n                className: 'inline-field',\n                data: {\n                  defaultValue: 'contains'\n                },\n                templateOptions: {\n                  label: '',\n                  required: true,\n                  options: [\n                    {value: 'is', name: 'is'},\n                    {value: 'contains', name: 'contains'},\n                    {value: 'begins_with', name: 'begins with'},\n                    {value: 'does_not_contain', name: 'does not contain'}\n                  ]\n                }\n              },\n              {\n                key: 'parameters[0]',\n                type: 'input',\n                className: 'inline-field',\n                templateOptions: {\n                  label: '',\n                  required: true\n                }\n              }\n            ],\n            variant_name: [\n              {\n                key: 'name',\n                type: 'queryBuilderSelect',\n                className: 'inline-field',\n                data: {\n                  defaultValue: 'contains'\n                },\n                templateOptions: {\n                  label: '',\n                  required: true,\n                  options: [\n                    {value: 'is', name: 'is'},\n                    {value: 'contains', name: 'contains'},\n                    {value: 'begins_with', name: 'begins with'},\n                    {value: 'does_not_contain', name: 'does not contain'}\n                  ]\n                }\n              },\n              {\n                key: 'parameters[0]',\n                type: 'input',\n                className: 'inline-field',\n                templateOptions: {\n                  label: '',\n                  required: true\n                }\n              }\n            ],\n            submitter: [\n              {\n                key: 'name',\n                type: 'queryBuilderSelect',\n                className: 'inline-field',\n                data: {\n                  defaultValue: 'contains'\n                },\n                templateOptions: {\n                  label: '',\n                  required: true,\n                  options: [\n                    {value: 'contains', name: 'contains'},\n                    {value: 'begins_with', name: 'begins with'}\n                  ]\n                }\n              },\n              {\n                key: 'parameters[0]',\n                type: 'input',\n                className: 'inline-field',\n                templateOptions: {\n                  label: '',\n                  required: true\n                }\n              }\n            ],\n            submitter_id: [\n              {\n                key: 'name',\n                type: 'queryBuilderSelect',\n                className: 'inline-field',\n                data: {\n                  defaultValue: 'is_equal_to'\n                },\n                templateOptions: {\n                  label: '',\n                  required: true,\n                  options: [\n                    {value: 'is_equal_to', name: 'is'},\n                    {value: 'is_not_equal_to', name: 'is not'}\n                  ]\n                }\n              },\n              {\n                key: 'parameters[0]',\n                type: 'input',\n                className: 'inline-field',\n                templateOptions: {\n                  label: '',\n                  required: true\n                }\n              }\n            ]\n          }\n        }\n      }\n    ];\n\n    vm.fields.genes = [\n      {\n        type: 'queryRow',\n        key: 'queries',\n        templateOptions: {\n          rowFields: [\n            {\n              key: 'field',\n              type: 'queryBuilderSelect',\n              templateOptions: {\n                label: '',\n                required: true,\n                options: [\n                  { value: '', name: 'Please select a field' },\n                  { value: 'entrez_id', name: 'Entrez ID' },\n                  { value: 'name', name: 'Name' },\n                  { value: 'aliases', name: 'Aliases' },\n                  { value: 'description', name: 'Description' }\n                ],\n                onChange: function(value, options, scope) {\n                  scope.model.condition = {\n                    name: undefined,\n                    parameters: []\n                  };\n                }\n              }\n            }\n          ],\n          conditionFields: {\n            entrez_id: [\n              {\n                key: 'name',\n                type: 'queryBuilderSelect',\n                className: 'inline-field inline-field-md',\n                data: {\n                  defaultValue: 'is'\n                },\n                templateOptions: {\n                  label: '',\n                  required: true,\n                  options: [\n                    {value: 'is', name: 'is'},\n                    {value: 'is_not', name: 'is not'}\n                  ]\n                }\n              },\n              {\n                key: 'parameters[0]', // entrez_id\n                type: 'input',\n                className: 'inline-field',\n                templateOptions: {\n                  label: '',\n                  required: true\n                }\n              }\n            ],\n            name: [\n              {\n                key: 'name',\n                type: 'queryBuilderSelect',\n                className: 'inline-field',\n                data: {\n                  defaultValue: 'contains'\n                },\n                templateOptions: {\n                  label: '',\n                  required: true,\n                  options: [\n                    {value: 'contains', name: 'contains'},\n                    {value: 'begins_with', name: 'begins with'},\n                    {value: 'does_not_contain', name: 'does not contain'},\n                    {value: 'is_empty', name: 'is empty'}\n                  ]\n                }\n              },\n              {\n                key: 'parameters[0]',\n                type: 'input',\n                className: 'inline-field',\n                hideExpression: 'model.name === \"is_empty\"',\n                templateOptions: {\n                  label: '',\n                  required: true\n                }\n              }\n            ],\n            aliases: [\n              {\n                key: 'name',\n                type: 'queryBuilderSelect',\n                className: 'inline-field',\n                data: {\n                  defaultValue: 'contains'\n                },\n                templateOptions: {\n                  label: '',\n                  required: true,\n                  options: [\n                    {value: 'contains', name: 'contains'},\n                    {value: 'begins_with', name: 'begins with'},\n                    {value: 'does_not_contain', name: 'does not contain'},\n                    {value: 'is_empty', name: 'is empty'}\n                  ]\n                }\n              },\n              {\n                key: 'parameters[0]',\n                type: 'input',\n                className: 'inline-field',\n                hideExpression: 'model.name === \"is_empty\"',\n                templateOptions: {\n                  label: '',\n                  required: true\n                }\n              }\n            ],\n            description: [\n              {\n                key: 'name',\n                type: 'queryBuilderSelect',\n                className: 'inline-field',\n                data: {\n                  defaultValue: 'contains'\n                },\n                templateOptions: {\n                  label: '',\n                  required: true,\n                  options: [\n                    {value: 'contains', name: 'contains'},\n                    {value: 'begins_with', name: 'begins with'},\n                    {value: 'does_not_contain', name: 'does not contain'},\n                    {value: 'is_empty', name: 'is empty'}\n                  ]\n                }\n              },\n              {\n                key: 'parameters[0]',\n                type: 'input',\n                className: 'inline-field',\n                hideExpression: 'model.name === \"is_empty\"',\n                templateOptions: {\n                  label: '',\n                  required: true\n                }\n              }\n            ]\n          }\n        }\n      }\n    ];\n\n    vm.fields.variants = [\n      {\n        type: 'queryRow',\n        key: 'queries',\n        templateOptions: {\n          rowFields: [\n            {\n              key: 'field',\n              type: 'queryBuilderSelect',\n              templateOptions: {\n                label: '',\n                required: true,\n                options: [\n                  { value: '', name: 'Please select a field' },\n                  { value: 'name', name: 'Name' },\n                  { value: 'description', name: 'Description' },\n                  { value: 'variant_types', name: 'Variant Type(s)' },\n                  { value: 'variant_group', name: 'Variant Group' },\n                  { value: 'reference_build', name: 'Reference Build' },\n                  { value: 'ensembl_version', name: 'Ensembl Version' },\n                  { value: 'reference_bases', name: 'Reference Base(s)' },\n                  { value: 'variant_bases', name: 'Variant Base(s)' },\n                  { value: 'chromosome', name: 'CHR1 Chromosome' },\n                  { value: 'start', name: 'CHR1 Start' },\n                  { value: 'stop', name: 'CHR1 Stop' },\n                  { value: 'representative_transcript', name: 'CHR1 Representative Transcript' },\n                  { value: 'chromosome2', name: 'CHR2 Chromosome' },\n                  { value: 'start2', name: 'CHR2 Start' },\n                  { value: 'stop2', name: 'CHR2 Stop' },\n                  { value: 'representative_transcript2', name: 'CHR2 Representative Transcript' },\n                  { value: 'suggested_changes_count', name: 'Suggested Revisions' }\n                ],\n                onChange: function(value, options, scope) {\n                  scope.model.condition = {\n                    name: undefined,\n                    parameters: []\n                  };\n                }\n              }\n            }\n          ],\n          conditionFields: {\n            name: [\n              {\n                key: 'name',\n                type: 'queryBuilderSelect',\n                className: 'inline-field',\n                data: {\n                  defaultValue: 'contains'\n                },\n                templateOptions: {\n                  label: '',\n                  required: true,\n                  options: [\n                    {value: 'contains', name: 'contains'},\n                    {value: 'begins_with', name: 'begins with'},\n                    {value: 'does_not_contain', name: 'does not contain'},\n                    {value: 'is_empty', name: 'is empty'}\n                  ]\n                }\n              },\n              {\n                key: 'parameters[0]',\n                type: 'input',\n                className: 'inline-field',\n                hideExpression: 'model.name === \"is_empty\"',\n                templateOptions: {\n                  label: '',\n                  required: true\n                }\n              }\n            ],\n            description: [\n              {\n                key: 'name',\n                type: 'queryBuilderSelect',\n                className: 'inline-field',\n                data: {\n                  defaultValue: 'contains'\n                },\n                templateOptions: {\n                  label: '',\n                  required: true,\n                  options: [\n                    {value: 'contains', name: 'contains'},\n                    {value: 'begins_with', name: 'begins with'},\n                    {value: 'does_not_contain', name: 'does not contain'},\n                    {value: 'is_empty', name: 'is empty'}\n                  ]\n                }\n              },\n              {\n                key: 'parameters[0]',\n                type: 'input',\n                className: 'inline-field',\n                hideExpression: 'model.name === \"is_empty\"',\n                templateOptions: {\n                  label: '',\n                  required: true\n                }\n              }\n            ],\n            variant_types: [\n              {\n                key: 'name',\n                type: 'queryBuilderSelect',\n                className: 'inline-field',\n                data: {\n                  defaultValue: 'contains'\n                },\n                templateOptions: {\n                  label: '',\n                  required: true,\n                  options: [\n                    {value: 'contains', name: 'contains'},\n                    {value: 'does_not_contain', name: 'does not contain'},\n                    {value: 'is_empty', name: 'is empty'}\n                  ]\n                }\n              },\n              {\n                key: 'parameters[0]',\n                type: 'input',\n                className: 'inline-field',\n                hideExpression: 'model.name === \"is_empty\"',\n                templateOptions: {\n                  label: '',\n                  required: true\n                }\n              }\n            ],\n            variant_group: [\n              {\n                key: 'name',\n                type: 'queryBuilderSelect',\n                className: 'inline-field',\n                data: {\n                  defaultValue: 'is'\n                },\n                templateOptions: {\n                  label: '',\n                  required: true,\n                  options: [\n                    {value: 'is', name: 'is'},\n                    {value: 'is_not', name: 'is not'},\n                    {value: 'contains', name: 'contains'},\n                    {value: 'begins_with', name: 'begins with'},\n                    {value: 'does_not_contain', name: 'does not contain'},\n                    {value: 'none', name: 'none'}\n                  ]\n                }\n              },\n              {\n                key: 'parameters[0]',\n                type: 'input',\n                className: 'inline-field',\n                hideExpression: 'model.name === \"none\"',\n                templateOptions: {\n                  label: '',\n                  required: true\n                }\n              }\n            ],\n            reference_build: [\n              {\n                key: 'name',\n                type: 'queryBuilderSelect',\n                className: 'inline-field inline-field-md',\n                data: {\n                  defaultValue: 'is_equal_to'\n                },\n                templateOptions: {\n                  label: '',\n                  required: true,\n                  options: [\n                    {value: 'is_equal_to', name: 'is'},\n                    {value: 'is_not_equal_to', name: 'is not'}\n                  ]\n                }\n              },\n              {\n                key: 'parameters[0]',\n                type: 'queryBuilderSelect',\n                className: 'inline-field',\n                data: {\n                  defaultValue: 'GRCh38'\n                },\n                templateOptions: {\n                  label: '',\n                  required: true,\n                  options: [\n                    { value: 'GRCh38', name: 'GRCh38 (hg20)' },\n                    { value: 'GRCh37', name: 'GRCh37 (hg19)' },\n                    { value: 'NCBI36', name: 'NCBI36 (hg18)' }\n                  ]\n                }\n              }\n            ],\n            ensembl_version: [\n              {\n                key: 'name',\n                type: 'queryBuilderSelect',\n                className: 'inline-field',\n                data: {\n                  defaultValue: 'is_equal_to'\n                },\n                templateOptions: {\n                  label: '',\n                  required: true,\n                  options: [\n                    {value: 'is_equal_to', name: 'is'},\n                    {value: 'is_not_equal_to', name: 'is not'}\n                  ]\n                }\n              },\n              {\n                key: 'parameters[0]',\n                type: 'input',\n                className: 'inline-field',\n                hideExpression: 'model.name === \"is_empty\"',\n                templateOptions: {\n                  label: '',\n                  required: true\n                }\n              }\n            ],\n            reference_bases: [\n              {\n                key: 'name',\n                type: 'queryBuilderSelect',\n                className: 'inline-field',\n                data: {\n                  defaultValue: 'contains'\n                },\n                templateOptions: {\n                  label: '',\n                  required: true,\n                  options: [\n                    {value: 'contains', name: 'contains'},\n                    {value: 'begins_with', name: 'begins with'},\n                    {value: 'does_not_contain', name: 'does not contain'},\n                    {value: 'is_empty', name: 'is empty'}\n                  ]\n                }\n              },\n              {\n                key: 'parameters[0]',\n                type: 'input',\n                className: 'inline-field',\n                hideExpression: 'model.name === \"is_empty\"',\n                templateOptions: {\n                  label: '',\n                  required: true\n                }\n              }\n            ],\n            variant_bases: [\n              {\n                key: 'name',\n                type: 'queryBuilderSelect',\n                className: 'inline-field',\n                data: {\n                  defaultValue: 'contains'\n                },\n                templateOptions: {\n                  label: '',\n                  required: true,\n                  options: [\n                    {value: 'contains', name: 'contains'},\n                    {value: 'begins_with', name: 'begins with'},\n                    {value: 'does_not_contain', name: 'does not contain'},\n                    {value: 'is_empty', name: 'is empty'}\n                  ]\n                }\n              },\n              {\n                key: 'parameters[0]',\n                type: 'input',\n                className: 'inline-field',\n                hideExpression: 'model.name === \"is_empty\"',\n                templateOptions: {\n                  label: '',\n                  required: true\n                }\n              }\n            ],\n            chromosome: [\n              {\n                key: 'name',\n                type: 'queryBuilderSelect',\n                className: 'inline-field inline-field-md',\n                data: {\n                  defaultValue: 'is_equal_to'\n                },\n                templateOptions: {\n                  label: '',\n                  required: true,\n                  options: [\n                    {value: 'is_equal_to', name: 'is'},\n                    {value: 'is_not_equal_to', name: 'is not'},\n                    {value: 'is_empty', name: 'is empty'}\n                  ]\n                }\n              },\n              {\n                key: 'parameters[0]',\n                type: 'input',\n                className: 'inline-field',\n                hideExpression: 'model.name === \"is_empty\"',\n                templateOptions: {\n                  label: '',\n                  required: true\n                }\n              }\n            ],\n            start: [\n              {\n                key: 'name',\n                type: 'queryBuilderSelect',\n                className: 'inline-field',\n                data: {\n                  defaultValue: 'is_greater_than_or_equal_to'\n                },\n                templateOptions: {\n                  required: true,\n                  label: '',\n                  options: [\n                    { value: 'is_greater_than_or_equal_to', name: 'is greater than or equal to' },\n                    { value: 'is_greater_than', name: 'is greater than' },\n                    { value: 'is_less_than', name: 'is less than' },\n                    { value: 'is_less_than_or_equal_to', name: 'is less than or equal to' },\n                    { value: 'is_equal_to', name: 'is equal to' },\n                    { value: 'is_in_the_range', name: 'is in the range'}\n                  ],\n                  onChange: function(value, options, scope) {\n                    _.pullAt(scope.model.parameters, 1,2);\n                  }\n                }\n              },\n              {\n                key: 'parameters[0]',\n                type: 'input',\n                className: 'inline-field',\n                templateOptions: {\n                  label: '',\n                  required: true\n                }\n              },\n              {\n                template: 'to',\n                className: 'inline-field',\n                hideExpression: 'model.name != \"is_in_the_range\"'\n              },\n              {\n                key: 'parameters[1]',\n                type: 'input',\n                className: 'inline-field',\n                hideExpression: 'model.name != \"is_in_the_range\"',\n                templateOptions: {\n                  label: '',\n                  required: true\n                }\n              }\n            ],\n            stop: [\n              {\n                key: 'name',\n                type: 'queryBuilderSelect',\n                className: 'inline-field',\n                data: {\n                  defaultValue: 'is_greater_than_or_equal_to'\n                },\n                templateOptions: {\n                  required: true,\n                  label: '',\n                  options: [\n                    { value: 'is_greater_than_or_equal_to', name: 'is greater than or equal to' },\n                    { value: 'is_greater_than', name: 'is greater than' },\n                    { value: 'is_less_than', name: 'is less than' },\n                    { value: 'is_less_than_or_equal_to', name: 'is less than or equal to' },\n                    { value: 'is_equal_to', name: 'is equal to' },\n                    { value: 'is_in_the_range', name: 'is in the range'}\n                  ],\n                  onChange: function(value, options, scope) {\n                    _.pullAt(scope.model.parameters, 1,2);\n                  }\n                }\n              },\n              {\n                key: 'parameters[0]',\n                type: 'input',\n                className: 'inline-field',\n                templateOptions: {\n                  label: '',\n                  required: true\n                }\n              },\n              {\n                template: 'to',\n                className: 'inline-field',\n                hideExpression: 'model.name != \"is_in_the_range\"'\n              },\n              {\n                key: 'parameters[1]',\n                type: 'input',\n                className: 'inline-field',\n                hideExpression: 'model.name != \"is_in_the_range\"',\n                templateOptions: {\n                  label: '',\n                  required: true\n                }\n              }\n            ],\n            representative_transcript: [\n              {\n                key: 'name',\n                type: 'queryBuilderSelect',\n                className: 'inline-field',\n                data: {\n                  defaultValue: 'contains'\n                },\n                templateOptions: {\n                  label: '',\n                  required: true,\n                  options: [\n                    {value: 'contains', name: 'contains'},\n                    {value: 'begins_with', name: 'begins with'},\n                    {value: 'does_not_contain', name: 'does not contain'},\n                    {value: 'is_empty', name: 'is empty'}\n                  ]\n                }\n              },\n              {\n                key: 'parameters[0]',\n                type: 'input',\n                className: 'inline-field',\n                hideExpression: 'model.name === \"is_empty\"',\n                templateOptions: {\n                  label: '',\n                  required: true\n                }\n              }\n            ],\n            chromosome2: [\n              {\n                key: 'name',\n                type: 'queryBuilderSelect',\n                className: 'inline-field inline-field-md',\n                data: {\n                  defaultValue: 'is_equal_to'\n                },\n                templateOptions: {\n                  label: '',\n                  required: true,\n                  options: [\n                    {value: 'is_equal_to', name: 'is'},\n                    {value: 'is_not_equal_to', name: 'is not'},\n                    {value: 'is_empty', name: 'is empty'}\n                  ]\n                }\n              },\n              {\n                key: 'parameters[0]',\n                type: 'input',\n                className: 'inline-field',\n                hideExpression: 'model.name === \"is_empty\"',\n                templateOptions: {\n                  label: '',\n                  required: true\n                }\n              }\n            ],\n            start2: [\n              {\n                key: 'name',\n                type: 'queryBuilderSelect',\n                className: 'inline-field',\n                data: {\n                  defaultValue: 'is_greater_than_or_equal_to'\n                },\n                templateOptions: {\n                  required: true,\n                  label: '',\n                  options: [\n                    { value: 'is_greater_than_or_equal_to', name: 'is greater than or equal to' },\n                    { value: 'is_greater_than', name: 'is greater than' },\n                    { value: 'is_less_than', name: 'is less than' },\n                    { value: 'is_less_than_or_equal_to', name: 'is less than or equal to' },\n                    { value: 'is_equal_to', name: 'is equal to' },\n                    { value: 'is_in_the_range', name: 'is in the range'}\n                  ],\n                  onChange: function(value, options, scope) {\n                    _.pullAt(scope.model.parameters, 1,2);\n                  }\n                }\n              },\n              {\n                key: 'parameters[0]',\n                type: 'input',\n                className: 'inline-field',\n                templateOptions: {\n                  label: '',\n                  required: true\n                }\n              },\n              {\n                template: 'to',\n                className: 'inline-field',\n                hideExpression: 'model.name != \"is_in_the_range\"'\n              },\n              {\n                key: 'parameters[1]',\n                type: 'input',\n                className: 'inline-field',\n                hideExpression: 'model.name != \"is_in_the_range\"',\n                templateOptions: {\n                  label: '',\n                  required: true\n                }\n              }\n            ],\n            stop2: [\n              {\n                key: 'name',\n                type: 'queryBuilderSelect',\n                className: 'inline-field',\n                data: {\n                  defaultValue: 'is_greater_than_or_equal_to'\n                },\n                templateOptions: {\n                  required: true,\n                  label: '',\n                  options: [\n                    { value: 'is_greater_than_or_equal_to', name: 'is greater than or equal to' },\n                    { value: 'is_greater_than', name: 'is greater than' },\n                    { value: 'is_less_than', name: 'is less than' },\n                    { value: 'is_less_than_or_equal_to', name: 'is less than or equal to' },\n                    { value: 'is_equal_to', name: 'is equal to' },\n                    { value: 'is_in_the_range', name: 'is in the range'}\n                  ],\n                  onChange: function(value, options, scope) {\n                    _.pullAt(scope.model.parameters, 1,2);\n                  }\n                }\n              },\n              {\n                key: 'parameters[0]',\n                type: 'input',\n                className: 'inline-field',\n                templateOptions: {\n                  label: '',\n                  required: true\n                }\n              },\n              {\n                template: 'to',\n                className: 'inline-field',\n                hideExpression: 'model.name != \"is_in_the_range\"'\n              },\n              {\n                key: 'parameters[1]',\n                type: 'input',\n                className: 'inline-field',\n                hideExpression: 'model.name != \"is_in_the_range\"',\n                templateOptions: {\n                  label: '',\n                  required: true\n                }\n              }\n            ],\n            representative_transcript2: [\n              {\n                key: 'name',\n                type: 'queryBuilderSelect',\n                className: 'inline-field',\n                data: {\n                  defaultValue: 'contains'\n                },\n                templateOptions: {\n                  label: '',\n                  required: true,\n                  options: [\n                    {value: 'contains', name: 'contains'},\n                    {value: 'begins_with', name: 'begins with'},\n                    {value: 'does_not_contain', name: 'does not contain'},\n                    {value: 'is_empty', name: 'is empty'}\n                  ]\n                }\n              },\n              {\n                key: 'parameters[0]',\n                type: 'input',\n                className: 'inline-field',\n                hideExpression: 'model.name === \"is_empty\"',\n                templateOptions: {\n                  label: '',\n                  required: true\n                }\n              }\n            ],\n            suggested_changes_count: [\n              {\n                template: 'with status',\n                className: 'inline-field'\n              },\n              {\n                key: 'parameters[0]', // status\n                type: 'queryBuilderSelect',\n                className: 'inline-field',\n                data: {\n                  defaultValue: 'new'\n                },\n                templateOptions: {\n                  required: true,\n                  label: '',\n                  options: [\n                    { value: 'new', name: 'new' },\n                    { value: 'applied', name: 'applied' },\n                    { value: 'rejected', name: 'rejected' }\n                  ]\n                }\n              },\n              {\n                key: 'name',\n                type: 'queryBuilderSelect',\n                className: 'inline-field',\n                data: {\n                  defaultValue: 'is_greater_than_or_equal_to'\n                },\n                templateOptions: {\n                  required: true,\n                  label: '',\n                  options: [\n                    { value: 'is_greater_than_or_equal_to', name: 'is greater than or equal to' },\n                    { value: 'is_greater_than', name: 'is greater than' },\n                    { value: 'is_less_than', name: 'is less than' },\n                    { value: 'is_less_than_or_equal_to', name: 'is less than or equal to' },\n                    { value: 'is_equal_to', name: 'is equal to' },\n                    { value: 'is_in_the_range', name: 'is in the range'}\n                  ],\n                  onChange: function(value, options, scope) {\n                    _.pullAt(scope.model.parameters, 1,2);\n                  }\n                }\n              },\n              {\n                key: 'parameters[1]', // from value\n                type: 'input',\n                className: 'inline-field inline-field-xs',\n                templateOptions: {\n                  label: '',\n                  required: true\n                }\n              },\n              {\n                template: 'to',\n                className: 'inline-field',\n                hideExpression: 'model.name.length > 0 && model.name !== \"is_in_the_range\"'\n              },\n              {\n                key: 'parameters[2]', // to value\n                type: 'input',\n                className: 'inline-field inline-field-xs',\n                hideExpression: 'model.name.length > 0 && model.name !== \"is_in_the_range\"',\n                templateOptions: {\n                  label: '',\n                  required: true\n                }\n              }\n            ]\n          }\n        }\n      }\n    ];\n\n    vm.fields.variantGroups = [\n      {\n        type: 'queryRow',\n        key: 'queries',\n        templateOptions: {\n          rowFields: [\n            {\n              key: 'field',\n              type: 'queryBuilderSelect',\n              templateOptions: {\n                label: '',\n                required: true,\n                options: [\n                  { value: '', name: 'Please select a field' },\n                  { value: 'name', name: 'Name' },\n                  { value: 'description', name: 'Description' },\n                  { value: 'contains_variant', name: 'Contains Variant' },\n                  { value: 'variant_count', name: 'Variant Count' }\n                ],\n                onChange: function(value, options, scope) {\n                  scope.model.condition = {\n                    name: undefined,\n                    parameters: []\n                  };\n                }\n              }\n            }\n          ],\n          conditionFields: {\n            name: [\n              {\n                key: 'name',\n                type: 'queryBuilderSelect',\n                className: 'inline-field',\n                data: {\n                  defaultValue: 'contains'\n                },\n                templateOptions: {\n                  label: '',\n                  required: true,\n                  options: [\n                    {value: 'contains', name: 'contains'},\n                    {value: 'begins_with', name: 'begins with'},\n                    {value: 'does_not_contain', name: 'does not contain'},\n                    {value: 'is_empty', name: 'is empty'}\n                  ]\n                }\n              },\n              {\n                key: 'parameters[0]',\n                type: 'input',\n                className: 'inline-field',\n                hideExpression: 'model.name === \"is_empty\"',\n                templateOptions: {\n                  label: '',\n                  required: true\n                }\n              }\n            ],\n            contains_variant: [\n              {\n                template: 'with name',\n                className: 'inline-field'\n              },\n              {\n                key: 'name',\n                type: 'queryBuilderSelect',\n                className: 'inline-field',\n                data: {\n                  defaultValue: 'contains'\n                },\n                templateOptions: {\n                  label: '',\n                  required: true,\n                  options: [\n                    {value: 'contains', name: 'containing'},\n                    {value: 'begins_with', name: 'that begins with'},\n                    {value: 'does_not_contain', name: 'does not begin with'},\n                    {value: 'is_empty', name: 'is empty'}\n                  ]\n                }\n              },\n              {\n                key: 'parameters[0]',\n                type: 'input',\n                className: 'inline-field',\n                hideExpression: 'model.name === \"is_empty\"',\n                templateOptions: {\n                  label: '',\n                  required: true\n                }\n              }\n            ],\n            description: [\n              {\n                key: 'name',\n                type: 'queryBuilderSelect',\n                className: 'inline-field',\n                data: {\n                  defaultValue: 'contains'\n                },\n                templateOptions: {\n                  label: '',\n                  required: true,\n                  options: [\n                    {value: 'contains', name: 'contains'},\n                    {value: 'begins_with', name: 'begins with'},\n                    {value: 'does_not_contain', name: 'does not contain'},\n                    {value: 'is_empty', name: 'is empty'}\n                  ]\n                }\n              },\n              {\n                key: 'parameters[0]',\n                type: 'input',\n                className: 'inline-field',\n                hideExpression: 'model.name === \"is_empty\"',\n                templateOptions: {\n                  label: '',\n                  required: true\n                }\n              }\n            ],\n            variant_count: [\n              {\n                key: 'name',\n                type: 'queryBuilderSelect',\n                className: 'inline-field',\n                data: {\n                  defaultValue: 'is_greater_than_or_equal_to'\n                },\n                templateOptions: {\n                  required: true,\n                  label: '',\n                  options: [\n                    { value: 'is_greater_than_or_equal_to', name: 'is greater than or equal to' },\n                    { value: 'is_greater_than', name: 'is greater than' },\n                    { value: 'is_less_than', name: 'is less than' },\n                    { value: 'is_less_than_or_equal_to', name: 'is less than or equal to' },\n                    { value: 'is_equal_to', name: 'is equal to' },\n                    { value: 'is_in_the_range', name: 'is in the range'}\n                  ],\n                  onChange: function(value, options, scope) {\n                    _.pullAt(scope.model.parameters, 1,2);\n                  }\n                }\n              },\n              {\n                key: 'parameters[1]', // from value\n                type: 'input',\n                className: 'inline-field inline-field-xs',\n                templateOptions: {\n                  label: '',\n                  required: true\n                }\n              },\n              {\n                template: 'to',\n                className: 'inline-field',\n                hideExpression: 'model.name.length > 0 && model.name !== \"is_in_the_range\"'\n              },\n              {\n                key: 'parameters[2]', // to value\n                type: 'input',\n                className: 'inline-field inline-field-xs',\n                hideExpression: 'model.name.length > 0 && model.name !== \"is_in_the_range\"',\n                templateOptions: {\n                  label: '',\n                  required: true\n                }\n              }\n            ]\n          }\n        }\n      }\n    ];\n\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular.module('civic.search')\n    .directive('queryBuilder', queryBuilder)\n    .controller('QueryBuilderController', QueryBuilderController);\n\n  // @ngInject\n  function queryBuilder() {\n    var directive = {\n      restrict: 'E',\n      replace: true,\n      scope: {\n        entity: '=',\n        fields: '='\n      },\n      controller: 'QueryBuilderController',\n      templateUrl: 'app/views/search/directives/queryBuilder.tpl.html'\n    };\n\n    return directive;\n  }\n\n  // @ngInject\n  function QueryBuilderController($scope, $state, $stateParams, $log, _, Search) {\n    var vm = $scope.vm = {};\n    var entity = vm.entity = $scope.entity;\n\n    // function assignment\n    vm.onSubmit = onSubmit;\n    vm.options = {};\n    vm.searchResults = [];\n    vm.showGrid = true;\n\n    init();\n\n    // function definition\n    function onSubmit() {\n      $log.debug(JSON.stringify(vm.model));\n      //vm.searchResults = Search.post(vm.model);\n      //vm.showEvidenceGrid = true;\n      vm.model.entity = entity;\n      vm.model.save = true;\n      Search.post(vm.model)\n        .then(function(response) {\n          vm.searchResults = response.results;\n          vm.showGrid = true;\n          if(_.has(response, 'token') && !_.isNull(response.token)) {\n            var state = entity === 'evidence_items' ? 'search.evidence' : 'search.' + entity;\n            $state.transitionTo(state, { token: response.token }, {notify: false});\n          }\n        });\n    }\n\n    vm.buttonLabel = 'Search';\n\n    function init() {\n      if (_.has($stateParams, 'token') && !_.isEmpty($stateParams.token)) {\n        Search.get({entity: entity, token: $stateParams.token})\n          .then(function (response) {\n            vm.model.operator = response.params.operator;\n            vm.model.queries = response.params.queries;\n            vm.searchResults = response.results;\n            vm.showGrid = true;\n          });\n      } else {\n        Search.reset();\n        vm.model = {\n          operator: 'AND',\n          queries: [\n            {\n              field: '',\n              condition: {\n                name: undefined,\n                parameters: []\n              }\n            }\n          ]\n        };\n      }\n    }\n    vm.operatorField = [\n      {\n        key: 'operator',\n        type: 'queryBuilderSelect',\n        data: {\n          defaultValue: 'AND'\n        },\n        templateOptions: {\n          label: '',\n          options: [\n            { value: 'AND', name: 'all' },\n            { value: 'OR', name: 'any' }\n          ]\n        }\n      }\n    ];\n\n    vm.fields = $scope.fields;\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.search')\n    .config(queryBuilderConfig);\n\n  // @ngInject\n  function queryBuilderConfig(formlyConfigProvider) {\n    var unique = 1;\n\n    formlyConfigProvider.setType({\n      name: 'queryBuilderSelect',\n      extends: 'select',\n      controller: /* @ngInject */ function($scope, $parse) {\n        // angular-formly's options.defaultValue appears to ignore current model values,\n        // so we must implement our own default value feature here\n        var getter = $parse($scope.options.key);\n        var setter = getter.assign;\n        if(getter($scope.model) === undefined) {\n          // no model value found, so set field value to default value\n          setter($scope.model, $scope.options.data.defaultValue);\n        }\n      }\n    });\n\n    formlyConfigProvider.setType({\n      name: 'queryRow',\n      templateUrl: 'app/views/search/forms/queryBuilder.type.tpl.html',\n      controller: /* @ngInject */ function($scope) {\n        $scope.formOptions = {formState: $scope.formState};\n        $scope.addNew = addNew;\n\n        $scope.copyFields = copyFields;\n\n        function copyFields(fields) {\n          fields = angular.copy(fields);\n          addRandomIds(fields);\n          return fields;\n        }\n\n        function addNew() {\n          $scope.model[$scope.options.key] = $scope.model[$scope.options.key] || [];\n          var repeatsection = $scope.model[$scope.options.key];\n          //var lastSection = repeatsection[repeatsection.length - 1];\n          var newsection = { field: '', condition: { name: undefined, parameters: [] } };\n          //if (lastSection) {\n          //  newsection = angular.copy(lastSection);\n          //}\n          repeatsection.push(newsection);\n        }\n\n        function addRandomIds(fields) {\n          unique++;\n          angular.forEach(fields, function(field, index) {\n            if (field.fieldGroup) {\n              addRandomIds(field.fieldGroup);\n              return; // fieldGroups don't need an ID\n            }\n\n            if (field.templateOptions && field.templateOptions.fields) {\n              addRandomIds(field.templateOptions.fields);\n            }\n\n            field.id = field.id || (field.key + '_' + index + '_' + unique + getRandomInt(0, 9999));\n          });\n        }\n\n        function getRandomInt(min, max) {\n          return Math.floor(Math.random() * (max - min)) + min;\n        }\n      }\n    });\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.browse')\n    .config(BrowseViewConfig);\n\n  // @ngInject\n  function BrowseViewConfig($stateProvider) {\n    $stateProvider\n      .state('browse', {\n        abstract: true,\n        url: '/browse',\n        templateUrl: 'app/views/browse/browse.tpl.html'\n      })\n      .state('browse.variants', {\n        url: '/variants?page',\n        reloadOnSearch: false,\n        controller: 'BrowseController',\n        templateUrl: 'app/views/browse/browseViews.tpl.html',\n        data: {\n          titleExp: '\"Browse Variants\"',\n          navMode: 'sub'\n        },\n        resolve: {\n          mode: function() {\n            return 'variants';\n          },\n          page: /* @ngInject */ function($stateParams, _) {\n            if(!_.isUndefined($stateParams.page)) { return $stateParams.page; }\n            else { return 1; }\n          }\n        }\n      })\n      .state('browse.genes', {\n        url: '/genes?page',\n        reloadOnSearch: false,\n        controller: 'BrowseController',\n        templateUrl: 'app/views/browse/browseViews.tpl.html',\n        data: {\n          titleExp: '\"Browse Genes\"',\n          navMode: 'sub'\n        },\n        resolve: {\n          mode: function() {\n            return 'genes';\n          },\n          page: /* @ngInject */ function($stateParams, _) {\n            if(!_.isUndefined($stateParams.page)) { return $stateParams.page; }\n            else { return 1; }\n          }\n        }\n      });\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.browse')\n    .controller('BrowseController', BrowseController);\n\n  // @ngInject\n  function BrowseController($scope, $log, mode, page) {\n    var ctrl = $scope.ctrl = {};\n    ctrl.mode = mode;\n    ctrl.page = page;\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events')\n    .directive('browseGrid', browseGrid)\n    .controller('BrowseGridController', BrowseGridController);\n\n  // @ngInject\n  function browseGrid() {\n    var directive = {\n      restrict: 'E',\n      replace: true,\n      scope: {\n        mode: '=',\n        page: '='\n      },\n      templateUrl: 'app/views/browse/directives/browseGrid.tpl.html',\n      controller: 'BrowseGridController'\n    };\n    return directive;\n  }\n\n  // @ngInject\n  function BrowseGridController($scope, $state, $location, uiGridConstants, _,\n                                Datatables) {\n    var ctrl = $scope.ctrl = {};\n\n    var pageCount = 25;\n    var maxRows = ctrl.maxRows = pageCount;\n\n    // declare ui paging/sorting/filtering vars\n    ctrl.mode = $scope.mode;\n    ctrl.totalItems = Number();\n    ctrl.page = $scope.page;\n    ctrl.count= Number();\n\n    ctrl.filters = [];\n    ctrl.sorting = [{\n      field: 'evidence_item_count',\n      direction: 'desc'\n    }];\n\n    $scope.$watch('ctrl.totalItems', function() {\n      ctrl.totalPages = Math.ceil(ctrl.totalItems / pageCount);\n    });\n\n    ctrl.gridOptions = {\n      enablePaginationControls: false,\n\n      useExternalFiltering: true,\n      useExternalSorting: true,\n      useExternalPaging: true,\n\n      paginationPageSizes: [maxRows],\n      paginationPageSize: maxRows,\n      minRowsToShow: maxRows + 1,\n\n      enableHorizontalScrollbar: uiGridConstants.scrollbars.NEVER,\n      enableVerticalScrollbar: uiGridConstants.scrollbars.NEVER,\n\n      enableFiltering: true,\n      enableColumnMenus: false,\n      enableSorting: true,\n      enableRowSelection: true,\n      enableRowHeaderSelection: false,\n      multiSelect: false,\n      modifierKeysToMultiSelect: false,\n      noUnselect: true,\n      rowTemplate: 'app/views/browse/browseGridRow.tpl.html'\n    };\n\n    // set up column defs and data transforms for each mode\n    var modeColumnDefs = {\n      'variants': [\n        {\n          name: 'variant',\n          width: '25%',\n          enableFiltering: true,\n          allowCellFocus: false,\n          filter: {\n            condition: uiGridConstants.filter.CONTAINS\n          }\n        },\n        {\n          name: 'entrez_gene',\n          width: '15%',\n          enableFiltering: true,\n          allowCellFocus: false,\n          filter: {\n            condition: uiGridConstants.filter.CONTAINS\n          }\n        },\n        {\n          name: 'diseases',\n          displayName: 'Diseases',\n          width: '25%',\n          enableFiltering: true,\n          allowCellFocus: false,\n          filter: {\n            condition: uiGridConstants.filter.CONTAINS\n          },\n          cellTemplate: 'app/views/browse/browseGridTooltipCell.tpl.html'\n        },\n        {\n          name: 'drugs',\n          displayName: 'Drugs',\n          width: '25%',\n          enableFiltering: true,\n          allowCellFocus: false,\n          filter: {\n            condition: uiGridConstants.filter.CONTAINS\n          },\n          cellTemplate: 'app/views/browse/browseGridTooltipCell.tpl.html'\n        },\n        {\n          name: 'evidence_item_count',\n          width: '10%',\n          displayName: 'Evidence',\n          sort: {\n            direction: uiGridConstants.DESC\n          },\n          enableFiltering: false,\n          allowCellFocus: false,\n          filter: {\n            condition: uiGridConstants.filter.CONTAINS\n          }\n        }\n      ],\n      'genes': [\n        {\n          name: 'name',\n          width: '15%',\n          enableFiltering: true,\n          allowCellFocus: false,\n          filter: {\n            condition: uiGridConstants.filter.CONTAINS\n          }\n        },\n        {\n          name: 'gene_aliases',\n          width: '30%',\n          displayName: 'Gene Aliases',\n          enableFiltering: true,\n          allowCellFocus: false,\n          cellTemplate: 'app/views/browse/browseGridTooltipCell.tpl.html',\n          filter: {\n            condition: uiGridConstants.filter.CONTAINS\n          }\n        },\n        {\n          name: 'diseases',\n          //width: '30%',\n          displayName: 'Diseases',\n          enableFiltering: true,\n          allowCellFocus: false,\n          filter: {\n            condition: uiGridConstants.filter.CONTAINS\n          },\n          cellTemplate: 'app/views/browse/browseGridTooltipCell.tpl.html'\n        },\n        {\n          name: 'drugs',\n          //width: '30%',\n          displayName: 'Drugs',\n          enableFiltering: true,\n          allowCellFocus: false,\n          filter: {\n            condition: uiGridConstants.filter.CONTAINS\n          },\n          cellTemplate: 'app/views/browse/browseGridTooltipCell.tpl.html'\n        },\n        {\n          name: 'variant_count',\n          displayName: 'Variants',\n          width: '10%',\n          enableFiltering: false,\n          allowCellFocus: false,\n          filter: {\n            condition: uiGridConstants.filter.CONTAINS\n          }\n        },\n        {\n          name: 'evidence_item_count',\n          width: '10%',\n          displayName: 'Evidence',\n          sort: {\n            direction: uiGridConstants.DESC\n          },\n          enableFiltering: false,\n          allowCellFocus: false,\n          filter: {\n            condition: uiGridConstants.filter.CONTAINS\n          }\n        }\n      ]\n    };\n\n    ctrl.gridOptions.onRegisterApi = function(gridApi) {\n      ctrl.gridApi = gridApi;\n      // called from pagination directive when page changes\n      ctrl.pageChanged = function() {\n        $location.search('page', ctrl.page);\n        updateData();\n      };\n\n      // reset paging and do some other stuff on filter changes\n      gridApi.core.on.filterChanged($scope, function() {\n        // updateData with new filters\n        var filteredCols = _.filter(this.grid.columns, function(col) {\n          return _.has(col.filter, 'term') && !_.isEmpty(col.filter.term) && _.isString(col.filter.term);\n        });\n        if (filteredCols.length > 0) {\n          ctrl.filters = _.map(filteredCols, function(col) {\n            return {\n              'field': col.field,\n              'term': col.filter.term\n            };\n          });\n        } else {\n          ctrl.filters = [];\n        }\n        ctrl.page = 1;\n        updateData();\n      });\n\n      gridApi.core.on.sortChanged($scope, function(grid, sortColumns) {\n        if (sortColumns.length > 0) {\n          ctrl.sorting = _.map(sortColumns, function(col) {\n            return {\n              'field': col.field,\n              'direction': col.sort.direction\n            };\n          });\n        } else {\n          ctrl.sorting = [];\n        }\n        updateData();\n      });\n\n      // called when user clicks on a row\n      gridApi.selection.on.rowSelectionChanged($scope, function(row){\n        if(ctrl.mode === 'variants') {\n          $state.go('events.genes.summary.variants.summary', {\n            geneId: row.entity.gene_id,\n            variantId: row.entity.variant_id,\n            '#': 'variant'\n          });\n        } else {\n          $state.go('events.genes.summary', {\n            geneId: row.entity.id,\n            '#': 'gene'\n          });\n        }\n      });\n    };\n\n    function updateData() {\n      fetchData(ctrl.mode, ctrl.count, ctrl.page, ctrl.sorting, ctrl.filters)\n        .then(function(data){\n          ctrl.gridOptions.data = data.result;\n          ctrl.gridOptions.columnDefs = modeColumnDefs[ctrl.mode];\n          ctrl.totalItems = data.total;\n        });\n    }\n\n    function fetchData(mode, count, page, sorting, filters) {\n      var request;\n\n      request= {\n        mode: mode,\n        count: count,\n        page: page\n      };\n\n      if (filters.length > 0) {\n        _.each(filters, function(filter) {\n          request['filter[' + filter.field + ']'] = filter.term;\n        });\n      }\n\n      if (sorting.length > 0) {\n        _.each(sorting, function(sort) {\n          request['sorting[' + sort.field + ']'] = sort.direction;\n        });\n      }\n      return Datatables.query(request);\n    }\n\n    updateData();\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.genes', ['ui.router']);\n  angular.module('civic.events.variants', ['ui.router']);\n  angular.module('civic.events.variantGroups', ['ui.router']);\n  angular.module('civic.events.evidence', ['ui.router']);\n  angular.module('civic.events.common', []);\n  angular.module('civic.events')\n    .config(EventsViewConfig);\n\n  // @ngInject\n  function EventsViewConfig($stateProvider) {\n    $stateProvider\n      .state('events', {\n        abstract: true,\n        url: '/events',\n        template: '<ui-view id=\"events-view\"></ui-view>',\n        onExit: /* @ngInject */ function($deepStateRedirect) {\n          $deepStateRedirect.reset();\n        }\n      });\n\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.common')\n    .controller('EntityViewController', EntityViewController)\n    .directive('entityView', function() {\n      return {\n        restrict: 'E',\n        scope: {\n          viewModel: '=',\n          viewRevisions: '=',\n          viewOptions: '='\n        },\n        transclude: true,\n        controller: 'EntityViewController',\n        templateUrl: 'app/views/events/common/entityView.tpl.html'\n      };\n    });\n\n  //@ngInject\n  function EntityViewController($scope) {\n    // entityViewModel and entityViewOptions are defined in [entity]ViewControllers, and passed to\n    // this directive in [entity]View templates. This controller can then be required by child common components\n    // to obtain references to view models and view options.\n    this.entityViewModel = $scope.viewModel;\n    this.entityViewRevisions = $scope.viewRevisions;\n    this.entityViewOptions= $scope.viewOptions;\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n\n  /**\n   * Permits declarative (and dynamic) definitions of tab links with full routes.\n   *\n   * requires 'ui.router' and 'ui.bootstrap'\n   * (uses tabset and tab directives in ui.bootstrap and route changes in ui.router)\n   *\n   * You can define (for styling) the attributes type=\"pills\" and vertical=\"true | false\" and justified=\"true | false\"\n   *\n   * Watches the $stateChangeXX events so it can update the parent tab(s) when using $state.go or ui-sref anchors.\n   *\n   * See ui-router-tabs.spec.js for tests.\n   *\n   * Author: Robert Pocklington (rpocklin@gmail.com)\n   * License: MIT\n   *\n   */\n\n  angular.module('civic.events.common')\n    .directive('entityTabs', entityTabsDirective)\n    .controller('EntityTabsController', EntityTabsController);\n\n// @ngInject\n  function entityTabsDirective() {\n    return /* @ngInject */ {\n      restrict: 'E',\n      scope: {\n        showCorner: '=',\n        justified: '=',\n        vertical: '='\n      },\n      require: '^^entityView',\n      link: entityTabsLink,\n      controller: 'EntityTabsController',\n      templateUrl: 'app/views/events/common/entityTabs.tpl.html'\n    };\n  }\n\n  function entityTabsLink(scope, element, attributes, entityView) {\n    var _ = window._;\n    var vm = scope.vm; // todo convert the rest of this controller to vm\n    var entityViewModel = scope.entityViewModel = entityView.entityViewModel;\n    var entityViewRevisions = scope.entityViewRevisions = entityView.entityViewRevisions;\n    var entityViewOptions = scope.entityViewOptions = entityView.entityViewOptions;\n\n    element.ready(function() {\n      scope.scroll();\n    });\n\n    vm.type = '';\n    vm.name = '';\n\n    vm.type = _.map(entityViewModel.data.item.type.replace('_', ' ').split(' '), function(word) {\n      return word.toUpperCase();\n    }).join(' ');\n\n    vm.actions = {};\n    vm.actions = entityViewModel.data.item.lifecycle_actions;\n    entityViewRevisions.getPendingFields(entityViewModel.data.item.id)\n      .then(function(fields) {\n        vm.pendingFields = _.keys(entityViewRevisions.data.pendingFields);\n        vm.hasPendingFields = fields.length > 0;\n      });\n\n    vm.anchorId = _.kebabCase(vm.type);\n\n    scope.$watch('entityViewModel.data.item.name', function(name) {\n      vm.name = name;\n    });\n\n    scope.$watchCollection('entityViewModel.data.item.lifecycle_actions', function(lifecycle_actions) {\n      vm.actions = lifecycle_actions;\n    });\n\n    // scope.showCorner = (vm.type === 'variant' || vm.type === 'variant_group');\n    scope.viewBackground = 'view-' + entityViewOptions.styles.view.backgroundColor;\n    scope.viewForeground = 'view-' + entityViewOptions.styles.view.foregroundColor;\n    scope.tabs = entityViewOptions.tabData;\n\n    if (!scope.tabs) {\n      throw new Error('entityTabs: \\'data\\' attribute not defined, please check documentation for how to use this directive.');\n    }\n\n    if (!angular.isArray(scope.tabs)) {\n      throw new Error('entityTabs: \\'data\\' attribute must be an array of tab data with at least one tab defined.');\n    }\n\n    var unbindStateChangeSuccess = scope.$on(\n      '$stateChangeSuccess',\n      function () {\n        scope.update_tabs();\n      }\n    );\n    scope.$on('$destroy', unbindStateChangeSuccess);\n  }\n\n  // @ngInject\n  function EntityTabsController($scope,\n                                $state,\n                                $rootScope,\n                                $stateParams,\n                                $location,\n                                $document,\n                                Security,\n                                _) {\n    var vm = $scope.vm = {};\n    vm.isAuthenticated = Security.isAuthenticated;\n    vm.isEditor = Security.isEditor;\n\n    $scope.scroll = function() {\n      var loc = $location.hash();\n      if(!_.isEmpty(loc) &&\n          _.kebabCase(vm.type) === loc &&\n          $rootScope.prevScroll !== loc) {// if view has already been scrolled, ignore subsequent requests\n        var elem = document.getElementById(loc);\n        $rootScope.prevScroll = $location.hash();\n        $document.scrollToElementAnimated(elem);\n      }\n    };\n\n    // store latest stateParams on rootscope, primarily so the Add Evidence button can\n    // include gene and variantIds in the URL\n    $rootScope.stateParams = $stateParams;\n\n    // TODO not sure why this watch is necessary for tabs to be properly set to active on 1st load\n    var unwatch = $scope.$watchCollection('entityViewModel', function() {\n      var currentStateEqualTo = function (tab) {\n        var isEqual = $state.is(tab.route, tab.params, tab.options);\n        return isEqual;\n      };\n\n      $scope.go = function (tab) {\n\n        if (!currentStateEqualTo(tab) && !tab.disabled) {\n          var promise = $state.go(tab.route, tab.params, tab.options);\n\n          /* until the $stateChangeCancel event is released in ui-router, will use this to update\n           tabs if the $stateChangeEvent is cancelled before it finishes loading the state, see\n           https://github.com/rpocklin/ui-router-tabs/issues/19 and\n           https://github.com/angular-ui/ui-router/pull/1090 for further information and\n           https://github.com/angular-ui/ui-router/pull/1844\n\n           $stateChangeCancel is better since it will handle ui-sref and external $state.go(..) calls */\n          promise.catch(function () {\n            $scope.update_tabs();\n          });\n        }\n      };\n\n      /* whether to highlight given route as part of the current state */\n      $scope.active = function (tab) {\n        var route = tab.route;\n        // TODO: this is a kludge to fix misbehaving sub-tabs that we have in talk views, almost certainly not the most elegant solution.\n        if (_.contains(tab.route, 'talk')) {\n          // drop the last route element so all talk ancestor $state.includes() evaluates to true\n          route = _(tab.route.split('.')).dropRightWhile(function(r) { return r !== 'talk'; }).join('.');\n        }\n        var isAncestorOfCurrentRoute = $state.includes(route, _.omit(tab.params, '#'), tab.options);\n        return isAncestorOfCurrentRoute;\n      };\n\n      $scope.update_tabs = function () {\n\n        // sets which tab is active (used for highlighting)\n        angular.forEach($scope.tabs, function (tab) {\n          tab.params = tab.params || {};\n          tab.options = tab.options || {};\n          tab.active = $scope.active(tab);\n        });\n      };\n\n      // this always selects the first tab currently - fixed in ui-bootstrap master but not yet released\n      // see https://github.com/angular-ui/bootstrap/commit/91b5fb62eedbb600d6a6abe32376846f327a903d\n      $scope.update_tabs();\n      unwatch();\n    });\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.common')\n    .controller('EditableFieldController', EditableFieldController)\n    .directive('editableField', editableField);\n\n  // @ngInject\n  function editableField() {\n\n    return {\n      restrict: 'A',\n      transclude: true,\n      scope: {\n        entityViewModel: '=',\n        entityViewRevisions: '=',\n        entityViewOptions: '='\n      },\n      controller: 'EditableFieldController',\n      templateUrl: 'app/views/events/common/editableField.tpl.html'\n    };\n  }\n\n  // @ngInject\n  function EditableFieldController($scope, $state, Security) {\n    var ctrl = $scope.ctrl = {};\n    ctrl.baseState = '';\n    ctrl.stateParams = {};\n\n    ctrl.baseState  = $scope.entityViewOptions.state.baseState;\n    ctrl.gstateParams = $scope.entityViewOptions.state.params;\n    ctrl.entityViewModel = $scope.entityViewModel;\n\n    ctrl.active = $state.includes(ctrl.baseState + '.edit.*');\n    $scope.$on('$stateChangeSuccess', function() {\n      ctrl.active = $state.includes(ctrl.baseState + '.edit.*');\n    });\n\n    ctrl.mouseOver = function() {\n      Security.isAuthenticated() ? ctrl.hover = true: ctrl.hover = false;\n    };\n\n    ctrl.mouseLeave = function() {\n      ctrl.hover = false;\n    };\n\n    ctrl.click = function() {\n      if (Security.isAuthenticated()) {\n        $state.go(ctrl.baseState + '.edit.basic', ctrl.stateParams);\n      }\n    };\n\n  }\n\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.common')\n    .controller('EntityTalkViewController', EntityTalkViewController)\n    .directive('entityTalkView', function() {\n      return {\n        restrict: 'E',\n        scope: {\n          viewModel: '=',\n          revisionsModel: '=',\n          viewOptions: '='\n        },\n        transclude: true,\n        controller: 'EntityTalkViewController',\n        templateUrl: 'app/views/events/common/entityTalkView.tpl.html'\n      };\n    });\n\n  //@ngInject\n  function EntityTalkViewController($scope) {\n    // entityViewModel and entityViewOptions are defined in [entity]ViewControllers, and passed to\n    // this directive in [entity]View templates. This controller can then be required by child common components\n    // to obtain references to view models and view options.\n    this.viewModel = $scope.viewModel;\n    this.revisionsModel = $scope.revisionsModel;\n    this.viewOptions = $scope.viewOptions;\n  }\n})();\n\n(function() {\n  'use strict';\n\n  /**\n   * Permits declarative (and dynamic) definitions of tab links with full routes.\n   *\n   * requires 'ui.router' and 'ui.bootstrap'\n   * (uses tabset and tab directives in ui.bootstrap and route changes in ui.router)\n   *\n   * You can define (for styling) the attributes type=\"pills\" and vertical=\"true | false\" and justified=\"true | false\"\n   *\n   * Watches the $stateChangeXX events so it can update the parent tab(s) when using $state.go or ui-sref anchors.\n   *\n   * See ui-router-tabs.spec.js for tests.\n   *\n   * Author: Robert Pocklington (rpocklin@gmail.com)\n   * License: MIT\n   *\n   */\n\n  angular.module('civic.events.common')\n    .directive('entityTalkTabs', entityTalkTabsDirective)\n    .controller('EntityTalkTabsController', EntityTalkTabsController);\n\n// @ngInject\n  function entityTalkTabsDirective() {\n    return /* @ngInject */ {\n      restrict: 'E',\n      scope: {\n        justified: '=',\n        vertical: '='\n      },\n      require: '^^entityTalkView',\n      link: entityTalkTabsLink,\n      controller: 'EntityTalkTabsController',\n      templateUrl: 'app/views/events/common/entityTalkTabs.tpl.html'\n    };\n  }\n\n  // @ngInject\n  function entityTalkTabsLink(scope, element, attributes, entityTalkView) {\n    var viewModel = scope.viewModel = entityTalkView.viewModel;\n    var viewOptions = scope.viewOptions = entityTalkView.viewOptions;\n\n    scope.type = viewModel.data.item.type;\n    scope.name = viewModel.data.item.name;\n    scope.showCorner = (scope.type === 'variant' || scope.type === 'variant group');\n    scope.tabRowBackground = viewOptions.styles.tabs.tabRowBackground;\n    scope.viewBackground = 'view-' + viewOptions.styles.view.backgroundColor;\n    scope.tabs = viewOptions.tabData;\n\n    if (!scope.tabs) {\n      throw new Error('entityTalkTabs: \\'data\\' attribute not defined, please check documentation for how to use this directive.');\n    }\n\n    if (!angular.isArray(scope.tabs)) {\n      throw new Error('entityTalkTabs: \\'data\\' attribute must be an array of tab data with at least one tab defined.');\n    }\n\n    var unbindStateChangeSuccess = scope.$on(\n      '$stateChangeSuccess',\n      function () {\n        scope.update_tabs();\n      }\n    );\n    scope.$on('$destroy', unbindStateChangeSuccess);\n  }\n\n// @ngInject\n  function EntityTalkTabsController($scope, $state, _) {\n    var unwatch = $scope.$watchCollection('viewModel', function() {\n      var currentStateEqualTo = function (tab) {\n\n        var isEqual = $state.is(tab.route, tab.params, tab.options);\n        return isEqual;\n      };\n\n      $scope.go = function (tab) {\n\n        if (!currentStateEqualTo(tab) && !tab.disabled) {\n          var promise = $state.go(tab.route, tab.params, tab.options);\n\n          /* until the $stateChangeCancel event is released in ui-router, will use this to update\n           tabs if the $stateChangeEvent is cancelled before it finishes loading the state, see\n           https://github.com/rpocklin/ui-router-tabs/issues/19 and\n           https://github.com/angular-ui/ui-router/pull/1090 for further information and\n           https://github.com/angular-ui/ui-router/pull/1844\n\n           $stateChangeCancel is better since it will handle ui-sref and external $state.go(..) calls */\n          promise.catch(function () {\n            $scope.update_tabs();\n          });\n        }\n      };\n\n      /* whether to highlight given route as part of the current state */\n      $scope.active = function (tab) {\n        //var route = tab.route;\n        //// TODO: this is a kludge to fix misbehaving sub-tabs that we have in talk views, almost certainly not the most elegant solution.\n        //if (_.contains(tab.route, 'talk')) {\n        //  // drop the last route element so all talk ancestor $state.includes() evaluates to true\n        //  route = _.chain(tab.route.split('.')).dropRight().value().join('.');\n        //}\n        //var isAncestorOfCurrentRoute = $state.includes(route, tab.params, tab.options);\n        //return isAncestorOfCurrentRoute;\n        var isAncestorOfCurrentRoute = $state.includes(tab.route, _.omit(tab.params, '#'), tab.options);\n        return isAncestorOfCurrentRoute;\n      };\n\n      $scope.update_tabs = function () {\n\n        // sets which tab is active (used for highlighting)\n        angular.forEach($scope.tabs, function (tab) {\n          tab.params = tab.params || {};\n          tab.options = tab.options || {};\n          tab.active = $scope.active(tab);\n        });\n      };\n\n      // this always selects the first tab currently - fixed in ui-bootstrap master but not yet released\n      // see https://github.com/angular-ui/bootstrap/commit/91b5fb62eedbb600d6a6abe32376846f327a903d\n      $scope.update_tabs();\n      unwatch();\n    });\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.common')\n    .directive('entityLogEntry', entityLogEntryDirective)\n    .controller('EntityLogEntryController', EntityLogEntryController);\n\n  // @ngInject\n  function entityLogEntryDirective() {\n    return {\n      restrict: 'E',\n      scope: {\n        entryData: '='\n      },\n      controller: 'EntityLogEntryController',\n      templateUrl: 'app/views/events/common/entityLogEntry.tpl.html'\n    };\n  }\n\n  // @ngInject\n  function EntityLogEntryController($scope) {\n    var ctrl = $scope.ctrl = {};\n    ctrl.entry = $scope.entryData;\n    ctrl.user = ctrl.entry.user;\n\n    if (typeof ctrl.user === 'string') {\n      ctrl.username = ctrl.user;\n    } else {\n      ctrl.username = ctrl.user.username;\n    }\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.common')\n    .controller('EntityTalkRevisionsViewController', EntityTalkRevisionsViewController)\n    .directive('entityTalkRevisionsView', function() {\n      return {\n        restrict: 'E',\n        scope: {\n          viewModel: '=',\n          viewOptions: '='\n        },\n        transclude: true,\n        controller: 'EntityTalkRevisionsViewController',\n        templateUrl: 'app/views/events/common/entityTalkRevisionsView.tpl.html'\n      };\n    });\n\n  //@ngInject\n  function EntityTalkRevisionsViewController($scope) {\n    // entityTalkRevisionsViewModel and entityTalkRevisionsViewOptions are defined in [entity]ViewControllers, and passed to\n    // this directive in [entity]View templates. This controller can then be required by child common components\n    // to obtain references to view models and view options.\n    this.entityTalkRevisionsViewModel = $scope.viewModel;\n    this.entityTalkRevisionsViewOptions= $scope.viewOptions;\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events')\n    .directive('revisionsGrid', revisionsGrid)\n    .controller('RevisionsGridController', RevisionsGridController);\n\n  // @ngInject\n  function revisionsGrid() {\n    var directive = {\n      restrict: 'E',\n      replace: true,\n      scope: {\n        changes: '=',\n        baseState: '@'\n      },\n      templateUrl: 'app/views/events/common/revisionsGrid.tpl.html',\n      controller: 'RevisionsGridController'\n    };\n    return directive;\n  }\n\n  // @ngInject\n  function RevisionsGridController($scope, $state, $stateParams, $location, uiGridConstants, _) {\n    /*jshint camelcase: false */\n    var ctrl = $scope.ctrl = {};\n    $scope.$state = $state;\n    $scope.$stateParams = $stateParams;\n\n    ctrl.rowsToShow = 3;\n\n    ctrl.revisionsGridOptions = {\n      //enablePaginationControls: true,\n      //paginationPageSizes: [5],\n      //paginationPageSize: 5,\n      minRowsToShow: ctrl.rowsToShow - 1,\n\n      enableHorizontalScrollbar: uiGridConstants.scrollbars.NEVER,\n      enableVerticalScrollbar: uiGridConstants.scrollbars.ALWAYS,\n      enableFiltering: true,\n      enableColumnMenus: false,\n      enableSorting: true,\n      enableRowSelection: true,\n      enableRowHeaderSelection: false,\n      multiSelect: false,\n      modifierKeysToMultiSelect: false,\n      noUnselect: true,\n      columnDefs: [\n        { name: 'id',\n          displayName: 'RID',\n          enableFiltering: false,\n          allowCellFocus: false,\n          width: '5%'\n        },\n        { name: 'user',\n          displayName: 'Submitted by',\n          enableFiltering: true,\n          allowCellFocus: false,\n          cellFilter: 'user.display_name',\n          cellTemplate: '<div class=\"ui-grid-cell-contents\"><user-block user=\"row.entity[col.field]\"</div>',\n          filter: {\n            condition: uiGridConstants.filter.CONTAINS\n          }\n        },\n        { name: 'status',\n          displayName: 'Status',\n          allowCellFocus: false,\n          enableFiltering: true,\n          filter: {\n            condition: uiGridConstants.filter.CONTAINS\n          }\n        },\n        { name: 'created_at',\n          displayName: 'Created',\n          allowCellFocus: false,\n          enableFiltering: false,\n          sort: { direction: uiGridConstants.DESC },\n          filter: {\n            condition: uiGridConstants.filter.CONTAINS\n          },\n          cellTemplate: 'app/views/events/common/revisionsGridCreatedCell.tpl.html'\n        }\n      ]\n    };\n\n    // wait until grid instantiated, then assign data and row-click listener\n    ctrl.revisionsGridOptions.onRegisterApi = function(gridApi){\n      // make grid API available on scope and set grid data\n      ctrl.gridApi = gridApi;\n      ctrl.revisionsGridOptions.data = $scope.changes;\n\n      //if we're loading a revision, highlight the correct row in the table\n      if(_.has($stateParams, 'revisionId')) {\n        var rowEntity = _.find($scope.changes, function(item) {\n          return item.id === +$stateParams.revisionId;\n        });\n\n        gridApi.core.on.rowsRendered($scope, function() {\n          gridApi.selection.selectRow(rowEntity);\n          gridApi.grid.scrollTo(rowEntity);\n        });\n      }\n\n      // navigate to revision summary state when row clicked\n      gridApi.selection.on.rowSelectionChanged($scope, function(row){\n        var params = _.merge($scope.$stateParams, { revisionId: row.entity.id });\n        var newState = $scope.baseState + '.list.summary';\n        $state.go(newState, params);\n      });\n\n      // watch for any revisions updates\n      $scope.$watchCollection('changes', function(changes) {\n        ctrl.revisionsGridOptions.data = changes;\n      });\n\n    };\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.common')\n  .directive('entityUsersPopover', entityUsersPopoverDirective)\n  .controller('EntityUsersPopoverController', EntityUsersPopoverController);\n\n  // @ngInject\n  function entityUsersPopoverDirective() {\n    return {\n      restrict: 'E',\n      scope: {\n        users: '=',\n        type: '=',\n        name: '='\n      },\n      controller: 'EntityUsersPopoverController',\n      templateUrl: 'app/views/events/common/entityUsersPopover.tpl.html'\n    };\n  }\n\n  // @ngInject\n  function EntityUsersPopoverController($scope) {\n    var vm = $scope.vm = {};\n    vm.users = $scope.users;\n    vm.usersPopover = {\n      templateUrl: 'app/views/events/common/entityUsersPopoverTemplate.tpl.html',\n      title: ''\n    };\n\n    $scope.$watch('name', function(name) {\n      vm.usersPopover.title = $scope.type + ' ' + name + ' Updates';\n    });\n\n    $scope.$watchCollection('users', function(users) {\n      vm.users = users;\n    });\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.common')\n  .directive('actionBlock', actionBlockDirective)\n  .controller('ActionBlockController', ActionBlockController);\n\n  // @ngInject\n  function actionBlockDirective() {\n    return /* @ngInject */ {\n      restrict: 'E',\n      scope: {\n        actions: '='\n      },\n      controller: 'ActionBlockController',\n      templateUrl: 'app/views/events/common/actionBlock.tpl.html'\n    };\n  }\n\n  // @ngInject\n  function ActionBlockController() {\n    console.log('action block controller loaded.');\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events')\n    .directive('evidenceGrid', evidenceGrid)\n    .controller('EvidenceGridController', EvidenceGridController);\n\n  // @ngInject\n  function evidenceGrid() {\n    var directive = {\n      restrict: 'E',\n      replace: true,\n      scope: {\n        evidence: '=',\n        variant: '=',\n        rows: '=',\n        showGeneCol: '=',\n        showVariantCol: '=',\n        context: '=',\n        rounded: '='\n      },\n      templateUrl: 'app/views/events/common/evidenceGrid.tpl.html',\n      controller: 'EvidenceGridController'\n    };\n    return directive;\n  }\n\n  // @ngInject\n  function EvidenceGridController($scope,\n                                  $stateParams,\n                                  $state,\n                                  $log,\n                                  $filter,\n                                  uiGridConstants,\n                                  uiGridExporterConstants,\n                                  _) {\n    /*jshint camelcase: false */\n    var ctrl = $scope.ctrl = {};\n    var statusFilters = ['accepted', 'submitted'];\n    ctrl.context = $scope.context;\n    ctrl.showGridKey = false;\n\n    ctrl.keyPopover = {\n      templateUrl: 'app/views/events/common/evidenceGridPopoverKey.tpl.html',\n      title: 'Evidence Grid Column Key'\n    };\n\n    ctrl.exportPopover = {\n      templateUrl: 'app/views/events/common/evidenceGridExport.tpl.html',\n      title: 'Save a PDF or CSV',\n      include: 'all',\n      type: 'csv'\n    };\n\n    ctrl.tooltipPopupDelay = 500;\n\n    ctrl.evidenceLevels = {\n      'A': 'A - Validated',\n      'B': 'B - Clinical',\n      'C': 'C - Case Study',\n      'D': 'D - Preclinical',\n      'E': 'E - Inferential'\n    };\n\n    ctrl.rowsToShow = $scope.rows === undefined ? 5 : $scope.rows;\n\n    ctrl.evidenceGridOptions = {\n      minRowsToShow: ctrl.rowsToShow - 1,\n\n      enableHorizontalScrollbar: uiGridConstants.scrollbars.NEVER,\n      enableVerticalScrollbar: uiGridConstants.scrollbars.ALWAYS,\n      enableFiltering: true,\n      enableColumnMenus: false,\n      enableSorting: true,\n      enableRowSelection: true,\n      enableRowHeaderSelection: false,\n      multiSelect: false,\n      noUnselect: true,\n      modifierKeysToMultiSelect: false,\n\n      // data export\n      exporterOlderExcelCompatibility: true,\n      exporterHeaderFilter: function( displayName ) {\n        // replace short col headers w/ header tooltip strings\n        return _.find(ctrl.evidenceGridOptions.columnDefs, { displayName: displayName}).headerTooltip;\n      },\n      exporterPdfDefaultStyle: {fontSize: 7},\n      exporterPdfPageSize: 'LETTER',\n      exporterPdfOrientation: 'landscape',\n\n      exporterPdfTableStyle: {\n        margin: [0, 0, 0, 0]\n      },\n      exporterPdfTableHeaderStyle: {fontSize: 10, bold: true, italics: true, color: 'darkgrey'},\n      exporterPdfMaxGridWidth: 630,\n      exporterPdfTableLayout: 'lightHorizontalLines', // does not appear to have any effect :(\n\n      // grid menu\n      exporterMenuCsv: false,\n      exporterMenuPdf: false,\n      enableGridMenu: true,\n      gridMenuShowHideColumns: false,\n      gridMenuCustomItems: [\n        {\n          title: 'Show Accepted',\n          active: function() {\n            return _.contains(statusFilters, 'accepted');\n          },\n          action: function($event) {\n            filterByStatus('accepted', this.grid, $event);\n          }\n        },\n        {\n          title: 'Show Submitted',\n          active: function() {\n            return _.contains(statusFilters, 'submitted');\n          },\n          action: function($event) {\n            filterByStatus('submitted', this.grid, $event);\n          }\n        },\n        {\n          title: 'Show Rejected',\n          active: function() {\n            return _.contains(statusFilters, 'rejected');\n          },\n          action: function($event) {\n            filterByStatus('rejected', this.grid, $event);\n          }\n        }\n      ],\n      data: [],\n      columnDefs: [\n        {\n          name: 'status',\n          headerTooltip: 'Status',\n          displayName: 'ST',\n          type: 'string',\n          visible: false,\n          filter: {\n            noTerm: true,\n            condition: function(searchTerm, cellValue) {\n              return _.contains(statusFilters, cellValue);\n            }\n          }\n        },\n        { name: 'id',\n          headerCellTemplate: 'app/views/events/common/evidenceGridTooltipHeader.tpl.html',\n          displayName: 'EID',\n          headerTooltip: 'Evidence ID',\n          type: 'number',\n          enableFiltering: true,\n          allowCellFocus: false,\n          minWidth: 50,\n          width: '7%',\n          cellTemplate: 'app/views/events/common/evidenceGridIdCell.tpl.html'\n        },\n        { name: 'gene',\n          field: 'state_params.gene.name',\n          displayName: 'GENE',\n          visible: $scope.showGeneCol,\n          headerTooltip: 'Gene',\n          headerCellTemplate: 'app/views/events/common/evidenceGridTooltipHeader.tpl.html',\n          type: 'string',\n          enableFiltering: true,\n          allowCellFocus: false,\n          width: '6%'\n        },\n        { name: 'variant',\n          field: 'state_params.variant.name',\n          displayName: 'VARIANT',\n          visible: $scope.showVariantCol,\n          headerTooltip: 'Variant',\n          headerCellTemplate: 'app/views/events/common/evidenceGridTooltipHeader.tpl.html',\n          type: 'string',\n          enableFiltering: true,\n          allowCellFocus: false,\n          width: '8%'\n        },\n        { name: 'description',\n          headerCellTemplate: 'app/views/events/common/evidenceGridTooltipHeader.tpl.html',\n          displayName: 'DESC',\n          headerTooltip: 'Description',\n          type: 'string',\n          enableFiltering: true,\n          allowCellFocus: false,\n          filter: {\n            condition: uiGridConstants.filter.CONTAINS\n          },\n          cellTemplate: 'app/views/events/common/evidenceGridEvidenceCell.tpl.html'\n        },\n        { name: 'disease',\n          field: 'disease.name',\n          headerCellTemplate: 'app/views/events/common/evidenceGridTooltipHeader.tpl.html',\n          displayName: 'DIS',\n          headerTooltip: 'Disease',\n          type: 'string',\n          allowCellFocus: false,\n          enableFiltering: true,\n          filter: {\n            condition: uiGridConstants.filter.CONTAINS\n          },\n          cellTemplate: 'app/views/events/common/evidenceGridDiseaseCell.tpl.html'\n        },\n        { name: 'druglist',\n          headerCellTemplate: 'app/views/events/common/evidenceGridTooltipHeader.tpl.html',\n          displayName: 'DRUGS',\n          headerTooltip: 'Drugs',\n          type: 'string',\n          allowCellFocus: false,\n          enableFiltering: true,\n          filter: {\n            condition: uiGridConstants.filter.CONTAINS\n          },\n          cellTemplate: 'app/views/events/common/evidenceGridDrugCell.tpl.html'\n        },\n        { name: 'evidence_level',\n          headerCellTemplate: 'app/views/events/common/evidenceGridTooltipHeader.tpl.html',\n          displayName: 'EL',\n          headerTooltip: 'Evidence Level',\n          type: 'string',\n          allowCellFocus: false,\n          filter: {\n            type: uiGridConstants.filter.SELECT,\n            term: null,\n            disableCancelFilterButton: false,\n            selectOptions: [\n              { value: null, label: '--' },\n              { value: 'A', label: 'A - Validated'},\n              { value: 'B', label: 'B - Clinical'},\n              { value: 'C', label: 'C - Case Study'},\n              { value: 'D', label: 'D - Preclinical'},\n              { value: 'E', label: 'E - Inferential'}]\n          },\n          sort: { direction: uiGridConstants.ASC },\n          width: '6%',\n          minWidth: 50,\n          cellTemplate: 'app/views/events/common/evidenceGridLevelCell.tpl.html'\n        },\n        { name: 'evidence_type',\n          headerCellTemplate: 'app/views/events/common/evidenceGridTooltipHeader.tpl.html',\n          displayName: 'ET',\n          headerTooltip: 'Evidence Type',\n          type: 'string',\n          allowCellFocus: false,\n          //enableFiltering: false,\n          filter: {\n            type: uiGridConstants.filter.SELECT,\n            term: null,\n            disableCancelFilterButton: false,\n            selectOptions: [\n              {\n                value: null,\n                label: '--'\n              },\n              {\n                value: 'Predictive',\n                label: 'Predictive'\n              },\n              {\n                value: 'Diagnostic',\n                label: 'Diagnostic'\n              },\n              {\n                value: 'Prognostic',\n                label: 'Prognostic'\n              }\n            ]\n          },\n          width: '6%',\n          minWidth: 50,\n          cellTemplate: 'app/views/events/common/evidenceGridTypeCell.tpl.html'\n        },\n        { name: 'evidence_direction',\n          headerCellTemplate: 'app/views/events/common/evidenceGridTooltipHeader.tpl.html',\n          displayName: 'ED',\n          headerTooltip: 'Evidence Direction',\n          type: 'string',\n          allowCellFocus: false,\n          filter: {\n            type: uiGridConstants.filter.SELECT,\n            term: null,\n            disableCancelFilterButton: false,\n            selectOptions: [\n              { value: null, label: '--' },\n              { value: 'Supports', label: 'Supports' },\n              { value: 'Does not Support', label: 'Does not Support' }\n            ]\n          },\n          width: '6%',\n          minWidth: 50,\n          cellTemplate: 'app/views/events/common/evidenceDirectionCell.tpl.html'\n        },\n        { name: 'clinical_significance',\n          headerCellTemplate: 'app/views/events/common/evidenceGridTooltipHeader.tpl.html',\n          displayName: 'CS',\n          headerTooltip: 'Clinical Significance',\n          type: 'string',\n          allowCellFocus: false,\n          filter: {\n            type: uiGridConstants.filter.SELECT,\n            term: null,\n            disableCancelFilterButton: false,\n            selectOptions: [\n              { value: null, label: '--' },\n              { value: 'Sensitivity', label: 'Sensitivity' },\n              { value: 'Resistance or Non-Response', label: 'Resistance or Non-Response' },\n              { value: 'Better Outcome', label: 'Better Outcome' },\n              { value: 'Poor Outcome', label: 'Poor Outcome' },\n              { value: 'Positive', label: 'Positive' },\n              { value: 'Negative', label: 'Negative' },\n              { value: 'Adverse Response', label: 'Adverse Response' },\n              { value: 'N/A', label: 'N/A' }\n            ]\n\n          },\n          width: '6%',\n          minWidth: 50,\n          cellTemplate: 'app/views/events/common/evidenceGridClinicalSignificanceCell.tpl.html'\n        },\n        { name: 'variant_origin',\n          headerCellTemplate: 'app/views/events/common/evidenceGridTooltipHeader.tpl.html',\n          displayName: 'VO',\n          headerTooltip: 'Variant Origin',\n          type: 'string',\n          allowCellFocus: false,\n          filter: {\n            type: uiGridConstants.filter.SELECT,\n            term: null,\n            disableCancelFilterButton: false,\n            selectOptions: [\n              { value: null, label: '--' },\n              { value: 'Somatic Mutation', label: 'Somatic Mutation'},\n              { value: 'Germline Mutation', label: 'Germline Mutation' },\n              { value: 'Germline Polymorphism', label: 'Germline Polymorphism' },\n              { value: 'Unknown', label: 'Unknown' },\n              { value: 'N/A', label: 'N/A' },\n            ]\n          },\n          width: '6%',\n          minWidth: 50,\n          cellTemplate: 'app/views/events/common/evidenceGridVariantOriginCell.tpl.html'\n        },\n        { name: 'rating',\n          headerCellTemplate: 'app/views/events/common/evidenceGridTooltipHeader.tpl.html',\n          displayName: 'TR',\n          headerTooltip: 'Trust Rating',\n          type: 'number',\n          allowCellFocus: false,\n          filter: {\n            type: uiGridConstants.filter.SELECT,\n            condition: uiGridConstants.filter.GREATER_THAN_OR_EQUAL,\n            term: null,\n            disableCancelFilterButton: false,\n            selectOptions: [\n              { value: null, label: '--' },\n              { value: '5', label: '5 stars'},\n              { value: '4', label: '4 stars'},\n              { value: '3', label: '3 stars'},\n              { value: '2', label: '2 stars'},\n              { value: '1', label: '1 stars'},\n            ]\n          },\n          sort: { direction: uiGridConstants.DESC },\n          width: '6%',\n          minWidth: 50,\n          cellTemplate: 'app/views/events/common/evidenceGridRatingCell.tpl.html'\n          //cellTemplate: '<div>{{row.entity[col.field]}}</div>'\n        }\n      ]\n    };\n\n    function filterByStatus(status, grid) {\n      if (_.has(grid.selection.lastSelectedRow, 'entity') &&\n        status === 'rejected' &&\n        grid.selection.lastSelectedRow.entity.status === 'rejected'\n      ) {\n        console.warn('Cannot hide rejected items if currently selected item is itself rejected.');\n        return;\n      }\n      if (_.has(grid.selection.lastSelectedRow, 'entity') &&\n        status === 'submitted' &&\n        grid.selection.lastSelectedRow.entity.status === 'submitted'\n      ) {\n        console.warn('Cannot hide submitted items if currently selected item is itself submitted.');\n        return;\n      }\n\n      if(_.contains(statusFilters, status)) {\n        _.pull(statusFilters, status);\n      } else {\n        statusFilters.push(status);\n      }\n      grid.queueGridRefresh();\n    }\n\n    ctrl.evidenceGridOptions.onRegisterApi = function(gridApi){\n      ctrl.gridApi = gridApi;\n      var suppressGo = false;\n\n      ctrl.evidenceGridOptions.data = prepareDrugArray($scope.evidence);\n\n      ctrl.exportData = function() {\n        ctrl.evidenceGridOptions.exporterCsvFilename = getFilename($scope.variant);\n        var rows = ctrl.exportPopover.include === 'all' ? uiGridExporterConstants.ALL : uiGridExporterConstants.VISIBLE;\n        if(ctrl.exportPopover.type === 'csv') {\n          gridApi.exporter.csvExport(rows, uiGridExporterConstants.ALL);\n        } else {\n          gridApi.exporter.pdfExport(rows, uiGridExporterConstants.ALL);\n        }\n      };\n\n      // setup watcher to update grid\n      $scope.$watchCollection('evidence', function(evidence) {\n        console.log('ui-grid watchCollection called.');\n        // if we get an evidence list that is rejected items only, let's show those instead of showing nothing\n        if(_.every(evidence, 'status', 'rejected')) {\n          statusFilters = ['accepted', 'submitted', 'rejected'];\n        } else if (!_.includes(statusFilters, 'rejected')) {\n          statusFilters = ['accepted', 'submitted'];\n        }\n        //ctrl.evidenceGridOptions.minRowsToShow = evidence.length + 1;\n        if(!_.isUndefined(evidence) && evidence.length > 0) {\n          ctrl.gridApi.grid.queueRefresh().then(function() {\n            // fixes intermittent bug where col headers wouldn't render on reloaded Search pages\n            // forcing data update after a refresh I think prevents the update from interrupting col render\n            ctrl.evidenceGridOptions.data = prepareDrugArray(evidence);\n          });\n        }\n      });\n\n      // if we're loading an evidence view, highlight the correct row in the table\n      gridApi.core.on.rowsRendered($scope, function() {\n        console.log('ui-grid onRowsRendered called.');\n        if(_.has($stateParams, 'evidenceId')) {\n          var rowEntity = _.find($scope.evidence, function (item) {\n            return item.id === +$stateParams.evidenceId;\n          });\n\n          if(!_.isUndefined(rowEntity)) {\n            // if a highlighted row is a rejected item, show rejected items\n            if (rowEntity.status === 'rejected') {\n              $log.debug('highlight row is for rejected entity.');\n              if (!_.includes(statusFilters, 'rejected')) {\n                statusFilters.push('rejected');\n              }\n            }\n\n            suppressGo = true;\n            gridApi.selection.selectRow(rowEntity);\n            gridApi.grid.scrollTo(rowEntity);\n            suppressGo = false;\n          }\n        }\n      });\n\n\n      gridApi.selection.on.rowSelectionChanged($scope, function(row){\n        console.log('ui-grid onSelectionChanged called.');\n        var params = {};\n        if($stateParams.geneId !== undefined && $stateParams.variantId !== undefined) {\n          params = _.merge($stateParams, { evidenceId: row.entity.id, '#': 'evidence' });\n\n          // the highlight in onRowsRendered will trigger a state change unless we catch it here\n          if(!suppressGo) {\n            $state.go('events.genes.summary.variants.summary.evidence.summary', params);\n          }\n        } else if (row.entity.state_params !== undefined){\n          params = {\n            geneId: row.entity.state_params.gene.id,\n            variantId: row.entity.state_params.variant.id,\n            evidenceId: row.entity.id,\n            '#': 'evidence'\n          };\n          if(!suppressGo) {\n            $state.go('events.genes.summary.variants.summary.evidence.summary', params);\n          }\n        } else {\n          console.error('Could not locate gene and variant params for evidence row link!');\n        }\n      });\n\n      function prepareDrugArray(evidence) {\n        return _.map(evidence, function(item){\n          if (_.isArray(item.drugs) && item.drugs.length > 0) {\n            item.druglist = _.chain(item.drugs).pluck('name').value().join(', ');\n            return item;\n          } else {\n            item.druglist = 'N/A';\n            return item;\n          }\n        });\n      }\n      function getFilename(variant) {\n        var filename;\n        var dateTime = $filter('date')(new Date(), 'yyyy-MM-ddTHH:MM:ss');\n        if(_.isUndefined(variant)) {\n          filename = 'CIViC_evidence_' + dateTime + '.csv';\n        } else {\n          filename = 'CIViC_' + variant.name+ '_evidence_' + dateTime + '.csv';\n        }\n        return filename;\n      }\n    };\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.common')\n    .directive('entityComment', entityCommentDirective)\n    .controller('EntityCommentController', EntityCommentController);\n\n  // @ngInject\n  function entityCommentDirective() {\n    return {\n      restrict: 'E',\n      scope: {\n        commentData: '=',\n        entityModel: '='\n      },\n      controller: 'EntityCommentController',\n      templateUrl: 'app/views/events/common/entityComment.tpl.html'\n    };\n  }\n\n  // @ngInject\n  function EntityCommentController($scope, Security) {\n    var ctrl = $scope.ctrl = {};\n    ctrl.security = {\n      isAuthenticated: Security.isAuthenticated(),\n      isAdmin: Security.isEditor(),\n      currentUser: Security.currentUser\n    };\n\n    ctrl.comment = $scope.commentData;\n\n    ctrl.deleteComment = function(comment) {\n      $scope.entityModel.deleteComment(comment.id)\n        .then(function() {\n          console.log('delete comment successful.');\n        })\n        .catch(function() {\n          console.error('error deleting comment.');\n        })\n        .finally(function() {\n          console.log('comment delete done!');\n        });\n    };\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.common')\n    .directive('entityCommentForm', entityCommenntFormDirective)\n    .controller('EntityCommentFormController', EntityCommentFormController)\n    .filter('mentioHighlightEntity', mentioHighlightEntity);\n\n  // @ngInject\n  function entityCommenntFormDirective() {\n    return {\n      restrict: 'E',\n      scope: {\n        type: '@',\n        entityModel: '='\n      },\n      controller: 'EntityCommentFormController',\n      templateUrl: 'app/views/events/common/entityCommentForm.tpl.html'\n    };\n  }\n\n  // @ngInject\n  function EntityCommentFormController($scope,\n                                       $stateParams,\n                                       Security,\n                                       CommentSuggestions,\n                                       CommentPreview,\n                                       _) {\n    var vm = $scope.vm = {};\n    vm.isAuthenticated = Security.isAuthenticated();\n    vm.currentUser = Security.currentUser;\n    vm.isEditor = Security.isEditor();\n\n    vm.mode = 'edit';\n    vm.previewLoading = false;\n    vm.previewText = '';\n\n    vm.commentMessage = '';\n\n    vm.showMarkdownHelp = false;\n    vm.showMacroHelp = false;\n\n    vm.switchMode = function(mode) {\n      if (mode === 'preview') {\n        if (!_.isUndefined(vm.newComment.text) && vm.newComment.text.length >0) {\n          vm.commentMessage = '';\n          vm.mode = 'preview';\n          vm.previewLoading = true;\n          CommentPreview.getPreview(vm.newComment.text)\n            .then(function(response) { // success\n              vm.previewText = response.html;\n              vm.previewLoading = false;\n            }, function() { // failure\n              vm.previewLoading = false;\n              vm.commentMessage = 'Error loading preview.';\n            });\n        } else {\n          vm.commentMessage = 'Please enter Markdown text to preview.';\n        }\n      } else {\n        vm.mode = 'edit';\n        vm.previewText = '';\n        vm.commentMessage = '';\n      }\n    };\n\n    vm.newComment = {\n      title: '',\n      text: ''\n    };\n\n    vm.newCommentFields = [\n      {\n        key: 'text',\n        type: 'comment',\n        ngModelElAttrs: {\n          'msd-elastic': 'true',\n          'mentio': '',\n          'mentio-id': '\"commentForm\"'\n        },\n        templateOptions: {\n          label: 'Add Comment:',\n          rows: 4,\n          minimum_length: 3,\n          value: vm.newComment.text,\n          currentUser: vm.currentUser,\n          required: false\n        },\n        validators: {\n          length: {\n            expression: function(viewValue, modelValue, scope) {\n              var value = viewValue || modelValue;\n              return value.length >= scope.to.minimum_length;\n            },\n            message: '\"Comment must be at least \" + to.minimum_length + \" characters long to submit.\"'\n          }\n        }\n      }\n    ];\n\n    vm.submit = function(comment, resetModel) {\n      comment = _.merge(comment, $stateParams);\n      $scope.entityModel.submitComment(comment).then(function () {\n        console.log('comment submitted.');\n        resetModel();\n        vm.previewText = '';\n        vm.commentMessage = '';\n        vm.mode = 'edit';\n      }, function() {\n        vm.commentMessage = 'Error submitting comment.';\n      });\n    };\n\n\n  }\n\n  // version of ment.io's highlight filter which discards the entity token and colon from the query\n  // in order to properly highlight matching strings to returned values\n  function mentioHighlightEntity() {\n    function escapeRegexp (queryToEscape) {\n      return queryToEscape.replace(/([.?*+^$[\\]\\\\(){}|-])/g, '\\\\$1');\n    }\n\n    return function (matchItem, query, hightlightClass) {\n      if (query) {\n        if(_.includes(query, ':')) {\n          if(_.includes(query, ':')) { query = query.split(':')[1].length > 0 ? _.drop(query.split(':'), 1)[0] : String(); }\n        }\n        var replaceText = hightlightClass ?\n        '<span class=\"' + hightlightClass + '\">$&</span>' :\n          '<strong>$&</strong>';\n        return ('' + matchItem).replace(new RegExp(escapeRegexp(query), 'gi'), replaceText);\n      } else {\n        return matchItem;\n      }\n    };\n  }\n\n})();\n\n\n(function() {\n  'use strict';\n  angular.module('civic.events.genes')\n    .config(GenesConfig)\n    .factory('GenesViewOptions', GenesViewOptions)\n    .controller('GenesController', GenesController);\n\n  // @ngInject\n  function GenesConfig($stateProvider) {\n    $stateProvider\n      .state('events.genes', {\n        abstract: true,\n        url: '/genes/:geneId',\n        templateUrl: 'app/views/events/genes/GenesView.tpl.html',\n        resolve: /* @ngInject */ {\n          Genes: 'Genes',\n          initGene: function(Genes, $stateParams) {\n            return Genes.initBase($stateParams.geneId);\n          }\n        },\n        controller: 'GenesController',\n        controllerAs: 'vm',\n        deepStateRedirect: {params: [ 'geneId' ]},\n        onExit: /* @ngInject */ function($deepStateRedirect) {\n          $deepStateRedirect.reset();\n        }\n      })\n      .state('events.genes.summary', {\n        url: '/summary',\n        template: '<gene-summary show-menu=\"true\"></gene-summary>',\n        resolve: {\n          Genes: 'Genes',\n          refreshGene: function(Genes, $stateParams) {\n            return Genes.get($stateParams.geneId);\n          }\n        },\n        deepStateRedirect: {params: [ 'geneId' ]},\n        data: {\n          titleExp: '\"Gene \" + gene.name + \" Summary\"',\n          navMode: 'sub'\n        }\n      });\n  }\n\n  // @ngInject\n  function GenesViewOptions($state, $stateParams) {\n    var tabData = [];\n    var state = {\n      baseParams: {},\n      baseState: '',\n      baseUrl: ''\n    };\n    var styles = {};\n\n    function init() {\n      angular.copy($stateParams, this.state.baseParams);\n      this.state.baseState = 'events.genes';\n      this.state.baseUrl = $state.href(this.state.baseState, $stateParams);\n\n      angular.copy([\n        {\n          heading: 'Gene Summary',\n          route: 'events.genes.summary',\n          params: { geneId: $stateParams.geneId, '#': 'gene' }\n        },\n        {\n          heading: 'Gene Talk',\n          route: 'events.genes.talk.revisions.list',\n          params: { geneId: $stateParams.geneId, '#': 'gene' }\n        }\n      ], this.tabData);\n\n      angular.copy({\n        view: {\n          backgroundColor: 'pageBackground2'\n        },\n        summary: {\n          backgroundColor: 'pageBackground2'\n        },\n        myGeneInfo: {\n          backgroundColor: 'pageBackground2'\n        },\n        variantMenu: {\n          backgroundColor: 'pageBackground2'\n        },\n        edit: {\n          summaryBackgroundColor: 'pageBackground2'\n        }\n      }, this.styles);\n    }\n\n    return {\n      init: init,\n      state: state,\n      tabData: tabData,\n      styles: styles\n    };\n  }\n\n  // @ngInject\n  function GenesController(Genes, GeneRevisions, GenesViewOptions) {\n    GenesViewOptions.init();\n    // these will be passed to the entity-view directive controller, to be required by child entity component so that they\n    // can get references to the view model and view options\n    this.GenesViewModel = Genes;\n    this.GenesViewRevisions = GeneRevisions;\n    this.GenesViewOptions = GenesViewOptions;\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.genes')\n    .controller('GeneSummaryController', GeneSummaryController)\n    .directive('geneSummary', function() {\n      return {\n        restrict: 'E',\n        scope: {\n          showMenu: '='\n        },\n        controller: 'GeneSummaryController',\n        templateUrl: 'app/views/events/genes/summary/geneSummary.tpl.html'\n      };\n    });\n\n  function GeneSummaryController($scope, Genes, GenesViewOptions) {\n    $scope.gene = Genes.data.item;\n    $scope.variantGroups = Genes.data.variantGroups;\n    $scope.variants = Genes.data.variants;\n    $scope.myGeneInfo = Genes.data.myGeneInfo;\n    $scope.GenesViewOptions = GenesViewOptions;\n    $scope.backgroundColor = GenesViewOptions.styles.view.backgroundColor;\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.genes')\n    .controller('GeneDescriptionController', GeneDescriptionController)\n    .directive('geneDescription', function() {\n      return {\n        restrict: 'E',\n        scope: {\n          geneData: '='\n        },\n        controller: 'GeneDescriptionController',\n        templateUrl: 'app/views/events/genes/summary/geneDescription.tpl.html'\n      };\n    });\n\n  // @ngInject\n  function GeneDescriptionController($scope, $state, Security) {\n    var vm = $scope.vm = {};\n    vm.isAuthenticated = Security.isAuthenticated;\n    vm.isEdit = $state.includes('**.edit.**');\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.genes')\n    .controller('MyGeneInfoController', MyGeneInfoController)\n    .controller('MyGeneInfoDialogController', MyGeneInfoDialogController)\n    .directive('myGeneInfo', function() {\n      return {\n        restrict: 'E',\n        scope: {\n          geneInfo: '='\n        },\n        controller: 'MyGeneInfoController',\n        templateUrl: 'app/views/events/genes/summary/myGeneInfo.tpl.html'\n      };\n    });\n\n  // @ngInject\n  function MyGeneInfoController($scope, ngDialog, _) {\n    var ctrl = $scope.ctrl = {};\n\n    ctrl.popupOptions = {\n      template: 'app/views/events/genes/summary/myGeneInfoDialog.tpl.html',\n      controller: 'MyGeneInfoDialogController',\n      scope: $scope\n    };\n\n    ctrl.openDialog = function() {\n      if(_.has(ctrl.dialog, 'id')) {\n        ctrl.closeDialog().then(function() {\n          ctrl.dialog = ngDialog.open(ctrl.popupOptions);\n        });\n      } else {\n        ctrl.dialog = ngDialog.open(ctrl.popupOptions);\n      }\n      return ctrl.dialog;\n    };\n\n    ctrl.closeDialog = function() {\n      ctrl.dialog.close();\n      return ctrl.dialog.closePromise.then(function() { _.omit(ctrl, 'dialog'); } );\n    };\n  }\n\n  // @ngInject\n  function MyGeneInfoDialogController($scope, uiGridConstants) {\n    // MyGeneInfoController's $scope is attached to dialog parent, as specified in popupOptions.scope\n    var ctrl = $scope.$parent.ctrl;\n\n    var gridOptions = ctrl.gridOptions = {};\n\n    gridOptions.proteinDomains = {\n      data: $scope.geneInfo.interpro,\n      enableFiltering: true,\n      enableColumnMenus: false,\n      enableSorting: true,\n      minRowsToShow: 7,\n      columnDefs: [\n        { name: 'desc',\n          displayName: 'Protein Domains',\n          enableFiltering: true,\n          filter: {\n            condition: uiGridConstants.filter.CONTAINS\n          },\n          width: '50%'\n        },\n        { name: 'id',\n          displayName: 'ID',\n          enableFiltering: true,\n          filter: {\n            condition: uiGridConstants.filter.CONTAINS\n          },\n          width: '15%'\n        },\n        { name: 'short_desc',\n          displayName: 'Identifier',\n          filter: {\n            condition: uiGridConstants.filter.CONTAINS\n          },\n          enableFiltering: true\n        }\n      ]\n    };\n\n    gridOptions.pathways = {\n      data: $scope.geneInfo.pathway,\n      enableFiltering: true,\n      enableColumnMenus: false,\n      enableSorting: true,\n      minRowsToShow: 7,\n      filter: {\n        condition: uiGridConstants.filter.CONTAINS\n      },\n      columnDefs: [\n        { name: 'name',\n          displayName: 'Pathways',\n          enableFiltering: true,\n          filter: {\n            condition: uiGridConstants.filter.CONTAINS\n          },\n          width: '50%'\n        },\n        { name: 'src',\n          displayName: 'Source',\n          enableFiltering: true,\n          filter: {\n            condition: uiGridConstants.filter.CONTAINS\n          },\n          width: '15%'\n        },\n        { name: 'link',\n          displayName: 'Link',\n          filter: {\n            condition: uiGridConstants.filter.CONTAINS\n          },\n          enableFiltering: true,\n          cellTemplate: 'app/views/events/genes/summary/myGeneInfoGrid/linkCell.tpl.html'\n        }\n      ]\n    };\n\n\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.genes')\n    .controller('VariantMenuController', VariantMenuController)\n    .directive('variantMenu', function() {\n      return {\n        restrict: 'E',\n        scope: {\n          options: '='\n        },\n        controller: 'VariantMenuController',\n        templateUrl: 'app/views/events/genes/summary/variantMenu.tpl.html'\n      };\n    });\n\n  //@ngInject\n  function VariantMenuController($scope, $state, $stateParams, Genes, Security, _) {\n    $scope.gene = Genes.data.item;\n    $scope.variants = Genes.data.variants;\n    $scope.stateParams = $stateParams;\n    $scope.security = {\n      isAuthenticated: Security.isAuthenticated(),\n      isAdmin: Security.isEditor()\n    };\n\n    var addVarGroupUrlBase = $scope.addVarGroupUrl = '#/add/variantGroup';\n\n    $scope.$watchCollection('stateParams', function(stateParams){\n      if(_.has(stateParams, 'geneId')) {\n        $scope.addVarGroupUrl = addVarGroupUrlBase + '?geneId=' + stateParams.geneId;\n      }\n    });\n\n    $scope.$watchCollection(\n      function() { return Genes.data.variants; },\n      function(variants){\n        $scope.variants = variants;\n      });\n\n\n    $scope.$watchCollection(\n      function() { return Genes.data.variantGroups; },\n      function(variantGroups){\n        $scope.variantGroups = _.map(variantGroups, function(vg){\n          vg.singleGene = _.every(vg.variants, { gene_id: vg.variants[0].gene_id });\n          return vg;\n        });\n      });\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.genes')\n    .config(geneEditConfig)\n    .factory('GeneEditViewOptions', GeneEditViewOptions)\n    .controller('GeneEditController', GeneEditController);\n\n  // @ngInject\n  function geneEditConfig($stateProvider) {\n    $stateProvider\n      .state('events.genes.edit', {\n        abstract: true,\n        url: '/edit',\n        templateUrl: 'app/views/events/genes/edit/GeneEditView.tpl.html',\n        controller: 'GeneEditController',\n        controllerAs: 'vm',\n        resolve: {\n          GeneRevisions: 'GeneRevisions',\n          initGeneEdit: function(Genes, GeneRevisions, GeneHistory, $stateParams, $q) {\n            var geneId = $stateParams.geneId;\n            return $q.all([\n              GeneRevisions.initRevisions(geneId),\n              GeneRevisions.getPendingFields(geneId),\n              GeneHistory.initBase(geneId)\n            ]);\n          }\n        },\n        deepStateRedirect: [ 'geneId' ],\n        data: {\n          titleExp: '\"Gene \" + gene.name + \" Edit\"',\n          navMode: 'sub'\n        }\n      })\n      .state('events.genes.edit.basic', {\n        url: '/basic',\n        template: '<gene-edit-basic></gene-edit-basic>',\n        data: {\n          titleExp: '\"Gene \" + gene.name + \" Edit\"',\n          navMode: 'sub'\n        }\n      });\n  }\n\n  // @ngInject\n  function GeneEditViewOptions($state, $stateParams) {\n    var baseUrl = '';\n    var baseState = '';\n    var styles = {};\n\n    function init() {\n      baseState = 'events.genes.edit';\n      baseUrl = $state.href(baseUrl, $stateParams);\n\n      angular.copy({\n        view: {\n          summaryBackgroundColor: 'pageBackground2',\n          editBackgroundColor: 'pageBackground',\n          talkBackgroundColor: 'pageBackground'\n        },\n        tabs: {\n          tabRowBackground: 'pageBackground2Gradient'\n        }\n      }, styles);\n    }\n\n    return {\n      init: init,\n      state: {\n        baseParams: $stateParams,\n        baseState: baseState,\n        baseUrl: baseUrl\n      },\n      styles: styles\n    };\n  }\n\n  // @ngInject\n  function GeneEditController(Genes, GeneRevisions, GeneEditViewOptions) {\n    console.log('GeneEditController called.');\n    GeneEditViewOptions.init();\n    this.GeneEditViewModel = Genes; // we're re-using the Genes model here but could in the future have a GeneEdit model if warranted\n    this.GeneRevisionsModel = GeneRevisions;\n    this.GeneEditViewOptions = GeneEditViewOptions;\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.genes')\n    .directive('geneEditBasic', geneEditBasicDirective)\n    .controller('GeneEditBasicController', GeneEditBasicController);\n\n  // @ngInject\n  function geneEditBasicDirective() {\n    return {\n      restrict: 'E',\n      scope: {},\n      controller: 'GeneEditBasicController',\n      templateUrl: 'app/views/events/genes/edit/geneEditBasic.tpl.html'\n    };\n  }\n\n  // @ngInject\n  function GeneEditBasicController($scope,\n                                   $q,\n                                   $document,\n                                   $state,\n                                   _,\n                                   Publications,\n                                   Security,\n                                   GeneRevisions,\n                                   Genes,\n                                   GeneHistory,\n                                   GenesViewOptions,\n                                   formConfig) {\n    var geneModel, vm;\n\n    vm = $scope.vm = {};\n    geneModel = vm.geneModel = Genes;\n\n    vm.isEditor = Security.isEditor();\n    vm.isAuthenticated = Security.isAuthenticated();\n\n    vm.gene = Genes.data.item;\n    vm.pendingFields = _.keys(GeneRevisions.data.pendingFields).length > 0;\n    vm.pendingFieldsList = _.map(_.keys(GeneRevisions.data.pendingFields), function(field) {\n      return field.charAt(0).toUpperCase() + field.slice(1);\n    });\n    vm.geneRevisions = GeneRevisions;\n    vm.geneHistory = GeneHistory;\n    vm.geneEdit = angular.copy(vm.gene);\n    vm.geneEdit.comment = { title: 'GENE ' + vm.gene.name + ' Revision Description', text:'' };\n    vm.geneEdit.source_ids = _.pluck(vm.gene.sources, 'pubmed_id');\n    vm.myGeneInfo = geneModel.data.myGeneInfo;\n    vm.variants = geneModel.data.variants;\n    vm.variantGroups = geneModel.data.variantGroups;\n\n    vm.styles = GenesViewOptions.styles;\n\n    vm.user = {};\n\n    vm.formErrors = {};\n    vm.formMessages = {};\n    vm.errorMessages = formConfig.errorMessages;\n    vm.errorPrompts = formConfig.errorPrompts;\n    vm.serverMsg = '';\n    vm.newRevisionId = Number();\n\n    vm.showForm = true;\n    vm.showSuccessMessage = false;\n    vm.showInstructions = true;\n\n    // scroll to form header\n    $document.ready(function() {\n      var elem = document.getElementById('gene-edit-form');\n      $document.scrollToElementAnimated(elem);\n    });\n\n    vm.geneFields = [\n      {\n        key: 'name',\n        type: 'horizontalInputHelp',\n        templateOptions: {\n          label: 'Name',\n          disabled: true,\n          value: vm.gene.name,\n          helpText: ''\n        }\n      },\n      {\n        key: 'description',\n        type: 'horizontalTextareaHelp',\n        templateOptions: {\n          rows: 8,\n          label: 'Summary',\n          value: 'vm.gene.description',\n          focus: true,\n          minLength: 32,\n          helpText: ['<p>User-defined summary of the clinical relevance of this Gene.</p>',\n                  '<p>Should include:</p>',\n                  '<ul>',\n                  '<li>relevance to appropriate cancer(s)</li>',\n                  '<li>treatment(s) related specifically to variants affecting this Gene</li>',\n                  '</ul>',\n                  '<p>May include relevant mechanistic information such as:</p>',\n                  '<ul>',\n                  '<li>pathway interactions</li>',\n                  '<li>functional alterations caused by variants in this Gene (i.e., activating, loss-of-function, etc.)</li>',\n                  '<li>normal functions key to its oncogenic properties.</li>',\n                  '</ul>'\n                ].join(' ')\n        }\n      },\n      {\n        key: 'source_ids',\n        type: 'multiInput',\n        templateOptions: {\n          label: 'Sources',\n          helpText: 'Please specify the Pubmed IDs of any sources used as references in the Gene Summary.',\n          entityName: 'Source',\n          inputOptions: {\n            type: 'publication-multi',\n            templateOptions: {\n              label: 'Pubmed Id',\n              minLength: 1,\n              required: true,\n              data: {\n                description: '--'\n              }\n            },\n            modelOptions: {\n              updateOn: 'default blur',\n              allowInvalid: false,\n              debounce: {\n                default: 300,\n                blur: 0\n              }\n            },\n            validators: {\n              validPubmedId: {\n                expression: function($viewValue, $modelValue, scope) {\n                  if ($viewValue.length > 0) {\n                    var deferred = $q.defer();\n                    scope.options.templateOptions.loading = true;\n                    Publications.verify($viewValue).then(\n                      function (response) {\n                        scope.options.templateOptions.loading = false;\n                        scope.options.templateOptions.data.description = response.description;\n                        deferred.resolve(response);\n                      },\n                      function (error) {\n                        scope.options.templateOptions.loading = false;\n                        scope.options.templateOptions.data.description = '--';\n                        deferred.reject(error);\n                      }\n                    );\n                    return deferred.promise;\n                  } else {\n                    scope.options.templateOptions.data.description = '--';\n                    return true;\n                  }\n                },\n                message: '\"This does not appear to be a valid Pubmed ID.\"'\n              }\n            }\n          }\n        }\n      },\n      {\n        template: '<hr/>'\n      },\n      {\n        key: 'text',\n        type: 'horizontalCommentHelp',\n        model: vm.geneEdit.comment,\n        ngModelElAttrs: {\n          'msd-elastic': 'true',\n          'mentio': '',\n          'mentio-id': '\"commentForm\"'\n        },\n        templateOptions: {\n          rows: 5,\n          minimum_length: 3,\n          label: 'Revision Description',\n          required: false,\n          value: 'text',\n          helpText: 'Please provide a brief description and support, if necessary, for your suggested revision. It will appear as the first comment in this revision\\'s comment thread.'\n        },\n        validators: {\n          length: {\n            expression: function(viewValue, modelValue, scope) {\n              var value = viewValue || modelValue;\n              return value.length >= scope.to.minimum_length;\n            },\n            message: '\"Comment must be at least \" + to.minimum_length + \" characters long to submit.\"'\n          }\n        }\n      }\n    ];\n\n    vm.submit = function(geneEdit) {\n      geneEdit.geneId = geneEdit.id;\n      geneEdit.sources = geneEdit.source_ids;\n      vm.formErrors = {};\n      vm.formMessages = {};\n\n      GeneRevisions.submitRevision(geneEdit)\n        .then(function(response) {\n          console.log('revision submit success!');\n          vm.newRevisionId = response.id;\n          vm.formMessages.submitSuccess = true;\n          vm.showInstructions = false;\n          vm.pendingFields = false;\n          vm.showForm = false;\n          vm.showSuccessMessage = true;\n          // options.resetModel();\n        })\n        .catch(function(error) {\n          console.error('revision submit error!');\n          vm.formErrors[error.status] = true;\n          vm.serverMsg = error.data.error;\n        })\n        .finally(function(){\n          console.log('revision submit done!');\n        });\n    };\n\n    vm.apply = function(geneEdit) {\n      geneEdit.geneId = geneEdit.id;\n      vm.formErrors = {};\n      vm.formMessages = {};\n      Genes.apply(geneEdit)\n        .then(function() {\n          console.log('revision apply success!');\n          vm.formMessages.applySuccess = true;\n        })\n        .catch(function(response) {\n          console.error('revision application error!');\n          vm.formErrors[response.status] = true;\n        })\n        .finally(function(){\n          console.log('revision apply done!');\n        });\n    };\n\n    vm.revisionsClick = function() {\n      $state.go('events.genes.talk.revisions.list', { geneId: Genes.data.item.id });\n    }\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.genes')\n    .config(geneTalkConfig)\n    .factory('GenesTalkViewOptions', GenesTalkViewOptions)\n    .controller('GeneTalkController', GeneTalkController);\n\n  // @ngInject\n  function geneTalkConfig($stateProvider) {\n    $stateProvider\n      .state('events.genes.talk', {\n        abstract: true,\n        url: '/talk',\n        templateUrl: 'app/views/events/genes/talk/GeneTalkView.tpl.html',\n        controller: 'GeneTalkController',\n        controllerAs: 'vm',\n        resolve: {\n          GeneRevisions: 'GeneRevisions',\n          GeneHistory: 'GeneHistory',\n          initGeneTalk: function(Genes, GeneRevisions, GeneHistory, $stateParams, $cacheFactory, $q) {\n            var geneId = $stateParams.geneId;\n            return $q.all([\n              Genes.initComments(geneId),\n              GeneRevisions.initRevisions(geneId),\n              GeneHistory.initBase(geneId)\n            ]);\n          }\n        },\n        deepStateRedirect: [ 'geneId' ],\n        data: {\n          titleExp: '\"Gene \" + gene.name + \" Talk\"',\n          navMode: 'sub'\n        }\n      })\n      .state('events.genes.talk.log', {\n        url: '/log',\n        template: '<gene-talk-log></gene-talk-log>',\n        data: {\n          titleExp: '\"Gene \" + gene.name + \" Log\"',\n          navMode: 'sub'\n        }\n      })\n      .state('events.genes.talk.comments', {\n        url: '/comments',\n        template: '<gene-talk-comments></gene-talk-comments>',\n        data: {\n          titleExp: '\"Gene \" + gene.name + \" Comments\"',\n          navMode: 'sub'\n        }\n      });\n  }\n\n  // @ngInject\n  function GenesTalkViewOptions($state, $stateParams, Genes) {\n    var baseUrl = '';\n    var baseState = '';\n    var tabData = [];\n    var styles = {};\n\n    var gene = Genes.data.item;\n\n    function init() {\n      baseState = 'events.genes.talk';\n      baseUrl = $state.href(baseUrl, $stateParams);\n\n      angular.copy([\n        {\n          heading: gene.name + ' Revisions',\n          route: baseState + '.revisions.list',\n          params: { geneId: gene.id }\n        },\n        {\n          heading: gene.name  + ' Comments',\n          route: baseState + '.comments',\n          params: { geneId: gene.id }\n        },\n        {\n          heading: gene.name + ' Log',\n          route: baseState + '.log',\n          params: { geneId: gene.id }\n        }\n      ], tabData);\n\n      angular.copy({\n        view: {\n          summaryBackgroundColor: 'pageBackground',\n          talkBackgroundColor: 'pageBackground'\n        },\n        tabs: {\n          tabRowBackground: 'pageBackground2Gradient'\n        }\n      }, styles);\n    }\n\n    return {\n      init: init,\n      state: {\n        baseParams: $stateParams,\n        baseState: baseState,\n        baseUrl: baseUrl\n      },\n      tabData: tabData,\n      styles: styles\n    };\n  }\n\n  // @ngInject\n  function GeneTalkController(Genes, GeneRevisions, GenesTalkViewOptions) {\n    console.log('GenesTalkController called.');\n    GenesTalkViewOptions.init();\n    this.GenesTalkViewModel = Genes; // we're re-using the Genes model here but could in the future have a GenesTalk model if warranted\n    this.GeneRevisionsModel = GeneRevisions;\n    this.GenesTalkViewOptions = GenesTalkViewOptions;\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.genes')\n    .controller('GeneTalkLogController', GeneTalkLogController)\n    .directive('geneTalkLog', geneTalkLogDirective);\n\n  // @ngInject\n  function geneTalkLogDirective() {\n    return {\n      restrict: 'E',\n      scope: {},\n      controller: 'GeneTalkLogController',\n      templateUrl: 'app/views/events/genes/talk/geneTalkLog.tpl.html'\n    };\n  }\n\n  // @ngInject\n  function GeneTalkLogController($scope, _,\n                                 Genes,\n                                 GeneRevisions,\n                                 GeneHistory) {\n    var ctrl = $scope.ctrl = {}; // create ctrl here, link function will attach entityTalkView after DOM rendered.\n    var comments, revisions, history;\n    $scope.comments = Genes.data.comments;\n    $scope.revisions = GeneRevisions.data.collection;\n    $scope.history = GeneHistory.data.collection;\n    $scope.$watchCollection('[comments, revisions, history]', function(collections) {\n      comments = _.merge({}, collections[0]);\n      revisions = _.merge({}, collections[1]);\n      history = _.merge({}, collections[2]);\n\n      comments = _.map(comments, function(comment) {\n        comment.type = 'comment';\n        return comment;\n      });\n\n      revisions = _.map(revisions, function(revision) {\n        revision.type = 'revision';\n        return revision;\n      });\n\n      history = _.map(history, function(change) {\n        change.type='history';\n        return change;\n      });\n\n\n      // concatenate event arrays, sort by date descending\n      ctrl.logItems = comments.concat(revisions, history);\n      ctrl.logItems = _.chain(ctrl.logItems)\n        .map(function(item) {\n          // revisions can have an .user attribute that's just a string\n          item.username = typeof item.user === 'object' ? item.user.username : item.user;\n          // some items have both created_at and updated_at, we'll favor updated_at\n          item.timestamp = _.has(item, 'updated_at') ? item.updated_at : item.created_at;\n          return item;\n        })\n        .sortBy(function(item) {\n          return new Date(item.timestamp);\n        })\n        .reverse()\n        .value();\n    });\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.genes')\n    .controller('GeneTalkCommentsController', GeneTalkCommentsController)\n    .directive('geneTalkComments', geneTalkCommentsDirective);\n\n  // @ngInject\n  function geneTalkCommentsDirective() {\n    return {\n      restrict: 'E',\n      scope: {},\n      controller: 'GeneTalkCommentsController',\n      templateUrl: 'app/views/events/genes/talk/geneTalkComments.tpl.html'\n    };\n  }\n\n\n  // @ngInject\n  function GeneTalkCommentsController($scope, Genes) {\n    var ctrl = $scope.ctrl = {};\n\n    ctrl.geneTalkModel = Genes;\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.genes')\n    .config(geneTalkRevisionsConfig)\n    .factory('GeneTalkRevisionsViewOptions', GeneTalkRevisionsViewOptions)\n    .controller('GeneTalkRevisionsController', GeneTalkRevisionsController);\n\n  // @ngInject\n  function geneTalkRevisionsConfig($stateProvider) {\n    $stateProvider\n      .state('events.genes.talk.revisions', {\n        abstract: true,\n        url: '/revisions',\n        templateUrl: 'app/views/events/genes/talk/revisions/GeneTalkRevisionsView.tpl.html',\n        controller: 'GeneTalkRevisionsController',\n        controllerAs: 'vm',\n        resolve: {\n          GeneRevisions: 'GeneRevisions',\n          GeneHistory: 'GeneHistory',\n          initGeneTalkRevisions: function(Genes, GeneRevisions, GeneHistory, $stateParams, $q) {\n            var geneId = $stateParams.geneId;\n            return $q.all([\n              GeneRevisions.initRevisions(geneId),\n              GeneHistory.initBase(geneId)\n            ]);\n          }\n        },\n        deepStateRedirect: [ 'geneId', 'revisionId' ],\n        data: {\n          titleExp: '\"Gene \" + gene.name + \" Talk\"',\n          navMode: 'sub'\n        }\n      })\n      .state('events.genes.talk.revisions.list', {\n        url: '/list/:revisionId',\n        template: '<gene-talk-revisions></gene-talk-revisions>',\n        resolve: {\n          initRevisionList: function(GeneRevisions, $stateParams) {\n            return GeneRevisions.query($stateParams.geneId);\n          }\n        },\n        data: {\n          titleExp: '\"Gene \" + gene.name + \" Revisions\"',\n          navMode: 'sub'\n        }\n      })\n      .state('events.genes.talk.revisions.list.summary', {\n        url: '/summary',\n        template: '<gene-talk-revision-summary></gene-talk-revision-summary>',\n        resolve: {\n          initRevision: function(GeneRevisions, $stateParams, $q) {\n            return $q.all([\n              GeneRevisions.get($stateParams.geneId, $stateParams.revisionId),\n              GeneRevisions.queryComments($stateParams.geneId, $stateParams.revisionId)\n            ]);\n          }\n        },\n        data: {\n          titleExp: '\"Gene \" + gene.name + \" Revision Summary\"',\n          navMode: 'sub'\n        }\n      });\n  }\n\n  // @ngInject\n  function GeneTalkRevisionsViewOptions($state, $stateParams) {\n    var baseUrl = '';\n    var baseState = '';\n    var styles = {};\n\n    function init() {\n      baseState = 'events.genes.talk.revisions';\n      baseUrl = $state.href(baseUrl, $stateParams);\n\n      angular.copy({\n        view: {\n          summaryBackgroundColor: 'pageBackground',\n          talkBackgroundColor: 'pageBackground'\n        },\n        tabs: {\n          tabRowBackground: 'pageBackground2Gradient'\n        }\n      }, styles);\n    }\n\n    return {\n      init: init,\n      state: {\n        baseParams: $stateParams,\n        baseState: baseState,\n        baseUrl: baseUrl\n      },\n      styles: styles\n    };\n  }\n\n  // @ngInject\n  function GeneTalkRevisionsController(Genes, GeneRevisions, GeneTalkRevisionsRevisionsViewOptions) {\n    console.log('GeneTalkRevisionsRevisionsController called.');\n    GeneTalkRevisionsRevisionsViewOptions.init();\n    this.GeneRevisionsModel = GeneRevisions;\n    this.GeneTalkRevisionsViewOptions = GeneTalkRevisionsViewOptions;\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.genes')\n    .controller('GeneTalkRevisionsController', GeneTalkRevisionsController)\n    .directive('geneTalkRevisions', geneTalkRevisionsDirective);\n\n  // @ngInject\n  function geneTalkRevisionsDirective() {\n    return {\n      restrict: 'E',\n      scope: {},\n      controller: 'GeneTalkRevisionsController',\n      templateUrl: 'app/views/events/genes/talk/revisions/geneTalkRevisions.tpl.html'\n    };\n  }\n\n  // @ngInject\n  function GeneTalkRevisionsController($scope, GeneRevisions, GenesTalkViewOptions) {\n    $scope.geneRevisions = GeneRevisions;\n    $scope.viewOptions = GenesTalkViewOptions;\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.genes')\n    .directive('geneTalkRevisionSummary', geneTalkRevisionSummary)\n    .controller('GeneTalkRevisionSummaryController', GeneTalkRevisionSummaryController);\n\n  // @ngInject\n  function geneTalkRevisionSummary() {\n    var directive = {\n      restrict: 'E',\n      replace: true,\n      templateUrl: 'app/views/events/genes/talk/revisions/geneTalkRevisionSummary.tpl.html',\n      controller: 'GeneTalkRevisionSummaryController'\n    };\n    return directive;\n  }\n\n  // @ngInject\n  function GeneTalkRevisionSummaryController($scope, $stateParams, GeneRevisions, Security, formConfig) {\n    var vm = $scope.vm = {};\n    vm.isEditor = Security.isEditor;\n    vm.isAuthenticated = Security.isAuthenticated;\n\n    vm.geneTalkModel = GeneRevisions;\n\n    vm.formErrors = {};\n    vm.formMessages = {};\n    vm.errorMessages = formConfig.errorMessages;\n    vm.errorPrompts = formConfig.errorPrompts;\n\n    $scope.acceptRevision = function() {\n      vm.formErrors = {};\n      vm.formMessages = {};\n      GeneRevisions.acceptRevision($stateParams.geneId, $stateParams.revisionId)\n        .then(function() {\n          vm.formMessages.acceptSuccess = true;\n        })\n        .catch(function(error) {\n          console.error('revision accept error!');\n          vm.formErrors[error.status] = true;\n        })\n        .finally(function () {\n          console.log('accept revision successful.');\n        });\n    };\n\n    $scope.rejectRevision = function() {\n      vm.formErrors = {};\n      vm.formMessages = {};\n      GeneRevisions.rejectRevision($stateParams.geneId, $stateParams.revisionId)\n        .then(function() {\n          vm.formMessages.rejectSuccess = true;\n        })\n        .catch(function(error) {\n          console.error('revision reject error!');\n          vm.formErrors[error.status] = true;\n        })\n        .finally(function () {\n          console.log('reject revision successful.');\n        });\n    };\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.variants')\n    .config(VariantsConfig)\n    .factory('VariantsViewOptions', VariantsViewOptions)\n    .controller('VariantsController', VariantsController);\n\n  // @ngInject\n  function VariantsConfig($stateProvider) {\n    $stateProvider\n      .state('events.genes.summary.variants', {\n        abstract: true,\n        url: '/variants/:variantId',\n        templateUrl: 'app/views/events/variants/VariantsView.tpl.html',\n        resolve: /* @ngInject */ {\n          Variants: 'Variants',\n          initVariant: function(Variants, $stateParams) {\n            return Variants.initBase($stateParams.variantId);\n          }\n\n        },\n        controller: 'VariantsController',\n        controllerAs: 'vm',\n        deepStateRedirect: { params: ['variantId'] }\n      })\n      .state('events.genes.summary.variants.summary', {\n        url: '/summary',\n        template: '<variant-summary show-evidence-grid=\"true\"></variant-summary>',\n        resolve: {\n          refreshVariant: function(Variants, $stateParams) {\n            return Variants.get($stateParams.variantId);\n          }\n        },\n        // deepStateRedirect: { params: ['variantId'] },\n        data: {\n          navMode: 'sub',\n          titleExp: '\"Variant \" + variant.name'\n        }\n      });\n  }\n\n  // @ngInject\n  function VariantsViewOptions($state, $stateParams) {\n    var tabData = [];\n    var state = {\n      baseParams: {},\n      baseState: '',\n      baseUrl: ''\n    };\n    var styles = {};\n\n    function init() {\n      angular.copy($stateParams, this.state.baseParams);\n      this.state.baseState = 'events.genes.summary.variants';\n      this.state.baseUrl = $state.href(this.state.baseState, $stateParams);\n\n      angular.copy([\n        {\n          heading: 'Variant Summary',\n          route: 'events.genes.summary.variants.summary',\n          params: { geneId: $stateParams.geneId, variantId: $stateParams.variantId, '#': 'variant'  }\n        },\n        {\n          heading: 'Variant Talk',\n          route: 'events.genes.summary.variants.talk.revisions.list',\n          params: { geneId: $stateParams.geneId, variantId: $stateParams.variantId, '#': 'variant'  }\n        }\n      ], this.tabData);\n\n      angular.copy({\n        view: {\n          backgroundColor: 'pageBackground'\n        },\n        edit: {\n          summaryBackgroundColor: 'pageBackground2'\n        }\n      }, this.styles);\n    }\n\n    return {\n      init: init,\n      state: state,\n      tabData: tabData,\n      styles: styles\n    };\n  }\n\n  // @ngInject\n  function VariantsController(Variants, VariantRevisions, VariantsViewOptions) {\n    VariantsViewOptions.init();\n    // these will be passed to the entity-view directive controller, to be required by child entity component so that they\n    // can get references to the view model and view options\n    this.VariantsViewModel = Variants;\n    this.VariantsViewRevisions = VariantRevisions;\n    this.VariantsViewOptions = VariantsViewOptions;\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.variants')\n    .controller('VariantSummaryController', VariantSummaryController)\n    .directive('variantSummary', function() {\n      return {\n        restrict: 'E',\n        scope: {\n          showEvidenceGrid: '='\n        },\n        controller: 'VariantSummaryController',\n        templateUrl: 'app/views/events/variants/summary/variantSummary.tpl.html'\n      };\n    });\n\n  //@ngInject\n  function VariantSummaryController($scope,\n                                    $state,\n                                    $stateParams,\n                                    Security,\n                                    Variants,\n                                    VariantsViewOptions) {\n    $scope.isAuthenticated = Security.isAuthenticated;\n    $scope.isEdit = $state.includes('**.edit.**');\n    $scope.stateParams = $stateParams;\n\n    $scope.variant = Variants.data.item;\n    $scope.evidence = Variants.data.evidence;\n\n    $scope.$watch(function() { return Variants.data.item; }, function(variant) {\n      $scope.variant = variant;\n      $scope.evidence = variant.evidence_items;\n    }, true);\n\n    $scope.VariantsViewOptions = VariantsViewOptions;\n    $scope.backgroundColor = VariantsViewOptions.styles.view.backgroundColor;\n\n    $scope.editClick = function() {\n      if (Security.isAuthenticated()) {\n        $state.go('events.genes.summary.variants.edit.basic', $stateParams);\n      }\n    };\n\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.variants')\n    .config(variantEditConfig)\n    .factory('VariantEditViewOptions', VariantEditViewOptions)\n    .controller('VariantEditController', VariantEditController);\n\n  // @ngInject\n  function variantEditConfig($stateProvider) {\n    $stateProvider\n      .state('events.genes.summary.variants.edit', {\n        abstract: true,\n        url: '/edit',\n        templateUrl: 'app/views/events/variants/edit/VariantEditView.tpl.html',\n        controller: 'VariantEditController',\n        controllerAs: 'vm',\n        resolve: {\n          VariantRevisions: 'VariantRevisions',\n          initVariantEdit: function(Variants, VariantRevisions, VariantHistory, $stateParams, $q) {\n            var variantId = $stateParams.variantId;\n            return $q.all([\n              VariantRevisions.initRevisions(variantId),\n              VariantRevisions.getPendingFields(variantId),\n              VariantHistory.initBase(variantId)\n            ]);\n          }\n        },\n        deepStateRedirect: [ 'variantId' ],\n        data: {\n          titleExp: '\"Variant \" + variant.name + \" Edit\"',\n          navMode: 'sub'\n        }\n      })\n      .state('events.genes.summary.variants.edit.basic', {\n        url: '/basic',\n        template: '<variant-edit-basic></variant-edit-basic>',\n        data: {\n          titleExp: '\"Variant \" + variant.name + \" Edit\"',\n          navMode: 'sub'\n        }\n      });\n  }\n\n  // @ngInject\n  function VariantEditViewOptions($state, $stateParams) {\n    var baseUrl = '';\n    var baseState = '';\n    var styles = {};\n\n    function init() {\n      this.state.baseState = 'events.genes.summary.variants.edit';\n      this.state.baseUrl = $state.href(this.state.baseUrl, $stateParams);\n\n      angular.copy({\n        view: {\n          summaryBackgroundColor: 'pageBackground2',\n          editBackgroundColor: 'pageBackground',\n          talkBackgroundColor: 'pageBackground'\n        },\n        tabs: {\n          tabRowBackground: 'pageBackground2Gradient'\n        }\n      }, styles);\n    }\n\n    return {\n      init: init,\n      state: {\n        baseParams: $stateParams,\n        baseState: baseState,\n        baseUrl: baseUrl\n      },\n      styles: styles\n    };\n  }\n\n  // @ngInject\n  function VariantEditController(Variants, VariantRevisions, VariantEditViewOptions) {\n    console.log('VariantEditController called.');\n    VariantEditViewOptions.init();\n    this.VariantEditViewModel = Variants; // we're re-using the Variants model here but could in the future have a VariantEdit model if warranted\n    this.VariantRevisionsModel = VariantRevisions;\n    this.VariantEditViewOptions = VariantEditViewOptions;\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.variants')\n    .directive('variantEditBasic', variantEditBasicDirective)\n    .controller('VariantEditBasicController', VariantEditBasicController);\n\n  // @ngInject\n  function variantEditBasicDirective() {\n    return {\n      restrict: 'E',\n      scope: {},\n      controller: 'VariantEditBasicController',\n      templateUrl: 'app/views/events/variants/edit/variantEditBasic.tpl.html'\n    };\n  }\n\n  // @ngInject\n  function VariantEditBasicController($scope,\n                                      $stateParams,\n                                      $document,\n                                      $state,\n                                      Security,\n                                      VariantRevisions,\n                                      Variants,\n                                      VariantHistory,\n                                      VariantsViewOptions,\n                                      formConfig,\n                                      _) {\n    var variantModel, vm;\n\n    vm = $scope.vm = {};\n    variantModel = vm.variantModel = Variants;\n\n    vm.isEditor = Security.isEditor();\n    vm.isAuthenticated = Security.isAuthenticated();\n\n    vm.variant = Variants.data.item;\n    vm.pendingFields = _.keys(VariantRevisions.data.pendingFields).length > 0;\n    vm.pendingFieldsList = _.map(_.keys(VariantRevisions.data.pendingFields), function(field) {\n      return field.charAt(0).toUpperCase() + field.slice(1);\n    });\n\n    vm.variantRevisions = VariantRevisions;\n    vm.variantHistory = VariantHistory;\n    vm.variantEdit = angular.copy(vm.variant);\n\n    vm.variantEdit.comment = { title: 'VARIANT ' + vm.variant.name + ' Suggested Revision', text:'' };\n    vm.myVariantInfo = variantModel.data.myVariantInfo;\n    vm.variants = variantModel.data.variants;\n    vm.variantGroups = variantModel.data.variantGroups;\n\n    vm.styles = VariantsViewOptions.styles;\n\n    vm.user = {};\n\n    vm.formErrors = {};\n    vm.formMessages = {};\n    vm.errorMessages = formConfig.errorMessages;\n    vm.errorPrompts = formConfig.errorPrompts;\n    vm.serverMsg = '';\n\n    vm.newRevisionId = Number();\n    vm.stateParams = $stateParams;\n\n    vm.showForm = true;\n    vm.showSuccessMessage = false;\n    vm.showInstructions = true;\n\n    // scroll to form header\n    $document.ready(function() {\n      var elem = document.getElementById('variant-edit-form');\n      $document.scrollToElementAnimated(elem);\n    });\n\n    vm.variantFields = [\n      {\n        key: 'name',\n        type: 'horizontalInputHelp',\n        templateOptions: {\n          label: 'Name',\n          value: vm.variant.name,\n          helpText: ''\n        }\n      },\n      {\n        key: 'description',\n        type: 'horizontalTextareaHelp',\n        templateOptions: {\n          rows: 8,\n          label: 'Summary',\n          value: 'vm.variant.description',\n          minLength: 32,\n          helpText: 'User-defined summary of the clinical relevance of this Variant. The Variant Summary should be a synthesis of the existing Evidence Statements for this variant. Basic information on recurrence rates and biological/functional impact of the Variant may be included, but the focus should be on the clinical impact (i.e. predictive, prognostic, and diagnostic value).'\n        }\n      },\n      {\n        key: 'variant_types',\n        type: 'multiInput',\n        templateOptions: {\n          label: 'Variant Type(s)',\n          helpText: 'Add one or more variant types from the Sequence Ontology',\n          entityName: 'Type',\n          inputOptions: {\n            type: 'typeahead',\n            wrapper: null,\n            templateOptions: {\n              formatter: 'model[options.key].display_name',\n              typeahead: 'item as item.display_name for item in options.data.typeaheadSearch($viewValue)'\n            },\n            data: {\n              typeaheadSearch: function(val) {\n                var request = {\n                  count: 5,\n                  page: 0,\n                  name: val\n                };\n                return Variants.queryVariantTypes(request)\n                  .then(function(response) {\n                    return _.map(response.records, function(event) {\n                      return event;\n                    });\n                  });\n              }\n            }\n          }\n        }\n      },\n      {\n        template: '<h3 class=\"form-subheader\">Primary Coordinates</h3><hr/>'\n      },\n      {\n        model: vm.variantEdit.coordinates,\n        key: 'reference_build',\n        type: 'horizontalSelectHelp',\n        templateOptions: {\n          label: 'Reference Build',\n          value: vm.variantEdit.coordinates.reference_build,\n          ngOptions: 'option[\"value\"] as option[\"label\"] for option in to.options',\n          options: [\n            { type: 'default', value: null, label: 'Please select a Reference Build' },\n            { value: 'GRCh38', label: 'GRCh38 (hg38)' },\n            { value: 'GRCh37', label: 'GRCh37 (hg19)' },\n            { value: 'NCBI36', label: 'NCBI36 (hg18)' }\n          ],\n          helpText: 'Version of the human genome reference sequence from which coordinates will be obtained.'\n        }\n      },\n      {\n        model: vm.variantEdit.coordinates,\n        key: 'ensembl_version',\n        type: 'horizontalInputHelp',\n        templateOptions: {\n          label: 'Ensembl Version',\n          value: vm.variantEdit.coordinates.ensembl_version,\n          helpText: 'Ensembl database version (e.g. 75).'\n        }\n      },\n      {\n        model: vm.variantEdit.coordinates,\n        key: 'chromosome',\n        type: 'horizontalInputHelp',\n        templateOptions: {\n          label: 'Chromosome',\n          value: vm.variantEdit.coordinates.chromosome,\n          helpText: 'Chromosome in which this variant occurs (e.g. 17).'\n        }\n      },\n      {\n        model: vm.variantEdit.coordinates,\n        key: 'start',\n        type: 'horizontalInputHelp',\n        templateOptions: {\n          label: 'Start',\n          value: vm.variantEdit.coordinates.start,\n          helpText: 'Left/first coordinate of the variant. Must be <= the Stop coordinate. Must be compatible with the selected reference build.'\n        }\n      },\n      {\n        model: vm.variantEdit.coordinates,\n        key: 'stop',\n        type: 'horizontalInputHelp',\n        templateOptions: {\n          label: 'Stop',\n          value: vm.variantEdit.coordinates.stop,\n          helpText: 'Right/second coordinate of the variant. Must be >= the Start coordinate.'\n        }\n      },\n      {\n        model: vm.variantEdit.coordinates,\n        key: 'reference_bases',\n        type: 'horizontalInputHelp',\n        templateOptions: {\n          label: 'Reference Base(s)',\n          value: vm.variantEdit.coordinates.reference_bases,\n          helpText: 'The nucleotide(s) of the reference genome affected by the variant. Only used for SNVs and Indels (otherwise leave blank).'\n        }\n      },\n      {\n        model: vm.variantEdit.coordinates,\n        key: 'variant_bases',\n        type: 'horizontalInputHelp',\n        templateOptions: {\n          label: 'Variant Base(s)',\n          value: vm.variantEdit.coordinates.variant_bases,\n          helpText: 'The nucleotide(s) of the variant allele. Only used for SNVs and Indels (otherwise leave blank).'\n        }\n      },\n      {\n        model: vm.variantEdit.coordinates,\n        key: 'representative_transcript',\n        type: 'horizontalInputHelp',\n        templateOptions: {\n          label: 'Representative Transcript',\n          value: vm.variantEdit.coordinates.representative_transcript,\n          helpText: 'Transcript ID including version number (e.g. ENST00000348159.4, the canonical transcript defined by Ensembl).'\n        }\n      },\n      {\n        template: '<h3 class=\"form-subheader\">Secondary Coordinates <span class=\"small\">(for fusions)</span></h3><hr/>'\n      },\n      {\n        model: vm.variantEdit.coordinates,\n        key: 'chromosome2',\n        type: 'horizontalInputHelp',\n        templateOptions: {\n          label: 'Chromosome 2',\n          value: vm.variantEdit.coordinates.chromosome2,\n          helpText: 'If this variant is a fusion (e.g. BCR-ABL1), specify the chromosome name, coordinates, and representative transcript for the 3-prime partner.'\n        }\n      },\n      {\n        model: vm.variantEdit.coordinates,\n        key: 'start2',\n        type: 'horizontalInputHelp',\n        templateOptions: {\n          label: 'Start 2',\n          value: vm.variantEdit.coordinates.start2,\n          helpText: ''\n        }\n      },\n      {\n        model: vm.variantEdit.coordinates,\n        key: 'stop2',\n        type: 'horizontalInputHelp',\n        templateOptions: {\n          label: 'Stop 2',\n          value: vm.variantEdit.coordinates.stop2,\n          helpText: ''\n        }\n      },\n      {\n        model: vm.variantEdit.coordinates,\n        key: 'representative_transcript2',\n        type: 'horizontalInputHelp',\n        templateOptions: {\n          label: 'Representative Transcript 2',\n          value: vm.variantEdit.coordinates.representative_transcript2,\n          helpText: ''\n        }\n      },\n      {\n        template: '<hr/>'\n      },\n      {\n        key: 'text',\n        type: 'horizontalCommentHelp',\n        model: vm.variantEdit.comment,\n        ngModelElAttrs: {\n          'msd-elastic': 'true',\n          'mentio': '',\n          'mentio-id': '\"commentForm\"'\n        },\n        templateOptions: {\n          rows: 5,\n          minimum_length: 3,\n          required: false,\n          label: 'Revision Description',\n          value: 'text',\n          helpText: 'Please provide a brief description and support, if necessary, for your suggested revision. It will appear as the first comment in this revision\\'s comment thread.'\n        },\n        validators: {\n          length: {\n            expression: function(viewValue, modelValue, scope) {\n              var value = viewValue || modelValue;\n              return value.length >= scope.to.minimum_length;\n            },\n            message: '\"Comment must be at least \" + to.minimum_length + \" characters long to submit.\"'\n          }\n        }\n      }\n    ];\n\n    vm.submit = function(variantEdit) {\n      variantEdit.variantId = variantEdit.id;\n      variantEdit.variant_types = _.map(variantEdit.variant_types, 'id');\n      vm.formErrors = {};\n      vm.formMessages = {};\n      variantEdit = _.merge(variantEdit, variantEdit.coordinates); // civic-server needs coords on base variant obj\n      delete variantEdit.coordinates;\n\n      VariantRevisions.submitRevision(variantEdit)\n        .then(function(response) {\n          console.log('revision submit success!');\n          vm.newRevisionId = response.id;\n          vm.formMessages.submitSuccess = true;\n          vm.showInstructions = false;\n          vm.pendingFields = false;\n          vm.showForm = false;\n          vm.showSuccessMessage = true;\n        })\n        .catch(function(error) {\n          console.error('revision submit error!');\n          vm.formErrors[error.status] = true;\n          vm.serverMsg = error.data.error;\n        })\n        .finally(function(){\n          console.log('revision submit done!');\n        });\n    };\n\n    vm.apply = function(variantEdit) {\n      variantEdit.variantId = variantEdit.id;\n      vm.formErrors = {};\n      vm.formMessages = {};\n      Variants.apply(variantEdit)\n        .then(function() {\n          console.log('revision appy success!');\n          vm.formMessages.applySuccess = true;\n        })\n        .catch(function(response) {\n          console.error('revision application error!');\n          vm.formErrors[response.status] = true;\n        })\n        .finally(function(){\n          console.log('revision apply done!');\n        });\n    };\n\n    vm.revisionsClick = function() {\n      $state.go('events.genes.summary.variants.talk.revisions.list', { variantId: Variants.data.item.id });\n    }\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.variants')\n    .config(variantTalkConfig)\n    .factory('VariantsTalkViewOptions', VariantsTalkViewOptions)\n    .controller('VariantTalkController', VariantTalkController);\n\n  // @ngInject\n  function variantTalkConfig($stateProvider) {\n    $stateProvider\n      .state('events.genes.summary.variants.talk', {\n        abstract: true,\n        url: '/talk',\n        templateUrl: 'app/views/events/variants/talk/VariantTalkView.tpl.html',\n        controller: 'VariantTalkController',\n        controllerAs: 'vm',\n        resolve: {\n          VariantRevisions: 'VariantRevisions',\n          VariantHistory: 'VariantHistory',\n          initVariantTalk: function(Variants, VariantRevisions, VariantHistory, $stateParams, $cacheFactory, $q) {\n            var variantId = $stateParams.variantId;\n            return $q.all([\n              Variants.initComments(variantId),\n              VariantRevisions.initRevisions(variantId),\n              VariantHistory.initBase(variantId)\n            ]);\n          }\n        },\n        deepStateRedirect: [ 'variantId' ],\n        data: {\n          titleExp: '\"Variant \" + variant.name + \" Talk\"',\n          navMode: 'sub'\n        }\n      })\n      .state('events.genes.summary.variants.talk.log', {\n        url: '/log',\n        template: '<variant-talk-log></variant-talk-log>',\n        data: {\n          titleExp: '\"Variant \" + variant.name + \" Log\"',\n          navMode: 'sub'\n        }\n      })\n      .state('events.genes.summary.variants.talk.comments', {\n        url: '/comments',\n        template: '<variant-talk-comments></variant-talk-comments>',\n        data: {\n          titleExp: '\"Variant \" + variant.name + \" Comments\"',\n          navMode: 'sub'\n        }\n      });\n  }\n\n  // @ngInject\n  function VariantsTalkViewOptions($state, $stateParams, Variants) {\n    var baseUrl = '';\n    var baseState = '';\n    var tabData = [];\n    var styles = {};\n\n    var variant = Variants.data.item;\n\n    function init() {\n      this.state.baseState = 'events.genes.summary.variants.talk';\n      this.state.baseUrl = $state.href(this.state.baseState, $stateParams);\n\n      angular.copy([\n        {\n          heading: variant.name + ' Revisions',\n          route: this.state.baseState + '.revisions.list',\n          params: {  variantId: variant.id }\n        },\n        {\n          heading: variant.name  + ' Comments',\n          route: this.state.baseState + '.comments',\n          params: { variantId: variant.id }\n        },\n        {\n          heading: variant.name + ' Log',\n          route: this.state.baseState + '.log',\n          params: {  variantId: variant.id }\n        },\n\n      ], tabData);\n\n      angular.copy({\n        view: {\n          summaryBackgroundColor: 'pageBackground',\n          talkBackgroundColor: 'pageBackground'\n        },\n        tabs: {\n          tabRowBackground: 'pageBackgroundGradient'\n        }\n      }, styles);\n    }\n\n    return {\n      init: init,\n      state: {\n        baseParams: $stateParams,\n        baseState: baseState,\n        baseUrl: baseUrl\n      },\n      tabData: tabData,\n      styles: styles\n    };\n  }\n\n  // @ngInject\n  function VariantTalkController(Variants, VariantRevisions, VariantsTalkViewOptions) {\n    console.log('VariantsTalkController called.');\n    VariantsTalkViewOptions.init();\n    this.VariantsTalkViewModel = Variants; // we're re-using the Variants model here but could in the future have a VariantsTalk model if warranted\n    this.VariantRevisionsModel = VariantRevisions;\n    this.VariantsTalkViewOptions = VariantsTalkViewOptions;\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.variants')\n    .controller('VariantTalkLogController', VariantTalkLogController)\n    .directive('variantTalkLog', variantTalkLogDirective);\n\n  // @ngInject\n  function variantTalkLogDirective() {\n    return {\n      restrict: 'E',\n      scope: {},\n      controller: 'VariantTalkLogController',\n      templateUrl: 'app/views/events/variants/talk/variantTalkLog.tpl.html'\n    };\n  }\n\n  // @ngInject\n  function VariantTalkLogController($scope, _,\n                                 Variants,\n                                 VariantRevisions,\n                                 VariantHistory) {\n    var ctrl = $scope.ctrl = {}; // create ctrl here, link function will attach entityTalkView after DOM rendered.\n    var comments, revisions, history;\n    $scope.comments = Variants.data.comments;\n    $scope.revisions = VariantRevisions.data.collection;\n    $scope.history = VariantHistory.data.collection;\n    $scope.$watchCollection('[comments, revisions, history]', function(collections) {\n      comments = _.merge({}, collections[0]);\n      revisions = _.merge({}, collections[1]);\n      history = _.merge({}, collections[2]);\n\n      comments = _.map(comments, function(comment) {\n        comment.type = 'comment';\n        return comment;\n      });\n\n      revisions = _.map(revisions, function(revision) {\n        revision.type = 'revision';\n        return revision;\n      });\n\n      history = _.map(history, function(change) {\n        change.type='history';\n        return change;\n      });\n\n\n      // concatenate event arrays, sort by date descending\n      ctrl.logItems = comments.concat(revisions, history);\n      ctrl.logItems = _.chain(ctrl.logItems)\n        .map(function(item) {\n          // revisions can have an .user attribute that's just a string\n          item.username = typeof item.user === 'object' ? item.user.username : item.user;\n          // some items have both created_at and updated_at, we'll favor updated_at\n          item.timestamp = _.has(item, 'updated_at') ? item.updated_at : item.created_at;\n          return item;\n        })\n        .sortBy(function(item) {\n          return new Date(item.timestamp);\n        })\n        .reverse()\n        .value();\n    });\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.variants')\n    .controller('VariantTalkCommentsController', VariantTalkCommentsController)\n    .directive('variantTalkComments', variantTalkCommentsDirective);\n\n  // @ngInject\n  function variantTalkCommentsDirective() {\n    return {\n      restrict: 'E',\n      scope: {},\n      controller: 'VariantTalkCommentsController',\n      templateUrl: 'app/views/events/variants/talk/variantTalkComments.tpl.html'\n    };\n  }\n\n\n  // @ngInject\n  function VariantTalkCommentsController($scope, Variants) {\n    var ctrl = $scope.ctrl = {};\n\n    ctrl.variantTalkModel = Variants;\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.variants')\n    .config(variantTalkRevisionsConfig)\n    .factory('VariantTalkRevisionsViewOptions', VariantTalkRevisionsViewOptions)\n    .controller('VariantTalkRevisionsController', VariantTalkRevisionsController);\n\n  // @ngInject\n  function variantTalkRevisionsConfig($stateProvider) {\n    $stateProvider\n      .state('events.genes.summary.variants.talk.revisions', {\n        abstract: true,\n        url: '/revisions',\n        templateUrl: 'app/views/events/variants/talk/revisions/VariantTalkRevisionsView.tpl.html',\n        controller: 'VariantTalkRevisionsController',\n        controllerAs: 'vm',\n        resolve: {\n          VariantRevisions: 'VariantRevisions',\n          VariantHistory: 'VariantHistory',\n          initVariantTalkRevisions: function(Variants, VariantRevisions, VariantHistory, $stateParams, $q) {\n            var variantId = $stateParams.variantId;\n            return $q.all([\n              VariantRevisions.initRevisions(variantId),\n              VariantHistory.initBase(variantId)\n            ]);\n          }\n        },\n        deepStateRedirect: [ 'variantId', 'revisionId' ],\n        data: {\n          titleExp: '\"Variant \" + variant.name + \" Talk\"',\n          navMode: 'sub'\n        }\n      })\n      .state('events.genes.summary.variants.talk.revisions.list', {\n        url: '/list/:revisionId',\n        template: '<variant-talk-revisions></variant-talk-revisions>',\n        data: {\n          titleExp: '\"Variant \" + variant.name + \" Revisions\"',\n          navMode: 'sub'\n        }\n      })\n      .state('events.genes.summary.variants.talk.revisions.list.summary', {\n        url: '/summary',\n        template: '<variant-talk-revision-summary></variant-talk-revision-summary>',\n        resolve: {\n          initRevision: function(VariantRevisions, $stateParams, $q) {\n            return $q.all([\n              VariantRevisions.get($stateParams.variantId, $stateParams.revisionId),\n              VariantRevisions.queryComments($stateParams.variantId, $stateParams.revisionId)\n            ]);\n          }\n        },\n        data: {\n          titleExp: '\"Variant \" + variant.name + \" Revision Summary\"',\n          navMode: 'sub'\n        }\n      });\n  }\n\n  // @ngInject\n  function VariantTalkRevisionsViewOptions($state, $stateParams) {\n    var baseUrl = '';\n    var baseState = '';\n    var styles = {};\n\n    function init() {\n      baseState = 'events.genes.summary.variants.talk.revisions';\n      baseUrl = $state.href(baseState, $stateParams);\n\n      angular.copy({\n        view: {\n          summaryBackgroundColor: 'pageBackground',\n          talkBackgroundColor: 'pageBackground'\n        },\n        tabs: {\n          tabRowBackground: 'pageBackground2Gradient'\n        }\n      }, styles);\n    }\n\n    return {\n      init: init,\n      state: {\n        baseParams: $stateParams,\n        baseState: baseState,\n        baseUrl: baseUrl\n      },\n      styles: styles\n    };\n  }\n\n  // @ngInject\n  function VariantTalkRevisionsController(VariantRevisions, VariantTalkRevisionsRevisionsViewOptions) {\n    console.log('VariantTalkRevisionsRevisionsController called.');\n    VariantTalkRevisionsRevisionsViewOptions.init();\n    this.VariantRevisionsModel = VariantRevisions;\n    this.VariantTalkRevisionsViewOptions = VariantTalkRevisionsViewOptions;\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.variants')\n    .controller('VariantTalkRevisionsController', VariantTalkRevisionsController)\n    .directive('variantTalkRevisions', variantTalkRevisionsDirective);\n\n  // @ngInject\n  function variantTalkRevisionsDirective() {\n    return {\n      restrict: 'E',\n      scope: {},\n      controller: 'VariantTalkRevisionsController',\n      templateUrl: 'app/views/events/variants/talk/revisions/variantTalkRevisions.tpl.html'\n    };\n  }\n\n  // @ngInject\n  function VariantTalkRevisionsController($scope, VariantRevisions, VariantsTalkViewOptions) {\n    $scope.variantRevisions = VariantRevisions;\n    $scope.viewOptions = VariantsTalkViewOptions;\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.variants')\n    .directive('variantTalkRevisionSummary', variantTalkRevisionSummary)\n    .controller('VariantTalkRevisionSummaryController', VariantTalkRevisionSummaryController);\n\n  // @ngInject\n  function variantTalkRevisionSummary() {\n    var directive = {\n      restrict: 'E',\n      replace: true,\n      templateUrl: 'app/views/events/variants/talk/revisions/variantTalkRevisionSummary.tpl.html',\n      controller: 'VariantTalkRevisionSummaryController'\n    };\n    return directive;\n  }\n\n  // @ngInject\n  function VariantTalkRevisionSummaryController($scope, $stateParams, VariantRevisions, Security, formConfig) {\n    var vm = $scope.vm = {};\n    vm.isEditor = Security.isEditor;\n    vm.isAuthenticated = Security.isAuthenticated;\n    vm.variantTalkModel = VariantRevisions;\n\n    vm.formErrors = {};\n    vm.formMessages = {};\n    vm.errorMessages = formConfig.errorMessages;\n    vm.errorPrompts = formConfig.errorPrompts;\n\n    $scope.acceptRevision = function() {\n      vm.formErrors = {};\n      vm.formMessages = {};\n      VariantRevisions.acceptRevision($stateParams.variantId, $stateParams.revisionId)\n        .then(function() {\n          vm.formMessages.acceptSuccess = true;\n        })\n        .catch(function(error) {\n          console.error('revision accept error!');\n          vm.formErrors[error.status] = true;\n        })\n        .finally(function (){\n          console.log('accept revision successful.');\n        });\n    };\n\n    $scope.rejectRevision = function() {\n      vm.formErrors = {};\n      vm.formMessages = {};\n      VariantRevisions.rejectRevision($stateParams.variantId, $stateParams.revisionId)\n        .then(function() {\n          vm.formMessages.rejectSuccess = true;\n        })\n        .catch(function(error) {\n          console.error('revision reject error!');\n          vm.formErrors[error.status] = true;\n        })\n        .finally(function (){\n          console.log('reject revision successful.');\n        });\n    };\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.evidence')\n    .config(EvidenceConfig)\n    .factory('EvidenceViewOptions', EvidenceViewOptions)\n    .controller('EvidenceController', EvidenceController);\n\n  // @ngInject\n  function EvidenceConfig($stateProvider) {\n    $stateProvider\n      .state('events.genes.summary.variants.summary.evidence', {\n        abstract: true,\n        url: '/evidence/:evidenceId',\n        templateUrl: 'app/views/events/evidence/EvidenceView.tpl.html',\n        resolve: /* @ngInject */ {\n          Evidence: 'Evidence',\n          initEvidence: function(Evidence, $stateParams) {\n            return Evidence.initBase($stateParams.evidenceId);\n          }\n\n        },\n        controller: 'EvidenceController',\n        controllerAs: 'vm',\n        deepStateRedirect: { params: ['evidenceId'] }\n      })\n      .state('events.genes.summary.variants.summary.evidence.summary', {\n        url: '/summary',\n        template: '<evidence-summary show-evidence-grid=\"true\"></evidence-summary>',\n        //resolve: {\n        //  refreshEvidence: function(Evidence, $stateParams) {\n        //    return Evidence.getFresh($stateParams.geneId);\n        //  }\n        //},\n        // deepStateRedirect: { params: ['evidenceId'] },\n        data: {\n          navMode: 'sub',\n          titleExp: '\"Evidence \" + evidence.name'\n        }\n      });\n  }\n\n  // @ngInject\n  function EvidenceViewOptions($state, $stateParams) {\n    var tabData = [];\n    var state = {\n      baseParams: {},\n      baseState: '',\n      baseUrl: ''\n    };\n    var styles = {};\n\n    function init() {\n      angular.copy($stateParams, this.state.baseParams);\n      this.state.baseState = 'events.genes.summary.variants.summary.evidence';\n      this.state.baseUrl = $state.href(this.state.baseState, $stateParams);\n\n      angular.copy([\n        {\n          heading: 'Evidence Summary',\n          route: 'events.genes.summary.variants.summary.evidence.summary',\n          params: {\n            geneId: $stateParams.geneId,\n            variantId: $stateParams.variantId,\n            evidenceId: $stateParams.evidenceId,\n            '#': 'evidence'\n          }\n        },\n        {\n          heading: 'Evidence Talk',\n          route: 'events.genes.summary.variants.summary.evidence.talk.revisions.list',\n          params: {\n            geneId: $stateParams.geneId,\n            variantId: $stateParams.variantId,\n            evidenceId: $stateParams.evidenceId,\n            '#': 'evidence'\n          }\n        }\n      ], this.tabData);\n\n      angular.copy({\n        view: {\n          backgroundColor: 'pageBackground2'\n        },\n        edit: {\n          summaryBackgroundColor: 'pageBackground2'\n        }\n      }, this.styles);\n    }\n\n    return {\n      init: init,\n      state: state,\n      tabData: tabData,\n      styles: styles\n    };\n  }\n\n  // @ngInject\n  function EvidenceController(Evidence, EvidenceRevisions, EvidenceViewOptions) {\n    EvidenceViewOptions.init();\n    // these will be passed to the entity-view directive controller, to be required by child entity component so that they\n    // can get references to the view model and view options\n    this.EvidenceViewModel = Evidence;\n    this.EvidenceViewRevisions = EvidenceRevisions\n    this.EvidenceViewOptions = EvidenceViewOptions;\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.evidence')\n    .controller('EvidenceSummaryController', EvidenceSummaryController)\n    .directive('evidenceSummary', function() {\n      return {\n        restrict: 'E',\n        scope: {},\n        controller: 'EvidenceSummaryController',\n        templateUrl: 'app/views/events/evidence/summary/evidenceSummary.tpl.html'\n      };\n    });\n\n  //@ngInject\n  function EvidenceSummaryController($scope,\n                                     $log,\n                                     $stateParams,\n                                     Evidence,\n                                     Security,\n                                     EvidenceViewOptions,\n                                     _,\n                                     ConfigService) {\n    $scope.isEditor = Security.isEditor;\n    $scope.isAuthenticated = Security.isAuthenticated;\n    $scope.evidence = Evidence.data.item;\n    $scope.tipText = ConfigService.evidenceAttributeDescriptions;\n\n    var evidence_levels = {\n      A: 'Validated',\n      B: 'Clinical',\n      C: 'Case Study',\n      D: 'Preclinical',\n      E: 'Inferential'\n    };\n    $scope.$watchCollection('evidence', function() {\n      $scope.evidence.evidence_level_string = $scope.evidence.evidence_level + ' - ' + evidence_levels[$scope.evidence.evidence_level];\n      if($scope.evidence.drugs.length > 0) {\n        $scope.evidence.drugsStr = _.chain($scope.evidence.drugs).pluck('name').value().join(', ');\n      } else {\n        $scope.evidence.drugsStr = 'N/A';\n      }\n    });\n\n    $scope.EvidenceViewOptions = EvidenceViewOptions;\n    $scope.backgroundColor = EvidenceViewOptions.styles.view.backgroundColor;\n\n    $scope.acceptItem = function(id) {\n      $log.debug('accept item ' + id);\n      Evidence.accept(id, $stateParams.variantId)\n        .then(function(response) {\n          $log.debug('Accept success.');\n          $log.debug(response);\n        })\n        .catch(function(response) {\n          $log.error('Ooops! There was an error accepting this evidence item.');\n          $log.error(response);\n        })\n        .finally(function() {\n          $log.debug('Accept Item done.');\n        });\n    };\n\n    $scope.rejectItem = function(id) {\n      $log.debug('reject item ' + id);\n      Evidence.reject(id, $stateParams.variantId)\n        .then(function(response) {\n          $log.debug('Reject success.');\n          $log.debug(response);\n        })\n        .catch(function(response) {\n          $log.error('Ooops! There was an error rejecting this evidence item.');\n          $log.error(response);\n        })\n        .finally(function() {\n          $log.debug('Reject Item done.');\n        });\n    };\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.evidence')\n    .config(evidenceEditConfig)\n    .factory('EvidenceEditViewOptions', EvidenceEditViewOptions)\n    .controller('EvidenceEditController', EvidenceEditController);\n\n  // @ngInject\n  function evidenceEditConfig($stateProvider) {\n    $stateProvider\n      .state('events.genes.summary.variants.summary.evidence.edit', {\n        abstract: true,\n        url: '/edit',\n        templateUrl: 'app/views/events/evidence/edit/EvidenceEditView.tpl.html',\n        controller: 'EvidenceEditController',\n        controllerAs: 'vm',\n        resolve: {\n          EvidenceRevisions: 'EvidenceRevisions',\n          initEvidenceEdit: function(Evidence, EvidenceRevisions, EvidenceHistory, $stateParams, $q) {\n            var evidenceId = $stateParams.evidenceId;\n            return $q.all([\n              EvidenceRevisions.initRevisions(evidenceId),\n              EvidenceRevisions.getPendingFields(evidenceId),\n              EvidenceHistory.initBase(evidenceId)\n            ]);\n          }\n        },\n        deepStateRedirect: [ 'evidenceId' ],\n        data: {\n          titleExp: '\"Evidence \" + evidence.name + \" Edit\"',\n          navMode: 'sub'\n        }\n      })\n      .state('events.genes.summary.variants.summary.evidence.edit.basic', {\n        url: '/basic',\n        template: '<evidence-edit-basic></evidence-edit-basic>',\n        data: {\n          titleExp: '\"Evidence \" + evidence.name + \" Edit\"',\n          navMode: 'sub'\n        }\n      });\n  }\n\n  // @ngInject\n  function EvidenceEditViewOptions($state, $stateParams) {\n    var baseUrl = '';\n    var baseState = '';\n    var styles = {};\n\n    function init() {\n      baseState = 'events.genes.summary.evidence.edit';\n      baseUrl = $state.href(baseUrl, $stateParams);\n\n      angular.copy({\n        view: {\n          summaryBackgroundColor: 'pageBackground2',\n          editBackgroundColor: 'pageBackground',\n          talkBackgroundColor: 'pageBackground'\n        },\n        tabs: {\n          tabRowBackground: 'pageBackground2Gradient'\n        }\n      }, styles);\n    }\n\n    return {\n      init: init,\n      state: {\n        baseParams: $stateParams,\n        baseState: baseState,\n        baseUrl: baseUrl\n      },\n      styles: styles\n    };\n  }\n\n  // @ngInject\n  function EvidenceEditController(Evidence, EvidenceRevisions, EvidenceEditViewOptions) {\n    console.log('EvidenceEditController called.');\n    EvidenceEditViewOptions.init();\n    this.EvidenceEditViewModel = Evidence; // we're re-using the Evidence model here but could in the future have a EvidenceEdit model if warranted\n    this.EvidenceRevisionsModel = EvidenceRevisions;\n    this.EvidenceEditViewOptions = EvidenceEditViewOptions;\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.evidence')\n    .directive('evidenceEditBasic', evidenceEditBasicDirective)\n    .controller('EvidenceEditBasicController', EvidenceEditBasicController);\n\n  // @ngInject\n  function evidenceEditBasicDirective() {\n    return {\n      restrict: 'E',\n      scope: {},\n      controller: 'EvidenceEditBasicController',\n      templateUrl: 'app/views/events/evidence/edit/evidenceEditBasic.tpl.html'\n    };\n  }\n\n  // @ngInject\n  function EvidenceEditBasicController($scope,\n                                       $stateParams,\n                                       $q,\n                                       $document,\n                                       $state,\n                                       Publications,\n                                       DrugSuggestions,\n                                       Diseases,\n                                       Security,\n                                       EvidenceRevisions,\n                                       Evidence,\n                                       EvidenceHistory,\n                                       EvidenceViewOptions,\n                                       formConfig,\n                                       _) {\n\n    var vm = $scope.vm = {};\n\n    vm.isEditor = Security.isEditor();\n    vm.isAuthenticated = Security.isAuthenticated();\n\n    vm.evidence = Evidence.data.item;\n    vm.pendingFields = _.keys(EvidenceRevisions.data.pendingFields).length > 0;\n    vm.pendingFieldsList = _.map(_.keys(EvidenceRevisions.data.pendingFields), function(field) {\n      return field.charAt(0).toUpperCase() + field.slice(1);\n    });\n    vm.evidenceRevisions = EvidenceRevisions;\n    vm.evidenceHistory = EvidenceHistory;\n    vm.evidenceEdit = angular.copy(vm.evidence);\n    vm.evidenceEdit.comment = { title: 'Evidence EID' + vm.evidence.id + ' Revision Description', text:'' };\n    vm.evidenceEdit.drugs = _.filter(_.pluck(vm.evidence.drugs, 'name'), function(name){ return name !== 'N/A'; });\n    vm.styles = EvidenceViewOptions.styles;\n\n    vm.user = {};\n\n    vm.formErrors = {};\n    vm.formMessages = {};\n    vm.errorMessages = formConfig.errorMessages;\n    vm.errorPrompts = formConfig.errorPrompts;\n    vm.serverMsg = '';\n    vm.newRevisionId = Number();\n    vm.stateParams = $stateParams;\n\n    vm.showForm = true;\n    vm.showSuccessMessage = false;\n    vm.showInstructions = true;\n\n    // scroll to form header\n    $document.ready(function() {\n      var elem = document.getElementById('evidence-edit-form');\n      $document.scrollToElementAnimated(elem);\n    });\n\n    vm.evidenceFields = [\n      {\n        key: 'variant_origin',\n        type: 'horizontalSelectHelp',\n        wrapper: 'attributeDefinition',\n        templateOptions: {\n          label: 'Variant Origin',\n          value: 'vm.evidenceEdit.variant_origin',\n          options: [\n            { value: '', label: 'Please select a Variant Origin' },\n            { value: 'Somatic Mutation', label: 'Somatic Mutation'},\n            { value: 'Germline Mutation', label: 'Germline Mutation' },\n            { value: 'Germline Polymorphism', label: 'Germline Polymorphism' },\n            { value: 'Unknown', label: 'Unknown' },\n            { value: 'N/A', label: 'N/A' },\n          ],\n          valueProp: 'value',\n          labelProp: 'label',\n          helpText: 'Origin of variant.',\n          data: {\n            attributeDefinition: '&nbsp;',\n            attributeDefinitions: {\n              'Somatic Mutation': 'Variant is a mutation, found only in tumor cells, having arisen in a specific tissue (non-germ cell), and is not expected to be inherited or passed to offspring.',\n              'Germline Mutation': 'Variant is a mutation, found in every cell, not restricted to tumor/diseased cells, is expected to have arisen de novo in the germ cells responsible for the current generation or only very recent generations (e.g., close family members), and is not thought to exist in the population at large.',\n              'Germline Polymorphism': 'Variant is found in every cell, not restricted to tumor/diseased cells, and thought to represent common (or relatively rare) variation in the population at large.',\n              'Unknown': 'The variant origin is uncertain based on the available evidence.',\n              'N/A': 'The variant type (e.g., expression) is not compatible (or easily classified) with the CIViC concepts of variant origin.'\n            }\n          },\n          onChange: function(value, options) {\n            // set attribute definition\n            options.templateOptions.data.attributeDefinition = options.templateOptions.data.attributeDefinitions[value];\n          }\n        }\n      },\n      {\n        key: 'pubmed_id',\n        type: 'publication',\n        templateOptions: {\n          label: 'Pubmed Id',\n          value: 'vm.evidenceEdit.pubmed_id',\n          minLength: 1,\n          required: true,\n          data: {\n            description: '--'\n          },\n          helpText: 'PubMed ID for the publication associated with the evidence statement (e.g. 23463675).'\n        },\n        modelOptions: {\n          updateOn: 'default blur',\n          allowInvalid: false,\n          debounce: {\n            default: 300,\n            blur: 0\n          }\n        },\n        validators: {\n          validPubmedId: {\n            expression: function($viewValue, $modelValue, scope) {\n              if ($viewValue.length > 0) {\n                var deferred = $q.defer();\n                scope.options.templateOptions.loading = true;\n                Publications.verify($viewValue).then(\n                  function (response) {\n                    scope.options.templateOptions.loading = false;\n                    scope.options.templateOptions.data.description = response.description;\n                    deferred.resolve(response);\n                  },\n                  function (error) {\n                    scope.options.templateOptions.loading = false;\n                    scope.options.templateOptions.data.description = '--';\n                    deferred.reject(error);\n                  }\n                );\n                return deferred.promise;\n              } else {\n                scope.options.templateOptions.data.description = '--';\n                return true;\n              }\n            },\n            message: '\"This does not appear to be a valid Pubmed ID.\"'\n          }\n        }\n      },\n      {\n        key: 'disease',\n        type: 'horizontalTypeaheadHelp',\n        wrapper: ['loader', 'diseasedisplay', 'validationMessages'],\n        value: '',\n        controller: /* @ngInject */ function($scope) {\n          $scope.to.data.doid = $scope.model.disease.doid;\n        },\n        templateOptions: {\n          label: 'Disease',\n          value: 'vm.evidenceEdit.doid',\n          required: true,\n          minLength: 32,\n          helpText: 'Please enter a disease name. If you are unable to locate the disease in the dropdown, please check the \\'Could not find disease\\' checkbox below and enter the disease in the field that appears.',\n          typeahead: 'item as item.name for item in to.data.typeaheadSearch($viewValue)',\n          onSelect: 'to.data.doid = $model.doid',\n          templateUrl: 'components/forms/fieldTypes/diseaseTypeahead.tpl.html',\n          data: {\n            doid: '--',\n            typeaheadSearch: function(val) {\n              return Diseases.beginsWith(val)\n                .then(function(response) {\n                  return response;\n                });\n            }\n          }\n        }\n      },\n      {\n        key: 'description',\n        type: 'horizontalTextareaHelp',\n        templateOptions: {\n          rows: 5,\n          label: 'Evidence Statement',\n          value: 'vm.evidenceEdit.description',\n          minLength: 32,\n          helpText: 'Description of evidence from published medical literature detailing the association of or lack of association of a variant with diagnostic, prognostic or predictive value in relation to a specific disease (and treatment for predictive evidence).'\n        }\n      },\n      {\n        key: 'evidence_type',\n        type: 'horizontalSelectHelp',\n        wrapper: 'attributeDefinition',\n        controller: /* @ngInject */  function($scope) {\n          // set attribute definition\n          $scope.options.templateOptions.data.attributeDefinition =\n            $scope.options.templateOptions.data.attributeDefinitions[$scope.model.evidence_type];\n        },\n        templateOptions: {\n          label: 'Evidence Type',\n          value: 'vm.evidenceEdit.evidence_type',\n          ngOptions: 'option[\"value\"] as option[\"label\"] for option in to.options',\n          options: [\n            { value: '', label: 'Please select an Evidence Type' },\n            { value: 'Predictive', label: 'Predictive' },\n            { value: 'Diagnostic', label: 'Diagnostic' },\n            { value: 'Prognostic', label: 'Prognostic' }\n          ],\n          onChange: function(value, options, scope) {\n            // reset clinical_significance, as its options will change\n            scope.model.clinical_significance = '';\n\n            // if we're switching to Predictive, seed the drugs array w/ a blank entry,\n            // otherwise set to empty array\n            value === 'Predictive' ? scope.model.drugs = [''] : scope.model.drugs = [];\n\n            // set attribute definition\n            options.templateOptions.data.attributeDefinition = options.templateOptions.data.attributeDefinitions[value];\n\n            // update evidence direction attribute definition\n            var edField = _.find(scope.fields, { key: 'evidence_direction'});\n            if (edField.value() !== '') { // only update if user has selected an option\n              edField.templateOptions.data.updateDefinition(null, edField, scope);\n            }\n          },\n          helpText: 'Type of clinical outcome associated with the evidence statement.',\n          data: {\n            attributeDefinition: '&nbsp;',\n            attributeDefinitions: {\n              'Predictive': 'Evidence pertains to a variant\\'s effect on therapeutic response',\n              'Diagnostic': 'Evidence pertains to a variant\\'s impact on patient diagnosis',\n              'Prognostic': 'Evidence pertains to a variant\\'s impact on disease progression, severity, or patient survival'\n            }\n          }\n        }\n      },\n      {\n        key: 'evidence_level',\n        type: 'horizontalSelectHelp',\n        wrapper: 'attributeDefinition',\n        controller: /* @ngInject */ function($scope) {\n          // set attribute definition\n          $scope.options.templateOptions.data.attributeDefinition =\n            $scope.options.templateOptions.data.attributeDefinitions[$scope.model.evidence_level];\n        },\n        templateOptions: {\n          label: 'Evidence Level',\n          value: 'vm.evidenceEdit.rating',\n          options: [\n            { value: '', label: 'Please select an Evidence Level' },\n            { value: 'A', label: 'A - Validated'},\n            { value: 'B', label: 'B - Clinical'},\n            { value: 'C', label: 'C - Case Study'},\n            { value: 'D', label: 'D - Preclinical'},\n            { value: 'E', label: 'E - Inferential'}\n          ],\n          valueProp: 'value',\n          labelProp: 'label',\n          helpText: 'Type of study performed to produce the evidence statement.',\n          data: {\n            attributeDefinition: '&nbsp;',\n            attributeDefinitions: {\n              A: 'Proven/consensus association in human medicine',\n              B: 'Clinical trial or other primary patient data supports association',\n              C: 'Individual case reports from clinical journals',\n              D: 'In vivo or in vitro models support association',\n              E: 'Indirect evidence'\n            }\n          },\n          onChange: function(value, options) {\n            // set attribute definition\n            options.templateOptions.data.attributeDefinition = options.templateOptions.data.attributeDefinitions[value];\n          }\n\n        }\n      },\n      {\n        key: 'evidence_direction',\n        type: 'horizontalSelectHelp',\n        wrapper: 'attributeDefinition',\n        controller: /* @ngInject */ function($scope) {\n          // set attribute definition\n          $scope.options.templateOptions.data.attributeDefinition =\n            $scope.options.templateOptions.data.attributeDefinitions[$scope.model.evidence_type][$scope.model.evidence_direction];\n        },\n        templateOptions: {\n          label: 'Evidence Direction',\n          value: 'vm.evidenceEdit.evidence_direction',\n          options: [\n            { value: '', label: 'Please select an Evidence Direction' },\n            { value: 'Supports', label: 'Supports'},\n            { value: 'Does Not Support', label: 'Does Not Support' }\n          ],\n          valueProp: 'value',\n          labelProp: 'label',\n          helpText: 'An indicator of whether the evidence statement supports or refutes the clinical significance of an event. Evidence Type must be selected before this field is enabled.',\n          data: {\n            attributeDefinition: '&nbsp;',\n            attributeDefinitions: {\n              'Predictive': {\n                'Supports': 'The experiment or study supports this variant\\'s response to a drug',\n                'Does Not Support': 'The experiment or study does not support, or was inconclusive of an interaction between the variant and a drug'\n              },\n              'Diagnostic': {\n                'Supports': 'The experiment or study supports variant\\'s impact on the diagnosis of disease or subtype',\n                'Does Not Support': 'The experiment or study does not support the variant\\'s impact on diagnosis of disease or subtype'\n              },\n              'Prognostic': {\n                'Supports': 'The experiment or study supports a variant\\'s impact on prognostic outcome',\n                'Does Not Support': 'The experiment or study does not support a prognostic association between variant and outcome'\n              }\n            },\n            updateDefinition: function(value, options, scope) {\n              // set attribute definition\n              options.templateOptions.data.attributeDefinition =\n                options.templateOptions.data.attributeDefinitions[scope.model.evidence_type][scope.model.evidence_direction];\n            }\n          },\n          onChange: function(value, options, scope) {\n            options.templateOptions.data.updateDefinition(value, options, scope);\n          }\n        },\n        expressionProperties: {\n          'templateOptions.disabled': 'model.evidence_type === \"\"' // deactivate if evidence_type unselected\n        }\n      },\n      {\n        key: 'clinical_significance',\n        type: 'horizontalSelectHelp',\n        wrapper: 'attributeDefinition',\n        controller: /* @ngInject */ function($scope) {\n          // set attribute definition\n          $scope.options.templateOptions.data.attributeDefinition =\n            $scope.options.templateOptions.data.attributeDefinitions[$scope.model.clinical_significance];\n        },\n        templateOptions: {\n          label: 'Clinical Significance',\n          required: true,\n          value: 'vm.evidenceEdit.clinical_significance',\n          clinicalSignificanceOptions: [ // stores unmodified options array for expressionProperties\n            { type: 'default', value: '', label: 'Please select a Clinical Significance' },\n            { type: 'Predictive', value: 'Sensitivity', label: 'Sensitivity' },\n            { type: 'Predictive', value: 'Resistance or Non-Response', label: 'Resistance or Non-Response' },\n            { type: 'Predictive', value: 'Adverse Response', label: 'Adverse Response' },\n            { type: 'Prognostic', value: 'Better Outcome', label: 'Better Outcome' },\n            { type: 'Prognostic', value: 'Poor Outcome', label: 'Poor Outcome' },\n            { type: 'Diagnostic', value: 'Positive', label: 'Positive' },\n            { type: 'Diagnostic', value: 'Negative', label: 'Negative' },\n            { type: 'N/A', value: 'N/A', label: 'N/A' }\n          ],\n          ngOptions: 'option[\"value\"] as option[\"label\"] for option in to.options',\n          options: [ // acutal options displayed in the select, modified by expressionProperties\n            { type: 'default', value: '', label: 'Please select a Clinical Significance' },\n            { type: 'Predictive', value: 'Sensitivity', label: 'Sensitivity' },\n            { type: 'Predictive', value: 'Resistance or Non-Response', label: 'Resistance or Non-Response' },\n            { type: 'Predictive', value: 'Adverse Response', label: 'Adverse Response' },\n            { type: 'Prognostic', value: 'Better Outcome', label: 'Better Outcome' },\n            { type: 'Prognostic', value: 'Poor Outcome', label: 'Poor Outcome' },\n            { type: 'Diagnostic', value: 'Positive', label: 'Positive' },\n            { type: 'Diagnostic', value: 'Negative', label: 'Negative' },\n            { type: 'N/A', value: 'N/A', label: 'N/A' }\n          ],\n          helpText: 'Positive or negative association of the Variant with predictive, prognostic, or diagnostic evidence types. If the variant was not associated with a positive or negative outcome, N/A should be selected. Evidence Type must be selected before this field is enabled.',\n          data: {\n            attributeDefinition: '&nbsp;',\n            attributeDefinitions: {\n              'Sensitivity': 'Subject exhibits response to drug treatment',\n              'Resistance or Non-Response': 'Subject exhibits a lack of response or active resistance to drug treatment',\n              'Adverse Response': 'Subject exhibits an adverse response to drug treatment',\n              'Better Outcome': 'Demonstrates better than expected clinical outcome',\n              'Poor Outcome': 'Demonstrates worse than expected clinical outcome',\n              'Positive': 'Associated with diagnosis of disease or subtype',\n              'Negative': 'Associated with lack of disease or subtype',\n              'N/A': 'Not applicable'\n            },\n            updateDefinition: function(value, options, scope) {\n              // set attribute definition\n              options.templateOptions.data.attributeDefinition =\n                options.templateOptions.data.attributeDefinitions[scope.model.clinical_significance];\n            }\n          },\n          onChange: function(value, options, scope) {\n            options.templateOptions.data.updateDefinition(value, options, scope);\n          }\n        },\n        expressionProperties: {\n          'templateOptions.options': function($viewValue, $modelValue, scope) {\n            return  _.filter(scope.to.clinicalSignificanceOptions, function(option) {\n              return !!(option.type === scope.model.evidence_type || option.type === 'default' || option.type === 'N/A');\n            });\n          },\n          'templateOptions.disabled': 'model.evidence_type === \"\"' // deactivate if evidence_type unselected\n        }\n      },\n      {\n        key: 'drugs',\n        type: 'multiInput',\n        templateOptions: {\n          label: 'Drug Names',\n          inputOptions: {\n            type: 'typeahead',\n            wrapper: null,\n            templateOptions: {\n              inputFormatter: 'model[options.key]',\n              typeahead: 'item.name for item in options.data.typeaheadSearch($viewValue)',\n              editable: true,\n              // focus: true,\n              onSelect: 'options.data.pushNew(model, index)'\n            },\n            data: {\n              pushNew: function(model, index) {\n                model.splice(index+1, 0, '');\n              },\n              typeaheadSearch: function(val) {\n                return DrugSuggestions.query(val)\n                  .then(function(response) {\n                    return _.map(response, function(drugname) {\n                      return { name: drugname };\n                    });\n                  });\n              }\n            }\n          },\n          helpText: 'For predictive evidence, specify one or more drug names. Drugs specified must possess a PubChem ID (e.g., 44462760 for Dabrafenib).'\n        },\n        hideExpression: function($viewValue, $modelValue, scope) {\n          return  scope.model.evidence_type !== 'Predictive';\n        }\n      },\n      {\n        key: 'drug_interaction_type',\n        type: 'horizontalSelectHelp',\n        wrapper: 'attributeDefinition',\n        controller: /* @ngInject */ function($scope) {\n          // set attribute definition\n          $scope.options.templateOptions.data.attributeDefinition =\n            $scope.options.templateOptions.data.attributeDefinitions[$scope.model.drug_interaction_type];\n        },\n        templateOptions: {\n          label: 'Drug Interaction Type',\n          value: 'vm.evidenceEdit.drug_interaction_type',\n          options: [\n            { type: 'default', value: '', label: 'Please select a Drug Interaction Type' },\n            { value: 'Combination', label: 'Combination'},\n            { value: 'Sequential', label: 'Sequential'},\n            { value: 'Substitutes', label: 'Substitutes'}\n          ],\n          valueProp: 'value',\n          labelProp: 'label',\n          helpText: 'If multiple drugs were added, please select an interaction type that describes their relationship to each other.',\n          data: {\n            attributeDefinition: '&nbsp;',\n            attributeDefinitions: {\n              'Combination': 'The drugs listed were used in as part of a combination therapy approach',\n              'Sequential': 'The drugs listed were used at separate timepoints in the same treatment plan',\n              'Substitutes': 'The drugs listed are often considered to be of the same family, or behave similarly in a treatment setting'\n            }\n          },\n          onChange: function(value, options) {\n            options.templateOptions.data.attributeDefinition =\n              options.templateOptions.data.attributeDefinitions[value];\n          }\n        },\n        hideExpression: function($viewValue, $modelValue, scope) {\n          return !(scope.model.evidence_type === 'Predictive' && // evidence type must be predictive\n            _.without(scope.model.drugs, '').length > 1);\n\n        }\n      },\n      {\n        key: 'rating',\n        type: 'horizontalRatingHelp',\n        templateOptions: {\n          label: 'Rating',\n\n          options: [\n            { value: '', label: 'Please select an Evidence Rating' },\n            { value: 1, label: '1 - Poor<br/>Claim is not supported well by experimental evidence. Results are not reproducible, or have very small sample size. No follow-up is done to validate novel claims.' },\n            { value: 2, label: '2 - Adequate<br/>Evidence is not well supported by experimental data, and little follow-up data is available. Publication is from a journal with low academic impact. Experiments may lack proper controls, have small sample size, or are not statistically convincing.' },\n            { value: 3, label: '3 - Average<br/>Evidence is convincing, but not supported by a breadth of experiments. May be smaller scale projects, or novel results without many follow-up experiments. Discrepancies from expected results are explained and not concerning.' },\n            { value: 4, label: '4 - Good<br/>Strong, well supported evidence. Experiments are well controlled, and results are convincing. Any discrepancies from expected results are well-explained and not concerning.' },\n            { value: 5, label: '5 - Excellent<br/>Strong, well supported evidence from a lab or journal with respected academic standing. Experiments are well controlled, and results are clean and reproducible across multiple replicates. Evidence confirmed using separate methods.'}\n          ],\n          valueProp: 'value',\n          labelProp: 'label',\n          helpText: '<p>Please rate your evidence on a scale of one to five stars. Use the star rating descriptions for guidance.</p>'\n        }\n      },\n      {\n        key: 'text',\n        type: 'horizontalCommentHelp',\n        ngModelElAttrs: {\n          'msd-elastic': 'true',\n          'mentio': '',\n          'mentio-id': '\"commentForm\"'\n        },\n        model: vm.evidenceEdit.comment,\n        templateOptions: {\n          rows: 5,\n          minimum_length: 3,\n          label: 'Revision Description',\n          required: false,\n          value: 'text',\n          helpText: 'Please provide a short description of your edits to this Evidence record.'\n        },\n        validators: {\n          length: {\n            expression: function(viewValue, modelValue, scope) {\n              var value = viewValue || modelValue;\n              return value.length >= scope.to.minimum_length;\n            },\n            message: '\"Comment must be at least \" + to.minimum_length + \" characters long to submit.\"'\n          }\n        }\n      }\n    ];\n\n    vm.submit = function(evidenceEdit) {\n      evidenceEdit.evidenceId = evidenceEdit.id;\n      evidenceEdit.drugs = _.without(evidenceEdit.drugs, ''); // delete blank input values\n      if(evidenceEdit.drugs.length < 2) { evidenceEdit.drug_interaction_type = null; } // delbete interaction if only 1 drug\n      vm.formErrors = {};\n      vm.formMessages = {};\n\n      EvidenceRevisions.submitRevision(evidenceEdit)\n        .then(function(response) {\n          console.log('revision submit success!');\n          vm.newRevisionId = response.id;\n          vm.formMessages.submitSuccess = true;\n          vm.pendingFields = false;\n          vm.showForm = false;\n          vm.showSuccessMessage = true;\n          vm.showInstructions = false;\n        })\n        .catch(function(error) {\n          console.error('revision submit error!');\n          vm.formErrors[error.status] = true;\n          vm.serverMsg = error.data.error;\n        })\n        .finally(function(){\n          console.log('revision submit done!');\n        });\n    };\n\n    vm.apply = function(evidenceEdit) {\n      evidenceEdit.evidenceId = evidenceEdit.id;\n      evidenceEdit.drugs = _.without(evidenceEdit.drugs, '');\n      if(evidenceEdit.drugs.length < 2) { evidenceEdit.drug_interaction_type = null; } // delete interaction if only 1 drug\n      vm.formErrors = {};\n      vm.formMessages = {};\n      Evidence.apply(evidenceEdit)\n        .then(function() {\n          console.log('revision appy success!');\n          vm.formMessages.applySuccess = true;\n          // options.resetModel();\n        })\n        .catch(function(response) {\n          console.error('revision application error!');\n          vm.formErrors[response.status] = true;\n        })\n        .finally(function(){\n          console.log('revision apply done!');\n        });\n    };\n\n    vm.revisionsClick = function() {\n      $state.go('events.genes.summary.variants.summary.evidence.talk.revisions.list', { evidenceId: Evidence.data.item.id });\n    }\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.evidence')\n    .config(evidenceTalkConfig)\n    .factory('EvidenceTalkViewOptions', EvidenceTalkViewOptions)\n    .controller('EvidenceTalkController', EvidenceTalkController);\n\n  // @ngInject\n  function evidenceTalkConfig($stateProvider) {\n    $stateProvider\n      .state('events.genes.summary.variants.summary.evidence.talk', {\n        abstract: true,\n        url: '/talk',\n        templateUrl: 'app/views/events/evidence/talk/EvidenceTalkView.tpl.html',\n        controller: 'EvidenceTalkController',\n        controllerAs: 'vm',\n        resolve: {\n          EvidenceRevisions: 'EvidenceRevisions',\n          EvidenceHistory: 'EvidenceHistory',\n          initEvidenceTalk: function(Evidence, EvidenceRevisions, EvidenceHistory, $stateParams, $cacheFactory, $q) {\n            var evidenceId = $stateParams.evidenceId;\n            return $q.all([\n              Evidence.initComments(evidenceId),\n              EvidenceRevisions.initRevisions(evidenceId),\n              EvidenceHistory.initBase(evidenceId)\n            ]);\n          }\n        },\n        deepStateRedirect: [ 'evidenceId' ],\n        data: {\n          titleExp: '\"Evidence \" + evidence.name + \" Talk\"',\n          navMode: 'sub'\n        }\n      })\n      .state('events.genes.summary.variants.summary.evidence.talk.log', {\n        url: '/log',\n        template: '<evidence-talk-log></evidence-talk-log>',\n        data: {\n          titleExp: '\"Evidence \" + evidence.name + \" Log\"',\n          navMode: 'sub'\n        }\n      })\n      .state('events.genes.summary.variants.summary.evidence.talk.comments', {\n        url: '/comments',\n        template: '<evidence-talk-comments></evidence-talk-comments>',\n        data: {\n          titleExp: '\"Evidence \" + evidence.name + \" Comments\"',\n          navMode: 'sub'\n        }\n      });\n  }\n\n  // @ngInject\n  function EvidenceTalkViewOptions($state, $stateParams, Evidence) {\n    var baseUrl = '';\n    var baseState = '';\n    var tabData = [];\n    var styles = {};\n\n    var evidence = Evidence.data.item;\n\n    function init() {\n      baseState = 'events.genes.summary.variants.summary.evidence.talk';\n      baseUrl = $state.href(baseUrl, $stateParams);\n\n      angular.copy([\n        {\n          heading: evidence.name + ' Revisions',\n          route: baseState + '.revisions.list',\n          params: { evidenceId: evidence.id }\n        },\n        {\n          heading: evidence.name  + ' Comments',\n          route: baseState + '.comments',\n          params: { evidenceId: evidence.id }\n        },\n        {\n          heading: evidence.name + ' Log',\n          route: baseState + '.log',\n          params: { evidenceId: evidence.id }\n        }\n      ], tabData);\n\n      angular.copy({\n        view: {\n          summaryBackgroundColor: 'pageBackground',\n          talkBackgroundColor: 'pageBackground'\n        },\n        tabs: {\n          tabRowBackground: 'pageBackground2Gradient'\n        }\n      }, styles);\n    }\n\n    return {\n      init: init,\n      state: {\n        baseParams: $stateParams,\n        baseState: baseState,\n        baseUrl: baseUrl\n      },\n      tabData: tabData,\n      styles: styles\n    };\n  }\n\n  // @ngInject\n  function EvidenceTalkController(Evidence, EvidenceRevisions, EvidenceTalkViewOptions) {\n    console.log('EvidenceTalkController called.');\n    EvidenceTalkViewOptions.init();\n    this.EvidenceTalkViewModel = Evidence; // we're re-using the Evidence model here but could in the future have a EvidenceTalk model if warranted\n    this.EvidenceRevisionsModel = EvidenceRevisions;\n    this.EvidenceTalkViewOptions = EvidenceTalkViewOptions;\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.evidence')\n    .controller('EvidenceTalkLogController', EvidenceTalkLogController)\n    .directive('evidenceTalkLog', evidenceTalkLogDirective);\n\n  // @ngInject\n  function evidenceTalkLogDirective() {\n    return {\n      restrict: 'E',\n      scope: {},\n      controller: 'EvidenceTalkLogController',\n      templateUrl: 'app/views/events/evidence/talk/evidenceTalkLog.tpl.html'\n    };\n  }\n\n  // @ngInject\n  function EvidenceTalkLogController($scope,\n                                     Evidence,\n                                     EvidenceRevisions,\n                                     EvidenceHistory,\n                                     _) {\n    var ctrl = $scope.ctrl = {}; // create ctrl here, link function will attach entityTalkView after DOM rendered.\n    var comments, revisions, history;\n    $scope.comments = Evidence.data.comments;\n    $scope.revisions = EvidenceRevisions.data.collection;\n    $scope.history = EvidenceHistory.data.collection;\n    $scope.$watchCollection('[comments, revisions, history]', function(collections) {\n      comments = _.merge({}, collections[0]);\n      revisions = _.merge({}, collections[1]);\n      history = _.merge({}, collections[2]);\n\n      comments = _.map(comments, function(comment) {\n        comment.type = 'comment';\n        return comment;\n      });\n\n      revisions = _.map(revisions, function(revision) {\n        revision.type = 'revision';\n        return revision;\n      });\n\n      history = _.map(history, function(change) {\n        change.type='history';\n        return change;\n      });\n\n\n      // concatenate event arrays, sort by date descending\n      ctrl.logItems = comments.concat(revisions, history);\n      ctrl.logItems = _.chain(ctrl.logItems)\n        .map(function(item) {\n          // revisions can have an .user attribute that's just a string\n          item.username = typeof item.user === 'object' ? item.user.username : item.user;\n          // some items have both created_at and updated_at, we'll favor updated_at\n          item.timestamp = _.has(item, 'updated_at') ? item.updated_at : item.created_at;\n          return item;\n        })\n        .sortBy(function(item) {\n          return new Date(item.timestamp);\n        })\n        .reverse()\n        .value();\n    });\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.evidence')\n    .controller('EvidenceTalkCommentsController', EvidenceTalkCommentsController)\n    .directive('evidenceTalkComments', evidenceTalkCommentsDirective);\n\n  // @ngInject\n  function evidenceTalkCommentsDirective() {\n    return {\n      restrict: 'E',\n      scope: {},\n      controller: 'EvidenceTalkCommentsController',\n      templateUrl: 'app/views/events/evidence/talk/evidenceTalkComments.tpl.html'\n    };\n  }\n\n\n  // @ngInject\n  function EvidenceTalkCommentsController($scope, Evidence) {\n    var ctrl = $scope.ctrl = {};\n\n    ctrl.evidenceTalkModel = Evidence;\n\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.evidence')\n    .config(evidenceTalkRevisionsConfig)\n    .factory('EvidenceTalkRevisionsViewOptions', EvidenceTalkRevisionsViewOptions)\n    .controller('EvidenceTalkRevisionsController', EvidenceTalkRevisionsController);\n\n  // @ngInject\n  function evidenceTalkRevisionsConfig($stateProvider) {\n    $stateProvider\n      .state('events.genes.summary.variants.summary.evidence.talk.revisions', {\n        abstract: true,\n        url: '/revisions',\n        templateUrl: 'app/views/events/evidence/talk/revisions/EvidenceTalkRevisionsView.tpl.html',\n        controller: 'EvidenceTalkRevisionsController',\n        controllerAs: 'vm',\n        resolve: {\n          EvidenceRevisions: 'EvidenceRevisions',\n          EvidenceHistory: 'EvidenceHistory',\n          initEvidenceTalkRevisions: function(Evidence, EvidenceRevisions, EvidenceHistory, $stateParams, $q) {\n            var evidenceId = $stateParams.evidenceId;\n            return $q.all([\n              EvidenceRevisions.initRevisions(evidenceId),\n              EvidenceHistory.initBase(evidenceId)\n            ]);\n          }\n        },\n        deepStateRedirect: [ 'evidenceId', 'revisionId' ],\n        data: {\n          titleExp: '\"Evidence \" + evidence.name + \" Talk\"',\n          navMode: 'sub'\n        }\n      })\n      .state('events.genes.summary.variants.summary.evidence.talk.revisions.list', {\n        url: '/list/:revisionId',\n        template: '<evidence-talk-revisions></evidence-talk-revisions>',\n        resolve: {\n          initRevisionList: function(Evidence, EvidenceRevisions, EvidenceHistory, $stateParams) {\n            return EvidenceRevisions.query($stateParams.evidenceId);\n          }\n        },\n        data: {\n          titleExp: '\"Evidence \" + evidence.name + \" Revisions\"',\n          navMode: 'sub'\n        }\n      })\n      .state('events.genes.summary.variants.summary.evidence.talk.revisions.list.summary', {\n        url: '/summary',\n        template: '<evidence-talk-revision-summary></evidence-talk-revision-summary>',\n        resolve: {\n          initRevision: function(EvidenceRevisions, $stateParams, $q) {\n            return $q.all([\n              EvidenceRevisions.get($stateParams.evidenceId, $stateParams.revisionId),\n              EvidenceRevisions.queryComments($stateParams.evidenceId, $stateParams.revisionId)\n            ]);\n          }\n        },\n        data: {\n          titleExp: '\"Evidence \" + evidence.name + \" Revision Summary\"',\n          navMode: 'sub'\n        }\n      });\n  }\n\n  // @ngInject\n  function EvidenceTalkRevisionsViewOptions($state, $stateParams) {\n    var baseUrl = '';\n    var baseState = '';\n    var styles = {};\n\n    function init() {\n      baseState = 'events.genes.summary.variants.summary.evidence.talk.revisions';\n      baseUrl = $state.href(baseUrl, $stateParams);\n\n      angular.copy({\n        view: {\n          summaryBackgroundColor: 'pageBackground',\n          talkBackgroundColor: 'pageBackground'\n        },\n        tabs: {\n          tabRowBackground: 'pageBackground2Gradient'\n        }\n      }, styles);\n    }\n\n    return {\n      init: init,\n      state: {\n        baseParams: $stateParams,\n        baseState: baseState,\n        baseUrl: baseUrl\n      },\n      styles: styles\n    };\n  }\n\n  // @ngInject\n  function EvidenceTalkRevisionsController(Evidence, EvidenceRevisions, EvidenceTalkRevisionsViewOptions) {\n    console.log('EvidenceTalkRevisionsController called.');\n    EvidenceTalkRevisionsViewOptions.init();\n    this.EvidenceRevisionsModel = EvidenceRevisions;\n    this.EvidenceTalkRevisionsViewOptions = EvidenceTalkRevisionsViewOptions;\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.evidence')\n    .controller('EvidenceTalkRevisionsController', EvidenceTalkRevisionsController)\n    .directive('evidenceTalkRevisions', EvidenceTalkRevisionsDirective);\n\n  // @ngInject\n  function EvidenceTalkRevisionsDirective() {\n    return {\n      restrict: 'E',\n      scope: {},\n      controller: 'EvidenceTalkRevisionsController',\n      templateUrl: 'app/views/events/evidence/talk/revisions/evidenceTalkRevisions.tpl.html'\n    };\n  }\n\n  // @ngInject\n  function EvidenceTalkRevisionsController($scope, EvidenceRevisions, EvidenceTalkViewOptions) {\n    $scope.evidenceRevisions = EvidenceRevisions;\n    $scope.viewOptions = EvidenceTalkViewOptions;\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.evidence')\n    .directive('evidenceTalkRevisionSummary', evidenceTalkRevisionSummary)\n    .controller('EvidenceTalkRevisionSummaryController', EvidenceTalkRevisionSummaryController);\n\n  // @ngInject\n  function evidenceTalkRevisionSummary() {\n    var directive = {\n      restrict: 'E',\n      replace: true,\n      templateUrl: 'app/views/events/evidence/talk/revisions/evidenceTalkRevisionSummary.tpl.html',\n      controller: 'EvidenceTalkRevisionSummaryController'\n    };\n    return directive;\n  }\n\n  // @ngInject\n  function EvidenceTalkRevisionSummaryController($scope,\n                                                 $stateParams,\n                                                 EvidenceRevisions,\n                                                 Security,\n                                                 formConfig) {\n    var vm = $scope.vm = {};\n    vm.isEditor = Security.isEditor;\n    vm.isAuthenticated = Security.isAuthenticated;\n    vm.evidenceTalkModel = EvidenceRevisions;\n\n    vm.formErrors = {};\n    vm.formMessages = {};\n    vm.errorMessages = formConfig.errorMessages;\n    vm.errorPrompts = formConfig.errorPrompts;\n\n    $scope.acceptRevision = function() {\n      vm.formErrors = {};\n      vm.formMessages = {};\n      EvidenceRevisions.acceptRevision($stateParams.evidenceId, $stateParams.revisionId,$stateParams.variantId)\n        .then(function() {\n          vm.formMessages.acceptSuccess = true;\n        })\n        .catch(function(error) {\n          console.error('revision accept error!');\n          vm.formErrors[error.status] = true;\n        })\n        .finally(function (){\n          console.log('accept revision successful.');\n        });\n    };\n\n    $scope.rejectRevision = function() {\n      vm.formErrors = {};\n      vm.formMessages = {};\n      EvidenceRevisions.rejectRevision($stateParams.evidenceId, $stateParams.revisionId)\n        .then(function() {\n          vm.formMessages.rejectSuccess = true;\n        })\n        .catch(function(error) {\n          console.error('revision reject error!');\n          vm.formErrors[error.status] = true;\n        })\n        .finally(function (){\n          console.log('reject revision successful.');\n        });\n    };\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.variantGroups')\n    .config(VariantGroupsConfig)\n    .factory('VariantGroupsViewOptions', VariantGroupsViewOptions)\n    .controller('VariantGroupsController', VariantGroupsController);\n\n  // @ngInject\n  function VariantGroupsConfig($stateProvider) {\n    $stateProvider\n      .state('events.genes.summary.variantGroups', {\n        abstract: true,\n        url: '/variantGroups/:variantGroupId',\n        templateUrl: 'app/views/events/variantGroups/variantGroupsView.tpl.html',\n        resolve: /* @ngInject */ {\n          VariantGroups: 'VariantGroups',\n          initVariantGroups: function(VariantGroups, $stateParams) {\n            return VariantGroups.initBase($stateParams.variantGroupId);\n          }\n        },\n        controller: 'VariantGroupsController',\n        controllerAs: 'vm',\n        deepStateRedirect: [ 'variantGroupId' ],\n        onExit: /* @ngInject */ function($deepStateRedirect) {\n          $deepStateRedirect.reset();\n        }\n      })\n      .state('events.genes.summary.variantGroups.summary', {\n        url: '/summary',\n        template: '<variant-group-summary show-variant-grid=\"true\"></variant-group-summary>',\n        resolve: {\n          VariantGroups: 'VariantGroups',\n          refreshVariantGroups: function(VariantGroups, $stateParams) {\n            return VariantGroups.get($stateParams.variantGroupId);\n          }\n        },\n        deepStateRedirect: [ 'variantGroupId' ],\n        data: {\n          titleExp: '\"VariantGroups \" + variantGroup.name + \" Summary\"',\n          navMode: 'sub'\n        }\n      });\n  }\n\n  // @ngInject\n  function VariantGroupsViewOptions($state, $stateParams, VariantGroups) {\n    var tabData = [];\n    var state = {\n      baseParams: {},\n      baseState: '',\n      baseUrl: ''\n    };\n    var styles = {};\n\n    function init() {\n      angular.copy($stateParams, this.state.baseParams);\n      this.state.baseState = 'events.genes.summary.variantGroups';\n      this.state.baseUrl = $state.href(this.state.baseState, $stateParams);\n\n      angular.copy([\n        {\n          heading: 'Variant Group Summary',\n          route: 'events.genes.summary.variantGroups.summary',\n          params: { variantGroupId: VariantGroups.data.item.id }\n        },\n        {\n          heading: 'Variant Group Talk',\n          route: 'events.genes.summary.variantGroups.talk.revisions.list',\n          params: { variantGroupId: VariantGroups.data.item.id }\n        }\n      ], this.tabData);\n\n      angular.copy({\n        view: {\n          backgroundColor: 'pageBackground'\n        },\n        summary: {\n          backgroundColor: 'pageBackground2'\n        },\n        myVariantGroupsInfo: {\n          backgroundColor: 'pageBackground2'\n        },\n        variantMenu: {\n          backgroundColor: 'pageBackground2'\n        },\n        edit: {\n          summaryBackgroundColor: 'pageBackground2'\n        }\n      }, this.styles);\n    }\n\n    return {\n      init: init,\n      state: state,\n      tabData: tabData,\n      styles: styles\n    };\n  }\n\n  // @ngInject\n  function VariantGroupsController(VariantGroups, VariantGroupRevisions, VariantGroupsViewOptions) {\n    VariantGroupsViewOptions.init();\n    // these will be passed to the entity-view directive controller, to be required by child entity component so that they\n    // can get references to the view model and view options\n    this.VariantGroupsViewModel = VariantGroups;\n    this.VariantGroupsViewRevisions = VariantGroupRevisions;\n    this.VariantGroupsViewOptions = VariantGroupsViewOptions;\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.variantGroups')\n    .controller('VariantGroupSummaryController', VariantGroupSummaryController)\n    .directive('variantGroupSummary', function() {\n      return {\n        restrict: 'E',\n        scope: {\n          showVariantGrid: '='\n        },\n        controller: 'VariantGroupSummaryController',\n        templateUrl: 'app/views/events/variantGroups/summary/variantGroupSummary.tpl.html'\n      };\n    });\n\n  function VariantGroupSummaryController($scope,\n                                         $state,\n                                         $stateParams,\n                                         Security,\n                                         VariantGroups,\n                                         VariantGroupsViewOptions) {\n    $scope.isAuthenticated = Security.isAuthenticated;\n    $scope.isEdit = $state.includes('**.edit.**');\n\n    $scope.stateParams = $stateParams;\n    $scope.variantGroup = VariantGroups.data.item;\n    $scope.variants = VariantGroups.data.variants;\n    $scope.VariantGroupsViewOptions = VariantGroupsViewOptions;\n    $scope.backgroundColor = VariantGroupsViewOptions.styles.view.backgroundColor;\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events')\n    .directive('variantGrid', variantGrid)\n    .controller('VariantGridController', VariantGridController);\n\n  // @ngInject\n  function variantGrid() {\n    var directive = {\n      restrict: 'E',\n      replace: true,\n      scope: {\n        variants: '=',\n        rows: '=',\n        context: '=',\n        variantGroup: '='\n      },\n      templateUrl: 'app/views/events/variantGroups/summary/variantGrid.tpl.html',\n      controller: 'VariantGridController'\n    };\n    return directive;\n  }\n\n  // @ngInject\n  function VariantGridController($scope, $stateParams, $state, uiGridConstants, _) {\n    /*jshint camelcase: false */\n    var ctrl = $scope.ctrl = {};\n\n    ctrl.rowsToShow = $scope.rows === undefined ? 5 : $scope.rows;\n    ctrl.variantGridOptions = {\n      minRowsToShow: ctrl.rowsToShow - 1,\n      //enablePaginationControls: true,\n      //paginationPageSizes: [8],\n      //paginationPageSize: 8,\n      enablePaging: false,\n\n      enableHorizontalScrollbar: uiGridConstants.scrollbars.NEVER,\n      enableVerticalScrollbar: uiGridConstants.scrollbars.NEVER,\n      enableFiltering: true,\n      enableColumnMenus: false,\n      enableSorting: true,\n      enableRowSelection: true,\n      enableRowHeaderSelection: false,\n      multiSelect: false,\n      modifierKeysToMultiSelect: false,\n      noUnselect: true,\n      columnDefs: [\n        //{ name: 'id',\n        //  displayName: 'ID',\n        //  enableFiltering: false,\n        //  allowCellFocus: false,\n        //  width: '5%'\n        //},\n        { name: 'entrez_name',\n          displayName: 'Gene',\n          type: 'string',\n          enableFiltering: false,\n          allowCellFocus: false,\n          width: '9%'\n        },\n        { name: 'name',\n          displayName: 'Variant Name',\n          enableFiltering: true,\n          allowCellFocus: false,\n          type: 'string',\n          width: '20%',\n          filter: {\n            condition: uiGridConstants.filter.CONTAINS\n          }\n        },\n        { name: 'variant_group_list',\n          displayName: 'Variant Group(s)',\n          enableFiltering: true,\n          allowCellFocus: false,\n          type: 'string',\n          width: '20%',\n          filter: {\n            condition: uiGridConstants.filter.CONTAINS\n          }\n        },\n        {\n          name: 'description',\n          displayName: 'Description',\n          type: 'string',\n          allowCellFocus: false,\n          enableFiltering: true,\n          filter: {\n            condition: uiGridConstants.filter.CONTAINS\n          },\n          cellTemplate: 'app/views/events/variantGroups/summary/variantGridDescriptionCell.tpl.html'\n        }\n      ]\n    };\n\n    ctrl.variantGridOptions.onRegisterApi = function(gridApi){\n      var variants = $scope.variants;\n      ctrl.gridApi = gridApi;\n\n      ctrl.context = $scope.context;\n      ctrl.variantGroup = $scope.variantGroup;\n      ctrl.variantGridOptions.data = prepVariantGroups(variants);\n\n      $scope.$watchCollection('variants', function(variants) {\n        ctrl.variantGridOptions.minRowsToShow = variants.length + 1;\n        ctrl.variantGridOptions.data = prepVariantGroups(variants);\n      });\n\n      gridApi.selection.on.rowSelectionChanged($scope, function(row){\n        var params = _.merge($stateParams, { variantId: row.entity.id, geneId: row.entity.gene_id });\n        $state.go('events.genes.summary.variants.summary', params);\n      });\n\n      function prepVariantGroups(variants) {\n        return _.map(variants, function(item){\n          if (_.isArray(item.variant_groups) && item.variant_groups.length > 0) {\n            item.variant_group_list = _.chain(item.variant_groups).pluck('name').value().join(', ');\n            return item;\n          } else {\n            item.variant_group_list = 'N/A';\n            return item;\n          }\n        });\n      }\n    };\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.variantGroups')\n    .config(variantGroupEditConfig)\n    .factory('VariantGroupEditViewOptions', VariantGroupEditViewOptions)\n    .controller('VariantGroupEditController', VariantGroupEditController);\n\n  // @ngInject\n  function variantGroupEditConfig($stateProvider) {\n    $stateProvider\n      .state('events.genes.summary.variantGroups.edit', {\n        abstract: true,\n        url: '/edit',\n        templateUrl: 'app/views/events/variantGroups/edit/VariantGroupEditView.tpl.html',\n        controller: 'VariantGroupEditController',\n        controllerAs: 'vm',\n        resolve: {\n          VariantGroupRevisions: 'VariantGroupRevisions',\n          initVariantGroupEdit: function(VariantGroups, VariantGroupRevisions, VariantGroupHistory, $stateParams, $q) {\n            var variantGroupId = $stateParams.variantGroupId;\n            return $q.all([\n              VariantGroupRevisions.initRevisions(variantGroupId),\n              VariantGroupRevisions.getPendingFields(variantGroupId),\n              VariantGroupHistory.initBase(variantGroupId)\n            ]);\n          }\n        },\n        deepStateRedirect: [ 'variantGroupId' ],\n        data: {\n          titleExp: '\"VariantGroup \" + variant.name + \" Edit\"',\n          navMode: 'sub'\n        }\n      })\n      .state('events.genes.summary.variantGroups.edit.basic', {\n        url: '/basic',\n        template: '<variant-group-edit-basic></variant-group-edit-basic>',\n        data: {\n          titleExp: '\"VariantGroup Group \" + variant.name + \" Edit\"',\n          navMode: 'sub'\n        }\n      });\n  }\n\n  // @ngInject\n  function VariantGroupEditViewOptions($state, $stateParams) {\n    var baseUrl = '';\n    var baseState = '';\n    var styles = {};\n\n    function init() {\n      this.state.baseState = 'events.genes.summary.variantGroups.edit';\n      this.state.baseUrl = $state.href(this.state.baseUrl, $stateParams);\n\n      angular.copy({\n        view: {\n          summaryBackgroundColor: 'pageBackground',\n          editBackgroundColor: 'pageBackground',\n          talkBackgroundColor: 'pageBackground'\n        },\n        tabs: {\n          tabRowBackground: 'pageBackground2Gradient'\n        }\n      }, styles);\n    }\n\n    return {\n      init: init,\n      state: {\n        baseParams: $stateParams,\n        baseState: baseState,\n        baseUrl: baseUrl\n      },\n      styles: styles\n    };\n  }\n\n  // @ngInject\n  function VariantGroupEditController(VariantGroups, VariantGroupRevisions, VariantGroupEditViewOptions) {\n    console.log('VariantGroupEditController called.');\n    VariantGroupEditViewOptions.init();\n    this.VariantGroupEditViewModel = VariantGroups;\n    this.VariantGroupRevisionsModel = VariantGroupRevisions;\n    this.VariantGroupEditViewOptions = VariantGroupEditViewOptions;\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.variants')\n    .directive('variantGroupEditBasic', variantGroupEditBasicDirective)\n    .controller('VariantGroupEditBasicController', VariantGroupEditBasicController);\n\n  // @ngInject\n  function variantGroupEditBasicDirective() {\n    return {\n      restrict: 'E',\n      scope: {},\n      controller: 'VariantGroupEditBasicController',\n      templateUrl: 'app/views/events/variantGroups/edit/variantGroupEditBasic.tpl.html'\n    };\n  }\n\n  // @ngInject\n  function VariantGroupEditBasicController($scope,\n                                           $stateParams,\n                                           $state,\n                                           Security,\n                                           Datatables,\n                                           VariantGroupRevisions,\n                                           VariantGroups,\n                                           VariantGroupHistory,\n                                           VariantGroupsViewOptions,\n                                           TypeAheadResults,\n                                           formConfig,\n                                           _) {\n    var variantGroupModel, vm;\n\n    vm = $scope.vm = {};\n    variantGroupModel = vm.variantGroupModel = VariantGroups;\n\n    vm.isEditor = Security.isEditor();\n    vm.isAuthenticated = Security.isAuthenticated();\n\n    vm.variantGroup = VariantGroups.data.item;\n    vm.pendingFields = _.keys(VariantGroupRevisions.data.pendingFields).length > 0;\n    vm.pendingFieldsList = _.map(_.keys(VariantGroupRevisions.data.pendingFields), function(field) {\n      return field.charAt(0).toUpperCase() + field.slice(1);\n    });\n\n    vm.variantGroupRevisions = VariantGroupRevisions;\n    vm.variantGroupHistory = VariantGroupHistory;\n    vm.variantGroupEdit = angular.copy(vm.variantGroup);\n    vm.variantGroupEdit.comment = { title: 'VARIANT GROUP ' + vm.variantGroup.name + ' Revision Description', text:'' };\n    vm.variantGroupEdit.variantsEdit = _.map(vm.variantGroupEdit.variants, function(variant) {\n      return { name: variant.entrez_name + ' - ' + variant.name, id: variant.id };\n    });\n\n    vm.styles = VariantGroupsViewOptions.styles;\n\n    vm.user = {};\n\n    vm.formErrors = {};\n    vm.formMessages = {};\n    vm.errorMessages = formConfig.errorMessages;\n    vm.errorPrompts = formConfig.errorPrompts;\n    vm.serverMsg = '';\n\n    vm.newRevisionId = Number();\n    vm.stateParams = $stateParams;\n    vm.showForm = true;\n    vm.showSuccessMessage = false;\n    vm.showInstructions = true;\n\n    vm.variantGroupFields = [\n      {\n        key: 'name',\n        type: 'horizontalInputHelp',\n        templateOptions: {\n          label: 'Name',\n          disabled: false,\n          value: vm.variantGroup.name\n        }\n      },\n      {\n        key: 'description',\n        type: 'horizontalTextareaHelp',\n        templateOptions: {\n          rows: 8,\n          label: 'Summary',\n          value: 'vm.variantGroup.description',\n          focus: true,\n          minLength: 32\n        }\n      },\n      {\n        key: 'variantsEdit',\n        type: 'multiInput',\n        templateOptions: {\n          label: 'Variants',\n          entityName: 'Variant',\n          helpText: 'Click the X button to delete a variant, click the + button to add a variant. Note that variants must be known to CIViC to be available for including here. New variants may be added as part of an evidence item using the <a href=\"/#/add/evidence/basic\">Add Evidence form</a>.',\n          inputOptions: {\n            type: 'typeahead',\n            wrapper: null,\n            templateOptions: {\n              formatter: 'model[options.key].name',\n              typeahead: 'item as item.name for item in options.data.typeaheadSearch($viewValue)'\n            },\n            data: {\n              typeaheadSearch: function(val) {\n                var request = {\n                  query: val,\n                  count: 10\n                };\n                return TypeAheadResults.variants(request).$promise\n                  .then(function(response) {\n                    return _.map(response.records, function(event) {\n                      return { name: event.gene_name + ' - ' + event.name, id: event.id };\n                    });\n                  });\n              }\n            }\n          }\n        }\n      },\n      {\n        template: '<hr/>'\n      },\n      {\n        key: 'text',\n        type: 'horizontalCommentHelp',\n        ngModelElAttrs: {\n          'msd-elastic': 'true',\n          'mentio': '',\n          'mentio-id': '\"commentForm\"'\n        },\n        model: vm.variantGroupEdit.comment,\n        templateOptions: {\n          rows: 5,\n          minimum_length: 3,\n          required: false,\n          label: 'Revision Description',\n          value: 'text',\n          helpText: 'Please provide a brief description and support, if necessary, for your suggested revision. It will appear as the first comment in this revision\\'s comment thread.'\n        },\n        validators: {\n          length: {\n            expression: function(viewValue, modelValue, scope) {\n              var value = viewValue || modelValue;\n              return value.length >= scope.to.minimum_length;\n            },\n            message: '\"Comment must be at least \" + to.minimum_length + \" characters long to submit.\"'\n          }\n        }\n      }\n    ];\n\n    vm.submit = function(variantGroupEdit) {\n      variantGroupEdit.variantGroupId = variantGroupEdit.id;\n      vm.formErrors = {};\n      vm.formMessages = {};\n      // prep variant edit obj for submission to server\n      variantGroupEdit.variants = _.pluck(variantGroupEdit.variantsEdit, 'id');\n\n      VariantGroupRevisions.submitRevision(variantGroupEdit)\n        .then(function(response) {\n          console.log('revision submit success!');\n          vm.newRevisionId = response.id;\n          vm.formMessages.submitSuccess = true;\n          vm.showForm = false;\n          vm.showSuccessMessage = true;\n          vm.showInstructions = false;\n          vm.pendingFields = false;\n        })\n        .catch(function(error) {\n          console.error('revision submit error!');\n          vm.formErrors[error.status] = true;\n          vm.serverMsg = error.data.error;\n        })\n        .finally(function(){\n          console.log('revision submit done!');\n        });\n    };\n\n    vm.apply = function(variantGroupEdit) {\n      variantGroupEdit.variantGroupId = variantGroupEdit.id;\n      vm.formErrors = {};\n      vm.formMessages = {};\n      VariantGroups.apply(variantGroupEdit)\n        .then(function() {\n          console.log('revision apply success!');\n          vm.formMessages.applySuccess = true;\n          // options.resetModel();\n        })\n        .catch(function(response) {\n          console.error('revision application error!');\n          vm.formErrors[response.status] = true;\n        })\n        .finally(function(){\n          console.log('revision apply done!');\n        });\n    };\n\n    vm.revisionsClick = function() {\n      $state.go('events.genes.summary.variantGroups.talk.revisions.list', { variantGroupId: VariantGroups.data.item.id });\n    }\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.variantGroups')\n    .config(variantTalkConfig)\n    .factory('VariantGroupsTalkViewOptions', VariantGroupsTalkViewOptions)\n    .controller('VariantGroupsTalkController', VariantGroupsTalkController);\n\n  // @ngInject\n  function variantTalkConfig($stateProvider) {\n    $stateProvider\n      .state('events.genes.summary.variantGroups.talk', {\n        abstract: true,\n        url: '/talk',\n        templateUrl: 'app/views/events/variantGroups/talk/VariantGroupTalkView.tpl.html',\n        controller: 'VariantGroupsTalkController',\n        controllerAs: 'vm',\n        resolve: {\n          VariantGroupRevisions: 'VariantGroupRevisions',\n          VariantGroupHistory: 'VariantGroupHistory',\n          initVariantGroupTalk: function(VariantGroups, VariantGroupRevisions, VariantGroupHistory, $stateParams, $cacheFactory, $q) {\n            var variantGroupId = $stateParams.variantGroupId;\n            return $q.all([\n              VariantGroups.initComments(variantGroupId),\n              VariantGroupRevisions.initRevisions(variantGroupId),\n              VariantGroupHistory.initBase(variantGroupId)\n            ]);\n          }\n        },\n        deepStateRedirect: [ 'variantGroupId' ],\n        data: {\n          titleExp: '\"Variant Group \" + variantGroup.name + \" Talk\"',\n          navMode: 'sub'\n        }\n      })\n      .state('events.genes.summary.variantGroups.talk.log', {\n        url: '/log',\n        template: '<variant-group-talk-log></variant-group-talk-log>',\n        data: {\n          titleExp: '\"Variant Group \" + variantGroup.name + \" Log\"',\n          navMode: 'sub'\n        }\n      })\n      .state('events.genes.summary.variantGroups.talk.comments', {\n        url: '/comments',\n        template: '<variant-group-talk-comments></variant-group-talk-comments>',\n        data: {\n          titleExp: '\"Variant Group \" + variantGroup.name + \" Comments\"',\n          navMode: 'sub'\n        }\n      });\n  }\n\n  // @ngInject\n  function VariantGroupsTalkViewOptions($state, $stateParams, VariantGroups) {\n    var baseUrl = '';\n    var baseState = '';\n    var tabData = [];\n    var styles = {};\n\n    var variantGroup = VariantGroups.data.item;\n\n    function init() {\n      this.state.baseState = 'events.genes.summary.variantGroups.talk';\n      this.state.baseUrl = $state.href(this.state.baseState, $stateParams);\n\n      angular.copy([\n        {\n          heading: variantGroup.name + ' Revisions',\n          route: this.state.baseState + '.revisions.list',\n          params: $stateParams\n        },\n        {\n          heading: variantGroup.name  + ' Comments',\n          route: this.state.baseState + '.comments',\n          params: $stateParams\n        },\n        {\n          heading: variantGroup.name + ' Log',\n          route: this.state.baseState + '.log',\n          params: $stateParams\n        }\n      ], tabData);\n\n      angular.copy({\n        view: {\n          summaryBackgroundColor: 'pageBackground',\n          talkBackgroundColor: 'pageBackground'\n        },\n        tabs: {\n          tabRowBackground: 'pageBackgroundGradient'\n        }\n      }, styles);\n    }\n\n    return {\n      init: init,\n      state: {\n        baseParams: $stateParams,\n        baseState: baseState,\n        baseUrl: baseUrl\n      },\n      tabData: tabData,\n      styles: styles\n    };\n  }\n\n  // @ngInject\n  function VariantGroupsTalkController(VariantGroups, VariantGroupRevisions, VariantGroupsTalkViewOptions) {\n    console.log('VariantGroupsTalkController called.');\n    VariantGroupsTalkViewOptions.init();\n    this.VariantGroupsTalkViewModel = VariantGroups; // we're re-using the VariantGroups model here but could in the future have a VariantGroupsTalk model if warranted\n    this.VariantGroupRevisionsModel = VariantGroupRevisions;\n    this.VariantGroupsTalkViewOptions = VariantGroupsTalkViewOptions;\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.variantGroups')\n    .controller('VariantGroupTalkLogController', VariantGroupTalkLogController)\n    .directive('variantGroupTalkLog', variantGroupTalkLogDirective);\n\n  // @ngInject\n  function variantGroupTalkLogDirective() {\n    return {\n      restrict: 'E',\n      scope: {},\n      controller: 'VariantGroupTalkLogController',\n      templateUrl: 'app/views/events/variantGroups/talk/variantGroupTalkLog.tpl.html'\n    };\n  }\n\n  // @ngInject\n  function VariantGroupTalkLogController($scope, _,\n                                    VariantGroups,\n                                    VariantGroupRevisions,\n                                    VariantGroupHistory) {\n\n    var ctrl = $scope.ctrl = {}; // create ctrl here, link function will attach entityTalkView after DOM rendered.\n    var comments, revisions, history;\n\n    $scope.comments = VariantGroups.data.comments;\n    $scope.revisions = VariantGroupRevisions.data.collection;\n    $scope.history = VariantGroupHistory.data.collection;\n\n    $scope.$watchCollection('[comments, revisions, history]', function(collections) {\n      comments = _.merge({}, collections[0]);\n      revisions = _.merge({}, collections[1]);\n      history = _.merge({}, collections[2]);\n\n      comments = _.map(comments, function(comment) {\n        comment.type = 'comment';\n        return comment;\n      });\n\n      revisions = _.map(revisions, function(revision) {\n        revision.type = 'revision';\n        return revision;\n      });\n\n      history = _.map(history, function(change) {\n        change.type='history';\n        return change;\n      });\n\n\n      // concatenate event arrays, sort by date descending\n      ctrl.logItems = comments.concat(revisions, history);\n      ctrl.logItems = _.chain(ctrl.logItems)\n        .map(function(item) {\n          // revisions can have an .user attribute that's just a string\n          item.username = typeof item.user === 'object' ? item.user.username : item.user;\n          // some items have both created_at and updated_at, we'll favor updated_at\n          item.timestamp = _.has(item, 'updated_at') ? item.updated_at : item.created_at;\n          return item;\n        })\n        .sortBy(function(item) {\n          return new Date(item.timestamp);\n        })\n        .reverse()\n        .value();\n    });\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.variantGroups')\n    .controller('VariantGroupTalkCommentsController', VariantGroupTalkCommentsController)\n    .directive('variantGroupTalkComments', VariantGroupTalkCommentsDirective);\n\n  // @ngInject\n  function VariantGroupTalkCommentsDirective() {\n    return {\n      restrict: 'E',\n      scope: {},\n      controller: 'VariantGroupTalkCommentsController',\n      templateUrl: 'app/views/events/variantGroups/talk/variantGroupTalkComments.tpl.html'\n    };\n  }\n\n  // @ngInject\n  function VariantGroupTalkCommentsController($scope, VariantGroups) {\n    var ctrl = $scope.ctrl = {};\n\n    ctrl.variantGroupTalkModel = VariantGroups;\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.variantGroups')\n    .config(variantGroupTalkRevisionsConfig)\n    .factory('VariantTalkRevisionsViewOptions', VariantTalkRevisionsViewOptions)\n    .controller('VariantGroupTalkRevisionsController', VariantTalkRevisionsController);\n\n  // @ngInject\n  function variantGroupTalkRevisionsConfig($stateProvider) {\n    $stateProvider\n      .state('events.genes.summary.variantGroups.talk.revisions', {\n        abstract: true,\n        url: '/revisions',\n        templateUrl: 'app/views/events/variantGroups/talk/revisions/VariantGroupTalkRevisionsView.tpl.html',\n        controller: 'VariantGroupTalkRevisionsController',\n        controllerAs: 'vm',\n        resolve: {\n          VariantRevisions: 'VariantRevisions',\n          VariantHistory: 'VariantHistory',\n          initVariantGroupTalkRevisions: function(VariantGroups, VariantGroupRevisions, VariantGroupHistory, $stateParams, $q) {\n            var variantGroupId = $stateParams.variantGroupId;\n            return $q.all([\n              VariantGroups.initComments(variantGroupId),\n              VariantGroupRevisions.initRevisions(variantGroupId),\n              VariantGroupHistory.initBase(variantGroupId)\n            ]);\n          }\n        },\n        deepStateRedirect: [ 'variantGroupId', 'revisionId' ],\n        data: {\n          titleExp: '\"Variant Group \" + variantGroup.name + \" Talk\"',\n          navMode: 'sub'\n        }\n      })\n      .state('events.genes.summary.variantGroups.talk.revisions.list', {\n        url: '/list/:revisionId',\n        template: '<variant-group-talk-revisions></variant-group-talk-revisions>',\n        resolve: {\n          initRevisionList: function(VariantGroups, VariantGroupRevisions, VariantGroupHistory, $stateParams) {\n            return VariantGroupRevisions.query($stateParams.variantGroupId);\n          }\n        },\n        data: {\n          titleExp: '\"Variant Group \" + variantGroup.name + \" Revisions\"',\n          navMode: 'sub'\n        }\n      })\n      .state('events.genes.summary.variantGroups.talk.revisions.list.summary', {\n        url: '/summary',\n        template: '<variant-group-talk-revision-summary></variant-group-talk-revision-summary>',\n        resolve: {\n          initRevision: function(VariantGroupRevisions, $stateParams, $q) {\n            return $q.all([\n              VariantGroupRevisions.get($stateParams.variantGroupId, $stateParams.revisionId),\n              VariantGroupRevisions.queryComments($stateParams.variantGroupId, $stateParams.revisionId)\n            ]);\n          }\n        },\n        data: {\n          titleExp: '\"Variant Group \" + variantGroup.name + \" Revision Summary\"',\n          navMode: 'sub'\n        }\n      });\n  }\n\n  // @ngInject\n  function VariantTalkRevisionsViewOptions($state, $stateParams) {\n    var baseUrl = '';\n    var baseState = '';\n    var styles = {};\n\n    function init() {\n      baseState = 'events.genes.summary.variantGroups.talk.revisions';\n      baseUrl = $state.href(baseState, $stateParams);\n\n      angular.copy({\n        view: {\n          summaryBackgroundColor: 'pageBackground',\n          talkBackgroundColor: 'pageBackground'\n        },\n        tabs: {\n          tabRowBackground: 'pageBackground2Gradient'\n        }\n      }, styles);\n    }\n\n    return {\n      init: init,\n      state: {\n        baseParams: $stateParams,\n        baseState: baseState,\n        baseUrl: baseUrl\n      },\n      styles: styles\n    };\n  }\n\n  // @ngInject\n  function VariantTalkRevisionsController(VariantGroupRevisions, VariantGroupTalkRevisionsViewOptions) {\n    console.log('VariantTalkRevisionsRevisionsController called.');\n    VariantTalkRevisionsViewOptions.init();\n    this.VariantGroupRevisionsModel = VariantGroupRevisions;\n    this.VariantGroupTalkRevisionsViewOptions = VariantGroupTalkRevisionsViewOptions;\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.variantGroups')\n    .controller('VariantGroupTalkRevisionsController', VariantGroupTalkRevisionsController)\n    .directive('variantGroupTalkRevisions', variantGroupTalkRevisionsDirective);\n\n  // @ngInject\n  function variantGroupTalkRevisionsDirective() {\n    return {\n      restrict: 'E',\n      scope: {},\n      controller: 'VariantGroupTalkRevisionsController',\n      templateUrl: 'app/views/events/variantGroups/talk/revisions/variantGroupTalkRevisions.tpl.html'\n    };\n  }\n\n  // @ngInject\n  function VariantGroupTalkRevisionsController($scope, VariantGroupRevisions, VariantGroupsTalkViewOptions) {\n    $scope.variantGroupRevisions = VariantGroupRevisions;\n    $scope.viewOptions = VariantGroupsTalkViewOptions;\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.variantGroups')\n    .directive('variantGroupTalkRevisionSummary', variantGroupTalkRevisionSummary)\n    .controller('VariantGroupTalkRevisionSummaryController', VariantGroupTalkRevisionSummaryController);\n\n  // @ngInject\n  function variantGroupTalkRevisionSummary() {\n    var directive = {\n      restrict: 'E',\n      replace: true,\n      templateUrl: 'app/views/events/variantGroups/talk/revisions/variantGroupTalkRevisionSummary.tpl.html',\n      controller: 'VariantGroupTalkRevisionSummaryController'\n    };\n    return directive;\n  }\n\n  // @ngInject\n  function VariantGroupTalkRevisionSummaryController($scope, $stateParams, VariantGroupRevisions, Security, formConfig) {\n    var vm = $scope.vm = {};\n    vm.isEditor = Security.isEditor;\n    vm.isAuthenticated = Security.isAuthenticated;\n    vm.variantGroupTalkModel = VariantGroupRevisions;\n\n    vm.formErrors = {};\n    vm.formMessages = {};\n    vm.errorMessages = formConfig.errorMessages;\n    vm.errorPrompts = formConfig.errorPrompts;\n\n    $scope.acceptRevision = function() {\n      vm.formErrors = {};\n      vm.formMessages = {};\n      VariantGroupRevisions.acceptRevision($stateParams.variantGroupId, $stateParams.revisionId)\n        .then(function() {\n          vm.formMessages.acceptSuccess = true;\n        })\n        .catch(function(error) {\n          console.error('revision accept error!');\n          vm.formErrors[error.status] = true;\n        })\n        .finally(function (){\n          console.log('accept revision successful.');\n        });\n    };\n\n    $scope.rejectRevision = function() {\n      vm.formErrors = {};\n      vm.formMessages = {};\n      VariantGroupRevisions.rejectRevision($stateParams.variantGroupId, $stateParams.revisionId)\n        .then(function() {\n          vm.formMessages.rejectSuccess = true;\n        })\n        .catch(function(error) {\n          console.error('revision reject error!');\n          vm.formErrors[error.status] = true;\n        })\n        .finally(function (){\n          console.log('reject revision successful.');\n        });\n    };\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.community.main', []);\n  angular.module('civic.community')\n    .config(CommunityViewConfig)\n    .controller('CommunityViewController', CommunityViewController);\n\n  // @ngInject\n  function CommunityViewConfig($stateProvider) {\n    $stateProvider\n      .state('community', {\n        abstract: true,\n        url: '/community',\n        template: '<ui-view id=\"community-view\"></ui-view>',\n        controller: 'CommunityViewController',\n        onExit: /* @ngInject */ function($deepStateRedirect) {\n          $deepStateRedirect.reset();\n        }\n      });\n\n  }\n\n  // @ngInject\n  function CommunityViewController() {\n    // console.log('CommunityViewController instantiated.');\n  }\n\n})();\n\n(function () {\n  'use strict';\n  angular.module('civic.add')\n    .config(CommunityMainConfig)\n    .controller('CommunityMainController', CommunityMainController);\n\n  // @ngInject\n  function CommunityMainConfig($stateProvider,\n                               $resourceProvider,\n                               formlyConfigProvider) {\n    // TODO: toggle trailing-slash trim after civic-server configured to accept either\n    $resourceProvider.defaults.stripTrailingSlashes = false;\n\n    $stateProvider\n      .state('community.main', {\n        url: '/main',\n        templateUrl: 'app/views/community/main/communityMain.tpl.html',\n        resolve: {\n          Users: 'Users',\n          Community: 'Community'\n        },\n        controller: 'CommunityMainController',\n        controllerAs: 'vm',\n        data: {\n          navMode: 'sub',\n          title: 'Community'\n        }\n      });\n\n  }\n\n  // @ngInject\n  function CommunityMainController($scope,\n                                   _,\n                                   Security,\n                                   Community,\n                                   Users) {\n    var vm = this;\n\n    vm.isEditor = Security.isEditor();\n    vm.isAuthenticated = Security.isAuthenticated();\n    vm.leaderboards = {};\n    vm.users = [];\n\n    Community.getLeaderboards()\n      .then(function(response) {\n        angular.copy(response, vm.leaderboards);\n      });\n\n    // setup initial paging var and data update\n    vm.page = 1;\n    vm.count = 24;\n    vm.totalItems = Number();\n    vm.totalPages = Number();\n\n    $scope.$watch(function(){ return vm.totalItems; }, function() {\n      vm.totalPages = Math.ceil(vm.totalItems / vm.count);\n    });\n\n    vm.model = {};\n\n    vm.formFields = [\n      {\n        key: 'filter',\n        type: 'input',\n        className: 'col-xs-3',\n        templateOptions: {\n          label: 'Find User',\n          colSpan: 3,\n          required: false\n        },\n        watcher: {\n          listener: function() {\n            updateData();\n          }\n        }\n      },\n      {\n        key: 'limit',\n        type: 'select',\n        className: 'col-xs-3',\n        defaultValue: 'all_time',\n        templateOptions: {\n          label: 'Limit To',\n          colSpan: 3,\n          required: false,\n          options: [\n            // this_week, this_month, this_year, all_time\n            {name: 'All time', value: 'all_time'},\n            {name: 'This week', value: 'this_week'},\n            {name: 'This month', value: 'this_month'},\n            {name: 'This year', value: 'this_year'}\n          ]\n        },\n        watcher: {\n          listener: function() {\n            updateData();\n          }\n        }\n      },\n      {\n        key: 'sort_by',\n        type: 'select',\n        className: 'col-xs-3',\n        defaultValue: 'most_active',\n        templateOptions: {\n          label: 'Sort By',\n          colSpan: 3,\n          required: false,\n          options: [\n            // last_seen, recent_activity, join_date, most_active\n            {name: 'Last seen', value: 'last_seen', sort_order: 'desc'},\n            {name: 'Recent activity', value: 'recent_activity', sort_order: 'desc'},\n            {name: 'Join date', value: 'join_date', sort_order: 'asc'},\n            {name: 'Most active', value: 'most_active', sort_order: 'desc'}\n          ]\n        },\n        watcher: {\n          listener: function(field, newValue) {\n            if(!_.isUndefined(newValue)) {\n              vm.model.sort_order = _.find(field.templateOptions.options, {value: newValue}).sort_order;\n            }\n            updateData();\n          }\n        }\n      },\n      {\n        key: 'sort_order',\n        type: 'select',\n        className: 'col-xs-3',\n        defaultValue: 'desc',\n        templateOptions: {\n          label: 'Sort Order',\n          colSpan: 3,\n          required: false,\n          options: [\n            { name: 'Ascending', value: 'asc' },\n            { name: 'Descending', value: 'desc' }\n          ]\n        },\n        watcher: {\n          listener: function() {\n            updateData();\n          }\n        }\n      }\n    ];\n\n    updateData();\n\n    vm.pageChanged = function() {\n      updateData();\n    };\n\n    function updateData() {\n      var filters = [{\n        field: 'display_name',\n        term: vm.model.filter\n      }];\n\n      var sorting = [{\n        field: vm.model.sort_by,\n        direction: vm.model.sort_order\n      }];\n\n      var limit = vm.model.limit;\n\n      fetchUsers(vm.count, vm.page, sorting, filters, limit)\n        .then(function(data){\n          angular.copy(data.result, vm.users);\n          vm.totalItems = data.total;\n        });\n    }\n\n    function fetchUsers(count, page, sorting, filters, limit) {\n      var request;\n\n      request = {\n        count: count,\n        page: page\n      };\n\n      request['limit[' + sorting[0].field + ']'] = limit;\n      \n      if (filters.length > 0) {\n        _.each(filters, function(filter) {\n          request['filter[' + filter.field + ']'] = filter.term;\n        });\n      }\n\n      if (sorting.length > 0) {\n        _.each(sorting, function(sort) {\n          request['sorting[' + sort.field + ']'] = sort.direction;\n        });\n      }\n      return Users.query(request);\n    }\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.add.evidence', []);\n  angular.module('civic.add')\n    .config(AddViewConfig)\n    .controller('AddViewController', AddViewController);\n\n  // @ngInject\n  function AddViewConfig($stateProvider) {\n    $stateProvider\n      .state('add', {\n        abstract: true,\n        url: '/add',\n        template: '<ui-view id=\"add-view\"></ui-view>',\n        controller: 'AddViewController',\n        onExit: /* @ngInject */ function($deepStateRedirect) {\n          $deepStateRedirect.reset();\n        }\n      });\n\n  }\n\n  // @ngInject\n  function AddViewController() {\n    // console.log('AddViewController instantiated.');\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.add.evidence')\n    .config(AddEvidenceConfig)\n    .factory('AddEvidenceViewOptions', AddEvidenceViewOptions)\n    .controller('AddEvidenceController', AddEvidenceController);\n\n  // @ngInject\n  function AddEvidenceConfig($stateProvider) {\n    $stateProvider\n      .state('add.evidence', {\n        abstract: true,\n        url: '/evidence',\n        templateUrl: 'app/views/add/evidence/AddEvidenceView.tpl.html',\n        resolve: {\n          Evidence: 'Evidence'\n        },\n        controller: 'AddEvidenceController',\n        controllerAs: 'vm'\n      })\n      .state('add.evidence.basic', {\n        url: '/basic?geneId&variantId',\n        template: '<add-evidence-basic></add-evidence-basic>',\n        data: {\n          titleExp: '\"Add Evidence\"',\n          navMode: 'sub'\n        }\n      });\n  }\n\n  // @ngInject\n  function AddEvidenceViewOptions($state, $stateParams) {\n    var state = {\n      baseParams: {},\n      baseState: '',\n      baseUrl: ''\n    };\n    var styles = {};\n\n    function init() {\n      angular.copy($stateParams, this.state.baseParams);\n      this.state.baseState = 'add.evidence';\n      this.state.baseUrl = $state.href(this.state.baseState, $stateParams);\n\n      angular.copy({\n        view: {\n          backgroundColor: 'pageBackground'\n        }\n      }, this.styles);\n    }\n\n    return {\n      init: init,\n      state: state,\n      styles: styles\n    };\n  }\n\n  // @ngInject\n  function AddEvidenceController(Evidence, AddEvidenceViewOptions) {\n    AddEvidenceViewOptions.init();\n    this.type = 'EVIDENCE ITEM';\n    // can get references to the view model and view options\n    this.AddEvidenceViewModel = Evidence;\n    this.AddEvidenceViewOptions = AddEvidenceViewOptions;\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.add.evidence')\n    .directive('addEvidenceBasic', addEvidenceBasicDirective)\n    .controller('AddEvidenceBasicController', AddEvidenceBasicController);\n\n  // @ngInject\n  function addEvidenceBasicDirective() {\n    return {\n      restrict: 'E',\n      scope: {},\n      templateUrl: 'app/views/add/evidence/addEvidenceBasic.tpl.html',\n      controller: 'AddEvidenceBasicController'\n    };\n  }\n\n  // @ngInject\n  function AddEvidenceBasicController($scope,\n                                      $q,\n                                      $document,\n                                      Security,\n                                      Evidence,\n                                      Genes,\n                                      Publications,\n                                      Diseases,\n                                      Datatables,\n                                      DrugSuggestions,\n                                      AddEvidenceViewOptions,\n                                      formConfig,\n                                      _) {\n    var vm = $scope.vm = {};\n\n    vm.evidenceModel = Evidence;\n    vm.evidenceOptions = AddEvidenceViewOptions;\n\n    vm.isEditor = Security.isEditor();\n    vm.isAuthenticated = Security.isAuthenticated();\n\n    vm.showForm = true;\n    vm.showSuccessMessage = false;\n    vm.showInstructions = true;\n\n    vm.scroll = function() {\n      var elem = document.getElementById('add-evidence-basic');\n      $document.scrollToElementAnimated(elem);\n    };\n\n    //vm.duplicates = [];\n\n\n    vm.duplicates = true;\n\n    vm.newEvidence = {\n      gene: '',\n      variant: '',\n      pubmed_id: '',\n      description: '',\n      disease: {\n        name: ''\n      },\n      disease_name: '',\n      noDoid: false,\n      //pubchem_id: '',\n      drugs: [],\n      drug_interaction_type: '',\n      rating: '',\n      evidence_level: '',\n      evidence_type: '',\n      evidence_direction: '',\n      clinical_significance: '',\n      variant_origin: ''\n    };\n\n    vm.newEvidence.comment = { title: 'Additional Comments', text:'' };\n    vm.newEvidence.drugs  = [];\n\n    vm.formErrors = {};\n    vm.formMessages = {};\n    vm.errorMessages = formConfig.errorMessages;\n    vm.errorPrompts = formConfig.errorPrompts;\n\n    vm.evidenceFields = [\n      {\n        key: 'gene',\n        type: 'horizontalTypeaheadHelp',\n        wrapper: ['entrezIdDisplay', 'validationMessages'],\n        controller: /* @ngInject */ function($scope, $stateParams, Genes) {\n          // populate field if geneId provided\n          if($stateParams.geneId){\n            Genes.getName($stateParams.geneId).then(function(gene) {\n              $scope.model.gene = _.pick(gene,['id', 'name', 'entrez_id']);\n              $scope.to.data.entrez_id = gene.entrez_id;\n            });\n          }\n        },\n        templateOptions: {\n          label: 'Gene Entrez Name',\n          value: 'vm.newEvidence.gene',\n          minLength: 32,\n          required: true,\n          editable: false,\n          formatter: 'model[options.key].name',\n          typeahead: 'item as item.name for item in to.data.typeaheadSearch($viewValue)',\n          onSelect: 'to.data.entrez_id = $model.entrez_id',\n          helpText: 'Entrez Gene name (e.g. BRAF). Gene name must be known to the Entrez database.',\n          data: {\n            entrez_id: '--',\n            typeaheadSearch: function(val) {\n              return Genes.beginsWith(val)\n                .then(function(response) {\n                  return response;\n                });\n            }\n          }\n        },\n        modelOptions: {\n          debounce: {\n            default: 300\n          }\n        }\n      },\n      {\n        key: 'variant',\n        type: 'horizontalTypeaheadHelp',\n        className: 'input-caps',\n        controller: /* @ngInject */ function($scope, $stateParams, Variants) {\n          // populate field if variantId provided\n          if($stateParams.variantId){\n            Variants.get($stateParams.variantId).then(function(variant) {\n              $scope.model.variant = { name: variant.name };\n            });\n          }\n        },\n        templateOptions: {\n          label: 'Variant Name',\n          value: 'vm.newEvidence.variant',\n          minLength: 32,\n          helpText: 'Description of the type of variant (e.g., V600E, BCR-ABL fusion, Loss-of-function, exon 12 mutations). Should be as specific as possible (i.e., specific amino acid changes).',\n          formatter: 'model[options.key].name',\n          typeahead: 'item as item.name for item in options.data.typeaheadSearch($viewValue)',\n          editable: true\n        },\n        data: {\n          typeaheadSearch: function(val) {\n            var request = {\n              mode: 'variants',\n              count: 10,\n              page: 0,\n              'filter[variant]': val\n            };\n            return Datatables.query(request)\n              .then(function(response) {\n                return _.map(_.unique(response.result, 'variant'), function(event) {\n                  return { name: event.variant };\n                });\n              });\n          }\n        }\n      },\n\n      {\n        key: 'pubmed_id',\n        type: 'publication',\n        templateOptions: {\n          label: 'Pubmed ID',\n          value: 'vm.newEvidence.pubmed_id',\n          minLength: 1,\n          required: true,\n          data: {\n            description: '--'\n          },\n          helpText: 'PubMed ID for the publication associated with the evidence statement (e.g. 23463675)'\n        },\n        modelOptions: {\n          updateOn: 'default blur',\n          allowInvalid: false,\n          debounce: {\n            default: 300,\n            blur: 0\n          }\n        },\n        validators: {\n          validPubmedId: {\n            expression: function($viewValue, $modelValue, scope) {\n              if ($viewValue.length > 0) {\n                var deferred = $q.defer();\n                scope.options.templateOptions.loading = true;\n                Publications.verify($viewValue).then(\n                  function (response) {\n                    scope.options.templateOptions.loading = false;\n                    scope.options.templateOptions.data.description = response.description;\n                    deferred.resolve(response);\n                  },\n                  function (error) {\n                    scope.options.templateOptions.loading = false;\n                    scope.options.templateOptions.data.description = '--';\n                    deferred.reject(error);\n                  }\n                );\n                return deferred.promise;\n              } else {\n                scope.options.templateOptions.data.description = '--';\n                return true;\n              }\n            },\n            message: '\"This does not appear to be a valid Pubmed ID.\"'\n          }\n        }\n      },\n      { // duplicates warning row\n        templateUrl: 'app/views/add/evidence/addEvidenceDuplicateWarning.tpl.html',\n        controller: /* @ngInject */ function($scope, Search) {\n          console.log('dup warning controller loaded.');\n          var vm = $scope.vm = {};\n          vm.duplicates = [];\n          vm.pubmedName = '';\n\n          function searchForDups(values) {\n            if(_.every(values, function(val) { return _.isString(val) && val.length > 0; })) {\n              Search.post({\n                  \"operator\": \"AND\",\n                  \"queries\": [\n                    {\n                      \"field\": \"gene_name\",\n                      \"condition\": {\"name\": \"contains\", \"parameters\": [values[0]]}\n                    },\n                    {\n                      \"field\": \"variant_name\",\n                      \"condition\": {\"name\": \"contains\", \"parameters\": [values[1]]}\n                    },\n                    {\n                      \"field\": \"pubmed_id\",\n                      \"condition\": {\"name\": \"is\", \"parameters\": [values[2]]\n                      }\n                    }\n                  ],\n                  \"entity\": \"evidence_items\",\n                  \"save\": false\n                })\n                .then(function (response) {\n                  vm.duplicates = response.results;\n                });\n            }\n          }\n\n          $scope.pubmedField = _.find($scope.fields, { key: 'pubmed_id' });\n\n          $scope.$watchGroup([\n            'model.gene.name',\n            'model.variant.name',\n            'model.pubmed_id'\n          ], searchForDups);\n        }\n      },\n      {\n        key: 'variant_origin',\n        type: 'horizontalSelectHelp',\n        wrapper: 'attributeDefinition',\n        templateOptions: {\n          label: 'Variant Origin',\n          value: 'vm.newEvidence.variant_origin',\n          options: [\n            { value: '', label: 'Please select a Variant Origin' },\n            { value: 'Somatic Mutation', label: 'Somatic Mutation'},\n            { value: 'Germline Mutation', label: 'Germline Mutation' },\n            { value: 'Germline Polymorphism', label: 'Germline Polymorphism' },\n            { value: 'Unknown', label: 'Unknown' },\n            { value: 'N/A', label: 'N/A' },\n          ],\n          valueProp: 'value',\n          labelProp: 'label',\n          helpText: 'Origin of variant',\n          data: {\n            attributeDefinition: '&nbsp;',\n            attributeDefinitions: {\n              'Somatic Mutation': 'Variant is a mutation, found only in tumor cells, having arisen in a specific tissue (non-germ cell), and is not expected to be inherited or passed to offspring.',\n              'Germline Mutation': 'Variant is a mutation, found in every cell, not restricted to tumor/diseased cells, is expected to have arisen de novo in the germ cells responsible for the current generation or only very recent generations (e.g., close family members), and is not thought to exist in the population at large.',\n              'Germline Polymorphism': 'Variant is found in every cell, not restricted to tumor/diseased cells, and thought to represent common (or relatively rare) variation in the population at large.',\n              'Unknown': 'The variant origin is uncertain based on the available evidence.',\n              'N/A': 'The variant type (e.g., expression) is not compatible (or easily classified) with the CIViC concepts of variant origin.'\n            }\n          },\n          onChange: function(value, options) {\n            // set attribute definition\n            options.templateOptions.data.attributeDefinition = options.templateOptions.data.attributeDefinitions[value];\n          }\n        }\n      },\n      {\n        key: 'disease',\n        type: 'horizontalTypeaheadHelp',\n        wrapper: ['loader', 'diseasedisplay', 'validationMessages'],\n        templateOptions: {\n          label: 'Disease',\n          value: 'vm.newEvidence.doid',\n          required: true,\n          minLength: 32,\n          helpText: 'Please enter a disease name. If you are unable to locate the disease in the dropdown, please check the \\'Could not find disease\\' checkbox below and enter the disease in the field that appears.',\n          typeahead: 'item as item.name for item in to.data.typeaheadSearch($viewValue)',\n          onSelect: 'to.data.doid = $model.doid',\n          templateUrl: 'components/forms/fieldTypes/diseaseTypeahead.tpl.html',\n          data: {\n            doid: '--',\n            typeaheadSearch: function(val) {\n              return Diseases.beginsWith(val)\n                .then(function(response) {\n                  return response;\n                });\n            }\n          }\n        },\n        expressionProperties: {\n          'templateOptions.disabled': 'model.noDoid === true', // deactivate if noDoid is checked\n          'templateOptions.required': 'model.noDoid === false' // required only if noDoid is unchecked\n        },\n        hideExpression: 'model.noDoid'\n      },\n      {\n        key: 'noDoid',\n        type: 'horizontalCheckbox',\n        templateOptions: {\n          label: 'Could not find disease.'\n        }\n      },\n      {\n        key: 'disease_name',\n        type: 'horizontalInputHelp',\n        templateOptions: {\n          label: 'Disease Name',\n          value: 'vm.newEvidence.disease_name',\n          minLength: 32,\n          helpText: 'Enter the name of the disease here.'\n        },\n        hideExpression: '!model.noDoid'\n      },\n      {\n        key: 'description',\n        type: 'horizontalTextareaHelp',\n        templateOptions: {\n          rows: 5,\n          label: 'Evidence Statement',\n          value: 'vm.newEvidence.description',\n          minLength: 32,\n          helpText: 'Description of evidence from published medical literature detailing the association of or lack of association of a variant with diagnostic, prognostic or predictive value in relation to a specific disease (and treatment for predictive evidence). Data constituting protected health information (PHI) should not be entered. Please familiarize yourself with your jurisdiction\\'s definition of PHI before contributing.'\n        }\n      },\n      {\n        key: 'evidence_type',\n        type: 'horizontalSelectHelp',\n        wrapper: 'attributeDefinition',\n        templateOptions: {\n          label: 'Evidence Type',\n          value: 'vm.newEvidence.evidence_type',\n          ngOptions: 'option[\"value\"] as option[\"label\"] for option in to.options',\n          options: [\n            { value: '', label: 'Please select an Evidence Type' },\n            { value: 'Predictive', label: 'Predictive' },\n            { value: 'Diagnostic', label: 'Diagnostic' },\n            { value: 'Prognostic', label: 'Prognostic' }\n          ],\n          onChange: function(value, options, scope) {\n            // reset clinical_significance, as its options will change\n            scope.model.clinical_significance = '';\n\n            // if we're switching to Predictive, seed the drugs array w/ a blank entry,\n            // otherwise set to empty array\n            value === 'Predictive' ? scope.model.drugs = [''] : scope.model.drugs = [];\n\n            // set attribute definition\n            options.templateOptions.data.attributeDefinition = options.templateOptions.data.attributeDefinitions[value];\n\n            // update evidence direction attribute definition\n            var edField = _.find(scope.fields, { key: 'evidence_direction'});\n            if (edField.value() !== '') { // only update if user has selected an option\n              edField.templateOptions.data.updateDefinition(null, edField, scope);\n            }\n          },\n          helpText: 'Type of clinical outcome associated with the evidence statement.',\n          data: {\n            attributeDefinition: '&nbsp;',\n            attributeDefinitions: {\n              'Predictive': 'Evidence pertains to a variant\\'s effect on therapeutic response',\n              'Diagnostic': 'Evidence pertains to a variant\\'s impact on patient diagnosis',\n              'Prognostic': 'Evidence pertains to a variant\\'s impact on disease progression, severity, or patient survival'\n            }\n          }\n        }\n      },\n      {\n        key: 'evidence_level',\n        type: 'horizontalSelectHelp',\n        wrapper: 'attributeDefinition',\n        templateOptions: {\n          label: 'Evidence Level',\n          value: 'vm.newEvidence.rating',\n          options: [\n            { value: '', label: 'Please select an Evidence Level' },\n            { value: 'A', label: 'A - Validated'},\n            { value: 'B', label: 'B - Clinical'},\n            { value: 'C', label: 'C - Case Study'},\n            { value: 'D', label: 'D - Preclinical'},\n            { value: 'E', label: 'E - Inferential'}\n          ],\n          valueProp: 'value',\n          labelProp: 'label',\n          helpText: 'Type of study performed to produce the evidence statement',\n          data: {\n            attributeDefinition: '&nbsp;',\n            attributeDefinitions: {\n              A: 'Proven/consensus association in human medicine',\n              B: 'Clinical trial or other primary patient data supports association',\n              C: 'Individual case reports from clinical journals',\n              D: 'In vivo or in vitro models support association',\n              E: 'Indirect evidence'\n            }\n          },\n          onChange: function(value, options) {\n            options.templateOptions.data.attributeDefinition = options.templateOptions.data.attributeDefinitions[value];\n          }\n\n        }\n      },\n      {\n        key: 'evidence_direction',\n        type: 'horizontalSelectHelp',\n        wrapper: 'attributeDefinition',\n        templateOptions: {\n          label: 'Evidence Direction',\n          value: 'vm.newEvidence.evidence_direction',\n          options: [\n            { value: '', label: 'Please select an Evidence Direction' },\n            { value: 'Supports', label: 'Supports'},\n            { value: 'Does Not Support', label: 'Does Not Support' }\n          ],\n          valueProp: 'value',\n          labelProp: 'label',\n          helpText: 'An indicator of whether the evidence statement supports or refutes the clinical significance of an event. Evidence Type must be selected before this field is enabled.',\n          data: {\n            attributeDefinition: '&nbsp;',\n            attributeDefinitions: {\n              'Predictive': {\n                'Supports': 'The experiment or study supports this variant\\'s response to a drug',\n                'Does Not Support': 'The experiment or study does not support, or was inconclusive of an interaction between the variant and a drug'\n              },\n              'Diagnostic': {\n                'Supports': 'The experiment or study supports variant\\'s impact on the diagnosis of disease or subtype',\n                'Does Not Support': 'The experiment or study does not support the variant\\'s impact on diagnosis of disease or subtype'\n              },\n              'Prognostic': {\n                'Supports': 'The experiment or study supports a variant\\'s impact on prognostic outcome',\n                'Does Not Support': 'The experiment or study does not support a prognostic association between variant and outcome'\n              }\n            },\n            updateDefinition: function(value, options, scope) {\n              // set attribute definition\n              options.templateOptions.data.attributeDefinition =\n                options.templateOptions.data.attributeDefinitions[scope.model.evidence_type][scope.model.evidence_direction];\n            }\n          },\n          onChange: function(value, options, scope) {\n            options.templateOptions.data.updateDefinition(value, options, scope);\n          }\n        },\n        expressionProperties: {\n          'templateOptions.disabled': 'model.evidence_type === \"\"' // deactivate if evidence_type unselected\n        }\n      },\n      {\n        key: 'clinical_significance',\n        type: 'horizontalSelectHelp',\n        wrapper: 'attributeDefinition',\n        templateOptions: {\n          label: 'Clinical Significance',\n          required: true,\n          value: 'vm.newEvidence.clinical_significance',\n          clinicalSignificanceOptions: [ // stores unmodified options array for expressionProperties\n            { type: 'default', value: '', label: 'Please select a Clinical Significance' },\n            { type: 'Predictive', value: 'Sensitivity', label: 'Sensitivity' },\n            { type: 'Predictive', value: 'Resistance or Non-Response', label: 'Resistance or Non-Response' },\n            { type: 'Predictive', value: 'Adverse Response', label: 'Adverse Response' },\n            { type: 'Prognostic', value: 'Better Outcome', label: 'Better Outcome' },\n            { type: 'Prognostic', value: 'Poor Outcome', label: 'Poor Outcome' },\n            { type: 'Diagnostic', value: 'Positive', label: 'Positive' },\n            { type: 'Diagnostic', value: 'Negative', label: 'Negative' },\n            { type: 'N/A', value: 'N/A', label: 'N/A' }\n          ],\n          ngOptions: 'option[\"value\"] as option[\"label\"] for option in to.options',\n          options: [ // acutal options displayed in the select, modified by expressionProperties\n            { type: 'default', value: '', label: 'Please select a Clinical Significance' },\n            { type: 'Predictive', value: 'Sensitivity', label: 'Sensitivity' },\n            { type: 'Predictive', value: 'Resistance or Non-Response', label: 'Resistance or Non-Response' },\n            { type: 'Predictive', value: 'Adverse Response', label: 'Adverse Response' },\n            { type: 'Prognostic', value: 'Better Outcome', label: 'Better Outcome' },\n            { type: 'Prognostic', value: 'Poor Outcome', label: 'Poor Outcome' },\n            { type: 'Diagnostic', value: 'Positive', label: 'Positive' },\n            { type: 'Diagnostic', value: 'Negative', label: 'Negative' },\n            { type: 'N/A', value: 'N/A', label: 'N/A' }\n          ],\n          helpText: 'Positive or negative association of the Variant with predictive, prognostic, or diagnostic evidence types. If the variant was not associated with a positive or negative outcome, N/A should be selected. Evidence Type must be selected before this field is enabled.',\n          data: {\n            attributeDefinition: '&nbsp;',\n            attributeDefinitions: {\n              'Sensitivity': 'Subject exhibits response to drug treatment',\n              'Resistance or Non-Response': 'Subject exhibits a lack of response or active resistance to drug treatment',\n              'Adverse Response': 'Subject exhibits an adverse response to drug treatment',\n              'Better Outcome': 'Demonstrates better than expected clinical outcome',\n              'Poor Outcome': 'Demonstrates worse than expected clinical outcome',\n              'Positive': 'Associated with diagnosis of disease or subtype',\n              'Negative': 'Associated with lack of disease or subtype',\n              'N/A': 'Not applicable'\n            },\n            updateDefinition: function(value, options, scope) {\n              // set attribute definition\n              options.templateOptions.data.attributeDefinition =\n                options.templateOptions.data.attributeDefinitions[scope.model.clinical_significance];\n            }\n          },\n          onChange: function(value, options, scope) {\n            options.templateOptions.data.updateDefinition(value, options, scope);\n          }\n        },\n        expressionProperties: {\n          'templateOptions.options': function($viewValue, $modelValue, scope) {\n            return  _.filter(scope.to.clinicalSignificanceOptions, function(option) {\n              return !!(option.type === scope.model.evidence_type ||\n              option.type === 'default' ||\n              option.type === 'N/A');\n            });\n          },\n          'templateOptions.disabled': 'model.evidence_type === \"\"' // deactivate if evidence_type unselected\n        }\n      },\n      {\n        key: 'drugs',\n        type: 'multiInput',\n        templateOptions: {\n          label: 'Drug Names',\n          inputOptions: {\n            type: 'typeahead',\n            wrapper: null,\n            templateOptions: {\n              typeahead: 'item.name for item in options.data.typeaheadSearch($viewValue)',\n              // focus: true,\n              onSelect: 'options.data.pushNew(model, index)',\n              editable: true\n            },\n            data: {\n              pushNew: function(model, index) {\n                model.splice(index+1, 0, '');\n              },\n              typeaheadSearch: function(val) {\n                return DrugSuggestions.query(val)\n                  .then(function(response) {\n                    return _.map(response, function(drugname) {\n                      return { name: drugname };\n                    });\n                  });\n              }\n            }\n          },\n          helpText: 'For predictive evidence, specify one or more drug names. Drugs specified must possess a PubChem ID (e.g., 44462760 for Dabrafenib).'\n        },\n        hideExpression: function($viewValue, $modelValue, scope) {\n          return  scope.model.evidence_type !== 'Predictive';\n        }\n      },\n      {\n        key: 'drug_interaction_type',\n        type: 'horizontalSelectHelp',\n        wrapper: 'attributeDefinition',\n        templateOptions: {\n          label: 'Drug Interaction Type',\n          value: 'vm.newEvidence.drug_interaction_type',\n          options: [\n            { type: 'default', value: '', label: 'Please select a Drug Interaction Type' },\n            { value: 'Combination', label: 'Combination'},\n            { value: 'Sequential', label: 'Sequential'},\n            { value: 'Substitutes', label: 'Substitutes'}\n          ],\n          valueProp: 'value',\n          labelProp: 'label',\n          helpText: 'Please indicate whether the drugs specified above are subtitutes, or are used in sequential or combination treatments.',\n          data: {\n            attributeDefinition: '&nbsp;',\n            attributeDefinitions: {\n              'Combination': 'The drugs listed were used in as part of a combination therapy approach',\n              'Sequential': 'The drugs listed were used at separate timepoints in the same treatment plan',\n              'Substitutes': 'The drugs listed are often considered to be of the same family, or behave similarly in a treatment setting'\n            }\n          },\n          onChange: function(value, options) {\n            options.templateOptions.data.attributeDefinition = options.templateOptions.data.attributeDefinitions[value];\n          }\n        },\n        hideExpression: function($viewValue, $modelValue, scope) {\n          return !(scope.model.evidence_type === 'Predictive' && // evidence type must be predictive\n          _.without(scope.model.drugs, '').length > 1);\n\n        }\n      },\n      {\n        key: 'rating',\n        type: 'horizontalRatingHelp',\n        templateOptions: {\n          label: 'Rating',\n\n          options: [\n            { value: '', label: 'Please select an Evidence Rating' },\n            { value: 1, label: '1 - Poor<br/>Claim is not supported well by experimental evidence. Results are not reproducible, or have very small sample size. No follow-up is done to validate novel claims.' },\n            { value: 2, label: '2 - Adequate<br/>Evidence is not well supported by experimental data, and little follow-up data is available. Publication is from a journal with low academic impact. Experiments may lack proper controls, have small sample size, or are not statistically convincing.' },\n            { value: 3, label: '3 - Average<br/>Evidence is convincing, but not supported by a breadth of experiments. May be smaller scale projects, or novel results without many follow-up experiments. Discrepancies from expected results are explained and not concerning.' },\n            { value: 4, label: '4 - Good<br/>Strong, well supported evidence. Experiments are well controlled, and results are convincing. Any discrepancies from expected results are well-explained and not concerning.' },\n            { value: 5, label: '5 - Excellent<br/>Strong, well supported evidence from a lab or journal with respected academic standing. Experiments are well controlled, and results are clean and reproducible across multiple replicates. Evidence confirmed using separate methods.'}\n          ],\n          valueProp: 'value',\n          labelProp: 'label',\n          helpText: '<p>Please rate your evidence on a scale of one to five stars. Use the star rating descriptions for guidance.</p>'\n        }\n      },\n      {\n        key: 'text',\n        type: 'horizontalCommentHelp',\n        model: vm.newEvidence.comment,\n        ngModelElAttrs: {\n          'msd-elastic': 'true',\n          'mentio': '',\n          'mentio-id': '\"commentForm\"'\n        },\n        templateOptions: {\n          rows: 5,\n          minimum_length: 3,\n          label: 'Additional Comments',\n          currentUser: Security.currentUser,\n          value: 'text',\n          required: false,\n          helpText: 'Please provide any additional comments you wish to make about this evidence item. This comment will appear as the first comment in this item\\'s comment thread.'\n        },\n        validators: {\n          length: {\n            expression: function(viewValue, modelValue, scope) {\n              var value = viewValue || modelValue;\n              return value.length >= scope.to.minimum_length || value.length === 0;\n            },\n            message: '\"Comment must be at least \" + to.minimum_length + \" characters long to submit.\"'\n          }\n        }\n      },\n      // {\n      //   key: 'text',\n      //   type: 'horizontalTextareaHelp',\n      //   model: vm.newEvidence.comment,\n      //   templateOptions: {\n      //     rows: 5,\n      //     label: 'Additional Comments',\n      //     value: 'text',\n      //     helpText: 'Please provide any additional comments you wish to make about this evidence item. This comment will appear as the first comment in this item\\'s comment thread.'\n      //   }\n      // }\n    ];\n\n    vm.submit = function(newEvidence) {\n      newEvidence.evidenceId = newEvidence.id;\n      newEvidence.drugs = _.without(newEvidence.drugs, ''); // delete blank input values\n      if(newEvidence.drugs.length < 2) { newEvidence.drug_interaction_type = null; } // delete interaction if only 1 drug\n      // convert variant name to object, if a string\n      // TODO: figure out how to handle this more elegantly using angular-formly config object\n      if(_.isString(newEvidence.variant)){\n        newEvidence.variant = { name: newEvidence.variant };\n      }\n      //if(_.isString(newEvidence.gene)){\n      //  newEvidence.gene = { name: newEvidence.gene };\n      //}\n      vm.formErrors = {};\n      vm.formMessages = {};\n\n      // if noDoid, construct disease obj w/ disease_name\n      if(newEvidence.noDoid) {\n        newEvidence.disease = { name: newEvidence.disease_name };\n      }\n\n      Evidence.add(newEvidence)\n        .then(function(response) {\n          console.log('add evidence success!');\n          vm.formMessages.submitSuccess = true;\n          vm.showInstructions = false;\n          vm.showForm = false;\n          vm.showSuccessMessage = true;\n          // options.resetModel();\n          vm.linkParams = {\n            geneId: response.gene.id,\n            variantId: response.variant.id,\n            evidenceId: response.evidence_item.id\n          };\n          vm.linkNames = {\n            gene: response.gene.name,\n            variant: response.variant.name,\n            evidence_item: response.evidence_item.name\n          };\n        })\n        .catch(function(error) {\n          console.error('add evidence error!');\n          vm.formErrors[error.status] = true;\n        })\n        .finally(function(){\n          console.log('add evidence done!');\n        });\n    };\n\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.add')\n    .config(AddVariantGroupConfig)\n    .controller('AddVariantGroupController', AddVariantGroupController);\n\n  // @ngInject\n  function AddVariantGroupConfig($stateProvider) {\n    $stateProvider\n      .state('add.variantGroup', {\n        url: '/variantGroup?geneId',\n        templateUrl: 'app/views/add/variantGroup/addVariantGroup.tpl.html',\n        resolve: {\n          VariantGroups: 'VariantGroups'\n        },\n        controller: 'AddVariantGroupController',\n        controllerAs: 'vm',\n        data: {\n          title: 'Add Variant Group',\n          navMode: 'sub'\n        }\n      });\n  }\n\n  // @ngInject\n  function AddVariantGroupController($scope,\n                                     $stateParams,\n                                     _,\n                                     formConfig,\n                                     VariantGroups,\n                                     Datatables,\n                                     Security) {\n    var vm = this;\n    vm.type = 'VARIANT GROUP';\n\n    vm.isEditor = Security.isEditor();\n    vm.isAuthenticated = Security.isAuthenticated();\n\n    vm.showForm = true;\n    vm.showSuccessMessage = false;\n    vm.showInstructions = true;\n\n    vm.formErrors = {};\n    vm.formMessages = {};\n    vm.errorMessages = formConfig.errorMessages;\n    vm.errorPrompts = formConfig.errorPrompts;\n\n\n    vm.variantGroup = {\n      name: '',\n      description: '',\n      variants: [{id: 0, name:''}]\n    };\n\n    vm.variantGroupFields = [\n      //{\n      //  key: 'gene',\n      //  type: 'horizontalTypeaheadHelp',\n      //  wrapper: ['entrezIdDisplay', 'validationMessages'],\n      //  controller: /* @ngInject */ function($scope, $stateParams, Genes) {\n      //    // populate field if geneId provided\n      //    if($stateParams.geneId){\n      //      Genes.getName($stateParams.geneId).then(function(gene) {\n      //        $scope.model.gene = _.pick(gene,['id', 'name', 'entrez_id']);\n      //        $scope.to.data.entrez_id = gene.entrez_id;\n      //      });\n      //    }\n      //  },\n      //  templateOptions: {\n      //    label: 'Gene Entrez Name',\n      //    value: 'vm.newEvidence.gene',\n      //    minLength: 32,\n      //    required: true,\n      //    editable: false,\n      //    formatter: 'model[options.key].name',\n      //    typeahead: 'item as item.name for item in to.data.typeaheadSearch($viewValue)',\n      //    onSelect: 'to.data.entrez_id = $model.entrez_id',\n      //    helpText: 'Entrez Gene name (e.g. BRAF). Gene name must be known to the Entrez database.',\n      //    data: {\n      //      entrez_id: '--',\n      //      typeaheadSearch: function(val) {\n      //        return Genes.beginsWith(val)\n      //          .then(function(response) {\n      //            return response;\n      //          });\n      //      }\n      //    }\n      //  },\n      //  modelOptions: {\n      //    debounce: {\n      //      default: 300\n      //    }\n      //  }\n      //},\n      {\n        key: 'name',\n        type: 'horizontalInputHelp',\n        templateOptions: {\n          label: 'Name',\n          disabled: false,\n          value: vm.variantGroup.name,\n          helpText: 'A brief and meaningful name for the new variant group.'\n        }\n      },\n      {\n        key: 'description',\n        type: 'horizontalTextareaHelp',\n        templateOptions: {\n          rows: 8,\n          label: 'Description',\n          value: 'vm.variantGroup.description',\n          focus: true,\n          minLength: 32,\n          helpText: 'A brief description of this new variant group.'\n        }\n      },\n      {\n        key: 'variants',\n        type: 'multiInput',\n        templateOptions: {\n          label: 'Variants',\n          entityName: 'Variant',\n          helpText: 'Click the X button to delete a variant, click the + button to add a variant. Note that variants must be known to CIViC to be available for including here. New variants may be added as part of an evidence item using the <a href=\"/#/add/evidence/basic\">Add Evidence form</a>.',\n          inputOptions: {\n            type: 'typeahead',\n            wrapper: null,\n            templateOptions: {\n              formatter: 'model[options.key].name',\n              typeahead: 'item as item.name for item in options.data.typeaheadSearch($viewValue)',\n              onSelect: 'options.data.pushNew(model, index)'\n            },\n            data: {\n              pushNew: function(model, index) {\n                model.splice(index+1, 0, '');\n              },\n              typeaheadSearch: function(val) {\n                var request = {\n                  mode: 'variants',\n                  count: 5,\n                  page: 0,\n                  'filter[variant]': val\n                };\n                return Datatables.query(request)\n                  .then(function(response) {\n                    return _.map(response.result, function(event) {\n                      return { name: event.entrez_gene + ' - ' + event.variant, id: event.variant_id };\n                    });\n                  });\n              }\n            }\n          }\n        }\n      }\n    ];\n\n    vm.add = function(newVariantGroup) {\n      newVariantGroup.variants = _.without(newVariantGroup.variants, ''); // delete blank input values\n      VariantGroups.add(newVariantGroup)\n        .then(function(response) {\n          console.log('new variant group created!');\n          vm.formMessages.submitSuccess = true;\n          vm.showInstructions = false;\n          vm.showForm = false;\n          vm.showSuccessMessage = true;\n          vm.newGroupId= response.id;\n          vm.newGeneId = response.variants[0].gene_id; // grab gene id from first variant in group\n        })\n        .catch(function(error) {\n          console.error('variant group submit error!');\n          vm.formErrors[error.status] = true;\n        })\n        .finally(function(){\n          console.log('variant group submit done!');\n        });\n    };\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.users.profile', []);\n  angular.module('civic.users.common', []);\n  angular.module('civic.users')\n    .config(UsersViewConfig)\n    .controller('UsersViewController', UsersViewController);\n\n  // @ngInject\n  function UsersViewConfig($stateProvider) {\n    console.log('UsersViewConfig called.');\n    $stateProvider\n      .state('users', {\n        abstract: true,\n        url: '/users/:userId',\n        template: '<ui-view id=\"users-view\"></ui-view>',\n        controller: 'UsersViewController'\n      })\n      .state('users.profile', {\n        url:'/profile',\n        templateUrl: 'app/views/users/profile/profile.tpl.html',\n        resolve: {\n          'Users': 'Users',\n          'user': function(Users, $stateParams) {\n            return Users.get($stateParams.userId);\n          },\n          'events': function(Users, $stateParams) {\n            return Users.queryEvents($stateParams.userId);\n          },\n          'evidence': function(Search, user) {\n            var query = {\n              'entity': 'evidence_items',\n              'operator':'AND',\n              'save': false,\n              'queries': [\n                {\n                  'field':'submitter_id',\n                  'condition': {\n                    'name':'is_equal_to',\n                    'parameters':[user.id]\n                  }\n                }\n              ]};\n            return Search.post(query);\n          }\n        },\n        controller: 'ProfileController',\n        data: {\n          navMode: 'sub',\n          titleExp: '\"Profile: \" + user.display_name'\n        }\n      })\n      .state('users.edit', {\n        url:'/edit',\n        templateUrl: 'app/views/users/profile/edit/profileEdit.tpl.html',\n        resolve: {\n          'Users': 'Users',\n          'user': function(Users, $stateParams) {\n            return Users.get($stateParams.userId);\n          }\n        },\n        controller: 'ProfileEditController',\n        data: {\n          navMode: 'sub',\n          titleExp: '\"Profile: \" + user.display_name'\n        }\n      });\n  }\n\n  // @ngInject\n  function UsersViewController() {\n    console.log('UsersViewController instantiated.');\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.users.profile')\n  .controller('ProfileController', ProfileController);\n\n  // @ngInject\n  function ProfileController($scope, Security, user, events, evidence) {\n    var vm = $scope.vm = {};\n    console.log('ProfileController called. user: ');\n    console.log(user);\n\n    vm.user = user;\n    vm.events = events.result;\n    vm.evidence = evidence.results;\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.users.profile')\n    .controller('ProfileEditController', ProfileEditController);\n\n  // @ngInject\n  function ProfileEditController ($scope,\n                                  $state,\n                                  $interval,\n                                  Security,\n                                  Users,\n                                  user){\n    var vm = $scope.vm = {};\n\n    vm.user = user;\n    vm.userEdit = angular.copy(user);\n    vm.currentUser = Security.currentUser;\n    vm.secondsReturn = 5;\n\n    // TODO: implement better error handling and success message\n    vm.submitSuccess = false;\n    vm.submitFail = false;\n\n    vm.userEditFields = [\n      {\n        key: 'name',\n        type: 'horizontalInputHelp',\n        templateOptions: {\n          label: 'Name',\n          minLength: 8,\n          value: 'vm.userEdit.name',\n          helpText: 'Name'\n        }\n      },\n      {\n        key: 'username',\n        type: 'horizontalInputHelp',\n        templateOptions: {\n          label: 'User Name',\n          minLength: 8,\n          value: 'vm.userEdit.user',\n          helpText: 'Username'\n        }\n      },\n      {\n        key: 'email',\n        type: 'horizontalInputHelp',\n        templateOptions: {\n          label: 'Email Address',\n          minLength: 5,\n          value: 'vm.userEdit.email',\n          helpText: 'Email address will be used for sending CIViC notifications, news, and updates.'\n        }\n      },\n      {\n        key: 'area_of_expertise',\n        type: 'horizontalSelectHelp',\n        templateOptions: {\n          label: 'Areas of Expertise',\n          options: [\n            { value: null, label: 'Please select an Area of Expertise' },\n            { value: 'Patient Advocate', label: 'Patient Advocate'},\n            { value: 'Clinical Scientist', label: 'Clinical Scientist' },\n            { value: 'Research Scientist', label: 'Research Scientist' }\n          ],\n          valueProp: 'value',\n          labelProp: 'label',\n          value: 'vm.userEdit.area_of_expertise',\n          helpText: 'Area of Expertise'\n        }\n      }\n    ];\n\n    vm.saveProfile = function(userEdit) {\n\n      Users.update(userEdit)\n        .then(function(response) {\n          console.log('updated user successfully');\n          vm.user = Security.currentUser = response;\n          vm.submitSuccess = true;\n          vm.count = vm.secondsReturn;\n          var int = $interval(function() {\n            if (vm.count <= 1) {\n              $state.go('users.profile', { userId: user.id });\n              $interval.cancel(int);\n            } else {\n              vm.count--;\n            }\n          }, 1000);\n\n        })\n        .catch(function() {\n          console.error('update user error!');\n          vm.submitFail = false;\n        });\n\n    };\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.users')\n    .controller('UserSummaryController', UserSummaryController)\n    .directive('userSummary', function() {\n      return {\n        restrict: 'E',\n        scope: {\n          user: '='\n        },\n        controller: 'UserSummaryController',\n        templateUrl: 'app/views/users/common/userSummary.tpl.html'\n      };\n    });\n\n  // @ngInject\n  function UserSummaryController($scope, Stats, Security) {\n    var vm = $scope.vm = {};\n    vm.currentUser= Security.currentUser;\n    vm.stats = {};\n\n    Stats.user($scope.user.id).then(function(stats) {\n      vm.stats = stats;\n    });\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.account')\n    .config(AccountView);\n\n  // @ngInject\n  function AccountView($stateProvider) {\n    $stateProvider\n      .state('account', {\n        abstract: true,\n        url: '/account',\n        controller: 'AccountViewController',\n        templateUrl: 'app/views/account/account.tpl.html',\n        data: {\n          titleExp: '\"My Account\"',\n          navMode: 'sub'\n        }\n      })\n      .state('account.notifications', {\n        url: '/notifications?category',\n        templateUrl: 'app/views/account/notifications.tpl.html',\n        data: {\n          titleExp: '\"Account Notifications\"',\n          navMode: 'sub'\n        },\n        resolve: {\n          feed: /* @ngInject */ function($stateParams, CurrentUser) {\n            //return CurrentUser.getFeed({page: $stateParams.page});\n            return CurrentUser.getFeed({count: 25});\n          }\n        },\n        controller: 'AccountNotificationsController'\n      })\n      .state('account.profile', {\n        url: '/profile',\n        templateUrl: 'app/views/account/profile.tpl.html',\n        data: {\n          titleExp: '\"Account Profile\"',\n          navMode: 'sub'\n        }\n        //,\n        //resolve: {\n        //  mentions: /* @ngInject */ function(CurrentUser) {\n        //    CurrentUser.getMentions().then(function(response) {\n        //      return response;\n        //    });\n        //  }\n        //}\n      });\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.account')\n    .controller('AccountViewController', AccountViewController)\n    .controller('AccountNotificationsController', AccountNotificationsController)\n    .controller('AccountProfileController', AccountProfileController)  ;\n\n  // @ngInject\n  function AccountViewController($scope) {\n\n  }\n\n  // @ngInject\n  function AccountNotificationsController($scope,\n                                          $state,\n                                          $stateParams,\n                                          CurrentUser,\n                                          Security,\n                                          feed,\n                                          _) {\n    if(_.isUndefined($stateParams.category)) {\n      $state.go('account.notifications', {category: 'all', count: 25})\n    }\n    var vm = $scope.vm = {};\n\n    vm.max = 25;\n    vm.maxOptions = [25,50,100,150,200];\n    vm.notifications = [];\n\n    vm.total = Number();\n    vm.totalNotifications = feed.total;\n\n    vm.totalUnseenNotifications = Number();\n\n    vm.fetch = function() {\n      CurrentUser.getFeed({count: vm.max})\n    };\n\n    $scope.$watch(function() { return CurrentUser.data.feed}, function(feed){\n      vm.total = feed.length;\n\n      vm.totalUnseenNotifications = _.filter(feed, function(n) {\n        return n.seen === false;\n      }).length;\n\n      if($stateParams.category == 'all') {\n        angular.copy(feed, vm.notifications);\n      } else {\n        angular.copy(\n          _.filter(feed, {type: $stateParams.category.substring(0,$stateParams.category.length-1)}),\n          vm.notifications);\n      }\n\n      vm.categories = [\n        {\n          name: 'All',\n          state: 'account.notifications({category:\"all\"})',\n          count: feed.length\n        },\n        {\n          name: 'Mentions',\n          state: 'account.notifications({category:\"mentions\"})',\n          count: _(feed).filter({type: 'mention'}).value().length\n        },\n        {\n          name: 'Subscribed Events',\n          state: 'account.notifications({category:\"subscribed_events\"})',\n          count: _(feed).filter({type: 'subscribed_event'}).value().length\n        }\n      ];\n    }, true);\n\n    vm.markAllAsRead = function() {\n      CurrentUser.markAllAsRead().then(function() {\n        Security.reloadCurrentUser(); // to update notification counts\n      });\n    }\n  }\n\n  // @ngInject\n  function AccountProfileController() {\n    console.log('AccountProfileController called.');\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.common')\n    .directive('notification', notification);\n\n  // @ngInject\n  function notification() {\n    return {\n      restrict: 'E',\n      scope: {\n        notification: '=',\n        theme: '='\n      },\n      templateUrl: 'app/views/account/components/notification.tpl.html',\n      controller: notificationController\n    };\n  }\n\n  // @ngInject\n  function notificationController($scope, $state, CurrentUser, _) {\n    console.log('notificationController called.');\n    var vm = $scope.vm = {};\n    var params = $scope.notification.event.state_params;\n\n    vm.seen = $scope.notification.seen;\n\n    vm.entityNames = [];\n\n    if(_.has(params, 'gene')) {vm.entityNames.push(params.gene.name);}\n    if(_.has(params, 'variant')) {vm.entityNames.push(params.variant.name);}\n    if(_.has(params, 'evidence_item')) {vm.entityNames.push(params.evidence_item.name);}\n\n    vm.entityName = _.compact(vm.entityNames).join(' / ');\n\n    vm.eventClick = function(notification) {\n      var subjectStates = {\n        genes: 'events.genes',\n        variants: 'events.genes.summary.variants',\n        variantgroups: 'events.genes.summary.variantGroups',\n        evidenceitems: 'events.genes.summary.variants.summary.evidence'\n      };\n\n      // revision comments require some more logic to determine the proper state\n      if(notification.event.subject_type === 'suggestedchanges') {\n        var state;\n        var type = notification.event.state_params.suggested_change.subject_type;\n        if(type === 'evidenceitems') {\n          state = 'events.genes.summary.variants.summary.evidence';\n        } else if (type === 'variantgroups') {\n          state = 'events.genes.summary.variantGroups';\n        } else if (type === 'variants') {\n          state = 'events.genes.summary.variants';\n        } else if (type === 'genes') {\n          state = 'events.genes';\n        }\n        subjectStates.suggestedchanges = state;\n      }\n\n\n      var stateExtension = {\n        'commented': '.talk.comments',\n        'submitted': '.summary',\n        'accepted': '.summary',\n        'rejected': '.summary',\n        'change suggested': '.talk.revisions.list.summary',\n        'change accepted': '.talk.revisions.list.summary',\n        'change rejected': '.talk.revisions.list.summary'\n      };\n\n      // revision comments are shown in their revision's summary view, override commented extension\n      if(notification.event.subject_type === 'suggestedchanges') {\n        stateExtension.commented = '.talk.revisions.list.summary';\n      }\n\n      var stateParams = {};\n      _.each(notification.event.state_params, function(obj, entity) {\n        var entityId;\n        if(entity === 'suggested_change') {\n          entityId = 'revisionId';\n        } else if (entity === 'evidence_item') {\n          entityId = 'evidenceId';\n        } else if (entity === 'variant_group') {\n          entityId = 'variantGroupId';\n        } else {\n          entityId = entity + 'Id';\n        }\n        stateParams[entityId] = obj.id;\n      });\n\n      $state.go(subjectStates[notification.event.subject_type]+stateExtension[notification.event.event_type], stateParams);\n\n    };\n\n    vm.markAsSeen = function() {\n      CurrentUser.markAsRead($scope.notification.id);\n    }\n  }\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('components/directives/cancelButton.tpl.html',\n    '<a ng-click=\"cancel()\"><button type=\"button\" class=\"btn btn-default btn-md\">Cancel</button></a>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('components/directives/civicLogo.tpl.html',\n    '<div class=\"civicLogo\"><a ui-sref=\"home\"><div ng-switch=\"\" on=\"$root.view.navMode\"><span ng-switch-when=\"home\"><img src=\"assets/images/CIViC_logo.png\" alt=\"CIViC: Clinical Interpretations of Variations in Cancer\" width=\"375\" height=\"240\" class=\"img-responsive\"></span> <span ng-switch-when=\"sub\"><img src=\"assets/images/CIViC_logo_sm.png\" alt=\"CIViC: Clinical Interpretations of Variations in Cancer\" width=\"155\" height=\"76\"></span></div></a></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('components/directives/eventEntity.tpl.html',\n    '<div class=\"eventEntity\"><span ng-switch=\"event.event_type\"><span ng-switch-when=\"commented\">&nbsp;commented on</span> <span ng-switch-when=\"submitted\">&nbsp;submitted</span> <span ng-switch-when=\"accepted\">&nbsp;accepted</span> <span ng-switch-when=\"rejected\">&nbsp;rejected</span> <span ng-switch-when=\"change suggested\">&nbsp;suggested a revision to</span> <span ng-switch-when=\"change accepted\">&nbsp;accepted a revision to</span> <span ng-switch-when=\"change rejected\">&nbsp;rejected a revision to</span> <span ng-switch-default=\"\"></span></span> <span ng-switch=\"event.subject_type\"><span ng-switch-when=\"genes\"><span class=\"subject-type\">gene</span></span> <span ng-switch-when=\"variants\"><span class=\"subject-type\">variant</span></span> <span ng-switch-when=\"variantgroups\"><span class=\"subject-type\">variant group</span></span> <span ng-switch-when=\"evidenceitems\"><span class=\"subject-type\">evidence item</span></span> <span ng-switch-when=\"suggestedchanges\"><span class=\"subject-type\">a suggested revision to</span></span></span> <strong><span ng-bind=\"vm.entityName\">GENE / VARIANT / EVIDENCE</span></strong></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('components/directives/eventItem.tpl.html',\n    '<div class=\"eventItem\" ng-click=\"vm.eventClick(event)\" ng-class=\"{ hover: mouseover, dark: theme === \\'dark\\', light: theme === \\'light\\', unseen: vm.seen === false }\" ng-mouseover=\"mouseover=true\" ng-mouseleave=\"mouseover=false\"><div class=\"user-time\"><user-block user=\"event.user\"></user-block>&nbsp;<span ng-bind=\"event.timestamp|timeAgo\">time ago</span><br></div><div class=\"entity\"><span ng-switch=\"event.event_type\"><span ng-switch-when=\"commented\">&nbsp;commented on</span> <span ng-switch-when=\"submitted\">&nbsp;submitted</span> <span ng-switch-when=\"accepted\">&nbsp;accepted</span> <span ng-switch-when=\"rejected\">&nbsp;rejected</span> <span ng-switch-when=\"change suggested\">&nbsp;suggested a revision to</span> <span ng-switch-when=\"change accepted\">&nbsp;accepted a revision to</span> <span ng-switch-when=\"change rejected\">&nbsp;rejected a revision to</span> <span ng-switch-default=\"\"></span></span> <span ng-switch=\"event.subject_type\"><span ng-switch-when=\"genes\"><span class=\"subject-type\">gene</span></span> <span ng-switch-when=\"variants\"><span class=\"subject-type\">variant</span></span> <span ng-switch-when=\"variantgroups\"><span class=\"subject-type\">variant group</span></span> <span ng-switch-when=\"evidenceitems\"><span class=\"subject-type\">evidence item</span></span> <span ng-switch-when=\"suggestedchanges\"><span class=\"subject-type\">a suggested revision to</span></span></span> <strong><span ng-bind=\"vm.entityName\">GENE / VARIANT / EVIDENCE</span></strong></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('components/directives/footerMenu.tpl.html',\n    '<div class=\"footerMenu\"><div class=\"pull-right\"><div class=\"footer-menu\"><ul><li ng-repeat=\"item in menuItems\" ui-sref-active=\"active\"><div ng-if=\"item.url\"><a href=\"https://genome.github.io/civic-api-docs/\">{{item.label}}</a></div><div ng-if=\"item.state\"><a ui-sref=\"{{ item.state}}\">{{ item.label }}</a></div></li></ul></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('components/directives/headerSearch.tpl.html',\n    '<div class=\"headerSearch\" ng-show=\"$root.view.navMode == \\'home\\'\"><quick-search class=\"col-xs-5 col-md-12\"></quick-search><div class=\"col-xs-7 col-md-12\"><div class=\"row button-row\"><div ng-class=\"{\\'col-xs-3\\': vm.isAuthenticated(), \\'col-xs-4\\': !vm.isAuthenticated()}\"><a type=\"button\" class=\"btn btn-sm btn-default btn-block btn-subhead-default\" ng-disabled=\"$state.includes(\\'browse\\')\" ui-sref=\"browse.variants\">Browse</a></div><div ng-class=\"{\\'col-xs-3\\': vm.isAuthenticated(), \\'col-xs-4\\': !vm.isAuthenticated()}\"><a type=\"button\" class=\"btn btn-default btn-sm btn-block btn-subhead-default\" ng-disabled=\"$state.includes(\\'search\\')\" ui-sref=\"search.evidence\">Search</a></div><div ng-class=\"{\\'col-xs-3\\': vm.isAuthenticated(), \\'col-xs-4\\': !vm.isAuthenticated()}\"><a type=\"button\" class=\"btn btn-default btn-sm btn-block btn-subhead-default\" ng-disabled=\"$state.includes(\\'activity\\')\" ui-sref=\"activity\">Activity</a></div><div ng-if=\"vm.isAuthenticated()\" ng-class=\"{\\'col-xs-3\\': vm.isAuthenticated(), \\'col-xs-4\\': !vm.isAuthenticated()}\"><a type=\"button\" class=\"btn btn-default btn-sm btn-block btn-subhead-default\" ng-disabled=\"!vm.isAuthenticated()\" ui-sref=\"add.evidence.basic\">Add</a></div></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('components/directives/loginButton.tpl.html',\n    '<div class=\"loginButton\"><div ng-show=\"isAuthenticated()\" class=\"user-controls\"><div class=\"btn-group\" dropdown=\"\"><button type=\"button\" class=\"btn btn-xs btn-info\" ui-sref=\"users.profile({userId: currentUser.id})\"><span class=\"avatar\"><img ng-src=\"{{currentUser.avatars.x14}}\" width=\"14\" height=\"14\"></span> <span class=\"username\">{{currentUser.display_name}}</span></button> <button type=\"button\" class=\"btn btn-xs btn-info dropdown-toggle\" dropdown-toggle=\"\"><span ng-bind=\"totalNotifications\" class=\"badge small\"></span> <span class=\"caret\"></span></button><ul class=\"dropdown-menu dropdown-menu-right\" role=\"menu\"><li ng-if=\"hasNotifications\" class=\"dropdown-header\">Notifications<br></li><li ng-repeat=\"(label, count) in currentUser.unread_notifications\"><a ui-sref=\"account.notifications({category: \\'{{label}}\\'})\"><span ng-bind=\"label | keyToLabel\">type</span> <span ng-bind=\"count\" class=\"badge\">count</span></a></li><li class=\"dropdown-header\">Account</li><li><a ui-sref=\"account.notifications\">My Account</a></li><li><a ng-click=\"logout(currentUrl)\">Sign Out</a></li><li ng-if=\"isEditor()\" class=\"dropdown-header\">Administrator Tools</li><li ng-if=\"isEditor()\"><a ng-href=\"{{adminUrl}}\" target=\"_blank\">Admin Console</a></li></ul></div></div><div ng-hide=\"isAuthenticated()\" class=\"viewer-controls\"><button class=\"btn btn-xs btn-login\" ng-click=\"showLogin()\">Sign In/Sign Up</button></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('components/directives/loginToolbar.tpl.html',\n    '<div class=\"loginToolbar\"><div class=\"login-toolbar-lg hidden-xs hidden-sm\"><login-button></login-button></div><div class=\"login-toolbar-sm hidden-md hidden-lg\"><login-button user=\"currentUser\" admin-url=\"adminUrl\"></login-button></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('components/directives/mainMenu.tpl.html',\n    '<div class=\"mainMenu\"><div class=\"main-menu-lg hidden-xs hidden-sm\"><ul><li ng-repeat=\"item in menuItems\" ui-sref-active=\"active\"><a ui-sref=\"{{ item.state}}\">{{ item.label }}</a></li><li><login-toolbar></login-toolbar></li></ul></div><div class=\"main-menu-sm hidden-md hidden-lg\"><ul class=\"main-menu-sm hidden-md hidden-lg\"><li ng-repeat=\"item in menuItems\" ui-sref-active=\"active\"><a ui-sref=\"{{ item.state}}\">{{ item.label }}</a></li><li style=\"position: relative;\"><login-toolbar></login-toolbar></li></ul></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('components/directives/mentionItem.tpl.html',\n    '<div class=\"mentionItem\" ng-click=\"vm.eventClick(mention.event)\" ng-class=\"{ hover: mouseover, dark: theme === \\'dark\\', light: theme === \\'light\\', unseen: vm.seen === false }\" ng-mouseover=\"mouseover=true\" ng-mouseleave=\"mouseover=false\"><div class=\"user-time\"><user-block user=\"mention.originating_user\"></user-block>&nbsp;mentioned you <span ng-bind=\"mention.created_at|timeAgo\">time ago</span><br></div><div class=\"entity\">in a comment on <span ng-switch=\"mention.event.subject_type\"><span ng-switch-when=\"genes\"><span class=\"subject-type\">gene</span></span> <span ng-switch-when=\"variants\"><span class=\"subject-type\">variant</span></span> <span ng-switch-when=\"variantgroups\"><span class=\"subject-type\">variant group</span></span> <span ng-switch-when=\"evidenceitems\"><span class=\"subject-type\">evidence item</span></span> <span ng-switch-when=\"suggestedchanges\"><span class=\"subject-type\">a suggested revision to</span></span></span> <strong><span ng-bind=\"vm.entityName\">GENE / VARIANT / EVIDENCE</span></strong></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('components/directives/quickSearch.tpl.html',\n    '<div class=\"quickSearch\"><form class=\"form-horizontal\"><div class=\"input-group\"><input type=\"text\" class=\"form-control input-sm\" ng-model=\"asyncSelected.model\" placeholder=\"Go to Genes & Variants\" typeahead=\"gene as gene.label for gene in getVariants($viewValue)\" typeahead-editable=\"false\" typeahead-loading=\"loadingGenes\" typeahead-on-select=\"onSelect($item, $model, $label)\" typeahead-append-to-body=\"true\"> <span class=\"input-group-btn\"><button class=\"btn btn-default btn-sm\" type=\"button\" ng-click=\"onGo(this)\">Go!</button></span></div></form></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('components/directives/statsBlock.tpl.html',\n    '<div class=\"statsBlock {{ vm.cols}}\"><div class=\"info\"><table class=\"table table-condensed\"><colgroup><col width=\"70%\"><col width=\"30%\"></colgroup><tr class=\"title\"><td colspan=\"2\" ng-bind=\"vm.title\">TITLE</td></tr><tr class=\"new\"><td class=\"key\">This Week:</td><td class=\"value\" ng-bind=\"vm.stats.new_this_week\">8</td></tr><tr class=\"new\"><td class=\"key\">This Month:</td><td class=\"value\" ng-bind=\"vm.stats.new_this_month\">88</td></tr><tr class=\"new\"><td class=\"key\">This Year:</td><td class=\"value\" ng-bind=\"vm.stats.new_this_year\">888</td></tr><tr class=\"total\"><td class=\"key\">Total:</td><td class=\"value\" ng-bind=\"vm.stats.total\">total</td></tr></table></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('components/directives/subheader.tpl.html',\n    '<div class=\"subheader\" ng-hide=\"$root.view.navMode == \\'home\\'\"><div class=\"container-fluid\"><div class=\"subheader-bg\"><div class=\"row\"><div class=\"col-xs-4 subhead-input\"><quick-search></quick-search></div><div class=\"col-xs-2 subhead-btn\"><a type=\"button\" class=\"btn btn-sm btn-default btn-block btn-subhead-default\" ng-disabled=\"$state.includes(\\'browse\\')\" ui-sref=\"browse.variants\">Browse</a></div><div class=\"col-xs-2 subhead-btn\"><a type=\"button\" class=\"btn btn-default btn-sm btn-block btn-subhead-default\" ng-disabled=\"$state.includes(\\'search\\')\" ui-sref=\"search.evidence\">Search</a></div><div class=\"col-xs-2 subhead-btn\"><a type=\"button\" class=\"btn btn-default btn-sm btn-block btn-subhead-default\" ng-disabled=\"$state.includes(\\'activity\\')\" ui-sref=\"activity\">Activity</a></div><div class=\"col-xs-2 subhead-btn\"><div ng-switch=\"isAuthenticated()\"><div ng-switch-when=\"false\"><span tooltip=\"Please sign in to add Evidence\" tooltip-append-to-body=\"true\"><a type=\"button\" class=\"btn btn-sm btn-subhead-emphasized btn-block disabled\" ui-sref=\"add.evidence.basic\">Add</a></span></div><div ng-switch-when=\"true\"><a type=\"button\" class=\"btn btn-sm btn-subhead-emphasized btn-block\" ng-disabled=\"$state.includes(\\'add.evidence\\')\" ng-href=\"{{ addEvidenceUrl }}\">Add</a></div></div></div></div></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('components/directives/userBlock.tpl.html',\n    '<span class=\"userBlock\"><button type=\"button\" class=\"btn btn-xs btn-user\" ui-sref=\"users.profile({userId: user.id})\"><div ng-switch=\"user.username === \\'Admin\\'\"><div ng-switch-when=\"false\"><span class=\"avatar\"><img ng-src=\"{{user.avatars.x14}}\" width=\"14\" height=\"14\"></span> <span class=\"username\">{{user.display_name}}</span></div><div ng-switch-when=\"true\"><span class=\"username\" style=\"margin-left: 5px;\">Admin</span></div></div></button></span>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('components/directives/userCard.tpl.html',\n    '<div class=\"userCard\" ng-click=\"vm.userClick(vm.user.id)\" ng-class=\"vm.user.role\"><div class=\"avatar\"><img ng-src=\"{{vm.user.avatars.x64}}\" width=\"64\" height=\"64\"></div><div class=\"info\"><span class=\"display-name\" ng-bind=\"vm.user.display_name\">display name</span><br><span class=\"role\" ng-class=\"vm.user.role\" ng-bind=\"vm.user.role | capitalize\">role</span><br><span ng-if=\"vm.user.area_of_expertise\"><span class=\"area-of-expertise\" ng-bind=\"vm.user.area_of_expertise\">expertise</span><br></span><br><span ng-if=\"vm.user.last_seen_at\"><span class=\"title\">Last seen:</span><br><span class=\"last-seen\" ng-bind=\"vm.user.last_seen_at | timeAgo\">last seen</span><br></span> <span ng-if=\"vm.user.activity_level\"><span class=\"title\">Activity Level:</span> <span class=\"activity-level\" ng-bind=\"vm.user.activity_level\">888</span><br></span> <span ng-if=\"vm.user.last_event\"><span class=\"title\">Last Event:</span><div class=\"entity\"><span ng-switch=\"vm.user.last_event.event_type\"><span ng-switch-when=\"commented\">&nbsp;commented on</span> <span ng-switch-when=\"submitted\">&nbsp;submitted</span> <span ng-switch-when=\"accepted\">&nbsp;accepted</span> <span ng-switch-when=\"rejected\">&nbsp;rejected</span> <span ng-switch-when=\"change suggested\">&nbsp;suggested a revision to</span> <span ng-switch-when=\"change accepted\">&nbsp;accepted a revision to</span> <span ng-switch-when=\"change rejected\">&nbsp;rejected a revision to</span> <span ng-switch-default=\"\"></span></span> <span ng-switch=\"vm.user.last_event.subject_type\"><span ng-switch-when=\"genes\"><span class=\"subject-type\">gene</span></span> <span ng-switch-when=\"variants\"><span class=\"subject-type\">variant</span></span> <span ng-switch-when=\"variantgroups\"><span class=\"subject-type\">variant group</span></span> <span ng-switch-when=\"evidenceitems\"><span class=\"subject-type\">evidence item</span></span> <span ng-switch-when=\"suggestedchanges\"><span class=\"subject-type\">a suggested revision to</span></span></span><br><strong><span ng-bind=\"vm.entityName\">GENE / VARIANT / EVIDENCE</span></strong></div></span></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('components/directives/userImage.tpl.html',\n    '<div class=\"userImage\"><span ng-switch=\"ctrl.hasAvatar\"><span ng-switch-when=\"true\"><img ng-src=\"{{ctrl.user.avatar_url}}\" width=\"{{ ctrl.width }}\" height=\"{{ ctrl.height }}\"></span> <span ng-switch-default=\"\"><img ng-src=\"assets/images/default-user-img.jpg\" width=\"{{ ctrl.width }}\" height=\"{{ ctrl.height }}\"></span></span></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/pages/about.tpl.html',\n    '<div class=\"aboutPage\"><div class=\"title-row\"><div class=\"row\"><div class=\"col-xs-12\"><div class=\"name\"><h3><a name=\"top\" style=\"text-decoration: none; color: inherit;\">About</a></h3></div></div></div></div><div class=\"row\"><div class=\"col-xs-2\"><div class=\"well affix\"><ul class=\"nav nav-pills nav-stacked about-nav\"><li du-scrollspy=\"top\"><a du-smooth-scroll=\"top\">About CIViC</a></li><li du-scrollspy=\"domain-experts\"><a du-smooth-scroll=\"domain-experts\">Domain Experts</a></li><li du-scrollspy=\"partners\"><a du-smooth-scroll=\"partners\">Partners</a></li></ul></div></div><div class=\"col-xs-8\"><p><strong>Advancing Cancer Precision Medicine with Community Collaboration</strong><br>Precision medicine refers to the use of prevention and treatment strategies that are tailored to the unique features of each individual and their disease. In the context of cancer this might involve the identification of specific mutations shown to predict response to a targeted therapy. The biomedical literature describing these associations is large and growing rapidly. Currently these interpretations exist largely in private or encumbered databases resulting in extensive repetition of effort. Realizing precision medicine will require this information to be centralized, debated and interpreted for application in the clinic. CIViC is an open access, open source, community-driven web resource for Clinical Interpretation of Variants in Cancer. Our goal is to enable precision medicine by providing an educational forum for dissemination of knowledge and active discussion of the clinical significance of cancer genome alterations.</p><p><strong>How our Collaborative Process is Different</strong><br>All content created in CIViC is, and will continue to be, freely available, with minimal restriction (<a href=\"http://creativecommons.org/licenses/by/4.0/\">Creative Commons Attribution 4.0</a>). Anyone can contribute to CIViC by simply registering for an account. Users join the community with \"Curator\" level privileges that allow them to comment or propose additions or revisions on any knowledge in CIViC. Proposed additions and revisions are then reviewed by users with \"Editor\" level privileges before entering the public CIViC record. Community curators work together with editors towards comprehensive and accurate interpretations of the clinical relevance of variants in cancer.</p></div></div><div class=\"row\"><div class=\"col-xs-8 col-xs-offset-2\"><p></p><h4><a name=\"domain-experts\" style=\"text-decoration: none; color: inherit;\">Domain Experts</a></h4><p></p><p>Our <em>Domain Experts</em> serve a critical function in the <a ui-sref=\"community.main\">CIViC community</a>. Normally editor-level users, they are tasked with promoting and maintaining high quality data and interpretations in CIViC. Domain Experts are usually scientists or physician scientists, with advanced degrees (PhD or MD level), and demonstrated expertise (publication records) relevant to curation of knowledge for precision medicine in cancer. Domain Experts will typically take responsibility for curating the literature related to a specific cancer type, gene/pathway, or mutation type. They also are responsible for approving any new submissions or revisions from other curators in their domain area. Domain Experts come from two sources. First, individuals with established expertise in the field of precision medicine or domain expertise for a specific domain are identified and invited to join the CIViC community at the Domain Expert level. Alternatively, individuals may be promoted to Domain Expert level based on expertise demonstrated through an exceptional contribution history in CIViC.</p></div></div><div class=\"row expert-row\" ng-repeat=\"expert in vm.experts track by $index\"><div class=\"col-xs-3 col-sm-2 col-lg-2 col-sm-offset-1 col-md-offset-2 expert-image\"><div class=\"image\"><img ng-src=\"{{expert.avatars.x270}}\" width=\"270\" height=\"270\" class=\"img-responsive\"></div></div><div class=\"col-xs-9 col-sm-8 col-md-6 expert-description\"><div class=\"description\"><h4 ng-bind=\"expert.name\">NAME</h4><p class=\"small\"><strong>Display name:</strong><user-block user=\"expert\"></user-block>&nbsp;&nbsp; <strong>Role:</strong> {{expert.role}} &nbsp;&nbsp; <strong>Area of Expertise:</strong> {{expert.area_of_expertise}}</p><p ng-bind-html=\"expert.description|unsafe\">Description</p></div></div></div><div class=\"row\"><div class=\"col-xs-8 col-xs-offset-2\"><p></p><h4><a name=\"partners\" style=\"text-decoration: none; color: inherit;\">Partners:</a></h4><p></p></div></div><div class=\"row expert-row\" ng-repeat=\"partner in vm.partners track by $index\"><div class=\"col-xs-3 col-sm-2 col-lg-2 col-sm-offset-1 col-md-offset-2 expert-image\"><div class=\"image\"><img ng-src=\"{{partner.avatars.x270}}\" width=\"270\" height=\"270\" class=\"img-responsive\"></div></div><div class=\"col-xs-9 col-sm-8 col-md-6 expert-description\"><div class=\"description\"><h4 ng-bind=\"partner.name\">NAME</h4><p ng-bind-html=\"partner.description|unsafe\">Description</p></div></div></div><div class=\"row\" style=\"margin-bottom: 600px;\"></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/pages/apiDocumentation.tpl.html',\n    '<div class=\"apiDocs\"><div class=\"title-row\"><div class=\"row\"><div class=\"col-xs-12\"><div class=\"name\"><h3>API Documentation</h3></div></div></div></div><div class=\"row\"><div class=\"col-xs-12 col-xs-offset-0 col-md-10 col-md-offset-1 col-lg-8 col-lg-offset-2\"><p>CIViC provides a simple API that can be utilized over HTTP in the programming language of your choice or even at the command line.</p><p>The CIViC API attempts to be RESTful whenever appropriate which hopefully makes it intuitive to use. There are four main entities in the system that a user may interact with: Genes, Variants, Variant Groups, and Evidence Items. These entities form a hierarchy that is reflected in the API endpoints. A Gene has one or more Variants, each of which may have one or more Evidence Items. Variants may also be collected into Variant Groups.</p><br><h4>Genes</h4><hr><pre>\\n' +\n    '<strong>GET</strong> /api/genes\\n' +\n    '<strong>GET</strong> /api/genes/:gene_id\\n' +\n    '    </pre><p>The genes endpoint can be used to get either a list of all genes in the system, or more detailed information for a single gene using a gene_id in the url string. As an example, here is (clickable) sample request for the gene \"BRAF\" (gene_id: 5)</p><pre>\\n' +\n    '<strong>GET</strong> <a href=\"/api/genes/5\" target=\"_blank\">/api/genes/5</a>\\n' +\n    '    </pre><p>You can always use the API call one level up the hierarchy to retrieve a list of IDs for the entity you are interested in. For instance, the genes endpoint will return a list of Variant IDs for that Gene.</p><br><h4>Variants</h4><hr><pre>\\n' +\n    '<strong>GET</strong> /api/genes/:gene_id/variants\\n' +\n    '    </pre><p>The variants endpoint can be used to retrieve a list of all variants for a single gene (using an Entrez ID), or a more detailed view of a specific variant (using the Entrez ID and variant ID).</p><pre>\\n' +\n    '<strong>GET</strong> <a href=\"/api/variants/12\" target=\"_blank\">/api/variants/12</a>\\n' +\n    '    </pre><br><h4>Evidence Items</h4><hr><p>The variants endpoint may retrieve a list of evidence items linked to a variant:</p><pre>\\n' +\n    '<strong>GET</strong> /api/variants/:variant_id/evidence_items\\n' +\n    '    </pre><p>The evidence items endpoint may then be used to retrieve a more detailed view of a specific evidence_item:</p><pre>\\n' +\n    '<strong>GET</strong> <a href=\"/api/evidence_items/79\" target=\"_blank\">/api/evidence_items/79</a>\\n' +\n    '    </pre><br><h4>Other Features</h4><hr><pre>\\n' +\n    '<strong>GET</strong> /api/genes/:gene_id/comments\\n' +\n    '<strong>GET</strong> /api/genes/:gene_id/revisions\\n' +\n    '<strong>GET</strong> /api/genes/:gene_id/suggested_changes\\n' +\n    '<strong>GET</strong> /api/genes/:gene_id/suggested_changes/:change_id/comments\\n' +\n    '    </pre><p>Each of the four main entities in the system (Genes, Variants, Variant Groups, and Evidence Items) also support additional endpoints for comments, version history, and suggested changes. Suggested changes can also have comments themselves. These endpoints can be accessed by adding the appropriate resource name (comments, revisions, suggested_changes) to the end of the route for the entity that you are interested in. For example, to get a list of revisions for the gene \"BRAF\":</p><pre>\\n' +\n    '<strong>GET</strong> <a href=\"/api/genes/5/revisions\" target=\"_blank\">/api/genes/5/revisions</a>\\n' +\n    '    </pre><p>We are working on additional API support and documentation. Soon, you will be able to do anything you do from the site (add comments, suggest new evidence items, etc) directly from the API.</p></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/pages/authTest.tpl.html',\n    '<h1>Requires Auth</h1><p>{{ loadedMsg }}</p>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/pages/contact.tpl.html',\n    '<div class=\"contactPage\"><div class=\"title-row\"><div class=\"row\"><div class=\"col-xs-12\"><div class=\"name\"><h3>Contact</h3></div></div></div></div><div class=\"row\"><div class=\"col-xs-12 col-xs-offset-0 col-md-10 col-md-offset-1 col-lg-8 col-lg-offset-2\"><div class=\"row\" style=\"padding-top: 16px;\"><div class=\"col-xs-6\"><dl><dt>Nicholas Spies - Lead Curator</dt><dd><a href=\"https://www.linkedin.com/pub/nicholas-spies/49/699/75a\">LinkedIn profile</a></dd><br><dt>Kilannin Krysiak, PhD - Lead Curator</dt><dd><a href=\"http://genome.wustl.edu/people/individual/kilannin-krysiak/\">Genome Institute profile</a></dd><br><dt>Benjamin Ainscough - Curator</dt><dd><a href=\"http://genome.wustl.edu/people/individual/benjamin-ainscough/\">Genome Institute profile</a></dd><br><dt>Adam Coffman - Lead Web/Software (Back End) Developer</dt><dd><a href=\"https://github.com/acoffman\">GitHub Profile</a></dd><br><dt>Josh McMichael - Lead User Experience (Front End) Developer</dt><dd><a href=\"http://genome.wustl.edu/people/individual/joshua-mcmichael/\">Genome Institute profile</a>, <a href=\"https://github.com/jmcmichael\">GitHub Profile</a></dd><br><dt>Other Curators</dt><dd>Mayank Choudhary, Jason Kunisaki, Deng Pan, Lynzey Kujan. For a complete list, refer to the <a ui-sref=\"community.main\">Community Page</a>.</dd><br><dt>Other Developers</dt><dd><a href=\"https://github.com/JonChristensen\">Jon Christensen</a>, <a href=\"https://github.com/gkarthik\">Karthik Gangavarapu</a></dd></dl></div><div class=\"col-xs-6\"><dl><dt>Elaine Mardis, PhD - PI/Mentor, Funding</dt><dd><a href=\"http://genome.wustl.edu/people/individual/elaine-mardis/\">Genome Institute profile</a></dd><br><dt>Rick Wilson, PhD - PI/Mentor, Funding</dt><dd><a href=\"http://genome.wustl.edu/people/individual/richard-wilson/\">Genome Institute profile</a></dd><br><dt>Malachi Griffith, PhD - Creator, Curator, PI/Mentor, Funding</dt><dd><a href=\"http://genome.wustl.edu/people/individual/malachi-griffith/\">Genome Institute profile</a></dd><br><dt>Obi Griffith, PhD - Creator, Curator, PI/Mentor, Funding</dt><dd><a href=\"http://genome.wustl.edu/people/individual/obi-griffith/\">Genome Institute profile</a></dd><br><br><dt>News and updates:</dt><dd>Please subscribe by emailing the mailing list:<br><a href=\"mailto:civic-news-subscribe@genome.wustl.edu\">civic-news-subscribe@genome.wustl.edu</a></dd><br><dt>General inquiries:</dt><dd>Please email <a href=\"mailto:civic-help@genome.wustl.edu\">civic-help@genome.wustl.edu</a></dd><br><dt>Bug reports and feature requests:</dt><dd>Please create an issue in the <a href=\"https://github.com/genome/civic-server/issues\">civic-server</a> or <a href=\"https://github.com/genome/civic-client/issues\">civic-client</a> github repos as appropriate</dd><br></dl></div></div></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/pages/faq.tpl.html',\n    '<div class=\"faqPage\"><div class=\"title-row\"><div class=\"row\"><div class=\"col-xs-12\"><div class=\"name\"><h3>Frequently Asked Questions</h3></div></div></div></div><div class=\"row\"><div class=\"col-xs-12 col-xs-offset-0 col-md-10 col-md-offset-1 col-lg-8 col-lg-offset-2\"><p><strong><i>What is CIViC?</i></strong><br>CIViC is an open access, open source, community-driven web resource for Clinical Interpretation of Variants in Cancer. Our goal is to enable precision medicine by providing an educational forum for dissemination of knowledge and active discussion of the clinical significance of cancer genome alterations.</p><p><strong><i>What is precision medicine?</i></strong><br>Precision medicine refers to the use of prevention and treatment strategies that are tailored to the unique features of each individual and their disease. In the context of cancer this might involve the identification of specific mutations known to predict response to a targeted therapy. You can read more about this topic in summaries from the <a href=\"http://www.whitehouse.gov/the-press-office/2015/01/30/fact-sheet-president-obama-s-precision-medicine-initiative\">White House</a> and the <a href=\"http://www.nejm.org/doi/full/10.1056/NEJMp1500523#t=article\">New England Journal of Medicine</a>.</p><p><strong><i>Why crowdsourcing?</i></strong><br>The rapid expansion of the biomedical literature presents an intractable challenge for investigators and clinicians to interpret and synthesize, in real time, the complete array of knowledge available for each cancer-associated genomic variant into a clinically-relevant interpretation. Efforts to curate the clinical importance of variants have been undertaken by a diverse, but fragmented, community of individuals. Crowdsourcing leverages the resources of individuals to produce a centralized platform for this diverse community to discuss and share findings in their specialities. CIViC also serves as a platform for these contributors keep up to date on recent advances.</p><p><strong><i>Who should be using CIViC?</i></strong><br>CIViC is intended to bring together a diverse group of individuals interested in the clinical application and advancement of cancer genomics including health professionals (oncologists, pathologists and other clinicians), researchers (cancer genome and data scientists), and patient advocates.</p><p><strong><i>What are the characteristics of an \\'ideal\\' CIViC curator/editor?</i></strong><br>Here are some guidelines. A strong interest in clinical cancer genomics. Expertise and ideally a degree (e.g. PhD or MD) in a related field such as basic cancer biology, oncology, genomics, clinical informatics, etc. Trainees in these areas are also very welcome (e.g. PhD students, medical students, residents, and fellows). Skepticism. There is sometimes pressure in academia to present one\\'s research findings in a clinically relevant context. When CIViC evidence statements are created, the curator should aspire to conduct an objective assessment of how well the data presented really supports any assertion of clinical relevance. Open to sharing information with the community. Respectful of other contributors. Professional, truthful, ethical, and unbiased. All aspects of the CIViC project are open to debate and amendment, including these guidelines.</p><p><strong><i>What is a <b>Variant</b>?</i></strong><br>A variant in CIViC is any \\'omic\\' alteration associated with cancer. This includes single nucleotide variants (SNVs), insertion/deletion events (indels), copy number alterations (CNV\\'s), structural variants (SVs), transcript fusions, and other genomic/molecular events with cancer associations. Though we have focused on DNA changes, alterations that manifest at the RNA, protein, or epigenetic level are allowed, again as long as there is a demonstrated clinical relevance. In general, the concept of a variant in CIViC is very flexible but it is highly preferred that the variant be something that could be measured with some quantitative assay (NGS sequencing, qPCR, etc.).</p><p><strong><i>What kinds of Variants belong in CIViC? What does not?</i></strong><br>In order to be accepted by CIViC, a variant must be related to cancer and have some *clinical* relevance. Relevance to cancer biology alone is NOT sufficient unless there is also some documented relationship between the variant and diagnosis, prognosis, or response to a specific treatment. Variants related to diseases other than cancer should not be entered (there is some grey area for cancer like conditions). Most variants in CIViC are somatic but rare germline variants or common polymorphisms are also welcome (as long as they have diagnostic, prognostic or predictive value). The quality of evidence suggesting clinical relevance of a variant may vary considerably. Before contributing to CIViC please review the <a ui-sref=\"help.evidence\">data model</a>.</p><p><strong><i>What is an <b>Evidence Statement</b>?</i></strong><br>An evidence statement is an assertion about the clinical relevance of a variant that has been determined by an experiment, trial, or study from a published literature source. It captures a variant\\'s impact on clinical action, which can be predictive of therapy, correlated with prognostic outcome, or inform disease diagnosis. A single citation can be the source of multiple evidence statments but each evidence statment has only one source. A single evidence statement should correspond to only one clinical interpretation and disease. For example, if a paper describes both a predictive and prognostic relevance for a variant, two evidence statements should be created. If two publications, draw the same conclusions about the clinical relevance of a variant, these should also be entered as two evidence statements.</p><p><strong><i>How is this information organized?</i></strong><br>An in-depth description of the data model behind CIViC can be found <a ui-sref=\"help.evidence\">here</a>.</p><p><strong><i>What information is currently in CIViC?</i></strong><br>CIViC currently houses over 700 evidence statements about 312 variants in 132 genes across 90 cancer types, and these numbers are growing rapidly with your help! Refer to the <a ui-sref=\"home\">Home</a> page for up to date statistics.</p><p><strong><i>How do I contribute information?</i></strong><br>The <a ui-sref=\"participate\">Participate</a> tab details the curation process, with links for adding and editing information.</p><p><strong><i>My favorite Gene/Variant is not in CIViC?!?</i></strong><br>The extensive manual curation involved in adding evidence statements means we have not been able to populate a published evidence statement from every variant or gene of interest. This is precisely why we need community-driven efforts to grow this database. In order for a gene or variant to appear in CIViC, it must have an evidence statement associated with it. To add evidence statements and begin the discussion about your gene/variant of interest, go <a ui-sref=\"collaborate\">here</a>!</p><p><strong><i>May I enter unpublished results from n-of-1 observations?</i></strong><br>At this time, a publication is considered a minimum requirement for all evidence statements in CIViC. N-of-1 results from early stage clinical trials or patients treated under compassionate use doctrines are allowed, but only if a case report has been published in a peer reviewed journal. We are considering options for centers that wish to use a local instance of CIViC to capture unpublished individual patient observations.</p><p><strong><i>Why must my changes be approved by a moderator before I can see them?</i></strong><br>In an effort to ensure quality (and prevent automated spam), we require that edits be submitted to the review queue before they are shown on the live server. Moderators are used for this review step to protect the CIViC resource and will approve your changes as soon as possible. An editor, moderator or administrator may comment on your proposed addition or revision. You will be able to see your new content in a pending state while it awaits review. To expedite the review process, we encourage you to submit high quality evidence (evidence level of validated or clinical) as the top priority. Similarly, proposing evidence statements for a new variant or gene may take longer for the community to review.</p><p><strong><i>What is a Disease Ontology ID (DOID)?</i></strong><br>In order to provide a structured representation of the diseases associated with evidence statements, we ask that you use disease names as they exist in the Disease Ontology from <a href=\"http://disease-ontology.org/\">disease-ontology.org</a>. This allows for consistent representation and minimized ambiguity when referring to diseases. Such ontologies also support more flexible data queries that allow disease groupings ranging from generic terms to highly specific subtypes. If the disease ontology is missing an important recognized sub-type of disease, we will try to work with them to update their resource. Please contact us if you find such cases.</p><p><strong><i>What is a PubChem ID (PCID)?</i></strong><br>Providing a drug name recognized by PubChem with your evidence statement allows us to minimize ambiguity within drug naming. As a default, drug compound names are used instead of branded trade names in an effort to be as consistent across experiment types as possible. PubChem compounds can be searched <a href=\"https://pubchem.ncbi.nlm.nih.gov/\">here</a>. However, when a PubChem representation of a drug is not available, free-form text will be allowed.</p><p><strong><i>Where does this information come from? Can I submit my abstract?</i></strong><br>The information in CIViC is derived from peer-reviewed, published literature. Every evidence item currently requires a citation from a PubMed ID. This means that conference abstracts are not supported until they are peer-reviewed, published, and a PubMed ID is assigned.</p><p><strong><i>What does the \"Beta\" label on CIViC mean?</i></strong><br>This is in reference to the current software release state of CIViC. The \"Beta\" state indicates we are currently in the software testing phase with additional features and content actively being added.</p><p><strong><i>What if a drug is shown to have a negative effect on patients with a variant? Or the study was inconclusive?</i></strong><br>The data model, specifically the Evidence Direction field, is used to indicate whether the study supports or refutes (including inconclusive determinations) any interaction between the variant and a clinical action or result. The Clinical Significance field indicates the type of effect the variant is determined to have on clinical results within the evidence statement as having a positive, negative or neutral/no impact. These descriptions provide human readible interpretations of evidence statements that either support or refute sensitivity or resistance predictions to therapeutics (or other clinical outcomes). For more detailed definitions and specific examples, please review the data model <a ui-sref=\"help.evidence\">here</a>.</p><p><strong><i>My evidence statement disagrees with evidence from another source, should I still add it?</i></strong><br>Absolutely. CIViC is a forum for discussion of disagreements in the field or literature. Simply log in, go to the \"Variant Talk\" or \"Evidence Talk\" pages, and discuss this disagreement with the community.</p><p><strong><i>I don\\'t want to add evidence statements, can I still contribute?</i></strong><br>Yes. Evaluation of the literature is a collaborative effort. If you don\\'t want to add new evidence you can rate, edit or discuss existing evidence. You can also help to make sure the Variant Summary is an effective, consise, and accurate summary of the current set of evidence statements for each variant.</p><p><strong><i>What is MyGene.info?</i></strong><br><a href=\"http://mygene.info/\">MyGene.info</a> is a web service that allows simple query and retrieval of gene annotation data. We use it in CIViC to automatically import gene details from Entrez Gene (<a href=\"http://www.ncbi.nlm.nih.gov/gene\">http://www.ncbi.nlm.nih.gov/gene</a>) such as gene name, synonyms, protein domains and pathways. MyGene.info was created and is maintained by the <a href=\"http://sulab.org/\">Su Lab</a> (at The Scripps Research Institute).</p><p><strong><i>Is there an API I can access?</i></strong><br>Yes! Please visit the <a href=\"https://genome.github.io/civic-api-docs/\">API documentation</a> for more details.</p><p><strong><i>What is the difference between \"Supports a Negative association\" and \"Does not support a Positive association\"?</i></strong><br>This can be confusing. We have reserved \"Does not support - Positive\" for statements that contradict previous statements that are supporting positive associations. For example, they would read \"Contrary to the previous study which found this mutation sensitive to drug X, this study reported no effect.\" The information that this study \"Does not support\" the prior study\\'s conclusion is what we are trying to capture with these classifications.</p><p><strong><i>Where do I begin to curate evidence statements? Are certain evidence types or genes a priority?</i></strong><br>The evidence statements that make up CIViC are generated from peer-reviewed, published literature. Our top priority is high quality (4+ star rating) Evidence Level A and B statements that associate specific variants with clinical outcomes using well powered patient cohorts. To help direct users towards genes known to be associated with clinical outcomes, we have compiled a list of high priority genes which you can download <a href=\"https://github.com/genome/civic-server/tree/master/public/downloads/RankedCivicGeneCandidates.tsv\">here</a>. This list is based on a survey of 90 commerically available clinical gene panels developed by 40 distinct institutes and companies. If many independent groups feel that a gene is important to profile on their assay, it might be important. CIViC aims to spell out, with complete provenance, the evidence that each of these genes really is clinically important and why/how.</p><p><strong><i>Can I use a review article to create an evidence statement?</i></strong><br>Yes, but we urge caution when using such sources. It is generally preferable to find the primary source articles cited by the review article instead. Particularly, when a review article is describing contradictory findings from multiple studies. Individual evidence items created from each study should be created to capture this debate. The Variant Summary might be a better place to cite relevant review articles.</p><p><strong><i>How is CIViC licensed?</i></strong><br>The content of CIViC, hosted by <a href=\"http://genome.wustl.edu/\">The McDonnell Genome Institute at Washington University School of Medicine</a> is licensed under a <a href=\"http://creativecommons.org/licenses/by/4.0/\">Creative Commons Attribution 4.0 International License</a> and the source code for the CIViC <a href=\"https://github.com/genome/civic-server\">server</a> and <a href=\"https://github.com/genome/civic-client\">client</a> is licensed under the <a href=\"http://opensource.org/licenses/MIT\">MIT License</a>.</p></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/pages/glossary.tpl.html',\n    '<div class=\"glossary\"><div class=\"title-row\"><div class=\"row\"><div class=\"col-xs-12\"><div class=\"name\"><h3>Glossary of Terms</h3></div></div></div></div><div class=\"row\"><div class=\"col-xs-12 col-xs-offset-0 col-md-10 col-md-offset-1 col-lg-8 col-lg-offset-2\"><dl><dt ng-repeat-start=\"(key, value) in glossary.terms\">{{ key }}</dt><dd ng-repeat-end=\"\">{{ value }}</dd></dl></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/pages/graphics.tpl.html',\n    '<div class=\"civicGraphics\"><div class=\"title-row\"><div class=\"row\"><div class=\"col-xs-12\"><div class=\"name\"><h3>Presentation Graphics and Branding</h3></div></div></div></div><div class=\"row\"><div class=\"col-xs-12\"><p>These graphic files are provided to help presenters describe and discuss CIViC in presentations and other media. They are licensed under a <a href=\"http://creativecommons.org/licenses/by/4.0/\" target=\"_blank\">Creative Commons Attribution 4.0 International Licensed</a>, so you may modify and redistribute them as long as you provide attribution.</p></div></div><div class=\"row\"><div class=\"col-xs-12\"><h3 class=\"subtitle\">Ecosystem and Collaboration Diagrams</h3><p>Diagrams illustrating the CIViC ecosystem and collaboration process, in portrait format and high-resolution suitable for print, PDF, or ebook media.</p></div></div><div class=\"row\"><div class=\"col-xs-6 col-sm-offset-1 col-sm-3 col-lg-offset-1 col-lg-2 slide\"><div class=\"graphic\"><a href=\"/assets/images/presentation/GP-113_CIViC_schema-collaboration_DETAILED_v1a.png\" target=\"_blank\"><img src=\"/assets/images/presentation/GP-113_CIViC_schema-collaboration_DETAILED_v1a.png\" width=\"1074\" height=\"1280\" class=\"img-responsive\"></a></div></div><div class=\"col-xs-6 col-sm-7 col-lg-8 description\"><p class=\"title\">CIViC Collaboration and Schema (Detailed)</p><p>Provides a detailed flowchart of collaboration between CIViC\\'s various roles, and a detailed summary of the CIViC schema for Evidence Items</p></div></div><div class=\"row\"><div class=\"col-xs-6 col-sm-offset-1 col-sm-3 col-lg-offset-1 col-lg-2 slide\"><div class=\"graphic\"><a href=\"/assets/images/presentation/GP-113_CIViC_schema-collaboration_OVERVIEW_v1a.png\" target=\"_blank\"><img src=\"/assets/images/presentation/GP-113_CIViC_schema-collaboration_OVERVIEW_v1a.png\" width=\"1074\" height=\"1280\" class=\"img-responsive\"></a></div></div><div class=\"col-xs-6 col-sm-7 col-lg-8 description\"><p class=\"title\">CIViC Collaboration and Schema (Overview)</p><p>Provides an overview of CIViC collaboration and schema.</p></div></div><div class=\"row\"><div class=\"col-xs-6 col-sm-offset-1 col-sm-3 col-lg-offset-1 col-lg-2 slide\"><div class=\"graphic\"><a href=\"/assets/images/presentation/GP-103_Biothings_Overview_v2i.png\" target=\"_blank\"><img src=\"/assets/images/presentation/GP-103_Biothings_Overview_v2i.png\" width=\"1199\" height=\"1280\" class=\"img-responsive\"></a></div></div><div class=\"col-xs-6 col-sm-7 col-lg-8 description\"><p class=\"title\">Curation \\'Funnel\\' Diagram</p><p>Illustrates the distillation of clinically actionable knowledge from raw sequencing data, with an emphasis on the bottleneck created by the increasing high-level curation burden on research scientists. Useful to illustrate how CIViC can help alleviate this curation burden by turning the process into a collaborative, social effort.</p></div></div><div class=\"row\"><div class=\"col-xs-12\"><h3 class=\"subtitle\">Ecosystem and Collaboration Slides</h3><p>Diagrams illustrating the CIViC ecosystem and collaboration process, sized to a ratio appropriate for screen presentations.</p></div></div><div class=\"row\"><div class=\"col-xs-6 col-sm-offset-1 col-sm-3 col-lg-offset-1 col-lg-2 slide\"><div class=\"graphic\"><a href=\"/assets/images/presentation/GP-113_CIViC_schema-collaboration_PROCESS_v1a.png\" target=\"_blank\"><img src=\"/assets/images/presentation/GP-113_CIViC_schema-collaboration_PROCESS_v1a.png\" width=\"1074\" height=\"1280\" class=\"img-responsive\"></a></div></div><div class=\"col-xs-6 col-sm-7 col-lg-8 description\"><p class=\"title\">CIViC Collaboration Process</p><p>Only the process flowchart panel from the detailed CIViC flowchart/collaboration diagram.</p></div></div><div class=\"row\"><div class=\"col-xs-6 col-sm-offset-1 col-sm-3 col-lg-offset-1 col-lg-2 slide\"><div class=\"graphic\"><a href=\"/assets/images/presentation/GP-113_CIViC_schema-collaboration_SCHEMA_v1a.png\" target=\"_blank\"><img src=\"/assets/images/presentation/GP-113_CIViC_schema-collaboration_SCHEMA_v1a.png\" width=\"1074\" height=\"1280\" class=\"img-responsive\"></a></div></div><div class=\"col-xs-6 col-sm-7 col-lg-8 description\"><p class=\"title\">CIViC Evidence Item Schema</p><p>Just the schema panel from the detailed CIViC flowchart/collaboration diagram.</p></div></div><div class=\"row\"><div class=\"col-xs-6 col-sm-offset-1 col-sm-3 col-lg-offset-1 col-lg-2 slide\"><div class=\"graphic\"><a href=\"/assets/images/presentation/GP-113_CIViC-ecosystem_SLIDE_5_v1b.png\" target=\"_blank\"><img src=\"/assets/images/presentation/GP-113_CIViC-ecosystem_SLIDE_5_v1b.png\" width=\"1280\" height=\"1043\" class=\"img-responsive\"></a></div></div><div class=\"col-xs-6 col-sm-7 col-lg-8 description\"><p class=\"title\">CIViC Ecosystem Flowchart</p><p>A diagram showing CIViC users, stakeholders, curators, and how they all interact to provide clinically relevant information to researchers and clinicians.</p></div></div><div class=\"row\"><div class=\"col-xs-12\"><h3 class=\"subtitle\">CIViC Logos for Acknowledgement</h3><p>These logos and branding graphics are provided for use in describing, linking, or acknowledging the CIViC application. They are distributed under a <a href=\"https://creativecommons.org/licenses/by-nd/4.0/\" target=\"_blank\">Creative Commons 4.0 Attribution-NoDerivs license</a>, permitting their use in commercial and non-commercial contexts, and redistribution without modification as long attribution is included.</p></div></div><div class=\"row\"><div class=\"col-xs-6 col-sm-offset-1 col-sm-3 col-lg-offset-1 col-lg-2 slide\"><div class=\"graphic-sm\"><a href=\"/assets/images/favicon.png\" target=\"_blank\"><img src=\"/assets/images/favicon.png\" width=\"16\" height=\"16\"></a></div></div><div class=\"col-xs-6 col-sm-7 col-lg-8 description\"><p class=\"title\">CIViC Icon</p><p>A 16x16 icon showing the CIViC caduceus glyph. Suitable for referring to CIViC or CIViC acknowledgement in space-limited user interfaces or presentations.</p></div></div><div class=\"row\"><div class=\"col-xs-6 col-sm-offset-1 col-sm-3 col-lg-offset-1 col-lg-2 slide\"><div class=\"graphic-sm dark\"><a href=\"/assets/images/presentation/CIViC_logo_xs_v1a.png\" target=\"_blank\" class=\"lightbg\"><img src=\"/assets/images/presentation/CIViC_logo_xs_v1a.png\" width=\"64\" height=\"23\" class=\"img-responsive\"></a><br><a href=\"/assets/images/presentation/CIViC_logo_xs_v1a.png\" target=\"_blank\" class=\"darkbg\"><img src=\"/assets/images/presentation/CIViC_logo_xs_v1a.png\" width=\"64\" height=\"23\" class=\"img-responsive\"></a></div></div><div class=\"col-xs-6 col-sm-7 col-lg-8 description\"><p class=\"title\">CIViC Logo, Extra-small</p><p>A 64x23 PNG image of the CIViC logo. Suitable for referring to CIViC or CIViC acknowledgement in space-limited user interfaces or presentations. Displayed on a transparent background, suitable for placement over either a light or dark color.</p></div></div><div class=\"row\"><div class=\"col-xs-6 col-sm-offset-1 col-sm-3 col-lg-offset-1 col-lg-2 slide\"><div class=\"graphic-sm dark\"><a href=\"/assets/images/presentation/CIViC_logo_sm_v1a.png\" target=\"_blank\" class=\"lightbg\"><img src=\"/assets/images/presentation/CIViC_logo_sm_v1a.png\" width=\"123\" height=\"48\" class=\"img-responsive\"></a><br><a href=\"/assets/images/presentation/CIViC_logo_sm_v1a.png\" target=\"_blank\" class=\"darkbg\"><img src=\"/assets/images/presentation/CIViC_logo_sm_v1a.png\" width=\"123\" height=\"48\" class=\"img-responsive\"></a></div></div><div class=\"col-xs-6 col-sm-7 col-lg-8 description\"><p class=\"title\">CIViC Logo, Small</p><p>A 123x48 PNG image showing the CIViC logo and glyph. Suitable for referring to CIViC or CIViC acknowledgement in space-limited user interfaces or presentations. Displayed on a transparent background, suitable for placement over either a light or dark color.</p></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/pages/help.tpl.html',\n    '<div class=\"helpPage\"><div class=\"title-row\"><div class=\"row\"><div class=\"col-xs-12\"><div class=\"name\"><h3>Help</h3></div></div></div></div><div class=\"row\"><div class=\"col-xs-12 col-sm-2 col-lg-3\"><div class=\"help-tabs\"><ul class=\"nav nav-pills nav-stacked\"><li ng-repeat=\"tab in vm.tabs.main\" ui-sref-active=\"active\"><a ui-sref=\"{{tab.state}}\">{{ tab.heading }}</a></li></ul></div></div><div class=\"col-xs-12 col-sm-10 col-lg-9\"><ui-view></ui-view></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/pages/help_evidence_levels.tpl.html',\n    '<div class=\"help-sub-tab\"><p>Each evidence statement is the result of an experiment, trial or study in published literature. It is important to capture the nature of these experiments in the evidence entry. Evidence levels allow for the subject of an evidence item to be presented in a simple, standardized fashion. The evidence level is also an indication of how close each assertion is to actual application in the clinic. Please, note that while evidence statements of all levels are acceptable in CIViC, by far the highest priority are levels A and B, followed by C, D, E. Our top priority is to document the evidence for application of variant interpretations to real patients in the clinic today. The more time and development needed to determine the relevance of a variant to real patients in the clinic, the lower the priority for curation. Reviewing and approving evidence items requires a serious time committment by the community. Please keep this in mind and try to direct your efforts to the most immediately clinically relevant evidence first.<table class=\"table table-striped table-condensed table-bordered\"><colgroup><col width=\"150\"><col width=\"300\"><col width=\"920\"></colgroup><tr><th>Level</th><th>Definition</th><th>Examples and further comments</th></tr><tr><td class=\"level levelA\"><span class=\"character\">A</span><br>Validated association</td><td>Proven/consensus association in human medicine.</td><td><i>\"AML with mutated NPM1\" is a provisional entity in WHO classification of acute myeloid leukemia (AML). This mutation should be tested for in clinical trials and is recommended for testing in patients with cytogentically normal AML.</i> Validated associations are often in routine clinical practice already or are the subject of major clinical trial efforts.</td></tr><tr><td class=\"level levelB\"><span class=\"character\">B</span><br>Clinical evidence</td><td>Clinical trial or other primary patient data supports association.</td><td><i>BRAF V600E is correlated with poor prognosis in papillary thyroid cancer in a study of 187 patients with PTC and other thyroid diseases.</i> The evidence should be supported by observations in multiple patients. Additional support from functional data is desirable but not required.</td></tr><tr><td class=\"level levelC\"><span class=\"character\">C</span><br>Case study</td><td>Individual case reports from clinical journals.</td><td><i>A single patient with BRAF V600E/V600M bi-allelic mutation responded to the V600E drug dabrafenib.</i> The study may have involved a large number of patients, but the statement was supported by only a single patient. In some cases, observations from just a handful of patients (e.g. 2-3) or a single family may also be considered a case study/report.</td></tr><tr><td class=\"level levelD\"><span class=\"character\">D</span><br>Preclinical evidence</td><td>In vivo or in vitro models support association.</td><td><i>Experiments showed that AG1296 is effective in triggering apoptosis in cells with the FLT3 internal tandem duplication.</i> The study may have involved some patient data, but support for this statement was limited to in vivo or in vitro models (e.g. mouse studies, cell lines, molecular assays, etc.).</td></tr><tr><td class=\"level levelE\"><span class=\"character\">E</span><br>Inferential association</td><td>Indirect evidence.</td><td><i>Glioma cells harboring IDH1 mutation may be more susceptible to chemotherapy or radiotherapy due to their reduced ability to respond to oxidative stress.</i> The assertion is at least one step removed from a direct association between a variant and clinical relevance.</td></tr></table></p></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/pages/help_evidence_main.tpl.html',\n    '<div><h3 class=\"subtitle\">The CIViC Evidence Item</h3><div class=\"row\"><div class=\"col-xs-5\"><p>At the heart of CIViC is the clinical evidence statement. The clinical evidence statement is a piece of information that has been manually curated from trustable medical literature about a variant or genomic \\'event\\' that has implications in cancer diagnosis, prognosis, or predictive response to therapy. For example, Patients with BRAF V600 mutations respond well to the drug dabrafenib. A variant may be a single nucleotide substitution, a small insertion or deletion, a chromosomal rearrangement, an RNA gene fusion, an RNA expression pattern (e.g. over-expression), and others. Each clinical evidence statement corresponds to a single citable publication. Ready to jump into the literature? Please check out our <a href=\"https://github.com/genome/civic-server/tree/master/public/downloads/RankedCivicGeneCandidates.tsv\">ranked list of high priority genes</a> for inspiration first.</p></div><div class=\"col-xs-7\"><p class=\"diagram\"><img src=\"assets/images/GP-113_CIViC_schema-collaboration_SCHEMA_v1a.png\" class=\"img-fluid img-popup\" width=\"100%\" height=\"100%\" alt=\"CIViC Schema Diagram\" ng-click=\"vm.imgPopup()\"></p></div></div><tabset><tab ng-repeat=\"tab in vm.tabs.evidence\" heading=\"{{ tab.heading }}\" active=\"tab.active\"><div ng-include=\"tab.template\"></div></tab></tabset></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/pages/help_evidence_overview.tpl.html',\n    '<div class=\"help-sub-tab\"><p>The rows in the following table describe the minimal components of a CIViC evidence statement. Once clinical evidence statements for a variant have been curated, a summary is manually generated describing the variant\\'s significance in cancer, along with current treatment methods. A gene level summary then synthesizes the variant summaries, and adds important gene-level information. Each variant can belong to one or more variant groups, these act to combine functionally similar or clinically related variants into a single entity. For example, \\'FGFR Fusions\\' is a group that contains several gene fusions where FGFR2 (or FGFR3) is involved in a fusion with various 3\\' partner genes, and \\'Imatinib Resistance Mutations\\' is a group of variants that confer resistance to imatinib treatment. A variant group may also contain variants from multiple genes. For example, the group \\'EGFR TKI Resistance\\' consists of variants in EGFR, MET, and KRAS.</p><table class=\"table table-striped table-condensed table-bordered\"><colgroup><col width=\"167.5\"><col width=\"750\"><col width=\"450\"><col width=\"100\"></colgroup><tr><th>Attribute</th><th>Description</th><th>Example</th><th>Source</th></tr><tr><td>Gene</td><td>The symbol and ID of the gene implicated.</td><td>ESR1 (Entrez ID: 2099)</td><td>CIViC (Entrez)</td></tr><tr><td>Variant</td><td>Genomic event/mutation (Single nucleotide variant, Insertion/deletion, Gene fusion, Copy number variant, etc.) implicated.</td><td>Y537S</td><td>CIViC</td></tr><tr><td>Variant Origin</td><td>Presumed cellular origin of the Variant in samples from the literature citation where the clinical effect of this Variant is being evaluated.</td><td>Somatic</td><td>CIViC</td></tr><tr><td>Disease</td><td>Specific disease or disease subtype that is associated with this event and its clinical implication.</td><td>Estrogen-receptor positive breast cancer (DOID: 0060075).</td><td>CIViC (Disease Ontology)</td></tr><tr><td>Evidence type</td><td>Category of clinical action/relevance implicated by event. Refer to the additional documentation on evidence types for details on how to enter evidence of each of the three types: predictive, prognostic, and diagnostic.</td><td>Predictive - The variant is predictive of sensitivity or resistance to a therapeutic.</td><td>CIViC</td></tr><tr><td>Evidence level</td><td>The type of experiment from which the evidence is curated. From inferential, to proven association in clinical medicine. Refer to the additional documentation on evidence levels for definitions of the five levels allowed in CIViC: validated, clinical, pre-clinical, case study, and inferential.</td><td>Level B - Clinical Evidence.</td><td>CIViC</td></tr><tr><td>Evidence direction</td><td>An indicator of whether the evidence statement supports or refutes the clinical significance of an event.</td><td>Supports - the evidence supports the clinical significance.</td><td>CIViC</td></tr><tr><td>Drug</td><td>For predictive evidence, indicates the therapy for which sensitivity or resistance is indicated (With PubChem ID if available).</td><td>Tamoxifen, Raloxifene (PubChem CIDs: 2733526, 5053).</td><td>CIViC (PubChem)</td></tr><tr><td>Drug Interaction Type</td><td>For predictive evidence involving more than one drug, specifies the relationship between these drugs by indicating whether the drugs are Subtitutes for each other or are used in Sequential or Combination treatments.</td><td>Substitutes - The drugs listed are often considered to be of the same family, or behave similarly in a treatment setting.</td><td>CIViC</td></tr><tr><td>Clinical significance</td><td>The association with treatment or diagnostic/prognostic end point.</td><td>Resistant or Non-response - mutation is associated with resistance to therapy.</td><td>CIViC</td></tr><tr><td>Evidence Statement</td><td>Human readable interpretation. Free-form text summary of this events potential clinical interpretations. This interpretation is the synthesis of all other information about an event and its relevance to clinical action and should be the living product of active discussion.</td><td>This study of 178 non-small cell lung cancer patients, the appearance of T790M mutation lead to resistance to gefitinib.</td><td>CIViC</td></tr><tr><td>Citation</td><td>PubMed ID for publication where the event was described/explored.</td><td>24185512 (Toy et al., 2013, Nat. Genet.)</td><td>CIViC (PubMed)</td></tr><tr><td>Trust Rating</td><td>A rating on a 5-star scale, portraying the curators trust in the experiments from which the evidence is curated. Refer to the additional documentation on trust ratings for guidance on how to score an evidence item.</td><td>5-stars - Strong, well supported evidence from a lab or journal with respected academic standing. Experiments are well controlled, and results are clean and reproducible across multiple replicates.</td><td>CIViC</td></tr></table></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/pages/help_evidence_trust_ratings.tpl.html',\n    '<div class=\"help-sub-tab\"><p>In order to quickly discern how much trust curators and users have in a single evidence statement, a five star trust rating system is used. Each evidence item is given a rating, from 1 to 5 stars, based on the quality of the evidence the statement summarizes. This rating depends on a number of factors, including journal impact, study size, quality control, orthogonal validation, and reproducibility. It should be noted that this rating is largely subjective and may be debated (hopefully within the CIViC interface). Also the rating should be specific to the evidence statement. The overall publication/study might be high quality in a high impact publication, but the evidence statement may refer to a single conclusion in the study, and that part of the study might not be well supported. For example, the assertion may relate to patients with a particular mutation, and the study might involve an impressive 500 patients, but if only 2 patients have the mutation in question, the quality rating may be low for this evidence statement.<table class=\"table table-striped table-responsive table-bordered\"><col width=\"15%\"><col width=\"85%\"><tr><th>Trust&nbsp;Rating</th><th>Definition</th></tr><tr><td class=\"rating\"><i class=\"glyphicon glyphicon-star\"></i><i class=\"glyphicon glyphicon-star\"></i><i class=\"glyphicon glyphicon-star\"></i><i class=\"glyphicon glyphicon-star\"></i><i class=\"glyphicon glyphicon-star\"></i></td><td>Strong, well supported evidence from a lab or journal with respected academic standing. Experiments are well controlled, and results are clean and reproducible across multiple replicates. Evidence confirmed using independent methods. The study is statistically well powered.</td></tr><tr><td class=\"rating\"><i class=\"glyphicon glyphicon-star\"></i><i class=\"glyphicon glyphicon-star\"></i><i class=\"glyphicon glyphicon-star\"></i><i class=\"glyphicon glyphicon-star\"></i><i class=\"glyphicon glyphicon-star-empty\"></i></td><td>Strong, well supported evidence. Experiments are well controlled, and results are convincing. Any discrepancies from expected results are well-explained and not concerning.</td></tr><tr><td class=\"rating\"><i class=\"glyphicon glyphicon-star\"></i><i class=\"glyphicon glyphicon-star\"></i><i class=\"glyphicon glyphicon-star\"></i><i class=\"glyphicon glyphicon-star-empty\"></i><i class=\"glyphicon glyphicon-star-empty\"></i></td><td>Evidence is convincing, but not supported by a breadth of experiments. May be smaller scale projects, or novel results without many follow-up experiments. Discrepancies from expected results are explained and not concerning.</td></tr><tr><td class=\"rating\"><i class=\"glyphicon glyphicon-star\"></i><i class=\"glyphicon glyphicon-star\"></i><i class=\"glyphicon glyphicon-star-empty\"></i><i class=\"glyphicon glyphicon-star-empty\"></i><i class=\"glyphicon glyphicon-star-empty\"></i></td><td>Evidence is not well supported by experimental data, and little follow-up data is available. Publication is from a journal with low academic impact. Experiments may lack proper controls, have small sample size, or are not statistically convincing.</td></tr><tr><td class=\"rating\"><i class=\"glyphicon glyphicon-star\"></i><i class=\"glyphicon glyphicon-star-empty\"></i><i class=\"glyphicon glyphicon-star-empty\"></i><i class=\"glyphicon glyphicon-star-empty\"></i><i class=\"glyphicon glyphicon-star-empty\"></i></td><td>Claim is not supported well by experimental evidence. Results are not reproducible, or have very small sample size. No follow-up is done to validate novel claims.</td></tr></table></p></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/pages/help_evidence_types.tpl.html',\n    '<div class=\"help-sub-tab\"><p>When curating evidence statements from published sources, to discern whether a variant has a \"clinical interpretation\", we use the data model below. Evidence statements can either be predictive of drug response, be correlated with prognostic outcome, or contribute to disease diagnosis. If an evidence item can not be placed in one of these categories, it likely lies outside of the scope of CIViC. However, published statements about a gene or variant that cannot be placed within these categories can still be added to the free-form gene and variant summaries.<table class=\"table table-striped table-condensed table-bordered\"><colgroup><col width=\"150\"><col width=\"250\"><col width=\"400\"><col width=\"920\"></colgroup><tr><th>Evidence type</th><th>Evidence direction</th><th>Clinical significance</th><th>Example</th></tr><tr><td rowspan=\"6\"><br><br><br><br><br><b>Predictive:</b><br><br><i>Evidence pertaining to a variants effect on therapeutic response</i></td><td rowspan=\"3\">Supports:<br><br>The experiment or study supports this variants response to a drug</td><td>Sensitivity:<br>Variant is associated with positive response to treatment (e.g. sensitivity to drug)</td><td>Breast cancer cell lines with a PIK3CA H1047R mutation showed increased sensitivity to CH5132799 compared to cells with wild-type PIK3CA gene.</td></tr><tr><td>N/A:<br>Variant does not inform clinical action</td><td>OSI-906, an IGF1R/INSR inhibitor, does not have a significant effect on chemotherapy resistant castration-resistant prostate cancer cell lines.</td></tr><tr><td>Resistance or Non-Response:<br>Variant is associated with negative treatment response (e.g. resistance to drug)</td><td>In NSCLC, Exon 2 KRAS mutations were associated with resistance to the EGFR kinase inhibitors gefitinib and erlotinib.</td></tr><tr><td rowspan=\"3\">Does not support:<br><br>The experiment or study does not support, or was inconclusive of an interaction between the variant and a drug</td><td>Sensitivity:<br>Variant is associated with positive response to treatment (e.g. sensitivity to drug)</td><td>BRAF V600E mutation does not predict response in patients treated with dacarbazine or temozolomide.</td></tr><tr><td>N/A:<br>Variant does not inform clinical action</td><td>There is no statistical difference in progression free survival between lung cancer patients with or without an EGFR L858R mutation following treatment with gefitinib or erlotinib.</td></tr><tr><td>Resistance or Non-Response:<br>Variant is associated with negative treatment response (e.g. resistance to drug)</td><td>In the setting of BRAF(V600E), NF1 loss resulted in elevated activation of RAS-GTP but does not show resistance to MEK inhibitors.</td></tr><tr><td rowspan=\"4\"><br><br><br><b>Diagnostic:</b><br><br><i>Evidence pertaining to a variants impact on patient diagnosis</i></td><td rowspan=\"2\">Supports:<br><br>The experiment or study supports variants impact on the diagnosis of disease or subtype</td><td>Positive:<br>Variant is associated with diagnosis of disease or subtype</td><td>BRAF V600E is shown to be associated with the tall-cell variant of papillary thyroid carcinoma (PTC). Supports use to confirm a diagnosis.</td></tr><tr><td>Negative:<br>Variant is associated with the lack of diagnosis of disease or subtype</td><td>JAK2 V617F is not associated with lymphoid leukemia (B-lineage ALL, T-ALL or CLL). Supports use to exclude a diagnosis.</td></tr><tr><td rowspan=\"2\">Does not support:<br><br>The experiment or study does not support the variants impact on diagnosis of disease or subtype</td><td>Positive:<br>Variant is associated with diagnosis of disease or subtype</td><td>Frequency of NPM1 mutations was not different in normal karyotype acute myeloid leukemia patients with CEPBA, NRAS or KIT mutations. Does NOT support use to confirm a diagnosis.</td></tr><tr><td>Negative:<br>Variant is associated with the lack of diagnosis of disease or subtype</td><td>Study 1 found that, contrary to what was previously believed, mutation X does NOT in fact exclude disease subtype A. Does NOT support use to exclude a diagnosis.</td></tr><tr><td rowspan=\"6\"><br><br><br><b>Prognostic:</b><br><br><i>Evidence pertaining to a variants impact on disease progression, severity, or patient survival</i></td><td rowspan=\"3\">Supports:<br><br>The experiment or study supports a variants impact on prognostic outcome</td><td>Good Outcome:<br>Variant is associated with a better overall patient outcome</td><td>In AML, patients with IDH2 R140K mutation have improved overall survival compared to those with wild-type IDH2.</td></tr><tr><td>N/A:<br>Variant does not inform clinical action</td><td>In renal clear cell carcinoma, patients with VHL mutations did not have a significant impact on cancer specific survival.</td></tr><tr><td>Poor Outcome:<br>Variant is associated with a worse overall patient outcome</td><td>WT1 mutations were associated with shorter overall and disease free survival in a cohort of cytogenetically normal, young AML patients.</td></tr><tr><td rowspan=\"3\">Does not support:<br><br>The experiment or study does not support a prognostic association between variant and outcome</td><td>Good Outcome:<br>Variant is associated with a better overall patient outcome</td><td>Mutation X was not shown to be associated with improved overall survival.</td></tr><tr><td>N/A:<br>Variant does not inform clinical action</td><td>Size of the FLT3-ITD mutant duplication had no impact on overall survival or relapse rate.</td></tr><tr><td>Poor Outcome:<br>Variant is associated with a worse overall patient outcome</td><td>Unlike other studies that suggest a poorer outcome, BRAF mutation in this study was not correlated with poorer prognosis in papillary thyroid cancer.</td></tr></table></p></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/pages/help_evidence_variant_origin.tpl.html',\n    '<div class=\"help-sub-tab\"><p>The Variant Origin identifies whether the variant is presumed as an inherited (germline mutation) or acquired (somatic mutation) event in the context of the study. We generally consider somatic events to be the first priority, as this is an area that has not been as well addressed by existing resources. However, germline mutations with established clinical relevance are acceptable. Germline polymorphisms (>1% allele frequency in the population) are considered low priority, again unless there is an established clinical significance. Polymorphisms described in association studies should be curated with great caution and may face additional scrutiny from CIViC moderators. For some variant types, the variant origin field may be unknown or N/A. For example, EXPRESSION variants are neither germline nor somatic. Fusion variants are an unusual case in that they are often observed in the transcriptome but are usually accompanied by an underlying somatic (or germline) mutation. Most fusions should be entered as somatic. If in doubt, please note the issue at the time of your submission to encourage discussion during the moderation stage.</p></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/pages/help_gene_overview.tpl.html',\n    '<div class=\"help-sub-tab\"><p>In order to be listed in CIViC a Gene must have at least one clinical Evidence Item that has been curated from the literature. A new Gene record will be created automatically when the first Evidence Item is assigned to that Gene. The official gene name according to Entrez Gene (assigned by HGNC) is used. Alternative gene names are autopopulated from MyGeneInfo and searchable throughout the database. However, new Evidence Items must be associated with an official gene symbol to reduce ambiguity.</p><h4>Gene Attributes</h4><table class=\"table table-striped table-condensed table-bordered\"><tr><th class=\"attribute\">Attribute</th><th class=\"description\">Description</th><th class=\"source\">Source</th></tr><tr><td class=\"attribute\">Name</td><td class=\"description\">Entrez symbol of the gene.</td><td class=\"source\">EntrezDB</td></tr><tr><td class=\"attribute\">MyGene Info</td><td class=\"description\">Synonyms, protein domains, and pathways retrieved from the MyGene.info database.</td><td class=\"source\">MyGene.info</td></tr><tr><td class=\"attribute\">Description</td><td class=\"description\">User-defined summary of the clinical relevance of this Gene. Curation efforts should aim to concisely summarize the relevance of variants in this gene to treatment prediction, prognosis, and diagnosis. The summary should also provide an overview of the most relevant cancer types. The summary may also include relevant mechanistic information such as pathway interactions, functional alterations caused by variants within this Gene (i.e., activating, loss-of-function, etc.), and normal functions key to its oncogenic properties.</td><td class=\"source\">CIViC</td></tr><tr><td class=\"attribute\">Sources<br><span style=\"font-weight: normal; font-size: small; color: #666;\">(PubMed IDs)</span></td><td class=\"description\">A list of PubMed IDs referring to evidence supporting statements made in the Gene\\'s description. Source descriptions (e.g. <em>\\'Weisberg et al., 2007, Nat. Rev. Cancer\\'</em>) are pulled from the PubMed database at the time of submission, and are not editable.</td><td class=\"source\">CIViC (PubMed)</td></tr></table></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/pages/help_gene_summary.tpl.html',\n    '<div class=\"help-sub-tab\"><p>This is a user-defined description of the clinical relevance of this gene. Just as a Variant Summary should be a synthesis of Evidence Statements for a Variant, the Gene Summary should be a synthesis of the Variant Summaries for a Gene.</p><p>This summary should also discuss the relevance of the Gene to different cancer types, patient outcomes and treatment decisions, and highlight differences and similarities between different variants of this gene. This section may include information about the gene products pathway interactions, functional alterations caused by variants within this gene and normal functions that are relevant to its association with cancer. Although individual evidence statements do not capture biological/mechanistic impact of variants on gene function, the Gene Summary is a place where this information may be summarized.</p><h4>Sources</h4><p>Although in-line citations are not currently supported, citations can be tracked using the Sources field and entered by specifying the PubMed ID associated with the publication. The addition of citations used to generate the gene description, particularly relevant reviews, is highly encouraged with the intention of directing other users to more in-depth information.</p></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/pages/help_genes.tpl.html',\n    '<div><h3 class=\"subtitle\">Genes in the CIViC Database</h3><p>CIViC provides a curated summary of the clinical relevance of genes, as well as data pulled from the MyGeneInfo database. The gene summary includes the gene\\'s relevance to different cancer types, patient outcomes and treatment decisions. It may also include information about the gene product\\'s pathway interactions, functional alterations caused by variants within the gene, and normal functions that are relevant to its association with cancer.</p><tabset><tab ng-repeat=\"tab in vm.tabs.gene\" heading=\"{{ tab.heading }}\" active=\"tab.active\"><div ng-include=\"tab.template\"></div></tab></tabset></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/pages/help_get.tpl.html',\n    '<div><div class=\"row\"><div class=\"col-xs-12\"><h3 class=\"subtitle\">Get Help</h3><p>The best way to get help is by <a href=\"https://www.biostars.org/t/civic/\">posting a question on BioStars</a> and tagging it with \\'civic\\'. Several members of the team monitor BioStars carefully and will respond to your query.</p><p>Alternatively, you may <a href=\"mailto:civic-help@genome.wustl.edu?subject=CIViC Help Request\">send an email to the civic-help email list</a>, to which CIViC developers and researchers are all subscribed.</p><p>We\\'d prefer to use BioStars for technical support, since the resolution to any issue will be public for anyone to see and benefit from.</p></div></div><div class=\"row\"><div class=\"col-xs-6\"><a class=\"btn btn-block btn-default\" href=\"https://www.biostars.org/t/civic/\">Submit a Question on BioStars</a></div><div class=\"col-xs-6\"><a class=\"btn btn-block btn-default\" href=\"mailto:civic-help@genome.wustl.edu?subject=CIViC Help Request\">Send an Email to civic-help</a></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/pages/help_intro.tpl.html',\n    '<div><h3 class=\"subtitle\">Introduction to the CIViC Interface</h3><p>To learn more about the information in CIViC, watch this video tutorial. This is the first installment in a four part series of the main CIViC functionality. Stay tuned for more videos!</p><div class=\"embed-responsive embed-responsive-16by9\"><iframe class=\"embed-responsive-item\" src=\"https://www.youtube.com/embed/KImI_oNYtyc\" frameborder=\"0\" allowfullscreen=\"\"></iframe></div><h3>The CIViC Ecosystem of Collaborators, Moderators and Other Stakeholders</h3><p>The CIViC project aims to facilitate a collaborative ecosystem of research scientists, clinical scientists, and patient advocates dedicated to curating an accurate and relevant database of clinical interpretations of cancer variants. The diagram below shows how the various stakeholders in the CIViC ecosystem collaborate to curate the database.</p><p class=\"diagram\"><img src=\"assets/images/GP-113_CIViC-ecosystem_SLIDE_5_v1b.png\" class=\"img-fluid\" width=\"100%\" height=\"100%\" alt=\"CIViC Ecosystem Diagram\"></p></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/pages/help_report_problem.tpl.html',\n    '<div><div class=\"row\"><div class=\"col-xs-12\"><h3 class=\"subtitle\">Report a Problem</h3><p>If you discover a bug or something isn\\'t working quite right, we want to know about it! Please <a href=\"https://github.com/genome/civic-client/issues\">submit an issue to the civic-client github project</a>. We monitor these issues closely and will be able to collaborate on getting the problem resolved quickly.</p><p>If for some reason you do not wish to use github, you may <a href=\"mailto:civic-help@genome.wustl.edu?subject=CIViC Issue Report\">send an email to the civic-help email list</a>, to which CIViC developers and researchers are all subscribed.</p><p>We\\'d prefer to use Github for handling bugs, since the resolution to any issue will be public for anyone to see and benefit from.</p></div></div><div class=\"row\"><div class=\"col-xs-6\"><a class=\"btn btn-block btn-default\" href=\"https://github.com/genome/civic-client/issues\">Submit an Issue on github</a></div><div class=\"col-xs-6\"><a class=\"btn btn-block btn-default\" href=\"mailto:civic-help@genome.wustl.edu?subject=CIViC Issue Report\">Send an Email to civic-help</a></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/pages/help_variant_coordinates.tpl.html',\n    '<div class=\"help-sub-tab\"><p>Genomic coordinates in CIViC are a single representation of a genomic alteration that can lead to a specific variant. Multiple genomic alterations may lead to the same variant (i.e., several changes at the basepair level can lead to the same amino acid change); however, CIViC currently provides only one possible example per variant.</p><h4>General Guidelines</h4><ul><li>Choose one representative variant per gene.</li><li>Coordinates are 1-based.</li><li>Currently we prefer variants from reference genome build 37.</li><li>Representative transcripts are from Ensembl.</li><ul><li>Include Ensembl transcript ID and transcript version (e.g., \\'ENST00000078429.1\\') and the Ensembl database version (e.g., 75). Refer to further documentation below for guidance on how to select a representative transcript.</li></ul><li>The start is always the numerically smaller coordinate.</li><li>Complexities can be documented in the variant comments section.</li><li>For fusions:</li><ul><li>The fusion variant is entered under only one gene. Choose the \\'important\\' gene. Often, but not always, this is the 3\\' gene.</li><li>The variant name is always 5\\' partner - 3\\' partner (e.g. BCR-ABL1, EML4-ALK, etc.)</li></ul></ul><h4>Selecting a representative transcript</h4><p>A representative transcript is a single transcript model used as an example or reference point. It is also used to define the genomic coordinates for the variant. We present a single representative transcript that contains the variant of interest that ideally can be exported using the API and converted bioinformatically to desired outputs.</p><p>Features of a representative transcript:</p><ul><li>There is no one \\'right\\' answer for representative transcript.</li><li>It must:</li><ul><li>contain the variant (except in rare cases like promoter mutations).</li></ul><li>It should:</li><ul><li>be from Ensembl archived version 75 including the transcript version number (i.e., ENST00000078429.1 instead of ENST00000078429).</li><li>be a transcript that is in our IGV reference transcript file. (see below)</li></ul><li>It may:</li><ul><li>be the transcript with the longest ORF or most exons.</li><li>be the transcript that contains the \\'canonical exons that are used in many transcripts.</li><li>be the variant that has the greatest outer coordinates.</li><li>be the transcript that is widely used in literature.</li><li>be a transcript that is compatible with interpretation/visualization in the literature (source paper for evidence statements).</li></ul></ul><p>IGV reference transcript file<ul><li>This file is a custom gene track file that can be loaded in IGV for review of coordinates.</li><li>It is based on a specific version of Ensembl (v75) and contains both transcript IDs and transcript version numbers.</li><li>Ensembl defined <a href=\"http://www.ensembl.org/Help/Glossary?id=346\">canonical transcripts</a>\\' are highlighted with asterisks (***ENST00000078429.1.v75***) as a suggestion when no specific transcript is otherwise indicated.</li><li>The reference transcript file can be obtained from the <a href=\"https://github.com/genome/civic-server\">civic-server git repository</a> here:<br><a href=\"https://raw.githubusercontent.com/genome/civic-server/master/public/downloads/Ensembl-v75_build37-hg19_UcscGenePred_CIViC-Genes.ensGene\">Ensembl-v75_build37-hg19_UcscGenePred_CIViC-Genes.ensGene</a></li></ul></p><h4>Selecting variant coordinates based on variant type</h4><p>Start and stop positions are dependent upon the reference genome and the specific isoform/transcript being used.</p><table class=\"table table-condensed table-attributes\"><tbody><tr class=\"subheader\"><td colspan=\"2\"><h4>Single Nucleotide Variants (SNVs)</h4></td></tr><tr><td class=\"source\"><img src=\"assets/images/ChoosingCoordinates_SNVs.png\" class=\"img-fluid\" width=\"45%\" height=\"45%\" alt=\"CIViC SNV coordinate diagram\"></td><td><ul><li>Start and stop coordinates are the same</li><li>Secondary coordinates do not apply</li></ul></td></tr><tr class=\"subheader\"><td colspan=\"2\"><h4>Insertions</h4></td></tr><tr><td class=\"source\"><img src=\"assets/images/ChoosingCoordinates_Insertions.png\" class=\"img-fluid\" width=\"45%\" height=\"45%\" alt=\"CIViC insertion coordinate diagram\"></td><td><ul><li>Secondary coordinates do not apply</li></ul></td></tr><tr class=\"subheader\"><td colspan=\"2\"><h4>Deletions</h4></td></tr><tr><td class=\"source\"><img src=\"assets/images/ChoosingCoordinates_Deletions.png\" class=\"img-fluid\" width=\"45%\" height=\"45%\" alt=\"CIViC deletion coordinate diagram\"></td><td><ul><li>Secondary coordinates do not apply</li></ul></td></tr><tr class=\"subheader\"><td colspan=\"2\"><h4>Fusions</h4></td></tr><tr><td class=\"source\"><img src=\"assets/images/ChoosingCoordinates_Fusions.png\" class=\"img-fluid\" width=\"65%\" height=\"65%\" alt=\"CIViC fusion coordinate diagram\"></td><td><ul><li>Secondary coordinates correspond to the 3\\' partner</li><li>Stop1 and Start2 coordinates correspond to the edge of the nearest exon</li></ul></td></tr><tr class=\"subheader\"><td colspan=\"2\"><h4>Whole Gene alterations (altered expression, deletion, amplification)</h4></td></tr><tr><td class=\"source\"><img src=\"assets/images/ChoosingCoordinates_Whole_Gene.png\" class=\"img-fluid\" width=\"65%\" height=\"65%\" alt=\"CIViC whole gene coordinate diagram\"></td><td><ul><li>Secondary coordinates do not apply</li><li>Variant coordinates include UTRs</li></ul></td></tr><tr class=\"subheader\"><td colspan=\"2\"><h4>Gene Segments (\\'hotspot\\' regions including exons or domains)</h4></td></tr><tr><td class=\"source\"><img src=\"assets/images/ChoosingCoordinates_Gene_Segment.png\" class=\"img-fluid\" width=\"60%\" height=\"60%\" alt=\"CIViC gene segment coordinate diagram\"></td><td><ul><li>Secondary coordinates do not apply</li></ul></td></tr></tbody></table></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/pages/help_variant_group_addto.tpl.html',\n    '<div class=\"help-sub-tab\"><p>Variants can be added to a Variant Group by using the edit function of a Variant Group.</p></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/pages/help_variant_group_create.tpl.html',\n    '<div class=\"help-sub-tab\"><p>Users with Editor or Admin roles are allowed to create a new Variant Group. To create a new Variant Group use the Add Variant Group button below the list of Variants on any Gene/Variant page. Multiple Variants from multiple Genes may then be added by using the + button next to the Variant field. Note that a Variant must exist in CIViC in order to be added to a Variant Group. To exist, a Variant must have at least one Evidence Statement. You can add a new Variant by creating a new Evidence Item using the Add Evidence form.</p></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/pages/help_variant_group_overview.tpl.html',\n    '<div class=\"help-sub-tab\"><p>Variant groups can associate multiple related variants within or between genes. Each variant can belong to one or more variant groups, these act to combine functionally similar or clinically related variants into a single entity. For example, \\'FGFR Fusions\\' is a group that contains several gene fusions where FGFR2 (or FGFR3) is involved in a fusion with various 3\\' partner genes, and \\'Imatinib Resistance Mutations\\' is a group of variants that confer resistance to imatinib treatment. A variant group may also contain variants from multiple genes. For example, the group \\'EGFR TKI Resistance\\' consists of variants in EGFR, MET, and KRAS.</p><h4>Variant Group Attributes</h4><table class=\"table table-striped table-condensed table-bordered\"><tr><th class=\"attribute\">Attribute</th><th class=\"description\">Description</th><th class=\"source\">Source</th></tr><tr><td class=\"attribute\">Name</td><td class=\"description\">Name of the Variant Group</td><td class=\"source\">CIViC</td></tr><tr><td class=\"attribute\">Description</td><td class=\"description\">User-defined summary of the clinical relevance of this variant group.</td><td class=\"source\">CIViC</td></tr><tr><td class=\"attribute\">Variants</td><td class=\"description\">User-defined list of variants in the variant group.</td><td class=\"source\">CIViC</td></tr></table></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/pages/help_variant_group_summary.tpl.html',\n    '<div class=\"help-sub-tab\"><p>This is a user-defined description of the clinical relevance of this variant group. This description should include the rationale for grouping these variants together, summarize their relevance to cancer diagnosis, prognosis or treatment and highlight any treatments or cancers of particular relevance. Cancers or treatments where grouping this set of variants is not appropriate should also be highlighted.</p><p>Although in-line citations are not currently supported, the addition of citations used to generate the variant group description, particularly relevant reviews, is highly encouraged with the intention of directing other users to more in-depth information.</p></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/pages/help_variant_groups.tpl.html',\n    '<div><h3 class=\"subtitle\">Variant Groups</h3><p>Variant groups allow users to group variants from a single gene or multiple genes that have similar clinical consequences.</p><p>Example uses:</p><ul><li>Variants that confer resistance to a class of drugs</li><li>Variants with strong data to support a very similar effect on protein function (e.g., loss-of-function, activating)</li><li>Variants that can be effectively combined when considering patient outcomes/treatment</li></ul><tabset><tab ng-repeat=\"tab in vm.tabs.variant_group\" heading=\"{{ tab.heading }}\" active=\"tab.active\"><div ng-include=\"tab.template\"></div></tab></tabset></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/pages/help_variant_naming.tpl.html',\n    '<div class=\"help-sub-tab\"><p></p><h4>General Guidelines</h4><ul><li>New Variant Names should be unique within the gene of interest. Otherwise, an Evidence Item should be assigned to the existing Variant for that gene. Before proposing a new variant, please check existing variants to prevent redundancy. For example, \\'deletion\\' and \\'loss\\'.</li><li>The Variant Name should be the most specific possible given the literature citation (i.e., V600E over V600). In general the convention is to use the protein representation where possible (instead of the cDNA or genome representation).</li><li>The Variant Name may:</li><ul><li>be a specific animo acid change (e.g., V600E or W288fs).</li><li>encompass more than 1 type of genomic change (e.g., Exon 12 Mutations or Frameshift Truncation).</li><li>share the same name as a variant in another gene (e.g., G12D is a Variant Name for both KRAS and NRAS).</li></ul><li>For fusions:</li><ul><li>The Variant Name is always 5\\' partner - 3\\' partner.</li><li>The fusion variant is entered under only one gene. Choose the \\'important\\' gene. Often, but not always, this is the 3\\' gene. (e.g., the BCR-ABL Variant is associated with ABL1 Gene)</li></ul></ul></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/pages/help_variant_overview.tpl.html',\n    '<div class=\"help-sub-tab\"><p>CIViC variants are usually genomic alterations, including single nucleotide variants (SNVs), insertion/deletion events (indels), copy number alterations (CNV\\'s such as amplification or deletion), structural variants (SVs such as translocations and inversions), and other events that differ from the \"normal\" genome. In some cases a CIViC variant may represent events of the transcriptome or proteome. For example, \\'expression\\' or \\'over-expression\\' is a valid variant. Regardless of the variant, it must have an predictive, prognostic or diagnostic clinical relevance to be entered in CIViC. New curators should generally avoid proposing new variants that are unlike any already in CIViC.</p><h4>Variant Attributes</h4><table class=\"table table-striped table-condensed table-bordered\"><tr><th class=\"attribute\">Attribute</th><th class=\"description\">Description</th><th class=\"source\">Source</th></tr><tr><td class=\"attribute\">Name</td><td class=\"description\">Description of the type of variant (e.g., \\'V600E\\', \\'BCR-ABL fusion\\', \\'Loss-of-function\\', \\'Exon 12 mutations\\'). Should be as specific and short as possible (i.e., specific amino acid changes).</td><td class=\"source\">CIViC</td></tr><tr><td class=\"attribute\">Description</td><td class=\"Summary\">User-defined summary of the clinical relevance of this Variant.</td><td class=\"source\">CIViC</td></tr><tr><td class=\"attribute\">Variant Type(s)</td><td class=\"description\">One or more terms from the Sequence Ontology that describes the type of variant. Should be the most descriptive term applicable on a given branch (e.g., \\'Conservative Missense Variant\\', \\'Stop Gained\\', \\'Transcript Fusion\\').</td><td class=\"source\">CIViC (Sequence Ontology)</td></tr><tr class=\"subheader\"><td colspan=\"4\"><h4>Primary Coordinates</h4></td></tr><tr><td class=\"attribute\">Reference Build</td><td class=\"description\">NCBI or GRC human reference assembly version.</td><td class=\"source\">CIViC</td></tr><tr><td class=\"attribute\">Chromosome</td><td class=\"description\">Name of the chromosome in which the variant occurs.</td><td class=\"source\">CIViC</td></tr><tr><td class=\"attribute\">Start, Stop</td><td class=\"description\">Start and stop positions of the variant (1-based genome coordinate). Start must be less than or equal to stop.</td><td class=\"source\">CIViC</td></tr><tr><td class=\"attribute\">Reference &<br>Variant Bases</td><td class=\"description\">The nucleotide base of the reference and variant allele (e.g. \\'C\\', \\'A\\').</td><td class=\"source\">CIViC</td></tr><tr><td class=\"attribute\">Representative Transcript</td><td class=\"description\">Ensembl transcript ID and version number for a known transcript of the gene that contains the variant (e.g. \\'ENST00000263967.3\\').</td><td class=\"source\">CIViC</td></tr><tr class=\"subheader\"><td colspan=\"4\"><h4>Secondary Coordinates</h4></td></tr><tr><td class=\"attribute\">Same as Primary</td><td class=\"description\">For fusion variants, the secondary coordinates are used to specify the 3\\' partner of the fusion gene.</td><td class=\"source\">CIViC</td></tr></table></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/pages/help_variant_summaries.tpl.html',\n    '<div class=\"help-sub-tab\"><p>The Variant Summary is a user-defined description of the clinical relevance of this Variant. This description should discuss the Variants relevance to different cancer types, patient outcomes and treatment decisions. It can be thought of as an executive summary of what information a clinician would like to know about a Variant identified in a patient tumor.</p><p>The Summary is mostly a synthesis of the Evidence Statements available for the Variant. Although individual Evidence Statements do not capture biological/mechanistic impact of Variants on gene function, such information can be summarized briefly here. Since the Summary is a synthesis of Evidence Statements in CIViC, we recommend that a Variant Summary only be created after the number of Evidence Statements created for a Variant are a reasonable reflection of the state of the literature. As a simple rule of thumb, if a variant has less than 5-10 evidence statements (or higher for some variants), the Variant is probably NOT ready for a Variant Summary yet.</p><p>Although in-line citations are not currently supported, the addition of citations used to generate the Variant Summary beyond those captured in the Evidence Statements, particularly relevant reviews, is highly encouraged with the intention of directing other users to more in-depth information about the Variant.</p></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/pages/help_variant_varianttypes.tpl.html',\n    '<div class=\"help-sub-tab\"><p>Variant types are used to classify variants within the structured ontology terms provided by <a href=\"http://www.sequenceontology.org/index.html\">The Sequence Ontology Project</a>. Multiple terms for a variant are allowed to facilitate functional and structural effects of the variant. Ideally, the most specific child terms of a branch are used. These variant types can be used to search for variants within the CIViC database that meet a users\\' criteria via the advanced search page or through the API.</p></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/pages/help_variants.tpl.html',\n    '<div><h3 class=\"subtitle\">Variants</h3><p>Variants are a user-defined genomic alteration related to a specific clinical outcome. New Variants are created by the addition of a new Evidence Item associated with the Variant.</p><tabset><tab ng-repeat=\"tab in vm.tabs.variant\" heading=\"{{ tab.heading }}\" active=\"tab.active\"><div ng-include=\"tab.template\"></div></tab></tabset></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/pages/home.tpl.html',\n    '<div class=\"home-view\"><div class=\"row\"><div class=\"col-xs-12 col-sm-6 discover\"><div class=\"row\"><div class=\"col-sm-12 col-md-6 icon\"><a ui-sref=\"browse.variants\"><img src=\"assets/images/icon_discover.svg\" alt=\"Discover\" class=\"img-responsive\"></a></div><div class=\"col-sm-12 col-md-6 blurb\"><p>Discover supported clinical intepretations of mutations related to cancer.</p></div></div></div><div class=\"col-xs-12 col-sm-6 collaborate\"><div class=\"row\"><div class=\"col-sm-12 col-md-6 icon\"><a ui-sref=\"participate\"><img src=\"assets/images/icon_collaborate.svg\" alt=\"Discover\" class=\"img-responsive\" width=\"90%\"></a></div><div class=\"col-sm-12 col-md-6 blurb\"><p>Participate with colleagues to add variants and support for cancer-related mutations.</p></div></div></div></div><div class=\"row\" style=\"margin-top: 16px;\"><div class=\"col-xs-12 intro-block\"><div class=\"row\"><div class=\"col-xs-6\"><div class=\"intro\"><h4>The Precision Medicine Revolution</h4><p>Precision medicine refers to the use of prevention and treatment strategies that are tailored to the unique features of each individual and their disease. In the context of cancer this might involve the identification of specific mutations shown to predict response to a targeted therapy. The biomedical literature describing these associations is large and growing rapidly. Currently these interpretations exist largely in private or encumbered databases resulting in extensive repetition of effort.</p></div></div><div class=\"col-xs-6\"><div class=\"intro\"><h4>CIViC\\'s Role in Precision Medicine</h4><p>Realizing precision medicine will require this information to be centralized, debated and interpreted for application in the clinic. <strong>CIViC is an open access, open source, community-driven web resource for Clinical Interpretation of Variants in Cancer.</strong> Our goal is to enable precision medicine by providing an educational forum for dissemination of knowledge and active discussion of the clinical significance of cancer genome alterations.</p></div></div></div></div></div><div class=\"row\"><div class=\"col-xs-12 col-sm-6 stats-block\"><div class=\"row\"><div class=\"col-xs-12\"><h4>Database and Community Statistics</h4></div></div><div class=\"row\"><stats-block stats=\"vm.stats.genes\" title=\"Genes\" icon-url=\"\" cols=\"col-xs-4\"></stats-block><stats-block stats=\"vm.stats.variants\" title=\"Variants\" icon-url=\"\" cols=\"col-xs-4\"></stats-block><stats-block stats=\"vm.stats.evidence_items\" title=\"Evidence Items\" icon-url=\"\" cols=\"col-xs-4\"></stats-block></div><div class=\"row\" style=\"margin-top: 16px;\"><stats-block stats=\"vm.stats.drugs\" title=\"Drugs\" icon-url=\"\" cols=\"col-xs-4\"></stats-block><stats-block stats=\"vm.stats.diseases\" title=\"Diseases\" icon-url=\"\" cols=\"col-xs-4\"></stats-block><stats-block stats=\"vm.stats.sources\" title=\"Publications\" icon-url=\"\" cols=\"col-xs-4\"></stats-block></div><div class=\"row\" style=\"margin-top: 16px;\"><stats-block stats=\"vm.stats.suggested_changes\" title=\"Revisions\" icon-url=\"\" cols=\"col-xs-4\"></stats-block><stats-block stats=\"vm.stats.users\" title=\"Contributors\" icon-url=\"\" cols=\"col-xs-4\"></stats-block><stats-block stats=\"vm.stats.comments\" title=\"Comments\" icon-url=\"\" cols=\"col-xs-4\"></stats-block></div>--></div><div class=\"col-xs-12 col-sm-6 stats-block\"><div class=\"row\"><div class=\"col-xs-12\"><h4>CIViC Activity</h4></div></div><div class=\"row\"><div class=\"col-xs-12\"><ul class=\"events\"><li ng-repeat=\"event in vm.events | limitTo:6\"><event-item event=\"event\" theme=\"\\'dark\\'\">EVENT</event-item></li><li><a class=\"btn btn-default btn-xs btn-block\" ui-sref=\"activity\">View All Activity&nbsp;<i class=\"glyphicon glyphicon-arrow-right\"></i></a></li></ul></div></div></div></div><div class=\"row\" style=\"margin-top: 32px;\"><div class=\"col-xs-12 disclaimer-block\"><div class=\"disclaimer small\"><p><strong>Medical Disclaimer: This resource is intended for purely research purposes. It should not be used for emergencies or medical or professional advice.</strong></p><p>CIViC is a community-edited forum for discussion and interpretation of peer-reviewed publications pertaining to the clinical relevance of variants (or biomarker alterations) in cancer. These interpretations may include associations between molecular alterations (or lack of alteration) and one or more drugs, diagnoses, prognoses or other treatment decisions. These interpretations of clinical significance (or lack of clinical significance) are purely for research purposes. A finding of no interpretation does not necessarily indicate lack of relevance for any specific variant or biomarker alteration. Interpretations are not presented in ranked order of potential or predicted importance.These interpretations make no promise or guarantee of any clinical benefit (or lack of clinical benefit).</p><p>The civicdb.org (civic.genome.wustl.edu) website does not provide any medical or healthcare products, services or advice, and is not for medical emergencies or urgent situations. <strong>IF YOU THINK YOU MAY HAVE A MEDICAL EMERGENCY, CALL YOUR DOCTOR OR 911 IMMEDIATELY</strong>. Information contained on this website is not a substitute for a doctor\\'s medical judgment or advice. We recommend that you discuss your specific, individual health concerns with your doctor or health care professional.</p></div></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/pages/participate.tpl.html',\n    '<div class=\"collaboratePage\"><div class=\"title-row\"><div class=\"row\"><div class=\"col-xs-12\"><div class=\"name\"><h3>Participate</h3></div></div></div></div><div class=\"row\" style=\"padding-top: 16px;\"><div class=\"col-xs-12\"><h3 class=\"col-title\">CIViC principles</h3><ul><li>We believe that the interpretations of clinical actionability required to enable precision medicine should be freely available and openly discussed across a diverse community.</li><li>An interdisciplinary approach is needed to combine the expertise of genome scientists and health care providers, whose efforts are often isolated.</li><li>Content should be created with transparency, kept current, be comprehensive, track provenance, and acknowledge the efforts of creators.</li><li>The interface should be both structured enough to allow computational data mining and agile enough to handle the product of openly-debated, human interpretation.</li><li>CIViC is committed to providing unencumbered and efficient access to community-driven curation and interpretation of cancer mutations. Curated knowledge will remain free and can be accessed anonymously without login unless the user wishes to contribute to content.</li><li>To encourage both academic and commercial engagement CIViC is released with minimal restrictions under a Creative Commons license (<a href=\"https://creativecommons.org/licenses/by/4.0/\">CC BY 4.0</a>). No fees or exclusive access will be introduced. While sharing improvements is strongly encouraged, the data can be adopted and used for nearly any purpose including the creation of commercial applications derived from the knowledge. We require only that attribution be given to the community that created the content.</li></ul></div></div><div class=\"row\"><div class=\"col-xs-5\"><h3 class=\"col-title\">How you can contribute:</h3><p>There are several ways you can make a contribution to this important problem:</p><ol><li><strong>Add</strong><br>Propose a new genomic variant (e.g. single nucleotide substitution, structural variant, gene fusion, etc.), add evidence statements that support clinical actions associated with such variants, or help create a synthesized interpretation or summary of the corpus of evidence for a variant.</li><li><strong>Approve</strong><br>Community Editors and Moderators may approve submitted evidence items, after which the community may view and edit the item.</li><li><strong>View</strong><br>Make use of the community-created content in your own research by browsing, searching, and examining detailed evidence items. All CIViC data and source code are provided freely for almost any use.</li><li><strong>Edit</strong><br>Submit a correction or addition to any details about a genomic event, evidence statement, or interpretation.</li><li><strong>Discuss</strong><br>Participate in an ongoing discussion in an effort to reach community consensus on the appropriate clinical action(s) for a genomic event.</li><li><strong>Apply/Reject</strong><br>Editors and Moderators may apply or reject the edits made by other community members, after taking into account community discussions and opinion.</li></ol><p>Before commenting, correcting, or creating, please visit the <a ui-sref=\"help.introduction\">help</a> and <a ui-sref=\"faq\">FAQ</a> pages to learn more about the CIViC data model and <a ui-sref=\"browse.variants\">browse the existing content</a> for examples. Understand the data model but unsure of where to start? Check out our <a href=\"https://github.com/genome/civic-server/tree/master/public/downloads/RankedCivicGeneCandidates.tsv\">list of high priority genes</a> for inspiration.</p></div><div class=\"col-xs-7\"><h3 class=\"col-title\">&nbsp;</h3><p class=\"diagram\"><img src=\"assets/images/GP-113_CIViC_schema-collaboration_PROCESS_v1a.png\" class=\"img-fluid img-popup\" width=\"100%\" height=\"100%\" alt=\"CIViC Collaboration Diagram\" ng-click=\"vm.imgPopup()\"></p></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/pages/releases.tpl.html',\n    '<div class=\"releasesPage\"><div class=\"title-row\"><div class=\"row\"><div class=\"col-xs-12\"><div class=\"name\"><h3>Data Releases</h3></div></div></div></div><div class=\"row\" ng-repeat=\"release in vm.releases\"><div class=\"col-xs-4\"><h2 ng-bind=\"release.note | capitalize\">Release Type</h2><ul class=\"nav nav-pills nav-stacked\"><li ng-repeat=\"fileName in release.fileNames\"><a ng-href=\"{{release.fileUrls[$index]}}\"><span class=\"glyphicon glyphicon-download-alt\" aria-hidden=\"true\"></span>&nbsp; <strong>{{ fileName }}</strong></a></li></ul></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('components/forms/fieldTypes/diseaseTypeahead.tpl.html',\n    '<a tabindex=\"-1\" bind-html-unsafe=\"match.label + \\' (DOID: \\' + match.model.doid + \\')\\' | typeaheadHighlight:query\"></a>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('components/forms/fieldTypes/multiInput.tpl.html',\n    '<div><div class=\"clearfix\"><div class=\"row\" style=\"margin-bottom:14px\" ng-repeat=\"item in model[options.key] track by $index\" ng-init=\"itemOptions = copyItemOptions()\"><div class=\"col-xs-9\"><formly-field class=\"no-padding\" options=\"itemOptions\" model=\"model[options.key]\" form=\"form\" index=\"$index\"></formly-field></div><div class=\"col-xs-3\" style=\"margin-top:6px\"><button type=\"button\" class=\"btn btn-danger btn-xs\" ng-click=\"deleteItem(model[options.key], $index)\"><span class=\"glyphicon glyphicon-remove\"></span></button> <button type=\"button\" class=\"btn btn-success btn-xs\" ng-if=\"$index + 1 === model[options.key].length\" ng-click=\"model[options.key].push(\\'\\')\"><span class=\"glyphicon glyphicon-plus\"></span></button></div></div></div><div class=\"row\" ng-if=\"model[options.key].length === 0\"><div class=\"col-xs-12\"><button type=\"button\" class=\"btn btn-success btn-sm btn-block\" ng-click=\"model[options.key].push(\\'\\')\">Add {{ to.entityName }}</button></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('components/forms/fieldTypes/rating.tpl.html',\n    '<div class=\"formRating\"><rating ng-model=\"model[options.key]\" max=\"5\" readonly=\"false\" on-hover=\"hoveringOver(value)\" on-leave=\"leave()\" class=\"rating-block\"></rating><span class=\"description small\" ng-bind-html=\"(to.options | findWhere: { value: overStar }).label|unsafe\"></span></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('components/forms/fieldTypes/typeahead.tpl.html',\n    '<input type=\"text\" ng-model=\"model[options.key]\" typeahead=\"{{ to.typeahead }}\" class=\"form-control\" typeahead-editable=\"{{ to.editable || false}}\" typeahead-focus-first=\"true\" typeahead-append-to-body=\"true\" typeahead-on-select=\"{{ to.onSelect }}\" typeahead-input-formatter=\"{{ to.inputFormatter }}\" typeahead-template-url=\"{{ to.templateUrl }}\">');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('components/forms/fieldWrappers/mentioCommentMenus.tpl.html',\n    '<div><formly-transclude></formly-transclude><mentio-menu mentio-for=\"\\'commentForm\\'\" mentio-trigger-char=\"\\'#\\'\" mentio-items=\"entities\" mentio-template-url=\"/entity-mentions.tpl\" mentio-search=\"searchEntities(term)\" mentio-select=\"getEntity(item)\" mentio-typed-term=\"typedTerm\"></mentio-menu><script type=\"text/ng-template\" id=\"/entity-mentions.tpl\"><ul class=\"list-group user-search\"> <li mentio-menu-item=\"entity\" ng-repeat=\"entity in items | limitTo:8 track by $index\" class=\"list-group-item\"> <span class=\"text-primary\"> <span ng-bind=\"entity.display_type\" class=\"text-muted\">TYPE</span> <span ng-bind-html=\"entity.preview | mentioHighlightEntity:typedTerm:\\'menu-highlighted\\' | unsafe\">Preview</span> </span> </li> <li class=\"list-group-item\"><span class=\"small\"><em>Search term: {{ typedTerm }}</em></span></li> </ul></script><mentio-menu mentio-for=\"\\'commentForm\\'\" mentio-trigger-char=\"\\'@\\'\" mentio-items=\"users\" mentio-template-url=\"/user-mentions.tpl\" mentio-search=\"searchUsers(term)\" mentio-select=\"getUser(item)\" mentio-typed-term=\"typedTerm\"></mentio-menu><script type=\"text/ng-template\" id=\"/user-mentions.tpl\"><ul class=\"list-group user-search\"> <li mentio-menu-item=\"user\" ng-repeat=\"user in items track by $index\" class=\"list-group-item\"> <img ng-src=\"{{user.avatars.x32}}\" class=\"userImage\"> &nbsp; <span class=\"text-primary\" ng-bind-html=\"\\'&commat;\\' + user.display_name | mentioHighlight:typedTerm:\\'menu-highlighted\\' | unsafe\"> </span> &nbsp;&nbsp; <em class=\"text-muted\" ng-bind=\"user.area_of_expertise\"></em> </li> <li class=\"list-group-item\"><span class=\"small\"><em>Search term: {{ typedTerm }}</em></span></li> </ul></script></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('components/security/login/LoginForm.tpl.html',\n    '<form name=\"form\" novalidate=\"\" class=\"loginForm\"><div class=\"modal-header\"><h4>Sign in</h4></div><div class=\"modal-body\"><div class=\"alert alert-info\">Sign in by choosing one of the methods below:</div><ul class=\"providers\"><li class=\"google\"><a href=\"api/auth/google_oauth2?origin={{ location | encodeUri }}\"><div class=\"btn-label\">Sign in with Google</div></a></li><li class=\"orcid\"><a href=\"api/auth/orcid?origin={{ location | encodeUri }}\"><div class=\"btn-label\">Sign in with OrcID</div></a></li><li class=\"github\"><a href=\"api/auth/github?origin={{ location | encodeUri }}\"><div class=\"btn-label\">Sign in with Github</div></a></li></ul></div><div class=\"modal-footer\"><button class=\"btn btn-warning cancel\" ng-click=\"cancelLogin()\">Cancel</button></div></form>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/account/account.tpl.html',\n    '<div class=\"accountView\"><div class=\"row\"><div class=\"subTabs col-xs-12\"><div class=\"row\"><div class=\"col-xs-3 name\"><h3>My Account</h3></div><div class=\"col-xs-9 tabs\"><ul class=\"nav nav-tabs\" style=\"float: left;\"><li ui-sref-active=\"active\"><a ui-sref=\"account.notifications\">Notifications</a></li></ul></div></div></div></div><div class=\"row\"><div class=\"col-xs-12\"><ui-view></ui-view></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/account/notifications.tpl.html',\n    '<div class=\"notifications\"><div class=\"row\"><div class=\"col-xs-10\"><form><p ng-if=\"vm.notifications.length > 0\">Showing {{ vm.notifications.length }} of {{ vm.totalNotifications }} notifications. <span ng-if=\"vm.totalNotifications > 25\">Fetch up to<select ng-model=\"vm.max\" ng-options=\"option for option in vm.maxOptions\" ng-change=\"vm.fetch()\"></select>notifications.</span></p><p ng-if=\"vm.notifications.length === 0\">No notifications.</p></form></div><div class=\"col-xs-2\"></div></div><div class=\"row\"><div class=\"col-xs-12 col-sm-2 col-lg-3\"><div class=\"notification-tabs\"><ul class=\"nav nav-pills nav-stacked\"><li ng-repeat=\"category in vm.categories\" ui-sref-active=\"active\"><a ui-sref=\"{{category.state}}\">{{ category.name }} <span class=\"small\">({{category.count}})</span></a></li><li style=\"padding-top: 1em;\" ng-show=\"vm.notifications.length > 0\"><input type=\"button\" class=\"btn btn-xs btn-primary btn-block\" value=\"Mark All As Seen\" ng-click=\"vm.markAllAsRead()\"></li></ul></div></div><div class=\"col-xs-12 col-sm-10 col-lg-9\"><ul class=\"notifications-list\"><li ng-repeat=\"notification in vm.notifications\"><notification notification=\"notification\" theme=\"\\'light\\'\"></notification></li></ul></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/account/profile.tpl.html',\n    '<div class=\"account-profile\"><h3>Profile</h3></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/activity/activity.tpl.html',\n    '<div class=\"activityView\"><div class=\"title-row\"><div class=\"row\"><div class=\"col-xs-12\"><div class=\"name\"><h3>Activity</h3></div></div></div></div><div class=\"row\"><div class=\"col-xs-12\"><activity-grid></activity-grid></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/browse/browse.tpl.html',\n    '<div class=\"browseView\"><div class=\"row\"><div class=\"subTabs col-xs-12\"><div class=\"row\"><div class=\"col-xs-6 name\"><h3>Browse</h3></div><div class=\"col-xs-6 tabs\"><ul class=\"nav nav-tabs\" style=\"float: right;\"><li ui-sref-active=\"active\"><a ui-sref=\"browse.variants\">Browse by Variant</a></li><li ui-sref-active=\"active\"><a ui-sref=\"browse.genes\">Browse by Gene</a></li></ul></div></div></div></div><div class=\"row\"><div class=\"col-xs-12\"><ui-view></ui-view></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/browse/browseGridRow.tpl.html',\n    '<div ng-repeat=\"(colRenderIndex, col) in colContainer.renderedColumns track by col.colDef.name\" class=\"ui-grid-cell\" ng-class=\"{ \\'ui-grid-row-header-cell\\': col.isRowHeader }\" ui-grid-cell=\"\"></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/browse/browseGridTooltipCell.tpl.html',\n    '<div class=\"ngCellText\" ng-class=\"col.colIndex()\" tooltip=\"{{row.entity[col.field]}}\" tooltip-append-to-body=\"true\"><div class=\"ui-grid-cell-contents\">{{ row.entity[col.field] }}</div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/browse/browseViews.tpl.html',\n    '<div class=\"browseViews\"><browse-grid mode=\"ctrl.mode\" page=\"ctrl.page\"></browse-grid></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/search/search.tpl.html',\n    '<div class=\"searchView\"><div class=\"row\"><div class=\"subTabs col-xs-12\"><div class=\"row\"><div class=\"col-xs-6 name\"><h3>Search <span ng-switch=\"state\"><span ng-switch-when=\"search.evidence\">Evidence</span> <span ng-switch-when=\"search.genes\">Genes</span> <span ng-switch-when=\"search.variants\">Variants</span></span></h3></div><div class=\"col-xs-6 tabs\"><ul class=\"nav nav-tabs\" style=\"float: right;\"><li ui-sref-active=\"active\"><a ui-sref=\"search.evidence\">Search Evidence</a></li><li ui-sref-active=\"active\"><a ui-sref=\"search.variants\">Search Variants</a></li></ul></div></div></div></div><div class=\"row\"><div class=\"col-xs-12\"><ui-view></ui-view></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/search/searchEvidence.tpl.html',\n    '<div class=\"searchEvidence\"><query-builder entity=\"\\'evidence_items\\'\" fields=\"vm.fields.evidence_items\"></query-builder></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/search/searchGenes.tpl.html',\n    '<div class=\"searchEvidence\"><query-builder entity=\"\\'genes\\'\" fields=\"vm.fields.genes\"></query-builder></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/search/searchVariantGroups.tpl.html',\n    '<div class=\"searchVariantGroups\"><query-builder entity=\"\\'variantGroups\\'\" fields=\"vm.fields.variantGroups\"></query-builder></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/search/searchVariants.tpl.html',\n    '<div class=\"searchEvidence\"><query-builder entity=\"\\'variants\\'\" fields=\"vm.fields.variants\"></query-builder></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/account/components/notification.tpl.html',\n    '<div class=\"notification\"><div class=\"content\" ng-click=\"vm.eventClick(notification)\" ng-class=\"{ hover: mouseover, dark: theme === \\'dark\\', light: theme === \\'light\\', unseen: vm.seen === false }\" ng-mouseover=\"mouseover=true\" ng-mouseleave=\"mouseover=false\"><div class=\"user-time\"><span ng-switch=\"notification.type\"><span ng-switch-when=\"mention\"><user-block user=\"notification.originating_user\"></user-block>&nbsp;<span ng-bind=\"notification.event.timestamp|timeAgo\">time ago</span></span> <span ng-switch-default=\"\"><user-block user=\"notification.event.user\"></user-block>&nbsp;<span ng-bind=\"notification.event.timestamp|timeAgo\">time ago</span></span></span><br></div><div class=\"entity\"><span ng-switch=\"notification.event.event_type\"><span ng-switch-when=\"commented\">&nbsp;commented on</span> <span ng-switch-when=\"submitted\">&nbsp;submitted</span> <span ng-switch-when=\"accepted\">&nbsp;accepted</span> <span ng-switch-when=\"rejected\">&nbsp;rejected</span> <span ng-switch-when=\"change suggested\">&nbsp;suggested a revision to</span> <span ng-switch-when=\"change accepted\">&nbsp;accepted a revision to</span> <span ng-switch-when=\"change rejected\">&nbsp;rejected a revision to</span> <span ng-switch-default=\"\"></span></span> <span ng-switch=\"notification.type\"><span ng-switch-when=\"genes\"><span class=\"subject-type\">gene</span></span> <span ng-switch-when=\"variants\"><span class=\"subject-type\">variant</span></span> <span ng-switch-when=\"variantgroups\"><span class=\"subject-type\">variant group</span></span> <span ng-switch-when=\"evidenceitems\"><span class=\"subject-type\">evidence item</span></span> <span ng-switch-when=\"suggestedchanges\"><span class=\"subject-type\">a suggested revision to</span></span></span> <strong><span ng-bind=\"vm.entityName\">GENE / VARIANT / EVIDENCE</span></strong></div></div><a class=\"mark-as-seen btn btn-xs btn-primary\" ng-click=\"vm.markAsSeen()\" ng-hide=\"notification.seen\">Mark As Seen</a></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/activity/directives/activityGrid.tpl.html',\n    '<div class=\"activityGrid\"><div class=\"row\"><div class=\"col-xs-12\"><div ui-grid=\"ctrl.gridOptions\" ui-grid-cellnav=\"\" ui-grid-selection=\"\" ui-grid-pagination=\"\" ui-grid-auto-resize=\"\"></div></div></div><div class=\"row\"><div class=\"col-xs-12 text-center grid-pagination\"><pagination ng-if=\"ctrl.totalItems\" class=\"pagination-sm\" ng-change=\"ctrl.pageChanged()\" ng-model=\"ctrl.page\" items-per-page=\"ctrl.maxRows\" max-size=\"15\" boundary-links=\"true\" rotate=\"false\" align=\"true\" total-items=\"ctrl.totalItems\" direction-links=\"true\"></pagination><p class=\"page-info small\">{{ ctrl.totalItems }} {{ ctrl.isFiltered ? \"filtered\" : \"total\" }} {{ ctrl.browseMode }} &nbsp;&nbsp;&nbsp;&nbsp; Page {{ ctrl.page }} of {{ ctrl.totalPages }}</p></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/add/evidence/AddEvidenceView.tpl.html',\n    '<div class=\"AddEvidenceView\"><entity-view view-model=\"vm.AddEvidenceViewModel\" view-options=\"vm.AddEvidenceViewOptions\"><div class=\"row\"><div class=\"gradient-bg\"><div class=\"col-xs-12 title stripes-bg\"><h3><span class=\"entity-action\">ADD</span> <span ng-bind=\"vm.type\" class=\"entity-type\">EVIDENCE ITEM</span></h3></div></div></div><div class=\"row\"><div class=\"col-xs-12\"><ui-view id=\"add-evidence-view\"></ui-view></div></div></entity-view></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/add/evidence/addEvidenceBasic.tpl.html',\n    '<div class=\"addEvidenceBasic\" id=\"add-evidence-basic\" ng-init=\"vm.scroll()\"><div class=\"row\" ng-if=\"vm.showInstructions\"><div class=\"col-xs-12\"><div class=\"edit-instructions\"><p>To add an evidence item, please complete the following form, provide a short statement supporting its inclusion into the CIViC database, then click the \\'Submit Evidence for Inclusion\\' button.</p></div></div></div><div class=\"row messages\"><div class=\"col-xs-12\"><div ng-messages=\"vm.formMessages\" class=\"edit-messages\"><div ng-message=\"submitSuccess\" class=\"alert alert-success\"><strong class=\"status\">Success</strong> - <span class=\"message\">Your new evidence item was successfully submitted.</span></div></div></div></div><div class=\"row errors\"><div class=\"col-xs-12\"><div ng-messages=\"vm.formErrors\" class=\"edit-errors\"><div ng-message=\"500\" class=\"alert alert-danger\"><strong class=\"status\">500 <span ng-bind=\"vm.errorMessages[\\'500\\']\" class=\"message\">error msg</span></strong> - <span ng-bind=\"vm.errorPrompts[\\'500\\']\">error prompt</span></div><div ng-message=\"401\" class=\"alert alert-danger\"><strong class=\"status\">401 <span ng-bind=\"vm.errorMessages[\\'401\\']\" class=\"message\">error msg</span></strong> - <span ng-bind=\"vm.errorPrompts[\\'401\\']\">error prompt</span></div><div ng-message=\"403\" class=\"alert alert-danger\"><strong class=\"status\">403 <span ng-bind=\"vm.errorMessages[\\'403\\']\" class=\"message\">error msg</span></strong> - <span ng-bind=\"vm.errorPrompts[\\'403\\']\">error prompt</span></div><div ng-message=\"409\" class=\"alert alert-danger\"><strong class=\"status\">409 <span ng-bind=\"vm.errorMessages[\\'409\\']\" class=\"message\">error msg</span></strong> - <span ng-bind=\"vm.errorPrompts[\\'409\\']\">error prompt</span></div></div></div></div><div class=\"form\" ng-if=\"vm.showForm\"><div class=\"row\"><div class=\"col-xs-12\"><form class=\"form-horizontal\" name=\"vm.form\" novalidate=\"\"><formly-form options=\"vm.options\" model=\"vm.newEvidence\" fields=\"vm.evidenceFields\"></formly-form></form></div></div><div class=\"row\"><div class=\"col-xs-5 col-xs-offset-2\"><div class=\"buttons\"><div class=\"pull-left\"><cancel-button></cancel-button></div><div class=\"pull-right\"><span ng-if=\"vm.isAuthenticated\"><button type=\"submit\" class=\"btn btn-default\" ng-disabled=\"vm.form.$invalid\" ng-click=\"vm.submit(vm.newEvidence, vm.options)\">Submit Evidence for Inclusion</button></span></div></div></div></div><div class=\"row\" ng-if=\"vm.form.$invalid\"><div class=\"col-xs-5 col-xs-offset-2\"><div class=\"alert alert-info\">The Submit button is disabled because the Evidence form is incomplete or contains errors. Please ensure that all fields are completed and error free.</div></div></div></div><div class=\"successMessage\" ng-if=\"vm.showSuccessMessage\"><div class=\"col-xs-12 jumbotron\"><h1>Thank you.</h1><p>The evidence item has been added to the database with a status of \\'Pending\\'. In the meantime before it is accepted by an Administrator, CIViC users may review and comment upon it.</p><p><a ng-href=\"#/events/genes/{{vm.linkParams.geneId}}/summary/variants/{{vm.linkParams.variantId}}/summary/evidence/{{vm.linkParams.evidenceId}}/summary\" class=\"btn btn-small btn-default\">View it here</a> &nbsp;or&nbsp; <a ui-sref=\"add.evidence.basic\" ui-sref-opts=\"{reload:true, inherit: true}\" class=\"btn btn-small btn-default\">Add Another Evidence Item</a></p></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/add/evidence/addEvidenceDuplicateWarning.tpl.html',\n    '<div class=\"row\" ng-show=\"vm.duplicates.length > 0\"><div class=\"col-xs-offset-1 col-xs-10\"><div class=\"alert alert-warning\"><p>Evidence items already exist that use <em ng-bind=\"pubmedField.templateOptions.data.description\">this publication</em> to support a clinical interpretation of a mutation in {{model.gene.name}} {{model.variant.name}}. Please check the following evidence items to ensure that your intended contribution does not replicate the efforts of other curators:</p><evidence-grid style=\"background-color: white;border-radius: 8px;margin-top: 1em; padding: .5em;\" evidence=\"vm.duplicates\" variant=\"model.variant.name\" show-gene-col=\"false\" show-variant-col=\"false\" rounded=\"true\" context=\"\\'conflict\\'\" rows=\"3\"></evidence-grid></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/add/variantGroup/addVariantGroup.tpl.html',\n    '<div class=\"addVariantGroup\"><div class=\"row\"><div class=\"gradient-bg\"><div class=\"col-xs-12 title stripes-bg\"><h3><span class=\"entity-action\">ADD</span> <span ng-bind=\"vm.type\" class=\"entity-type\">VARIANT GROUP</span></h3></div></div></div><div class=\"row\" ng-if=\"vm.showInstructions\"><div class=\"col-xs-12\"><div class=\"add-instructions\"><p>To add a Variant Group, please complete the following form, then click the \\'Add Variant Group\\' button.</p></div></div></div><div class=\"row messages\"><div class=\"col-xs-12\"><div ng-messages=\"vm.formMessages\" class=\"add-messages\"><div ng-message=\"submitSuccess\" class=\"alert alert-success\"><strong class=\"status\">Success</strong> - <span class=\"message\">Your new evidence item was successfully submitted.</span></div></div></div></div><div class=\"row errors\"><div class=\"col-xs-12\"><div ng-messages=\"vm.formErrors\" class=\"add-errors\"><div ng-message=\"500\" class=\"alert alert-danger\"><strong class=\"status\">500 <span ng-bind=\"vm.errorMessages[\\'500\\']\" class=\"message\">error msg</span></strong> - <span ng-bind=\"vm.errorPrompts[\\'500\\']\">error prompt</span></div><div ng-message=\"401\" class=\"alert alert-danger\"><strong class=\"status\">401 <span ng-bind=\"vm.errorMessages[\\'401\\']\" class=\"message\">error msg</span></strong> - <span ng-bind=\"vm.errorPrompts[\\'401\\']\">error prompt</span></div><div ng-message=\"403\" class=\"alert alert-danger\"><strong class=\"status\">403 <span ng-bind=\"vm.errorMessages[\\'403\\']\" class=\"message\">error msg</span></strong> - <span ng-bind=\"vm.errorPrompts[\\'403\\']\">error prompt</span></div><div ng-message=\"409\" class=\"alert alert-danger\"><strong class=\"status\">409 <span ng-bind=\"vm.errorMessages[\\'409\\']\" class=\"message\">error msg</span></strong> - <span ng-bind=\"vm.errorPrompts[\\'409\\']\">error prompt</span></div></div></div></div><form class=\"form-horizontal\" ng-if=\"vm.showForm\"><div class=\"row\"><div class=\"col-xs-12\"><formly-form options=\"vm.options\" model=\"vm.variantGroup\" fields=\"vm.variantGroupFields\"></formly-form></div></div><div class=\"row\"><div class=\"col-xs-5 col-xs-offset-2\"><div class=\"buttons\"><div class=\"pull-left\"><cancel-button></cancel-button></div><div class=\"pull-right\"><button type=\"submit\" class=\"btn btn-default\" ng-click=\"vm.add(vm.variantGroup, vm.options)\">Add Variant Group</button></div></div></div></div></form><div class=\"successMessage\" ng-if=\"vm.showSuccessMessage\"><div class=\"col-xs-12 jumbotron\"><h1>Thank you.</h1><p>Your new Variant Group has been added.</p><p><a ng-href=\"#/events/genes/{{vm.newGeneId}}/summary/variantGroups/{{vm.newGroupId}}/summary\" class=\"btn btn-small btn-default\">View it here</a></p></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/browse/directives/browseGrid.tpl.html',\n    '<div class=\"browseGrid\"><div ng-if=\"ctrl.gridOptions.data.length > 0\"><div class=\"row\"><div class=\"col-xs-12\"><div class=\"gridContainer\"><div ui-grid=\"ctrl.gridOptions\" ui-grid-cellnav=\"\" ui-grid-selection=\"\" ui-grid-pagination=\"\" ui-grid-auto-resize=\"\"></div></div></div></div><div class=\"row\"><div class=\"col-xs-12 text-center grid-pagination\"><pagination ng-if=\"ctrl.totalItems\" class=\"pagination-sm\" ng-change=\"ctrl.pageChanged()\" ng-model=\"ctrl.page\" items-per-page=\"ctrl.maxRows\" max-size=\"15\" boundary-links=\"true\" rotate=\"false\" align=\"true\" total-items=\"ctrl.totalItems\" direction-links=\"true\"></pagination><p class=\"page-info small\">{{ ctrl.totalItems }} {{ ctrl.isFiltered ? \"filtered\" : \"total\" }} {{ ctrl.browseMode }} &nbsp;&nbsp;&nbsp;&nbsp; Page {{ ctrl.page }} of {{ ctrl.totalPages }}</p></div></div></div><div class=\"row\" ng-if=\"ctrl.gridOptions.data.length === 0\"><div class=\"col-xs-12\"><div class=\"no-records-found\"><h3>No records found.</h3><p>Please see civic-server instructions for details on importing your own records, or the test databases.</p></div></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/community/main/communityMain.tpl.html',\n    '<div class=\"communityMain\"><div class=\"row\"><div class=\"gradient-bg\"><div class=\"col-xs-12 title stripes-bg\"><h3><span class=\"entity-action\">COMMUNITY</span></h3></div></div></div><div class=\"row\"><div class=\"col-xs-12\"><h3 class=\"sub-title\">Leaderboards</h3></div></div><div class=\"row leaderboards-block\"><div class=\"col-xs-6 col-lg-3\"><div class=\"leaderboard\"><h4>Top Commentors</h4><table class=\"table table-condensed\"><thead><tr><th class=\"user\">User</th><th class=\"count\">Comments</th></tr></thead><tbody><tr ng-repeat=\"row in vm.leaderboards.most_comments\"><td class=\"user\"><user-block user=\"row.user\"></user-block></td><td class=\"count\" ng-bind=\"row.count\"></td></tr></tbody></table></div></div><div class=\"col-xs-6 col-lg-3\"><div class=\"leaderboard\"><h4>Top Submittors</h4><table class=\"table table-condensed\"><thead><tr><th class=\"user\">User</th><th class=\"count\">Submissions</th></tr></thead><tbody><tr ng-repeat=\"row in vm.leaderboards.most_submissions\"><td class=\"user\"><user-block user=\"row.user\"></user-block></td><td class=\"count\" ng-bind=\"row.count\"></td></tr></tbody></table></div></div><div class=\"col-xs-6 col-lg-3\"><div class=\"leaderboard\"><h4>Top Revisors</h4><table class=\"table table-condensed\"><thead><tr><th class=\"user\">User</th><th class=\"count\">Revisions</th></tr></thead><tbody><tr ng-repeat=\"row in vm.leaderboards.most_suggested_changes\"><td class=\"user\"><user-block user=\"row.user\"></user-block></td><td class=\"count\" ng-bind=\"row.count\"></td></tr></tbody></table></div></div><div class=\"col-xs-6 col-lg-3\"><div class=\"leaderboard\"><h4>Top Moderators</h4><table class=\"table table-condensed\"><thead><tr><th class=\"user\">User</th><th class=\"count\">Moderations</th></tr></thead><tbody><tr ng-repeat=\"row in vm.leaderboards.most_moderations\"><td class=\"user\"><user-block user=\"row.user\"></user-block></td><td class=\"count\" ng-bind=\"row.count\"></td></tr></tbody></table></div></div></div><div class=\"row\"><div class=\"col-xs-12\"><h3 class=\"sub-title\">Users</h3></div></div><div class=\"row users-form\"><form novalidate=\"\" class=\"form-horizontal\"><formly-form model=\"vm.model\" fields=\"vm.formFields\" options=\"vm.formOptions\"></formly-form></form></div><div class=\"row users-rows\"><user-card user=\"user\" class=\"col-xs-6 col-sm-4 col-lg-3\" ng-repeat=\"user in vm.users\"></user-card></div><div class=\"row\"><div class=\"col-xs-12 text-center users-pagination\"><pagination class=\"pagination-sm\" ng-change=\"vm.pageChanged()\" ng-model=\"vm.page\" items-per-page=\"vm.count\" max-size=\"15\" boundary-links=\"true\" rotate=\"false\" align=\"true\" total-items=\"vm.totalItems\" direction-links=\"true\"></pagination><p class=\"page-info small\">{{ vm.totalItems }} {{ vm.isFiltered ? \"filtered\" : \"total\" }} {{ vm.browseMode }} &nbsp;&nbsp;&nbsp;&nbsp; Page {{ vm.page }} of {{ vm.totalPages }}</p></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/common/actionBlock.tpl.html',\n    '<div class=\"actionBlock\"><div class=\"action-block view-pageBackground\" ng-repeat=\"(action, details) in actions\" tooltip=\"{{details.timestamp | timeAgo}}\" tooltip-placement=\"bottom\" tooltip-apppend-to-body=\"true\"><span class=\"action-label small\"><strong>{{ action | labelify }}</strong></span><span class=\"user-button small\">&nbsp;by<user-block user=\"details.user\"></user-block></span></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/common/editableField.tpl.html',\n    '<div class=\"editableField\" ng-transclude=\"\" ng-mouseover=\"ctrl.mouseOver()\" ng-mouseleave=\"ctrl.mouseLeave()\" ng-click=\"ctrl.click()\" ng-class=\"{hover: ctrl.hover, active: ctrl.active }\"></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/common/entityComment.tpl.html',\n    '<div class=\"entityComment\"><div ng-if=\"ctrl.comment.title.length > 0\"><div class=\"row\"><div class=\"col-xs-12\"><div class=\"title-block\"><a ui-sref=\"users.profile({userId: ctrl.comment.user.id})\"><div class=\"user-image\"><user-image user=\"ctrl.comment.user\" height=\"32\" width=\"32\"></user-image></div></a><div class=\"comment-title\"><h4 class=\"title\" ng-bind=\"ctrl.comment.title\">Comment Title</h4><span class=\"small\">Posted by <a ui-sref=\"users.profile({userId: ctrl.comment.user.id})\"><strong><span ng-bind=\"ctrl.comment.user.display_name\">user.display_name</span></strong></a> <span ng-bind=\"ctrl.comment.created_at | timeAgo\">comment.created_at</span></span></div></div></div></div><div class=\"row\"><div class=\"col-xs-12\"><div class=\"text-block\"><p ng-bind-html=\"ctrl.comment.html|unsafe\">Comment Text.</p></div></div></div></div><div ng-if=\"ctrl.comment.title.length === 0\"><div class=\"row\"><div class=\"col-xs-12\"><div class=\"comment-block\"><div class=\"user-image\"><a ui-sref=\"users.profile({userId: ctrl.comment.user.id})\"><user-image user=\"ctrl.comment.user\" height=\"32\" width=\"32\"></user-image></a></div><div class=\"comment-content\"><div class=\"text-block\"><p ng-bind-html=\"ctrl.comment.html|unsafe\">Comment Text.</p></div><div class=\"info-block\"><span class=\"small\">Posted by <a ui-sref=\"users.profile({userId: ctrl.comment.user.id})\"><strong><span ng-bind=\"ctrl.comment.user.display_name\">user.display_name</span></strong></a> <span ng-bind=\"ctrl.comment.created_at | timeAgo\">comment.created_at</span></span><div class=\"comment-actions pull-right\"><button ng-show=\"ctrl.comment.user.id === ctrl.security.currentUser.id\" ng-click=\"ctrl.deleteComment(ctrl.comment)\" class=\"btn btn-xs btn-default\">Delete</button></div></div></div></div></div></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/common/entityCommentForm.tpl.html',\n    '<div class=\"entityCommentForm\"><div ng-switch=\"vm.isAuthenticated\"><div ng-switch-when=\"true\"><div class=\"row comment-modes\"><div class=\"col-xs-12\"><button class=\"btn btn-default btn-xs active\" ng-class=\"{active: vm.mode === \\'edit\\'}\" ng-click=\"vm.switchMode(\\'edit\\')\" ng-disabled=\"vm.mode === \\'edit\\'\">COMPOSE</button> <button class=\"btn btn-default btn-xs\" ng-class=\"{active: vm.mode === \\'preview\\'}\" ng-click=\"vm.switchMode(\\'preview\\')\" ng-disabled=\"vm.mode === \\'preview\\'\">PREVIEW</button> &nbsp; <span class=\"comment-message\"><i class=\"glyphicon glyphicon-refresh\" ng-show=\"vm.previewLoading\"></i> <span class=\"small\" ng-bind=\"vm.commentMessage\"></span></span></div></div><div ng-switch=\"vm.mode\"><div ng-switch-when=\"edit\"><div class=\"row comment-form\"><div class=\"col-xs-12\"><form class=\"form-horizontal\" name=\"vm.commentForm\"><formly-form options=\"vm.options\" model=\"vm.newComment\" fields=\"vm.newCommentFields\" ng-submit=\"vm.submit(vm.newComment, vm.options.resetModel())\"></formly-form></form></div></div></div><div ng-switch-when=\"preview\"><div class=\"row preview-block\"><div class=\"col-xs-12\"><div class=\"preview\"><div ng-bind=\"vm.preview\" ng-hide=\"vm.previewLoading\">PREVIEW</div><div ng-bind-html=\"vm.previewText\">Preview Text</div></div></div></div></div><div class=\"row comment-buttons\"><div class=\"col-xs-10\"><div class=\"markdown-prompt\"><p>Use <button type=\"button\" class=\"btn btn-default btn-xs\" ng-click=\"vm.showMarkdownHelp = !vm.showMarkdownHelp\"><span class=\"glyphicon\" aria-hidden=\"true\" ng-class=\"{ \\'glyphicon-triangle-right\\': vm.showMarkdownHelp === false, \\'glyphicon-triangle-bottom\\': vm.showMarkdownHelp === true}\"></span> markdown</button> to add <strong>emphasis</strong>, <span style=\"font-style: oblique;\">styling</span>, images, and links to your comments. Use @user and #ENTITY <button type=\"button\" class=\"btn btn-default btn-xs\" ng-click=\"vm.showMacroHelp = !vm.showMacroHelp\"><span class=\"glyphicon\" aria-hidden=\"true\" ng-class=\"{ \\'glyphicon-triangle-right\\': vm.showMacroHelp === false, \\'glyphicon-triangle-bottom\\': vm.showMacroHelp === true}\"></span> macros</button> to add links to specific users and entity summaries.</p></div></div><div class=\"col-xs-2\"><div class=\"pull-right\"><button type=\"submit\" class=\"btn btn-default\" ng-disabled=\"vm.commentForm.$invalid\" ng-click=\"vm.submit(vm.newComment, vm.options.resetModel)\">Submit <span class=\"hidden-sm\">Comment</span></button></div></div></div><div class=\"row\"><div class=\"col-xs-6\" ng-show=\"vm.showMarkdownHelp\"><div ng-include=\"\\'app/views/events/common/entityCommentMarkdownHelp.tpl.html\\'\"></div></div><div class=\"col-xs-6\" ng-show=\"vm.showMacroHelp\" ng-class=\"{\\'col-xs-offset-6\\': !vm.showMarkdownHelp }\"><div ng-include=\"\\'app/views/events/common/entityCommentMacroHelp.tpl.html\\'\"></div></div></div></div></div><div ng-switch-default=\"\"><div class=\"row\"><div class=\"col-xs-12\"><p><strong>Please Sign In to post comments.</strong></p></div></div></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/common/entityCommentMacroHelp.tpl.html',\n    '<div class=\"entityCommentMarkdownHelp\"><div class=\"row\"><div class=\"col-xs-12\"><h4 class=\"subtitle\">@username mention macro</h4><p>\\'@\\' followed by a user\\'s display name will be displayed as a link to the user\\'s profile page, and generate a notification to the mentioned user. This is useful for calling a user\\'s attention to a particular comment.</p><p></p><h5>@ mention suggestions</h5><p></p>Type \\'@\\', and the first couple letters of a user\\'s name, and CIViC will show you a dropdown menu of users with matching display names. Hit enter to insert an user mention link, which will display in the rendered comment as a link to the user\\'s profile page, and generate a notification to the mentioned user.<p></p><pre><code class=\"markdown\">Hey @username, I\\'ve submitted a change, could you check it out?\\n' +\n    '</code></pre><h4 class=\"subtitle\">#ENTITY link macro</h4><p>\\'#\\' followed by an entity type abbreviation, and an entity ID will be displayed as a link to that entity\\'s summary view.</p><pre><code class=\"markdown\">For example with #V123 we see the opposite effect.\\n' +\n    '\\n' +\n    '#V123    Variant link\\n' +\n    '#G123    Gene link\\n' +\n    '#E123    Evidence Item link\\n' +\n    '#VG123   Variant Group link\\n' +\n    '#R123    Revision link</code></pre><h5># entity link suggestions</h5><p>Type \\'#\\', followed by an entity type abbreviation, a colon and search string, and CIViC will show you a list of entities with matching names (or summaries, in the case of evidence items). For example, entering \\'#V:v600\\' will display a list of variants with \\'V600\\' in the names; \\'#G:BR\\' will display a list of Genes with the string \\'BR\\' in the name. Select an entity to insert an #ENTITY string for that entity.</p><h5>Macro suggestion prompts</h5><pre>#G:[string]    Search for a gene by name\\n' +\n    '#V:[string]    Search for a variant by name\\n' +\n    '#VG:[string]   Search for a variant group by name\\n' +\n    '#E:[string]    Search for an evidence item by summary </pre></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/common/entityCommentMarkdownHelp.tpl.html',\n    '<div class=\"entityCommentMarkdownHelp\"><div class=\"row\"><div class=\"col-xs-12\"><h4>Headers</h4><pre><code class=\"markdown\"># This is an &lt;h1&gt; tag\\n' +\n    '\\n' +\n    '## This is an &lt;h2&gt; tag\\n' +\n    '\\n' +\n    '###### This is an &lt;h6&gt; tag\\n' +\n    '</code></pre><h4>Emphasis</h4><pre><code class=\"markdown\">*This text will be italic*\\n' +\n    '_This will also be italic_\\n' +\n    '\\n' +\n    '**This text will be bold**\\n' +\n    '__This will also be bold__\\n' +\n    '\\n' +\n    '*Italics and boldface **can be** combined*</code></pre><h4>Lists</h4><div style=\"width: 48%; float: left;\"><h5>Unordered</h5><pre><code class=\"markdown\">* Item 1\\n' +\n    '* Item 2\\n' +\n    '* Item 2a\\n' +\n    '* Item 2b\\n' +\n    '* Item 3</code></pre></div><div style=\"width: 48%; float: right;\"><h5>Ordered</h5><pre><code class=\"markdown\">1. Item 1\\n' +\n    '2. Item 2\\n' +\n    '3. Item 3\\n' +\n    '* Item 3a\\n' +\n    '* Item 3b</code></pre></div><h4>Images</h4><pre><code class=\"markdown\">![this cool diagram](http://site.com/images/cool.png)\\n' +\n    'Format: ![Alt Text](url)</code></pre><h4>Links</h4><pre><code class=\"markdown\">http://civic.genome.wustl.edu - automatic!\\n' +\n    '[CIViC](http://civic.genome.wustl.edu)</code></pre><h4>Blockquotes</h4><pre><code class=\"markdown\">As Charles Darwin said:\\n' +\n    '\\n' +\n    '&gt;It is not the strongest\\n' +\n    '&gt;of the species that survive,\\n' +\n    '&gt;nor the most intelligent,\\n' +\n    '&gt;but the one most responsive to change.</code></pre><h4>Inline code</h4><pre><code>I think you should use an\\n' +\n    '`&lt;addr&gt;` element here instead.</code></pre></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/common/entityLogEntry.tpl.html',\n    '<div class=\"entityLogEntry\"><div ng-switch=\"ctrl.entry.type\"><div ng-switch-when=\"revision\"><div class=\"row\"><div class=\"col-xs-12\"><div class=\"title-block\"><div class=\"user-image\"><user-image user=\"ctrl.user\" height=\"32\" width=\"32\"></user-image></div><div class=\"entry-title\"><h4 class=\"title\">Revision Submitted {{ctrl.entry.action|capitalize}}</h4><span class=\"small\">&nbsp;by&nbsp; <strong><span ng-bind=\"ctrl.username\">ctrl.username</span></strong> <span ng-bind=\"ctrl.entry.created_at | timeAgo\">comment.created_at</span></span></div></div></div></div></div><div ng-switch-when=\"history\"><div class=\"row\"><div class=\"col-xs-12\"><div class=\"title-block\"><div class=\"user-image\"><user-image user=\"ctrl.user\" height=\"32\" width=\"32\"></user-image></div><div class=\"entry-title\"><h4 class=\"title\">Revision Applied</h4><span class=\"small\">&nbsp;by&nbsp; <strong><span ng-bind=\"ctrl.username\">ctrl.username</span></strong> <span ng-bind=\"ctrl.entry.created_at | timeAgo\">ctrl.entry.created_at</span></span></div></div></div></div></div><div ng-switch-when=\"comment\"><div class=\"row\"><div class=\"col-xs-12\"><div class=\"title-block\"><div class=\"user-image\"><user-image user=\"ctrl.user\" height=\"32\" width=\"32\"></user-image></div><div class=\"entry-title\"><h4 class=\"title\">Comment Made<span ng-if=\"ctrl.entry.title.length> 0\">:</span> {{ ctrl.entry.title }}</h4><span class=\"small\">&nbsp;by&nbsp; <strong><span ng-bind=\"ctrl.username\">ctrl.username</span></strong> <span ng-bind=\"ctrl.entry.created_at | timeAgo\">ctrl.entry.created_at</span></span></div></div></div></div></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/common/entityTabs.tpl.html',\n    '<div class=\"entityTabs\"><a ng-attr-id=\"{{vm.anchorId}}\"></a><div class=\"tab-row\"><div class=\"row\"><div class=\"detail-corner\" ng-show=\"showCorner\"><div class=\"corner-edge\"></div></div><div class=\"col-xs-12 col-md-6 name\"><div ng-switch=\"vm.isAuthenticated()\"><div ng-switch-when=\"false\"><span tooltip=\"Please sign in to suggest a revision\" tooltip-append-to-body=\"true\"><span ng-include=\"\\'/entityTitle.tpl.html\\'\"></span></span></div><div ng-switch-when=\"true\"><span ng-include=\"\\'/entityTitle.tpl.html\\'\"></span></div></div></div><div class=\"col-xs-12 col-md-6 tabs {{ viewBackground }}\"><tabset class=\"tab-container\" type=\"{{\\'tabs\\'}}\" vertical=\"{{vertical}}\" justified=\"{{justified}}\"><tab class=\"tab\" ng-repeat=\"tab in tabs\" heading=\"{{tab.heading}}\" active=\"tab.active\" disable=\"tab.disabled\" ng-click=\"go(tab)\"></tab></tabset><div class=\"tab-info\" ng-if=\"vm.pendingFields.length > 0\"><span tooltip-template=\"\\'/pendingTooltip.tpl.html\\'\" tooltip-placement=\"left\" tooltip-append-to-body=\"true\"><i class=\"glyphicon glyphicon-exclamation-sign\"></i></span></div></div></div></div><div class=\"user-info-row\"><div class=\"row\"><div class=\"col-xs-12 {{ viewBackground }}\"><ul class=\"actions-list\"><li><action-block actions=\"vm.actions\"></action-block></li></ul></div></div></div></div><script type=\"text/ng-template\" id=\"/entityTitle.tpl.html\"><h3 editable-field class=\"edit-icon-lg tab-name\" entity-view-model=\"entityViewModel\" entity-view-revisions=\"entityViewRevisions\" entity-view-options=\"entityViewOptions\"> <span ng-bind=\"vm.type\" class=\"entity-type\">Entity</span> <span ng-bind=\"vm.name\" class=\"entity-name\">Name</span> </h3></script><script type=\"text/ng-template\" id=\"/pendingTooltip.tpl.html\"><span> This {{ vm.type.toLowerCase() }} has pending revisions to the {{vm.pendingFields.length > 1 ? \\'fields\\' : \\'field\\' }} <span ng-repeat=\"field in vm.pendingFields\">{{$first ? \\'\\' : $last ? \\', and \\' : \\', \\'}}{{ field | keyToLabel}}</span> </span></script>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/common/entityTalkRevisionsView.tpl.html',\n    '<div class=\"entityTalkRevisionsView\"><div ng-transclude=\"\"></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/common/entityTalkTabs.tpl.html',\n    '<div class=\"entityTalkTabs\"><div class=\"{{ tabRowBackground }}\"><div class=\"row\"><div class=\"col-xs-12 tabs {{ viewBackground }}\"><tabset class=\"tab-container\" type=\"{{\\'tabs\\'}}\" vertical=\"{{false}}\" justified=\"{{false}}\"><tab class=\"tab\" ng-repeat=\"tab in tabs\" heading=\"{{tab.heading}}\" active=\"tab.active\" disable=\"tab.disabled\" ng-click=\"go(tab)\"></tab></tabset></div></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/common/entityTalkView.tpl.html',\n    '<div class=\"entityTalkView\"><div ng-transclude=\"\"></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/common/entityUsersPopover.tpl.html',\n    '<div class=\"entityUsersPopover\"><span class=\"btn btn-xs btn-default\" popover-template=\"vm.usersPopover.templateUrl\" popover-placement=\"left\" popover-title=\"{{vm.usersPopover.title}}\"><i class=\"glyphicon glyphicon-user\"></i></span></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/common/entityUsersPopoverTemplate.tpl.html',\n    '<div class=\"entityUsersPopoverTemplate\"><table class=\"table table-condensed borderless\"><tbody><tr ng-repeat=\"(action, user) in vm.users\"><td><strong>{{action | labelify}}</strong></td><td>{{user.timestamp | timeAgo}}</td><td><strong>by</strong> {{user.user.display_name}}</td></tr></tbody></table></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/common/entityView.tpl.html',\n    '<div class=\"entityView\"><div ng-transclude=\"\"></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/common/evidenceDirectionCell.tpl.html',\n    '<div class=\"evidenceDirectionCell\" style=\"{{ \\'height:\\' + row.height + \\'px;\\'}}\" ng-class=\"col.colIndex()\" tooltip=\"{{row.entity[col.field]}}\" tooltip-placement=\"left\" tooltip-append-to-body=\"true\"><span class=\"glyphicon\" ng-class=\"{ \\'glyphicon-thumbs-up\\': row.entity[col.field] === \\'Supports\\', \\'glyphicon-thumbs-down\\': row.entity[col.field] === \\'Does Not Support\\'}\"></span></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/common/evidenceGrid.tpl.html',\n    '<div class=\"evidenceGrid\" ng-class=\"{ \\'rounded\\': rounded === true }\"><div class=\"row\"><div class=\"col-xs-8\"><h4><span ng-switch=\"ctrl.context\"><span ng-switch-when=\"summary\">Evidence for {{ variant.name }}</span> <span ng-switch-when=\"search\">Search Results</span> <span ng-switch-when=\"profile\">Submitted Evidence Items</span> <span ng-switch-when=\"conflict\">Existing Evidence Items</span></span> <span class=\"record-info\"><span>{{ ctrl.gridApi.grid.rows.length }} total items</span> <span ng-if=\"ctrl.gridApi.grid.renderContainers.body.visibleRowCache.length !== ctrl.gridApi.grid.rows.length\">(showing {{ctrl.gridApi.grid.renderContainers.body.visibleRowCache.length}})</span></span></h4></div><div class=\"col-xs-2\"><button class=\"btn btn-default btn-xs pull-right col-key btn-block\" popover-placement=\"bottom\" popover-template=\"ctrl.exportPopover.templateUrl\"><span class=\"glyphicon glyphicon-export\" aria-hidden=\"true\"></span> Get Data</button></div><div class=\"col-xs-2\"><button class=\"btn btn-default btn-xs pull-right col-key btn-block\" ng-click=\"ctrl.showGridKey = !ctrl.showGridKey\"><span class=\"glyphicon\" aria-hidden=\"true\" ng-class=\"{ \\'glyphicon-triangle-right\\': ctrl.showGridKey === false, \\'glyphicon-triangle-bottom\\': ctrl.showGridKey === true}\"></span> Help</button></div></div><div class=\"row column-key\" ng-show=\"ctrl.showGridKey\"><div class=\"col-xs-12\"><div ng-include=\"\\'app/views/events/common/evidenceGridPopoverKey.tpl.html\\'\"></div></div></div><div class=\"row\"><div class=\"col-xs-12\"><div ui-grid=\"ctrl.evidenceGridOptions\" ui-grid-cellnav=\"\" ui-grid-auto-resize=\"\" ui-grid-exporter=\"\" ui-grid-selection=\"\"></div></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/common/evidenceGridClinicalSignificanceCell.tpl.html',\n    '<div class=\"clinicalCell\" style=\"{{ \\'height:\\' + row.height + \\'px;\\'}}\" ng-class=\"col.colIndex()\" tooltip-popup-delay=\"{{ctrl.tooltipPopupDelay}}\" tooltip=\"{{row.entity[col.field]}}\" tooltip-placement=\"left\" tooltip-append-to-body=\"true\"><span class=\"glyphicon\" ng-class=\"{ \\'glyphicon-heart\\': row.entity[col.field] === \\'Sensitivity\\', \\'glyphicon-ban-circle\\': row.entity[col.field] === \\'Resistance or Non-Response\\', \\'glyphicon-arrow-up\\': row.entity[col.field] === \\'Better Outcome\\', \\'glyphicon-arrow-down\\': row.entity[col.field] === \\'Poor Outcome\\', \\'glyphicon-plus-sign\\': row.entity[col.field] === \\'Positive\\', \\'glyphicon-minus-sign\\': row.entity[col.field] === \\'Negative\\', \\'glyphicon-remove-circle not-applicable\\': row.entity[col.field] === \\'N/A\\', \\'glyphicon-fire\\' : row.entity[col.field] === \\'Adverse Response\\'}\"></span></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/common/evidenceGridDiseaseCell.tpl.html',\n    '<div class=\"diseaseCell ngCellText\" tooltip=\"{{ COL_FIELD }}\" tooltip-popup-delay=\"{{ctrl.tooltipPopupDelay}}\" tooltip-placement=\"right\" tooltip-append-to-body=\"true\"><div class=\"ui-grid-cell-contents\">{{COL_FIELD; CUSTOM_FILTERS}}</div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/common/evidenceGridDrugCell.tpl.html',\n    '<div class=\"ngCellText\" ng-class=\"col.colIndex()\" tooltip=\"{{row.entity[\\'drug_interaction_type\\'] ? row.entity[col.field] + \\' (\\' + row.entity[\\'drug_interaction_type\\'] + \\')\\' : row.entity[col.field] }}\" tooltip-popup-delay=\"{{ctrl.tooltipPopupDelay}}\" tooltip-placement=\"left\" tooltip-append-to-body=\"true\"><div class=\"ui-grid-cell-contents\">{{ row.entity[\\'drug_interaction_type\\'] ? row.entity[col.field] + \\' (\\' + row.entity[\\'drug_interaction_type\\'] + \\')\\' : row.entity[col.field] }}</div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/common/evidenceGridDrugInteractionTypeCell.tpl.html',\n    '<div class=\"typeCell ngCellText\" style=\"{{ \\'height:\\' + row.height + \\'px;\\'}}\"><span ng-cell-text=\"\">{{ row.entity[col.field] }}</span></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/common/evidenceGridEvidenceCell.tpl.html',\n    '<div class=\"ngCellText\" ng-class=\"col.colIndex()\" tooltip=\"{{row.entity[col.field]}}\" tooltip-popup-delay=\"{{ctrl.tooltipPopupDelay}}\" tooltip-placement=\"right\" tooltip-append-to-body=\"true\"><div ng-switch=\"\" on=\"row.entity[col.field].length > 0\"><div ng-switch-when=\"true\" class=\"ui-grid-cell-contents\">{{ row.entity[col.field] }}</div><div ng-switch-when=\"false\" class=\"ui-grid-cell-contents\">No summary found.</div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/common/evidenceGridExport.tpl.html',\n    '<div class=\"evidenceGridExport\"><div class=\"form-inline\"><div class=\"controls-row\"><label class=\"radio inline control-label\">Include:</label><br><div class=\"form-group\"><label class=\"radio inline\"><input type=\"radio\" ng-model=\"ctrl.exportPopover.include\" value=\"all\"> All Rows</label><br><label class=\"radio inline\"><input type=\"radio\" ng-model=\"ctrl.exportPopover.include\" value=\"filtered\"> Filtered Rows</label></div></div><label class=\"radio inline control-label\">Filetype:</label><br><div class=\"form-group\"><label class=\"radio inline\"><input type=\"radio\" ng-model=\"ctrl.exportPopover.type\" value=\"csv\"> CSV</label><br></div></div><button class=\"btn btn-default btn-xs btn-block\" ng-click=\"ctrl.exportData()\"><span class=\"glyphicon glyphicon-save\" aria-hidden=\"true\"></span> Download <span ng-bind=\"ctrl.exportPopover.type.toUpperCase()\">File</span></button></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/common/evidenceGridIdCell.tpl.html',\n    '<div class=\"ngCellText idCell\" ng-class=\"col.colIndex()\" tooltip=\"EID{{row.entity[col.field]}}: {{row.entity[\\'status\\']|capitalize}}\" tooltip-popup-delay=\"{{ctrl.tooltipPopupDelay}}\" tooltip-placement=\"right\" tooltip-append-to-body=\"true\"><span class=\"btn-block\" ng-class=\"{ \\'statusAccepted\\': row.entity[\\'status\\'] === \\'accepted\\', \\'statusSubmitted\\': row.entity[\\'status\\'] === \\'submitted\\', \\'statusRejected\\': row.entity[\\'status\\'] === \\'rejected\\' }\">{{ row.entity[col.field] }}</span></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/common/evidenceGridLevelCell.tpl.html',\n    '<div class=\"levelCell ngCellText\" tooltip=\"{{grid.appScope.ctrl.evidenceLevels[row.entity[col.field]]}}\" tooltip-popup-delay=\"{{ctrl.tooltipPopupDelay}}\" tooltip-placement=\"left\" tooltip-append-to-body=\"true\"><span class=\"btn-block\" ng-class=\"{\\'levelA\\': row.entity[col.field] === \\'A\\', \\'levelB\\': row.entity[col.field] === \\'B\\',\\'levelC\\': row.entity[col.field] === \\'C\\', \\'levelD\\': row.entity[col.field] === \\'D\\', \\'levelE\\': row.entity[col.field] === \\'E\\' }\">{{ row.entity[col.field] }}</span></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/common/evidenceGridPopoverKey.tpl.html',\n    '<div class=\"popoverKey\"><div class=\"row\"><div class=\"col-xs-12 popover-description\"><p>The Evidence Grid below lists all of the evidence items <span ng-switch=\"context\"><span ng-switch-when=\"summary\">for {{ variant.name }}\\'s description.</span> <span ng-switch-when=\"search\">your search.</span> <span ng-switch-when=\"profile\">submitted by this user.</span> <span ng-switch-when=\"conflict\">depending on the same publication.</span></span> In order to condense all of the relevant details for each evidence item onto a single row, we\\'ve abbreviated the column headers, and have used icons instead of text to indicate the values of various evidence item properties.</p><p>This key shows the meaning of the abbreviations and icons.</p><p>All of the table cells display their values in tooltips. For example, if you wish to read the entire description of an evidence item without clicking on it, or see what an icon means, hold the mouse pointer over the cell and its tooltip will be displayed.</p><p>The <span class=\"glyphicon glyphicon-remove-circle\"></span> symbol means \\'Not Applicable\\'.</p></div><div class=\"col-xs-6\"><table class=\"table table-condensed column-key\" style=\"border-right: 1px solid #CCC\"><tr><th class=\"col-name\">Column&nbsp;Abbreviation</th><th class=\"col-description\">Column&nbsp;Description</th></tr><tr><td class=\"col-name\">EID</td><td class=\"col-description\"><span>Evidence ID Number</span><table class=\"table table-condensed symbol-key\"><tr><td class=\"symbol levelCell\"><span class=\"btn-block ng-binding statusSubmitted\">&nbsp;&nbsp;</span></td><td class=\"symbol-description\">Submitted</td></tr><tr><td class=\"symbol levelCell\"><span class=\"btn-block ng-binding statusAccepted\">&nbsp;&nbsp;</span></td><td class=\"symbol-description\">Accepted</td></tr><tr><td class=\"symbol levelCell\"><span class=\"btn-block ng-binding statusRejected\">&nbsp;&nbsp;</span></td><td class=\"symbol-description\">Rejected</td></tr></table></td></tr><tr><td class=\"col-name\">DESC</td><td class=\"col-description\"><span>Evidence Description</span></td></tr><tr><td class=\"col-name\">DIS</td><td class=\"col-description\"><span>Disease</span></td></tr><tr><td class=\"col-name\">DRUG</td><td class=\"col-description\"><span>Drug(s)</span></td></tr><tr><td class=\"col-name\">EL</td><td class=\"col-description\"><span>Evidence Level</span><table class=\"table table-condensed symbol-key\"><tr><td class=\"symbol levelCell\"><span class=\"btn-block ng-binding levelA\">A</span></td><td class=\"symbol-description\">Validated</td></tr><tr><td class=\"symbol levelCell\"><span class=\"btn-block ng-binding levelB\">B</span></td><td class=\"symbol-description\">Clinical</td></tr><tr><td class=\"symbol levelCell\"><span class=\"btn-block ng-binding levelC\">C</span></td><td class=\"symbol-description\">Case Study</td></tr><tr><td class=\"symbol levelCell\"><span class=\"btn-block ng-binding levelD\">D</span></td><td class=\"symbol-description\">Preclinical</td></tr><tr><td class=\"symbol levelCell\"><span class=\"btn-block ng-binding levelE\">E</span></td><td class=\"symbol-description\">Inferential</td></tr></table></td></tr><tr><td class=\"col-name\">ET</td><td class=\"col-description\"><span>Evidence Type</span><table class=\"table table-condensed symbol-key\"><tr><td class=\"symbol typeCell\"><span class=\"glyphicon glyphicon-eye-open\"></span></td><td class=\"symbol-description\">Predictive</td></tr><tr><td class=\"symbol typeCell\"><span class=\"glyphicon glyphicon-search\"></span></td><td class=\"symbol-description\">Diagnostic</td></tr><tr><td class=\"symbol typeCell\"><span class=\"glyphicon glyphicon-road\"></span></td><td class=\"symbol-description\">Prognostic</td></tr></table></td></tr></table></div><div class=\"col-xs-6\"><table class=\"table table-condensed column-key\"><tr><th class=\"col-name\">Column&nbsp;Abbreviation</th><th class=\"col-description\">Column&nbsp;Description</th></tr><tr><td class=\"col-name\">ED</td><td class=\"col-description\"><span>Evidence Direction</span><table class=\"table table-condensed symbol-key\"><tr><td class=\"symbol directionCell\"><span class=\"glyphicon glyphicon-thumbs-up\"></span></td><td class=\"symbol-description\">Supports</td></tr><tr><td class=\"symbol directionCell\"><span class=\"glyphicon glyphicon-thumbs-down\"></span></td><td class=\"symbol-description\">Does Not Support</td></tr></table></td></tr><tr><td class=\"col-name\">CS</td><td class=\"col-description\"><span>Clinical Significance</span><table class=\"table table-condensed symbol-key\"><tr><td class=\"symbol clinicalCell\"><span class=\"glyphicon glyphicon-heart\"></span></td><td class=\"symbol-description\">Sensitivity</td></tr><tr><td class=\"symbol clinicalCell\"><span class=\"glyphicon glyphicon-ban-circle\"></span></td><td class=\"symbol-description\">Resistance or Non-Response</td></tr><tr><td class=\"symbol clinicalCell\"><span class=\"glyphicon glyphicon-arrow-up\"></span></td><td class=\"symbol-description\">Better Outcome</td></tr><tr><td class=\"symbol clinicalCell\"><span class=\"glyphicon glyphicon-arrow-down\"></span></td><td class=\"symbol-description\">Poor Outcome</td></tr><tr><td class=\"symbol clinicalCell\"><span class=\"glyphicon glyphicon-plus-sign\"></span></td><td class=\"symbol-description\">Positive</td></tr><tr><td class=\"symbol clinicalCell\"><span class=\"glyphicon glyphicon-minus-sign\"></span></td><td class=\"symbol-description\">Negative</td></tr><tr><td class=\"symbol clinicalCell\"><span class=\"glyphicon glyphicon-fire\"></span></td><td class=\"symbol-description\">Adverse Response</td></tr><tr><td class=\"symbol clinicalCell\"><span class=\"glyphicon glyphicon-remove-circle not-applicable\"></span></td><td class=\"symbol-description\">N/A</td></tr></table></td></tr><tr><td class=\"col-name\">VO</td><td class=\"col-description\"><span>Variant Origin</span><table class=\"table table-condensed symbol-key\"><tr><td class=\"symbol originCell\"><span class=\"glyphicon glyphicon-option-vertical\"></span></td><td class=\"symbol-description\">Germline Mutation</td></tr><tr><td class=\"symbol originCell\"><span class=\"glyphicon glyphicon-option-horizontal\"></span></td><td class=\"symbol-description\">Somatic Mutation</td></tr><tr><td class=\"symbol originCell\"><span class=\"glyphicon glyphicon-equalizer\"></span></td><td class=\"symbol-description\">Germline Polymorphism</td></tr><tr><td class=\"symbol originCell\"><span class=\"glyphicon glyphicon-question-sign\"></span></td><td class=\"symbol-description\">Unknown</td></tr><tr><td class=\"symbol originCell\"><span class=\"glyphicon glyphicon-remove-circle not-applicable\"></span></td><td class=\"symbol-description\">N/A</td></tr></table></td></tr><tr><td class=\"col-name\">TR</td><td class=\"col-description\"><span>Trust Rating</span></td></tr></table></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/common/evidenceGridRatingCell.tpl.html',\n    '<div class=\"ratingCell\" ng-class=\"col.colIndex()\"><span ng-bind=\"row.entity[col.field]\"></span> <i class=\"glyphicon glyphicon-star\"></i></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/common/evidenceGridTooltipHeader.tpl.html',\n    '<div role=\"columnheader\" ng-class=\"{ \\'sortable\\': sortable }\" ui-grid-one-bind-aria-labelledby-grid=\"col.uid + \\'-header-text \\' + col.uid + \\'-sortdir-text\\'\" aria-sort=\"{{col.sort.direction == asc ? \\'ascending\\' : ( col.sort.direction == desc ? \\'descending\\' : (!col.sort.direction ? \\'none\\' : \\'other\\'))}}\"><div role=\"button\" tabindex=\"0\" class=\"ui-grid-cell-contents ui-grid-header-cell-primary-focus\" col-index=\"renderIndex\" title=\"TOOLTIP\"><span class=\"ui-grid-header-cell-label\" ui-grid-one-bind-id-grid=\"col.uid + \\'-header-text\\'\" tooltip=\"{{col.headerTooltip(col)}}\" tooltip-placement=\"top\" tooltip-append-to-body=\"true\">{{ col.displayName }}</span> <span ui-grid-one-bind-id-grid=\"col.uid + \\'-sortdir-text\\'\" ui-grid-visible=\"col.sort.direction\" aria-label=\"{{getSortDirectionAriaLabel()}}\"><i ng-class=\"{ \\'ui-grid-icon-up-dir\\': col.sort.direction == asc, \\'ui-grid-icon-down-dir\\': col.sort.direction == desc, \\'ui-grid-icon-blank\\': !col.sort.direction }\" title=\"{{col.sort.priority ? i18n.headerCell.priority + \\' \\' + col.sort.priority : null}}\" aria-hidden=\"true\"></i> <sub class=\"ui-grid-sort-priority-number\">{{col.sort.priority}}</sub></span></div><div role=\"button\" tabindex=\"0\" ui-grid-one-bind-id-grid=\"col.uid + \\'-menu-button\\'\" class=\"ui-grid-column-menu-button\" ng-if=\"grid.options.enableColumnMenus && !col.isRowHeader && col.colDef.enableColumnMenu !== false\" ng-click=\"toggleMenu($event)\" ng-class=\"{\\'ui-grid-column-menu-button-last-col\\': isLastCol}\" ui-grid-one-bind-aria-label=\"i18n.headerCell.aria.columnMenuButtonLabel\" aria-haspopup=\"true\"><i class=\"ui-grid-icon-angle-down\" aria-hidden=\"true\">&nbsp;</i></div><div ui-grid-filter=\"\"></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/common/evidenceGridTypeCell.tpl.html',\n    '<div class=\"typeCell ngCellText\" style=\"{{ \\'height:\\' + row.height + \\'px;\\'}}\" ng-class=\"col.colIndex()\" tooltip=\"{{row.entity[col.field]}}\" tooltip-popup-delay=\"{{ctrl.tooltipPopupDelay}}\" tooltip-placement=\"left\" tooltip-append-to-body=\"true\"><span class=\"glyphicon\" ng-class=\"{ \\'glyphicon-eye-open\\': row.entity[col.field] === \\'Predictive\\', \\'glyphicon-search\\': row.entity[col.field] === \\'Diagnostic\\', \\'glyphicon-road\\': row.entity[col.field] === \\'Prognostic\\' }\"></span></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/common/evidenceGridVariantOriginCell.tpl.html',\n    '<div class=\"variantOriginCell originCell\" style=\"{{ \\'height:\\' + row.height + \\'px;\\'}}\" ng-class=\"col.colIndex()\" tooltip=\"{{row.entity[col.field]}}\" tooltip-popup-delay=\"{{ctrl.tooltipPopupDelay}}\" tooltip-placement=\"left\" tooltip-append-to-body=\"true\"><span class=\"glyphicon\" ng-class=\"{ \\'glyphicon-option-vertical\\': row.entity[col.field] === \\'Germline Mutation\\', \\'glyphicon-option-horizontal\\': row.entity[col.field] === \\'Somatic Mutation\\', \\'glyphicon-equalizer\\': row.entity[col.field] === \\'Germline Polymorphism\\', \\'glyphicon-question-sign\\': row.entity[col.field] === \\'Unknown\\', \\'glyphicon-remove-circle not-applicable\\': row.entity[col.field] === \\'N/A\\' }\"></span></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/common/revisionsGrid.tpl.html',\n    '<div class=\"revisionsGrid\"><span class=\"record-info\"><span>{{ ctrl.gridApi.grid.rows.length }} total revisions</span> <span ng-if=\"ctrl.gridApi.grid.renderContainers.body.visibleRowCache.length !== ctrl.gridApi.grid.rows.length\">(showing {{ctrl.gridApi.grid.renderContainers.body.visibleRowCache.length}})</span></span><div ui-grid=\"ctrl.revisionsGridOptions\" ui-grid-cellnav=\"\" ui-grid-auto-resize=\"\" ui-grid-selection=\"\"></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/common/revisionsGridCreatedCell.tpl.html',\n    '<div class=\"ngCellText\" ng-class=\"col.colIndex()\" tooltip=\"{{row.entity[col.field]}}\" tooltip-append-to-body=\"true\"><div class=\"ui-grid-cell-contents\">{{ row.entity[col.field] | timeAgo}}</div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/evidence/EvidenceView.tpl.html',\n    '<div class=\"EvidenceView\"><entity-view view-model=\"vm.EvidenceViewModel\" view-revisions=\"vm.EvidenceViewRevisions\" view-options=\"vm.EvidenceViewOptions\"><div class=\"row\"><div class=\"col-xs-12\"><entity-tabs></entity-tabs></div></div><div class=\"row\"><div class=\"col-xs-12\"><ui-view></ui-view></div></div></entity-view></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/genes/GenesView.tpl.html',\n    '<div class=\"GenesView\"><entity-view view-model=\"vm.GenesViewModel\" view-revisions=\"vm.GenesViewRevisions\" view-options=\"vm.GenesViewOptions\"><div class=\"row\"><div class=\"col-xs-12\"><entity-tabs></entity-tabs></div></div><div class=\"row\"><div class=\"col-xs-12\"><ui-view></ui-view></div></div></entity-view></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/variantGroups/variantGroupsView.tpl.html',\n    '<div class=\"VariantGroupsView\"><entity-view view-model=\"vm.VariantGroupsViewModel\" view-revisions=\"vm.VariantGroupsViewRevisions\" view-options=\"vm.VariantGroupsViewOptions\"><div class=\"row\"><div class=\"col-xs-12\"><entity-tabs show-corner=\"true\"></entity-tabs></div></div><div class=\"row\"><div class=\"col-xs-12\"><ui-view></ui-view></div></div></entity-view></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/variants/VariantsView.tpl.html',\n    '<div class=\"VariantsView\"><entity-view view-model=\"vm.VariantsViewModel\" view-revisions=\"vm.VariantsViewRevisions\" view-options=\"vm.VariantsViewOptions\"><div class=\"row\"><div class=\"col-xs-12\"><entity-tabs show-corner=\"true\"></entity-tabs></div></div><div class=\"row\"><div class=\"col-xs-12\"><ui-view></ui-view></div></div></entity-view></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/search/directives/queryBuilder.tpl.html',\n    '<div class=\"queryBuilder\"><div class=\"row\"><div class=\"col-xs-12\"><div class=\"operator-prompt\"><div ng-if=\"vm.model.queries.length <= 1\"><span class=\"prompt-text\">Match the following condition:</span></div><div ng-if=\"vm.model.queries.length > 1\"><span class=\"prompt-text\">Match</span><div class=\"operator-select\"><formly-form fields=\"vm.operatorField\" model=\"vm.model\"></formly-form></div><span class=\"prompt-text\">of the following conditions:</span></div></div></div></div><div class=\"row\"><div class=\"col-xs-12\"><form ng-submit=\"vm.onSubmit()\" novalidate=\"\"><formly-form model=\"vm.model\" fields=\"vm.fields\" form=\"vm.form\" options=\"vm.options\"></formly-form></form></div></div><div class=\"row\"><div class=\"col-xs-12\"><div class=\"button-row pull-right\"><span class=\"form-warning\" ng-if=\"vm.form.$pristine === false && vm.form.$invalid\">Ensure all fields are specified to submit your search.</span> <button type=\"submit\" class=\"btn btn-primary submit-button\" ng-disabled=\"vm.form.$invalid\" ng-click=\"vm.onSubmit()\" ng-bind=\"vm.buttonLabel\">BUTTON LABEL</button></div></div></div><div ng-if=\"vm.showGrid === true\"><div class=\"row\"><div class=\"col-xs-12 entity-grid\"><div ng-switch=\"vm.entity\"><div ng-switch-when=\"evidence_items\"><evidence-grid evidence=\"vm.searchResults\" rows=\"15\" show-gene-col=\"true\" show-variant-col=\"true\" context=\"\\'search\\'\" rounded=\"true\"></evidence-grid></div><div ng-switch-when=\"variants\"><variant-grid context=\"\\'search\\'\" rows=\"15\" variants=\"vm.searchResults\"></variant-grid></div><div ng-switch-when=\"genes\"><p>Genes Grid will go here.</p></div><div ng-switch-when=\"variantGroups\"><p>Variant Groups Grid will go here.</p></div></div></div></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/search/forms/queryBuilder.type.tpl.html',\n    '<div class=\"queryBuilder\"><div class=\"row\" ng-repeat=\"element in model[options.key]\" ng-init=\"fields = copyFields(to.rowFields); conditionFields = copyFields(to.conditionFields)\"><div class=\"col-xs-12\"><div class=\"query-row\"><div class=\"row\"><div class=\"col-xs-3 col-lg-3 field-selector\"><formly-form fields=\"fields\" model=\"element\" form=\"form\" class=\"form-inline pull-right\"></formly-form></div><div class=\"col-xs-7 col-lg-7 field-form\"><formly-form fields=\"conditionFields[element.field]\" model=\"element.condition\" class=\"form-inline\"></formly-form></div><div class=\"col-xs-2 row-buttons\"><div class=\"pull-right\"><button type=\"button\" class=\"btn btn-xs btn-danger\" ng-if=\"model[options.key].length > 1\" ng-click=\"model[options.key].splice($index, 1)\"><span class=\"glyphicon glyphicon-remove\"></span></button> <button type=\"button\" class=\"btn btn-xs btn-primary\" style=\"margin-left: 6px;\" ng-if=\"$index + 1 === model[options.key].length\" ng-click=\"addNew()\"><span class=\"glyphicon glyphicon-plus\"></span></button></div></div></div></div></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/users/common/userSummary.tpl.html',\n    '<div class=\"userSummary\"><div class=\"row\"><div class=\"col-xs-3\"><div class=\"card-block\"><user-card user=\"user\"></user-card></div></div><div class=\"col-xs-5\"><div class=\"info-block\"><table class=\"table-info\"><tr><td class=\"key\">Role:</td><td class=\"value\">{{user.role|ifEmpty: \\'--\\'}}</td></tr><tr><td class=\"key\">Username:</td><td class=\"value\">{{user.username|ifEmpty: \\'--\\'}}</td></tr><tr><td class=\"key\">Name:</td><td class=\"value\">{{user.name|ifEmpty: \\'--\\'}}</td></tr><tr><td class=\"key\">Area of Expertise:</td><td class=\"value\">{{user.area_of_expertise|ifEmpty: \\'--\\'}}</td></tr><tr><td colspan=\"2\"><button ng-show=\"user.id === vm.currentUser.id\" class=\"btn btn-xs btn-default btn-block\" ui-sref=\"users.edit\" style=\"margin-top: 16px;\">Edit Profile</button></td></tr></table></div></div><div class=\"col-xs-4\"><div class=\"info-block\"><table class=\"table-info\"><tr><td class=\"key\">Comments:</td><td class=\"value\">{{vm.stats.comments}}</td></tr><tr><td class=\"key\">Suggested Changes:</td><td class=\"value\">{{vm.stats.suggested_changes}}</td></tr><tr><td class=\"key\">Applied Changes:</td><td class=\"value\">{{vm.stats.applied_changes}}</td></tr><tr><td class=\"key\">Submitted Evidence:</td><td class=\"value\">{{vm.stats.submitted_evidence_items}}</td></tr><tr><td class=\"key\">Accepted Evidence:</td><td class=\"value\">{{vm.stats.accepted_evidence_items}}</td></tr></table></div></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/users/profile/profile.tpl.html',\n    '<div class=\"profile\"><div class=\"row\"><div class=\"col-xs-12\"><div class=\"summary\"><user-summary user=\"vm.user\"></user-summary></div></div></div><div ng-if=\"vm.evidence.length > 0\"><div class=\"row\"><div class=\"col-xs-12 evidence-table-block\"><evidence-grid evidence=\"vm.evidence\" show-gene-col=\"true\" show-variant-col=\"true\" rows=\"10\" context=\"\\'profile\\'\" rounded=\"true\"></evidence-grid></div></div></div><div class=\"row col-headers\" style=\"margin-top: 1em;\"><div class=\"col-xs-12\"><h4>Events:</h4></div></div><div class=\"col-xs-12 events-block\"><div ng-switch=\"vm.events.length > 0\"><div ng-switch-when=\"true\"><ul><li ng-repeat=\"event in vm.events\"><event-item event=\"event\" theme=\"\\'light\\'\">EVENT</event-item></li></ul></div><div ng-switch-when=\"false\"><p>User has not generated any CIViC events.</p></div></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/common/diffs/description.tpl.html',\n    '');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/evidence/edit/EvidenceEditView.tpl.html',\n    '<div class=\"EvidenceEditView\"><entity-edit-view view-model=\"vm.EvidenceEditViewModel\" revisions-model=\"vm.EvidenceRevisionsModel\" view-options=\"vm.EvidenceTalkViewOptions\"><div class=\"row\"><div class=\"col-xs-12\"><evidence-summary></evidence-summary></div></div><div class=\"row entity-talk-content {{ vm.EvidenceEditViewOptions.styles.view.talkBackgroundColor }}\"><div class=\"col-xs-12\"><ui-view></ui-view></div></div></entity-edit-view></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/evidence/edit/evidenceEditBasic.tpl.html',\n    '<div class=\"evidenceEditBasic {{ vm.styles.edit.editBackgroundColor }}\" id=\"evidence-edit-basic\"><div class=\"row form-header\" id=\"evidence-edit-form\"><div class=\"stripes-bg\"><div class=\"col-xs-12 name\"><h3>EDIT EVIDENCE ITEM <span ng-bind=\"vm.evidence.name\">NAME</span></h3></div></div></div><div class=\"row\" ng-if=\"vm.showInstructions\"><div class=\"col-xs-12\"><div class=\"edit-instructions\"><p>Complete your edits, then click the \\'Submit Revision for Review\\' button.</p></div></div></div><div class=\"row\" ng-if=\"vm.pendingFields\"><div class=\"col-xs-12\"><div class=\"edit-warning\"><p>This Evidence Item has pending revisions to the following fields:</p><ul class=\"field-list\"><li ng-repeat=\"field in vm.pendingFieldsList\">{{ field | keyToLabel }}</li></ul><p>Please <a href=\"\" ng-click=\"vm.revisionsClick()\" style=\"text-decoration: underline; font-weight: bold;\">review all pending revisions</a> in order to prevent conflicting submissions.</p></div></div></div><div class=\"row\"><div class=\"col-xs-12\"><div ng-messages=\"vm.formErrors\" class=\"edit-errors\"><div ng-message=\"500\" class=\"alert alert-danger\"><strong class=\"status\">500 <span ng-bind=\"vm.errorMessages[\\'500\\']\" class=\"message\">error msg</span></strong> - <span ng-bind=\"vm.errorPrompts[\\'500\\']\">error prompt</span> <span class=\"server-message\">{{ vm.serverMsg }}</span></div><div ng-message=\"401\" class=\"alert alert-danger\"><strong class=\"status\">401 <span ng-bind=\"vm.errorMessages[\\'401\\']\" class=\"message\">error msg</span></strong> - <span ng-bind=\"vm.errorPrompts[\\'401\\']\">error prompt</span> <span class=\"server-message\">{{ vm.serverMsg }}</span></div><div ng-message=\"403\" class=\"alert alert-danger\"><strong class=\"status\">403 <span ng-bind=\"vm.errorMessages[\\'403\\']\" class=\"message\">error msg</span></strong> - <span ng-bind=\"vm.errorPrompts[\\'403\\']\">error prompt</span> <span class=\"server-message\">{{ vm.serverMsg }}</span></div><div ng-message=\"409\" class=\"alert alert-danger\"><strong class=\"status\">409 <span ng-bind=\"vm.errorMessages[\\'409\\']\" class=\"message\">error msg</span></strong> - <span ng-bind=\"vm.errorPrompts[\\'409\\']\">error prompt</span> <span class=\"server-message\">{{ vm.serverMsg }}</span></div></div></div></div><div class=\"row\"><div class=\"col-xs-12\"><div ng-messages=\"vm.formMessages\" class=\"edit-messages\"><div ng-message=\"submitSuccess\" class=\"alert alert-success\"><strong class=\"status\">Success</strong> - <span class=\"message\">Your revision was successfully submitted.</span></div><div ng-message=\"applySuccess\" class=\"alert alert-success\"><strong class=\"status\">Success</strong> - <span class=\"message\">Your revision was successfully applied.</span></div></div></div></div><div ng-if=\"vm.showForm\"><div class=\"row edit-form\"><div class=\"col-xs-12\"><form class=\"form-horizontal\"><formly-form options=\"vm.options\" model=\"vm.evidenceEdit\" fields=\"vm.evidenceFields\"></formly-form></form></div></div><div class=\"row\"><div class=\"col-xs-12\"><div class=\"buttons\"><div class=\"pull-left\"><cancel-button></cancel-button></div><div class=\"pull-right\"><span ng-if=\"vm.isAuthenticated\"><button type=\"submit\" class=\"btn btn-default\" ng-click=\"vm.submit(vm.evidenceEdit, vm.options)\">Submit Revision for Review</button></span></div></div></div></div></div><div class=\"successMessage\" ng-if=\"vm.showSuccessMessage\"><div class=\"col-xs-12 jumbotron\"><h1>Thank you.</h1><p>Your suggested revision for Evidence Item {{ vm.evidence.name }} has been submitted for review.</p><p><a ng-href=\"#/events/genes/{{vm.stateParams.geneId}}/summary/variants/{{vm.stateParams.variantId}}/summary/evidence/{{vm.stateParams.evidenceId}}/talk/revisions/list/{{vm.newRevisionId}}/summary\" class=\"btn btn-small btn-default\">View it here</a></p></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/evidence/summary/evidenceSummary.tpl.html',\n    '<div class=\"evidenceSummary {{ backgroundColor }}\"><div class=\"row\"><div class=\"col-xs-12 explanation\"><p ng-bind-html=\"evidence.description | linky\"></p></div></div><div class=\"row\"><div class=\"col-xs-12 col-md-6 details\"><table class=\"table table-condensed summary-details\"><colgroup><col width=\"40%\"><col width=\"60%\"></colgroup><tr><td class=\"name\" style=\"line-height: 2em;\">Evidence Level:</td><td class=\"value\"><span class=\"levelBadge\" ng-class=\"{\\'levelA\\': evidence.evidence_level === \\'A\\', \\'levelB\\': evidence.evidence_level === \\'B\\',\\'levelC\\': evidence.evidence_level === \\'C\\', \\'levelD\\': evidence.evidence_level === \\'D\\', \\'levelE\\': evidence.evidence_level === \\'E\\' }\" tooltip=\"{{tipText.evidence_level[evidence.evidence_level]}}\" tooltip-placement=\"right\">{{ evidence.evidence_level_string }}</span></td></tr><tr><td class=\"name\">Evidence Type:</td><td class=\"value\"><span ng-bind=\"evidence.evidence_type\" tooltip=\"{{tipText.evidence_type[evidence.evidence_type]}}\" tooltip-placement=\"right\">evidence type</span></td></tr><tr><td class=\"name\">Evidence Direction:</td><td class=\"value\"><span ng-bind=\"evidence.evidence_direction\" tooltip=\"{{tipText.evidence_direction[evidence.evidence_type][evidence.evidence_direction]}}\" tooltip-placement=\"right\">evidence.evidence_direction</span></td></tr><tr><td class=\"name\">Clinical Significance:</td><td class=\"value\"><span ng-bind=\"evidence.clinical_significance\" tooltip=\"{{tipText.clinical_significance[evidence.clinical_significance]}}\" tooltip-placement=\"right\">evidence.clinical_significance</span></td></tr><tr><td class=\"name\">Variant Origin:</td><td class=\"value\"><span ng-bind=\"evidence.variant_origin\" tooltip=\"{{tipText.variant_origin[evidence.variant_origin]}}\" tooltip-placement=\"right\">evidence.variant_origin</span></td></tr></table></div><div class=\"col-xs-12 col-md-6 details\"><table class=\"table table-condensed summary-details\"><colgroup><col width=\"40%\"><col width=\"60%\"></colgroup><tr><td class=\"name\">Disease:</td><td class=\"value\"><a target=\"_blank\" href=\"{{ evidence.disease.url }}\" _target=\"blank\">{{ evidence.disease.name }}</a></td></tr><tr><td class=\"name\">Drug:</td><td class=\"value\">{{ evidence.drugsStr }}</td></tr><tr ng-show=\"evidence.drug_interaction_type\"><td class=\"name\">Drug Interaction:</td><td class=\"value\">{{ evidence.drug_interaction_type }}</td></tr><tr><td class=\"name\">Citation:</td><td class=\"value\"><a target=\"_blank\" href=\"{{ evidence.source_url }}\" _target=\"blank\">{{ evidence.citation }}</a></td></tr><tr><td class=\"name\">Trust Rating:</td><td class=\"value\"><rating ng-model=\"evidence.rating\" max=\"5\" readonly=\"true\" tooltip=\"{{tipText.rating[evidence.rating]}}\" tooltip-placement=\"left\"></rating></td></tr><tr ng-if=\"\"><td colspan=\"2\">Trust Rating:</td></tr></table></div></div><div class=\"row\" ng-if=\"isEditor() && evidence.status === \\'submitted\\'\" style=\"margin-top: 1em;\"><div class=\"col-xs-6\"><button class=\"btn btn-default btn-block btn-danger\" ng-click=\"rejectItem(evidence.id)\">Reject Evidence Item</button></div><div class=\"col-xs-6\"><button class=\"btn btn-default btn-block btn-success\" ng-click=\"acceptItem(evidence.id)\">Accept Evidence Item</button></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/evidence/talk/EvidenceTalkView.tpl.html',\n    '<div class=\"EvidenceTalkView\"><entity-talk-view view-model=\"vm.EvidenceTalkViewModel\" revisions-model=\"vm.EvidenceRevisionsModel\" view-options=\"vm.EvidenceTalkViewOptions\"><div class=\"row\"><div class=\"col-xs-12\"><evidence-summary></evidence-summary></div></div><div class=\"row evidence-talk-tabs\"><div class=\"col-xs-12\"><entity-talk-tabs vertical=\"false\" justified=\"left\"></entity-talk-tabs></div></div><div class=\"row entity-talk-content {{ vm.EvidenceTalkViewOptions.styles.view.talkBackgroundColor }}\"><div class=\"col-xs-12\"><ui-view></ui-view></div></div></entity-talk-view></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/evidence/talk/evidenceTalkComments.tpl.html',\n    '<div class=\"evidenceTalkComments\"><div class=\"row\"><div class=\"col-xs-12 comment-list\"><div ng-switch=\"ctrl.evidenceTalkModel.data.comments.length > 0\"><div ng-switch-when=\"true\"><ul class=\"comments\"><li ng-repeat=\"comment in ctrl.evidenceTalkModel.data.comments\"><entity-comment comment-data=\"comment\" entity-model=\"ctrl.evidenceTalkModel\"></entity-comment></li></ul></div><div ng-switch-default=\"\"><p>No Comments for Evidence Item {{ ctrl.evidenceTalkModel.data.item.name }}.</p></div></div></div></div><div class=\"row\"><div class=\"col-xs-12 comment-form\"><entity-comment-form type=\"entity\" entity-model=\"ctrl.evidenceTalkModel\"></entity-comment-form></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/evidence/talk/evidenceTalkLog.tpl.html',\n    '<div class=\"evidenceTalkLog\"><ul class=\"log-list\"><li ng-repeat=\"entry in ctrl.logItems\"><entity-log-entry entry-data=\"entry\"></entity-log-entry></li></ul></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/genes/edit/GeneEditView.tpl.html',\n    '<div class=\"GeneEditView\"><entity-edit-view view-model=\"vm.GeneEditViewModel\" revisions-model=\"vm.GeneRevisionsModel\" view-options=\"vm.GenesTalkViewOptions\"><div class=\"row\"><div class=\"col-xs-12\"><gene-summary show-menu=\"false\"></gene-summary></div></div><div class=\"row entity-talk-content {{ vm.GeneEditViewOptions.styles.view.talkBackgroundColor }}\"><div class=\"col-xs-12\"><ui-view></ui-view></div></div></entity-edit-view></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/genes/edit/geneEditBasic.tpl.html',\n    '<div class=\"geneEditBasic {{ vm.styles.edit.editBackgroundColor }}\" id=\"gene-edit-basic\"><div class=\"row form-header\" id=\"gene-edit-form\"><div class=\"stripes-bg\"><div class=\"col-xs-12 name\"><h3>EDIT GENE <span ng-bind=\"vm.gene.name\">NAME</span></h3></div></div></div><div class=\"row\" ng-if=\"vm.showInstructions\"><div class=\"col-xs-12\"><div class=\"edit-instructions\"><p>Complete your edits, then click the \\'Submit Revision for Review\\' button.</p></div></div></div><div class=\"row\" ng-if=\"vm.pendingFields\"><div class=\"col-xs-12\"><div class=\"edit-warning\"><p>This Gene has pending revisions to the following fields:</p><ul class=\"field-list\"><li ng-repeat=\"field in vm.pendingFieldsList\">{{ field | keyToLabel }}</li></ul><p>Please <a href=\"\" ng-click=\"vm.revisionsClick()\" style=\"text-decoration: underline; font-weight: bold;\">review all pending revisions</a> in order to prevent conflicting submissions.</p></div></div></div><div class=\"row\"><div class=\"col-xs-12\"><div ng-messages=\"vm.formErrors\" class=\"edit-errors\"><div ng-message=\"500\" class=\"alert alert-danger\"><strong class=\"status\">500 <span ng-bind=\"vm.errorMessages[\\'500\\']\" class=\"message\">error msg</span></strong> - <span ng-bind=\"vm.errorPrompts[\\'500\\']\">error prompt</span> <span class=\"server-message\">{{ vm.serverMsg }}</span></div><div ng-message=\"401\" class=\"alert alert-danger\"><strong class=\"status\">401 <span ng-bind=\"vm.errorMessages[\\'401\\']\" class=\"message\">error msg</span></strong> - <span ng-bind=\"vm.errorPrompts[\\'401\\']\">error prompt</span> <span class=\"server-message\">{{ vm.serverMsg }}</span></div><div ng-message=\"403\" class=\"alert alert-danger\"><strong class=\"status\">403 <span ng-bind=\"vm.errorMessages[\\'403\\']\" class=\"message\">error msg</span></strong> - <span ng-bind=\"vm.errorPrompts[\\'403\\']\">error prompt</span> <span class=\"server-message\">{{ vm.serverMsg }}</span></div><div ng-message=\"409\" class=\"alert alert-danger\"><strong class=\"status\">409 <span ng-bind=\"vm.errorMessages[\\'409\\']\" class=\"message\">error msg</span></strong> - <span ng-bind=\"vm.errorPrompts[\\'409\\']\">error prompt</span> <span class=\"server-message\">{{ vm.serverMsg }}</span></div></div></div></div><div class=\"row\"><div class=\"col-xs-12\"><div ng-messages=\"vm.formMessages\" class=\"edit-messages\"><div ng-message=\"submitSuccess\" class=\"alert alert-success\"><strong class=\"status\">Success</strong> - <span class=\"message\">Your revision was successfully submitted.</span></div><div ng-message=\"applySuccess\" class=\"alert alert-success\"><strong class=\"status\">Success</strong> - <span class=\"message\">Your revision was successfully applied.</span></div></div></div></div><div ng-if=\"vm.showForm\"><div class=\"row edit-form\"><div class=\"col-xs-12\"><form class=\"form-horizontal\"><formly-form options=\"vm.options\" model=\"vm.geneEdit\" fields=\"vm.geneFields\"></formly-form></form></div></div><div class=\"row\"><div class=\"col-xs-5 col-xs-offset-2\"><div class=\"buttons\"><div class=\"pull-left\"><cancel-button></cancel-button></div><div class=\"pull-right\"><div ng-if=\"vm.isAuthenticated\"><button type=\"submit\" class=\"btn btn-default\" ng-click=\"vm.submit(vm.geneEdit, vm.options)\">Submit Revision for Review</button></div></div></div></div></div></div><div class=\"successMessage\" ng-if=\"vm.showSuccessMessage\"><div class=\"col-xs-12 jumbotron\"><h1>Thank you.</h1><p>Your suggested revision for Gene {{ vm.gene.name }} has been submitted for review.</p><p><a ng-href=\"#/events/genes/{{vm.gene.id}}/talk/revisions/list/{{vm.newRevisionId}}/summary\" class=\"btn btn-small btn-default\">View it here</a></p></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/genes/summary/geneDescription.tpl.html',\n    '<div class=\"geneDescription\"><div class=\"row\"><div class=\"col-xs-12\"><div ng-switch=\"geneData.description.length > 0\"><div ng-switch-when=\"true\"><p ng-bind=\"geneData.description\" class=\"description\">Gene Summary.</p></div><div ng-switch-default=\"false\"><p class=\"description\">This Gene does not currently have a Summary.</p><div ng-if=\"vm.isAuthenticated() && !vm.isEdit\"><p><a class=\"btn btn-small btn-default\" ui-sref=\"events.genes.edit.basic({ geneId: geneData.id })\">Add a Summary</a></p></div></div></div></div></div><div ng-if=\"geneData.sources.length > 0\"><div class=\"row\"><div class=\"col-xs-12\"><h5>Sources:</h5><ul class=\"sources\"><li ng-repeat=\"source in geneData.sources\"><a href=\"{{ source.source_url }}\"><span class=\"small\" ng-bind=\"source.citation\"></span></a></li></ul></div></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/genes/summary/geneSummary.tpl.html',\n    '<div class=\"geneSummary\"><div class=\"row {{ backgroundColor }}\"><div class=\"col-xs-12 col-md-6\"><gene-description gene-data=\"gene\"></gene-description></div><div class=\"col-xs-12 col-md-6\"><my-gene-info gene-info=\"myGeneInfo\"></my-gene-info></div></div><div ng-if=\"showMenu === true\"><div class=\"row\"><div class=\"col-xs-2\"><variant-menu options=\"GenesViewOptions.styles.variantMenu\"></variant-menu></div><div class=\"col-xs-10 variant-view\"><ui-view><div class=\"view-corner\"><div class=\"corner-edge\"></div></div><div class=\"alert alert-info select-prompt\">&#8672; Select a <strong>Variant</strong> <span ng-if=\"variantGroups.length > 0\">or <strong>Variant Group</strong></span> to view its details.</div></ui-view></div></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/genes/summary/myGeneInfo.tpl.html',\n    '<div class=\"myGeneInfo\"><table class=\"table table-condensed summary-details\"><colgroup><col width=\"30%\"><col width=\"70%\"><col width=\"21\"></colgroup><tr><td class=\"name\">Name:</td><td class=\"value\" ng-bind=\"geneInfo.name\"></td><td class=\"mygenelogo\" rowspan=\"7\" \"=\"\"><img src=\"assets/images/mygeneinfo_logo.png\" width=\"21\" height=\"116\"></td></tr><tr><td class=\"name\">Entrez Symbol:</td><td class=\"value\"><a target=\"_blank\" href=\"{{ \\'http://www.ncbi.nlm.nih.gov/gene/\\' + geneInfo._id}}\" ng-bind=\"geneInfo.symbol\">SYMBOL</a> &nbsp; &nbsp; <strong>Entrez ID:</strong> <a target=\"_blank\" href=\"{{ \\'http://www.ncbi.nlm.nih.gov/gene/\\' + geneInfo._id}}\" ng-bind=\"geneInfo._id\">ID</a></td></tr><tr><td class=\"name\">Aliases:</td><td class=\"value\" ng-bind=\"geneInfo.alias | arrayToList\"></td></tr><tr><td class=\"name\">Chromosome:<br><small style=\"font-weight: normal;color: grey;\"><i>(GRCh37)</i></small></td><td class=\"value\"><span ng-bind=\"geneInfo.genomic_pos_hg19.chr\"></span> &nbsp;&nbsp; <strong>Start:</strong> <span ng-bind=\"geneInfo.genomic_pos_hg19.start\"></span> &nbsp;&nbsp; <strong>End:</strong> <span ng-bind=\"geneInfo.genomic_pos_hg19.end\"></span> &nbsp;&nbsp; <strong>Strand:</strong> <span ng-bind=\"geneInfo.genomic_pos_hg19.strand\"></span></td></tr><tr><td class=\"name\">Protein Domains:</td><td class=\"value\" ng-bind-html=\"geneInfo.interpro | pluck: \\'desc\\' | arrayToList:5:\\'&hellip;\\':true | unsafe\"></td></tr><tr><td class=\"name\">Pathways:</td><td class=\"value\" ng-bind-html=\"geneInfo.pathway | pluck: \\'name\\' | arrayToList:5:\\'&hellip;\\':true | unsafe\"></td></tr><tr><td>&nbsp;</td><td colspan=\"2\"><button class=\"btn btn-block btn-default view-gene-details\" ng-click=\"ctrl.openDialog()\">View MyGene.info Details</button></td></tr></table></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/genes/summary/myGeneInfoDialog.tpl.html',\n    '<div class=\"myGeneInfoDialog\"><div class=\"row header\"><div class=\"col-xs-12\"><h3>Gene {{ geneInfo.symbol }} Details from <a href=\"http://mygene.info/\" target=\"_new\">MyGene.info</a></h3></div></div><div class=\"row summary\"><div class=\"col-xs-12\"><p><strong>Gene Summary:</strong><br><span ng-bind-html=\"geneInfo.summary | unsafe\"></span></p></div></div><div class=\"row synonyms\"><div class=\"col-xs-12\"><p><strong>Other Aliases:</strong><br><span ng-bind=\"geneInfo.alias\"></span></p></div></div><div class=\"row grid-row protein-domains\"><div class=\"col-xs-12\"><div ui-grid=\"ctrl.gridOptions.proteinDomains\" class=\"dataGrid\" ui-grid-auto-resize=\"\"></div></div></div><div class=\"row grid-row pathways\"><div class=\"col-xs-12\"><div ui-grid=\"ctrl.gridOptions.pathways\" class=\"dataGrid\" ui-grid-auto-resize=\"\"></div></div></div><div class=\"row buttons\"><div class=\"col-xs-12\"><div class=\"pull-right\"><button type=\"button\" class=\"btn btn-default close\" ng-click=\"ctrl.closeDialog()\">Done</button></div></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/genes/summary/variantMenu.tpl.html',\n    '<div class=\"variantMenu {{ options.backgroundColor }}\"><h4 class=\"title\"><span ng-bind=\"gene.name\"></span></h4><ul class=\"variants\"><li ng-repeat=\"variant in variants|orderBy:\\'name\\'\"><a ui-sref=\"events.genes.summary.variants.summary({ geneId: gene.id, variantId: variant.id, \\'#\\': \\'variant\\' })\" ng-class=\"{ active: variant.id == stateParams.variantId }\"><span ng-bind=\"variant.name\">Variant Name</span></a></li></ul><div ng-if=\"variantGroups.length > 0\"><h4 class=\"title\">Variant Groups</h4></div><ul class=\"variant-groups\" ng-if=\"variantGroups.length > 0\"><li ng-repeat=\"variantGroup in variantGroups|orderBy:\\'name\\'\"><a class=\"sub-title\" ng-class=\"{ active: variantGroup.id == stateParams.variantGroupId }\" ui-sref=\"events.genes.summary.variantGroups.summary({ geneId: gene.id, variantGroupId: variantGroup.id, \\'#\\': \\'variant-group\\' })\"><span ng-bind=\"variantGroup.name\">Variant Group Name</span></a><ul class=\"variants\"><li ng-repeat=\"variant in variantGroup.variants|orderBy:\\'name\\'\"><a ui-sref=\"events.genes.summary.variants.summary({ geneId: variant.gene_id, variantId: variant.id, \\'#\\': \\'variant\\' })\" ng-class=\"{ active: variant.id == stateParams.variantId }\"><span ng-bind=\"variant.name\" class=\"variant-name\">Variant Name</span><div ng-hide=\"variantGroup.singleGene\"><span class=\"small gene-name\">(<span ng-bind=\"variant.entrez_name\"></span>)</span></div></a></li></ul></li></ul><a ng-show=\"security.isAdmin\" ng-href=\"{{ addVarGroupUrl }}\" class=\"btn btn-xs btn-default btn-block\">Add Variant Group</a></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/genes/talk/GeneTalkView.tpl.html',\n    '<div class=\"GeneTalkView\"><entity-talk-view view-model=\"vm.GenesTalkViewModel\" revisions-model=\"vm.GeneRevisionsModel\" view-options=\"vm.GenesTalkViewOptions\"><div class=\"row\"><div class=\"col-xs-12\"><gene-summary show-menu=\"false\"></gene-summary></div></div><div class=\"row gene-talk-tabs\"><div class=\"col-xs-12\"><entity-talk-tabs vertical=\"false\" justified=\"left\"></entity-talk-tabs></div></div><div class=\"row entity-talk-content {{ vm.GenesTalkViewOptions.styles.view.talkBackgroundColor }}\"><div class=\"col-xs-12\"><ui-view></ui-view></div></div></entity-talk-view></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/genes/talk/geneTalkComments.tpl.html',\n    '<div class=\"geneTalkComments\"><div class=\"row\"><div class=\"col-xs-12 comment-list\"><div ng-switch=\"ctrl.geneTalkModel.data.comments.length > 0\"><div ng-switch-when=\"true\"><ul class=\"comments\"><li ng-repeat=\"comment in ctrl.geneTalkModel.data.comments\"><entity-comment comment-data=\"comment\" entity-model=\"ctrl.geneTalkModel\"></entity-comment></li></ul></div><div ng-switch-default=\"\"><p>No Comments for Gene {{ ctrl.geneTalkModel.data.item.name }}.</p></div></div></div></div><div class=\"row\"><div class=\"col-xs-12 comment-form\"><entity-comment-form type=\"entity\" entity-model=\"ctrl.geneTalkModel\"></entity-comment-form></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/genes/talk/geneTalkLog.tpl.html',\n    '<div class=\"geneTalkLog\"><ul class=\"log-list\"><li ng-repeat=\"entry in ctrl.logItems\"><entity-log-entry entry-data=\"entry\"></entity-log-entry></li></ul></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/variantGroups/edit/VariantGroupEditView.tpl.html',\n    '<div class=\"VariantGroupEditView\"><entity-edit-view view-model=\"vm.VariantGroupEditViewModel\" revisions-model=\"vm.VariantGroupRevisionsModel\" view-options=\"vm.VariantGroupTalkViewOptions\"><div class=\"row\"><div class=\"col-xs-12\"><variant-group-summary show-variant-grid=\"false\"></variant-group-summary></div></div><div class=\"row entity-talk-content {{ vm.VariantGroupEditViewOptions.styles.view.talkBackgroundColor }}\"><div class=\"col-xs-12\"><ui-view></ui-view></div></div></entity-edit-view></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/variantGroups/edit/variantGroupEditBasic.tpl.html',\n    '<div class=\"variantGroupEditBasic {{ vm.styles.edit.editBackgroundColor }}\"><div class=\"row\" ng-if=\"vm.showInstructions\"><div class=\"col-xs-12\"><div class=\"edit-instructions\"><p>Complete your edits, then click the \\'Submit Revision for Review\\' button.</p></div></div></div><div class=\"row\" ng-if=\"vm.pendingFields\"><div class=\"col-xs-12\"><div class=\"edit-warning\"><p>This Variant has pending revisions to the following fields:</p><ul class=\"field-list\"><li ng-repeat=\"field in vm.pendingFieldsList\">{{ field | keyToLabel }}</li></ul><p>Please <a href=\"\" ng-click=\"vm.revisionsClick()\" style=\"text-decoration: underline; font-weight: bold;\">review all pending revisions</a> in order to prevent conflicting submissions.</p></div></div></div><div class=\"row\"><div class=\"col-xs-12\"><div ng-messages=\"vm.formErrors\" class=\"edit-errors\"><div ng-message=\"500\" class=\"alert alert-danger\"><strong class=\"status\">500 <span ng-bind=\"vm.errorMessages[\\'500\\']\" class=\"message\">error msg</span></strong> - <span ng-bind=\"vm.errorPrompts[\\'500\\']\">error prompt</span> <span class=\"server-message\">{{ vm.serverMsg }}</span></div><div ng-message=\"401\" class=\"alert alert-danger\"><strong class=\"status\">401 <span ng-bind=\"vm.errorMessages[\\'401\\']\" class=\"message\">error msg</span></strong> - <span ng-bind=\"vm.errorPrompts[\\'401\\']\">error prompt</span> <span class=\"server-message\">{{ vm.serverMsg }}</span></div><div ng-message=\"403\" class=\"alert alert-danger\"><strong class=\"status\">403 <span ng-bind=\"vm.errorMessages[\\'403\\']\" class=\"message\">error msg</span></strong> - <span ng-bind=\"vm.errorPrompts[\\'403\\']\">error prompt</span> <span class=\"server-message\">{{ vm.serverMsg }}</span></div><div ng-message=\"409\" class=\"alert alert-danger\"><strong class=\"status\">409 <span ng-bind=\"vm.errorMessages[\\'409\\']\" class=\"message\">error msg</span></strong> - <span ng-bind=\"vm.errorPrompts[\\'409\\']\">error prompt</span> <span class=\"server-message\">{{ vm.serverMsg }}</span></div></div></div></div><div class=\"row\"><div class=\"col-xs-12\"><div ng-messages=\"vm.formMessages\" class=\"edit-messages\"><div ng-message=\"submitSuccess\" class=\"alert alert-success\"><strong class=\"status\">Success</strong> - <span class=\"message\">Your revision was successfully submitted.</span></div><div ng-message=\"applySuccess\" class=\"alert alert-success\"><strong class=\"status\">Success</strong> - <span class=\"message\">Your revision was successfully applied.</span></div></div></div></div><div ng-if=\"vm.showForm\"><div class=\"row edit-form\"><div class=\"col-xs-12\"><form class=\"form-horizontal\"><formly-form options=\"vm.options\" model=\"vm.variantGroupEdit\" fields=\"vm.variantGroupFields\"></formly-form></form></div></div><div class=\"row buttons\"><div class=\"col-xs-5 col-xs-offset-2\"><div class=\"buttons\"><div class=\"pull-left\"><cancel-button></cancel-button></div><div class=\"pull-right\"><span ng-if=\"vm.isAuthenticated\"><button type=\"submit\" class=\"btn btn-default\" ng-click=\"vm.submit(vm.variantGroupEdit, vm.options)\">Submit Revision for Review</button></span></div></div></div></div></div><div class=\"successMessage\" ng-if=\"vm.showSuccessMessage\"><div class=\"col-xs-12 jumbotron\"><h1>Thank you.</h1><p>Your suggested revision for Variant Group {{ vm.variantGroup.name }} has been submitted for review.</p><p><a ng-href=\"#/events/genes/{{vm.stateParams.geneId}}/summary/variantGroups/{{vm.stateParams.variantGroupId}}/talk/revisions/list/{{vm.newRevisionId}}/summary\" class=\"btn btn-small btn-default\">View it here</a></p></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/variantGroups/summary/variantGrid.tpl.html',\n    '<div class=\"variantGrid\"><div class=\"row\"><div class=\"col-xs-12\"><h4><span ng-switch=\"ctrl.context\"><span ng-switch-when=\"summary\">Variants in {{ ctrl.variantGroup.name }}</span> <span ng-switch-when=\"search\">Search Results</span></span> <span class=\"record-info\"><span>{{ ctrl.gridApi.grid.rows.length }} total items</span> <span ng-if=\"ctrl.gridApi.grid.renderContainers.body.visibleRowCache.length !== ctrl.gridApi.grid.rows.length\">(showing {{ctrl.gridApi.grid.renderContainers.body.visibleRowCache.length}})</span></span></h4></div></div><div class=\"row\"><div class=\"col-xs-12\"><div ui-grid=\"ctrl.variantGridOptions\" ui-grid-cellnav=\"\" ui-grid-auto-resize=\"\" ui-grid-selection=\"\"></div></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/variantGroups/summary/variantGridDescriptionCell.tpl.html',\n    '<div class=\"ngCellText\" ng-class=\"col.colIndex()\" tooltip=\"{{row.entity[col.field]}}\" tooltip-popup-delay=\"{{ctrl.tooltipPopupDelay}}\" tooltip-placement=\"top\" tooltip-append-to-body=\"true\"><div ng-switch=\"\" on=\"row.entity[col.field].length > 0\"><div ng-switch-when=\"true\" class=\"ui-grid-cell-contents\">{{ row.entity[col.field] }}</div><div ng-switch-when=\"false\" class=\"ui-grid-cell-contents\">No description found.</div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/variantGroups/summary/variantGroupSummary.tpl.html',\n    '<div class=\"variantGroupSummary\"><div class=\"row\"><div class=\"col-xs-12\"><div ng-switch=\"variantGroup.description.length > 0\"><div ng-switch-when=\"true\"><p ng-bind=\"variantGroup.description|unsafe\" class=\"description\">Variant Group Summary.</p></div><div ng-switch-default=\"false\"><p class=\"description\">This Variant Group does not currently have a Summary.</p><div ng-if=\"isAuthenticated() && !isEdit\"><p><a class=\"btn btn-small btn-default\" ui-sref=\"events.genes.summary.variantGroups.edit.basic({ geneId: variantGroup.id })\">Add a Summary</a></p></div></div></div></div></div><div ng-if=\"showVariantGrid === true\"><div class=\"row variant-grid\"><div class=\"col-xs-12\"><variant-grid context=\"\\'summary\\'\" rows=\"6\" variant-group=\"variantGroup\" variants=\"variants\"></variant-grid></div></div><div class=\"row\"><div class=\"col-xs-12\"><div class=\"variant-prompt\"><div class=\"alert alert-info\">&uparrow; Click on an <strong>Variant</strong> above to view its details.</div></div></div></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/variantGroups/talk/VariantGroupTalkView.tpl.html',\n    '<div class=\"VariantGroupTalkView\"><entity-talk-view view-model=\"vm.VariantGroupsTalkViewModel\" revisions-model=\"vm.VariantGroupRevisionsModel\" view-options=\"vm.VariantGroupsTalkViewOptions\"><div class=\"row variant-group-talk-summary {{ ctrl.styles.view.summaryBackgroundColor }}\"><div class=\"col-xs-12\"><variant-group-summary show-variant-grid=\"false\"></variant-group-summary></div></div><div class=\"row\"><div class=\"col-xs-12\"><entity-talk-tabs vertical=\"false\" justified=\"left\"></entity-talk-tabs></div></div><div class=\"row variant-group-talk-content {{ ctrl.styles.view.talkBackgroundColor }}\"><div class=\"col-xs-12\"><ui-view></ui-view></div></div></entity-talk-view></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/variantGroups/talk/variantGroupTalkComments.tpl.html',\n    '<div class=\"variantGroupTalkComments\"><div class=\"row\"><div class=\"col-xs-12 comment-list\"><div ng-switch=\"ctrl.variantGroupTalkModel.data.comments.length > 0\"><div ng-switch-when=\"true\"><ul class=\"comments\"><li ng-repeat=\"comment in ctrl.variantGroupTalkModel.data.comments\"><entity-comment comment-data=\"comment\" entity-model=\"ctrl.variantGroupTalkModel\"></entity-comment></li></ul></div><div ng-switch-default=\"\"><p>No comments found for Variant {{ ctrl.variantGroupTalkModel.data.entity.name }}.</p></div></div></div></div><div class=\"row\"><div class=\"col-xs-12 comment-form\"><entity-comment-form entity-model=\"ctrl.variantGroupTalkModel\"></entity-comment-form></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/variantGroups/talk/variantGroupTalkLog.tpl.html',\n    '<div class=\"variantGroupTalkLog\"><ul class=\"log-list\"><li ng-repeat=\"entry in ctrl.logItems\"><entity-log-entry entry-data=\"entry\"></entity-log-entry></li></ul></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/variants/edit/VariantEditView.tpl.html',\n    '<div class=\"VariantEditView\"><entity-edit-view view-model=\"vm.VariantEditViewModel\" revisions-model=\"vm.VariantRevisionsModel\" view-options=\"vm.VariantTalkViewOptions\"><div class=\"row\"><div class=\"col-xs-12\"><variant-summary show-evidence-grid=\"true\"></variant-summary></div></div></entity-edit-view></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/variants/edit/variantEditBasic.tpl.html',\n    '<div class=\"variantEditBasic {{ vm.styles.edit.editBackgroundColor }}\" id=\"variant-edit-basic\"><div class=\"row form-header\" id=\"variant-edit-form\"><div class=\"stripes-bg\"><div class=\"col-xs-12 name\"><h3>EDIT VARIANT <span ng-bind=\"vm.variant.name\">NAME</span></h3></div></div></div><div class=\"row\" ng-if=\"vm.showInstructions\"><div class=\"col-xs-12\"><div class=\"edit-instructions\"><p>Complete your edits, then click the \\'Submit Revision for Review\\' button.</p></div></div></div><div class=\"row\" ng-if=\"vm.pendingFields\"><div class=\"col-xs-12\"><div class=\"edit-warning\"><p>This Variant has pending revisions to the following fields:</p><ul class=\"field-list\"><li ng-repeat=\"field in vm.pendingFieldsList\">{{ field | keyToLabel }}</li></ul><p>Please <a href=\"\" ng-click=\"vm.revisionsClick()\" style=\"text-decoration: underline; font-weight: bold;\">review all pending revisions</a> in order to prevent conflicting submissions.</p></div></div></div><div class=\"row\"><div class=\"col-xs-12\"><div ng-messages=\"vm.formErrors\" class=\"edit-errors\"><div ng-message=\"500\" class=\"alert alert-danger\"><strong class=\"status\">500 <span ng-bind=\"vm.errorMessages[\\'500\\']\" class=\"message\">error msg</span></strong> - <span ng-bind=\"vm.errorPrompts[\\'500\\']\">error prompt</span> <span class=\"server-message\">{{ vm.serverMsg }}</span></div><div ng-message=\"401\" class=\"alert alert-danger\"><strong class=\"status\">401 <span ng-bind=\"vm.errorMessages[\\'401\\']\" class=\"message\">error msg</span></strong> - <span ng-bind=\"vm.errorPrompts[\\'401\\']\">error prompt</span> <span class=\"server-message\">{{ vm.serverMsg }}</span></div><div ng-message=\"403\" class=\"alert alert-danger\"><strong class=\"status\">403 <span ng-bind=\"vm.errorMessages[\\'403\\']\" class=\"message\">error msg</span></strong> - <span ng-bind=\"vm.errorPrompts[\\'403\\']\">error prompt</span> <span class=\"server-message\">{{ vm.serverMsg }}</span></div><div ng-message=\"409\" class=\"alert alert-danger\"><strong class=\"status\">409 <span ng-bind=\"vm.errorMessages[\\'409\\']\" class=\"message\">error msg</span></strong> - <span ng-bind=\"vm.errorPrompts[\\'409\\']\">error prompt</span> <span class=\"server-message\">{{ vm.serverMsg }}</span></div></div></div></div><div class=\"row\"><div class=\"col-xs-12\"><div ng-messages=\"vm.formMessages\" class=\"edit-messages\"><div ng-message=\"submitSuccess\" class=\"alert alert-success\"><strong class=\"status\">Success</strong> - <span class=\"message\">Your revision was successfully submitted.</span></div><div ng-message=\"applySuccess\" class=\"alert alert-success\"><strong class=\"status\">Success</strong> - <span class=\"message\">Your revision was successfully applied.</span></div></div></div></div><div ng-if=\"vm.showForm\"><div class=\"row edit-form\"><div class=\"col-xs-12\"><form class=\"form-horizontal\"><formly-form options=\"vm.options\" model=\"vm.variantEdit\" fields=\"vm.variantFields\"></formly-form></form></div></div><div class=\"row\"><div class=\"col-xs-5 col-xs-offset-2\"><div class=\"buttons\"><div class=\"pull-left\"><cancel-button></cancel-button></div><div class=\"pull-right\"><span ng-if=\"vm.isAuthenticated\"><button type=\"submit\" class=\"btn btn-default\" ng-click=\"vm.submit(vm.variantEdit, vm.options)\">Submit Revision for Review</button></span></div></div></div></div></div><div class=\"successMessage\" ng-if=\"vm.showSuccessMessage\"><div class=\"col-xs-12 jumbotron\"><h1>Thank you.</h1><p>Your suggested revision for Variant {{ vm.variant.name }} has been submitted for review.</p><p><a ng-href=\"#/events/genes/{{vm.stateParams.geneId}}/summary/variants/{{vm.stateParams.variantId}}/talk/revisions/list/{{vm.newRevisionId}}/summary\" class=\"btn btn-small btn-default\">View it here</a></p></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/variants/summary/variantSummary.tpl.html',\n    '<div class=\"variantSummary {{ backgroundColor }}\"><div class=\"row\"><div class=\"col-xs-8\"><div ng-switch=\"variant.description.length > 0\"><div ng-switch-when=\"true\"><p ng-bind=\"variant.description\" class=\"description\">Variant Summary.</p></div><div ng-switch-default=\"false\"><p class=\"description\">This Variant does not currently have a Summary.</p><div ng-if=\"isAuthenticated() && !isEdit\"><p><a class=\"btn btn-small btn-default\" ui-sref=\"events.genes.summary.variants.edit.basic({ geneId: stateParams.geneId, variantId: variant.id })\">Add a Summary</a></p></div></div></div><div class=\"variant-types\"><p><strong>Variant Type(s):</strong> <span ng-switch=\"variant.variant_types.length > 0\"><span ng-switch-when=\"true\"><span ng-repeat=\"type in variant.variant_types\">{{$first ? \\'\\' : $last ? \\', and \\' : \\', \\'}}<a ng-href=\"{{ type.url }}\" target=\"_blank\">{{ type.display_name}}</a></span></span> <span ng-switch-when=\"false\" class=\"small\" style=\"font-style: oblique; color: #666;\">None specified.</span></span></p></div></div><div class=\"col-xs-4\"><div class=\"coordinates-block\"><table class=\"table table-condensed borderless\"><tbody class=\"common\"><tr><td class=\"key small\">Reference Build:</td><td class=\"value small\">{{ variant.coordinates.reference_build | ifEmpty: \\'--\\' }}</td></tr><tr><td class=\"key small\">Ensembl Version:</td><td class=\"value small\">{{ variant.coordinates.ensembl_version| ifEmpty: \\'--\\' }}</td></tr></tbody><tbody class=\"transcript1\"><tr><td class=\"key small\">Chromosome:</td><td class=\"value small\">{{ variant.coordinates.chromosome | ifEmpty: \\'--\\' }}</td></tr><tr><td class=\"key small\">Start:</td><td class=\"value small\">{{ variant.coordinates.start | ifEmpty: \\'--\\' }}</td></tr><tr><td class=\"key small\">Stop:</td><td class=\"value small\">{{ variant.coordinates.stop | ifEmpty: \\'--\\' }}</td></tr><tr><td class=\"key small\">Reference Bases:</td><td class=\"value small\">{{ variant.coordinates.reference_bases| ifEmpty: \\'--\\' }}</td></tr><tr><td class=\"key small\">Variant Bases:</td><td class=\"value small\">{{ variant.coordinates.variant_bases | ifEmpty: \\'--\\' }}</td></tr><tr><td class=\"key small\">Rep. Transcript:</td><td class=\"value small\">{{ variant.coordinates.representative_transcript| ifEmpty: \\'--\\' }}</td></tr></tbody><tbody ng-if=\"variant.coordinates.chromosome2\" class=\"transcript2\"><tr><td class=\"key small\">Chromosome 2:</td><td class=\"value small\">{{ variant.coordinates.chromosome2| ifEmpty: \\'--\\' }}</td></tr><tr><td class=\"key small\">Start 2:</td><td class=\"value small\">{{ variant.coordinates.start2| ifEmpty: \\'--\\' }}</td></tr><tr><td class=\"key small\">Stop 2:</td><td class=\"value small\">{{ variant.coordinates.stop2| ifEmpty: \\'--\\' }}</td></tr><tr><td class=\"key small\">Rep. Transcript 2:</td><td class=\"value small\">{{ variant.coordinates.representative_transcript2 | ifEmpty: \\'--\\' }}</td></tr></tbody><tbody ng-if=\"isAuthenticated() && !isEdit\"><tr><td colspan=\"2\"><a class=\"btn btn-default btn-xs btn-block\" ng-click=\"editClick()\">Edit Coordinates</a></td></tr></tbody></table></div></div></div><div ng-if=\"showEvidenceGrid === true\"><div class=\"row\"><div class=\"col-xs-12 evidence-item-grid\"><evidence-grid evidence=\"evidence\" variant=\"variant\" show-gene-col=\"false\" show-variant-col=\"false\" context=\"\\'summary\\'\" rounded=\"false\"></evidence-grid></div></div><div class=\"row\"><div class=\"col-xs-12\"><div class=\"evidence-view\"><ui-view><div class=\"alert alert-info select-prompt\">&uparrow; Click on an <strong>Evidence Item</strong> above to view its details here.</div></ui-view></div></div></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/variants/talk/VariantTalkView.tpl.html',\n    '<div class=\"VariantTalkView\"><entity-talk-view view-model=\"vm.VariantsTalkViewModel\" revisions-model=\"vm.VariantRevisionsModel\" view-options=\"vm.VariantsTalkViewOptions\"><div class=\"row\"><div class=\"col-xs-12\"><variant-summary show-evidence-grid=\"false\"></variant-summary></div></div><div class=\"row variant-talk-tabs\"><div class=\"col-xs-12\"><entity-talk-tabs vertical=\"false\" justified=\"left\"></entity-talk-tabs></div></div><div class=\"row entity-talk-content {{ vm.VariantsTalkViewOptions.styles.view.talkBackgroundColor }}\"><div class=\"col-xs-12\"><ui-view></ui-view></div></div></entity-talk-view></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/variants/talk/variantTalkComments.tpl.html',\n    '<div class=\"variantTalkComments\"><div class=\"row\"><div class=\"col-xs-12 comment-list\"><div ng-switch=\"ctrl.variantTalkModel.data.comments.length > 0\"><div ng-switch-when=\"true\"><ul class=\"comments\"><li ng-repeat=\"comment in ctrl.variantTalkModel.data.comments\"><entity-comment comment-data=\"comment\" entity-model=\"ctrl.variantTalkModel\"></entity-comment></li></ul></div><div ng-switch-default=\"\"><p>No Comments for Variant {{ ctrl.variantTalkModel.data.item.name }}.</p></div></div></div></div><div class=\"row\"><div class=\"col-xs-12 comment-form\"><entity-comment-form type=\"entity\" entity-model=\"ctrl.variantTalkModel\"></entity-comment-form></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/variants/talk/variantTalkLog.tpl.html',\n    '<div class=\"variantTalkLog\"><ul class=\"log-list\"><li ng-repeat=\"entry in ctrl.logItems\"><entity-log-entry entry-data=\"entry\"></entity-log-entry></li></ul></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/users/profile/edit/profileEdit.tpl.html',\n    '<div class=\"profileEdit\"><div class=\"row\"><div class=\"col-xs-3\"><div class=\"card-block\"><user-card user=\"vm.userEdit\"></user-card></div></div><div class=\"col-xs-9\"><form class=\"form-horizontal\"><formly-form options=\"vm.options\" model=\"vm.userEdit\" fields=\"vm.userEditFields\"></formly-form></form><cancel-button></cancel-button><button type=\"submit\" class=\"btn btn-default\" ng-click=\"vm.saveProfile(vm.userEdit, vm.options)\">Save Profile</button> <span ng-show=\"vm.submitSuccess\" style=\"color: forestgreen; margin-left: 10px;\">Profile successfully updated. Returning you to your profile in {{ vm.count }} seconds.</span> <span ng-show=\"vm.submitFail\" style=\"color: darkred; margin-left: 10px;\">Error updating profile!</span></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/evidence/talk/revisions/EvidenceTalkRevisionsView.tpl.html',\n    '<div class=\"EvidencesTalkRevisionsView\"><entity-talk-revisions-view view-model=\"vm.EvidenceRevisionsModel\" view-options=\"vm.EvidencesTalkRevisionsViewOptions\"><div class=\"row\"><div class=\"col-xs-12\"><ui-view></ui-view></div></div></entity-talk-revisions-view></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/evidence/talk/revisions/evidenceTalkRevisionSummary.tpl.html',\n    '<div class=\"evidenceTalkRevisionSummary\"><div class=\"row revision-header\"><div class=\"stripes-bg\"><div class=\"col-xs-10 name\"><h3>Revision #<span ng-bind=\"vm.evidenceTalkModel.data.item.id\">ID</span></h3></div><div class=\"col-xs-2 status\"><div class=\"pull-right\"><span ng-bind=\"vm.evidenceTalkModel.data.item.status\">status</span></div></div></div></div><div class=\"row\"><div class=\"col-xs-12\"><div ng-messages=\"vm.formErrors\" class=\"revision-errors\"><div ng-message=\"500\" class=\"alert alert-danger\"><strong class=\"status\">500 <span ng-bind=\"vm.errorMessages[\\'500\\']\" class=\"message\">error msg</span></strong> - <span ng-bind=\"vm.errorPrompts[\\'500\\']\">error prompt</span></div><div ng-message=\"401\" class=\"alert alert-danger\"><strong class=\"status\">401 <span ng-bind=\"vm.errorMessages[\\'401\\']\" class=\"message\">error msg</span></strong> - <span ng-bind=\"vm.errorPrompts[\\'401\\']\">error prompt</span></div><div ng-message=\"403\" class=\"alert alert-danger\"><strong class=\"status\">403 <span ng-bind=\"vm.errorMessages[\\'403\\']\" class=\"message\">error msg</span></strong> - <span ng-bind=\"vm.errorPrompts[\\'403\\']\">error prompt</span></div><div ng-message=\"409\" class=\"alert alert-danger\"><strong class=\"status\">403 <span ng-bind=\"vm.errorMessages[\\'409\\']\" class=\"message\">error msg</span></strong> - <span ng-bind=\"vm.errorPrompts[\\'409\\']\">error prompt</span></div></div></div></div><div class=\"row\"><div class=\"col-xs-12\"><div ng-messages=\"vm.formMessages\" class=\"revision-messages\"><div ng-message=\"acceptSuccess\" class=\"alert alert-success\"><strong class=\"status\">Success</strong> - <span class=\"message\">The revision was successfully applied.</span></div><div ng-message=\"rejectSuccess\" class=\"alert alert-success\"><strong class=\"status\">Success</strong> - <span class=\"message\">The revision was successfully rejected.</span></div></div></div></div><div class=\"row\"><div class=\"col-xs-12 diffs\"><ul><li class=\"item\" ng-repeat=\"(field, diffs) in vm.evidenceTalkModel.data.item.diffs\"><div ng-switch=\"field\"><div ng-switch-when=\"rating\" class=\"diff-ratings\"><div class=\"row\"><div class=\"col-xs-12\"><h4 class=\"field-name\">{{ field | capitalize}}</h4></div></div><div class=\"row\"><div class=\"col-xs-12\"><div class=\"before-after\"><rating ng-model=\"vm.evidenceTalkModel.data.item.suggested_changes.rating[0]\" max=\"5\" readonly=\"true\"></rating>&nbsp; <span class=\"arrow\">&#9654;</span> &nbsp;<rating ng-model=\"vm.evidenceTalkModel.data.item.suggested_changes.rating[1]\" max=\"5\" readonly=\"true\"></rating></div></div></div></div><div ng-switch-default=\"\"><div class=\"row\"><div class=\"col-xs-12\"><h4 class=\"field-name\">{{ field | capitalize}}</h4></div></div><div class=\"row\"><div class=\"col-xs-12\"><span ng-bind-html=\"diffs.diff\"></span></div></div><div class=\"row\"><div class=\"col-xs-12\"><div class=\"res\"><span ng-bind-html=\"diffs.final\"></span></div></div></div></div></div></li></ul></div></div><div class=\"row\"><div class=\"col-xs-12 admin-buttons\" ng-if=\"vm.isEditor() && vm.evidenceTalkModel.data.item.status ===\\'new\\'\"><div class=\"pull-right\"><button type=\"submit\" class=\"btn btn-default\" ng-click=\"acceptRevision()\">Accept Revision</button> <button type=\"submit\" class=\"btn btn-default\" ng-click=\"rejectRevision()\">Reject Revision</button></div></div></div><div class=\"row\"><div class=\"col-xs-12 comments-header\"><h4>Revision RID<span ng-bind=\"vm.evidenceTalkModel.data.item.id\">ID</span> Comments</h4></div></div><div class=\"row\"><div class=\"col-xs-12 comment-list\"><div ng-switch=\"ctrl.comments.length\"><div ng-switch-when=\"0\"><p>No comments found.</p></div><div ng-switch-default=\"\"><ul class=\"comments\"><li ng-repeat=\"comment in vm.evidenceTalkModel.data.comments\"><entity-comment comment-data=\"comment\" entity-model=\"vm.evidenceTalkModel\"></entity-comment></li></ul></div></div></div></div><div class=\"row\"><div class=\"col-xs-12 comment-form\"><entity-comment-form type=\"revision\" entity-model=\"vm.evidenceTalkModel\"></entity-comment-form></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/evidence/talk/revisions/evidenceTalkRevisions.tpl.html',\n    '<div class=\"evidenceTalkRevisions\"><div ng-if=\"evidenceRevisions.data.collection.length > 0\"><div class=\"row revisions-list {{ viewOptions.styles.view.summaryBackgroundColor }}\"><div class=\"col-xs-12\"><revisions-grid changes=\"evidenceRevisions.data.collection\" base-state=\"events.genes.summary.variants.summary.evidence.talk.revisions\"></revisions-grid></div></div><div class=\"row revisions-view {{ viewOptions.styles.view.talkBackgroundColor }}\"><div class=\"col-xs-12\"><ui-view></ui-view></div></div></div><div ng-if=\"evidenceRevisions.data.collection.length === 0\"><div class=\"row revisions-prompt\"><div class=\"col-xs-12\"><div class=\"jumbotron\"><h2 style=\"margin:0;padding:0;\">No suggested revisions exist for this evidence item.</h2><p>You may create a suggested revision by clicking on the evidence name at the top of this record.</p></div></div></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/genes/summary/myGeneInfoGrid/linkCell.tpl.html',\n    '<div class=\"ngCellText\" ng-class=\"col.colIndex()\" tooltip=\"{{row.entity[col.field]}}\" tooltip-append-to-body=\"true\"><div class=\"ui-grid-cell-contents\"><a ng-href=\"{{ row.entity[col.field] }}\" target=\"_blank\">{{ row.entity[col.field] }}</a></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/genes/talk/revisions/GeneTalkRevisionsView.tpl.html',\n    '<div class=\"GenesTalkRevisionsView\"><entity-talk-revisions-view view-model=\"vm.GeneRevisionsModel\" view-options=\"vm.GenesTalkRevisionsViewOptions\"><div class=\"row\"><div class=\"col-xs-12\"><ui-view></ui-view></div></div></entity-talk-revisions-view></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/genes/talk/revisions/geneTalkRevisionSummary.tpl.html',\n    '<div class=\"geneTalkRevisionSummary\"><div class=\"row revision-header\"><div class=\"stripes-bg\"><div class=\"col-xs-10 name\"><h3>Revision RID<span ng-bind=\"vm.geneTalkModel.data.item.id\">ID</span></h3></div><div class=\"col-xs-2 status\"><div class=\"pull-right\"><span ng-bind=\"vm.geneTalkModel.data.item.status\">status</span></div></div></div></div><div class=\"row\"><div class=\"col-xs-12\"><div ng-messages=\"vm.formErrors\" class=\"revision-errors\"><div ng-message=\"500\" class=\"alert alert-danger\"><strong class=\"status\">500 <span ng-bind=\"vm.errorMessages[\\'500\\']\" class=\"message\">error msg</span></strong> - <span ng-bind=\"vm.errorPrompts[\\'500\\']\">error prompt</span></div><div ng-message=\"401\" class=\"alert alert-danger\"><strong class=\"status\">401 <span ng-bind=\"vm.errorMessages[\\'401\\']\" class=\"message\">error msg</span></strong> - <span ng-bind=\"vm.errorPrompts[\\'401\\']\">error prompt</span></div><div ng-message=\"403\" class=\"alert alert-danger\"><strong class=\"status\">403 <span ng-bind=\"vm.errorMessages[\\'403\\']\" class=\"message\">error msg</span></strong> - <span ng-bind=\"vm.errorPrompts[\\'403\\']\">error prompt</span></div><div ng-message=\"409\" class=\"alert alert-danger\"><strong class=\"status\">403 <span ng-bind=\"vm.errorMessages[\\'409\\']\" class=\"message\">error msg</span></strong> - <span ng-bind=\"vm.errorPrompts[\\'409\\']\">error prompt</span></div></div></div></div><div class=\"row\"><div class=\"col-xs-12\"><div ng-messages=\"vm.formMessages\" class=\"revision-messages\"><div ng-message=\"acceptSuccess\" class=\"alert alert-success\"><strong class=\"status\">Success</strong> - <span class=\"message\">The revision was successfully applied.</span></div><div ng-message=\"rejectSuccess\" class=\"alert alert-success\"><strong class=\"status\">Success</strong> - <span class=\"message\">The revision was successfully rejected.</span></div></div></div></div><div class=\"row\"><div class=\"col-xs-12 diffs\"><ul><li class=\"item\" ng-repeat=\"(field, diffs) in vm.geneTalkModel.data.item.diffs\"><div ng-switch=\"field\"><div ng-switch-default=\"\"><div class=\"row\"><div class=\"col-xs-12\"><h4 class=\"field-name\">{{ field | capitalize}}</h4></div></div><div class=\"row\"><div class=\"col-xs-12\"><span ng-bind-html=\"diffs.diff\"></span></div></div><div class=\"row\"><div class=\"col-xs-12\"><div class=\"res\"><span ng-bind-html=\"diffs.final\"></span></div></div></div></div></div></li></ul></div></div><div class=\"row\"><div class=\"col-xs-12 admin-buttons\" ng-if=\"vm.isEditor() && vm.geneTalkModel.data.item.status === \\'new\\'\"><div class=\"pull-right\"><button type=\"submit\" class=\"btn btn-default\" ng-click=\"acceptRevision()\">Accept Revision</button> <button type=\"submit\" class=\"btn btn-default\" ng-click=\"rejectRevision()\">Reject Revision</button></div></div></div><div class=\"row\"><div class=\"col-xs-12 comments-header\"><h4>Revision RID<span ng-bind=\"vm.geneTalkModel.data.item.id\">ID</span> Comments</h4></div></div><div class=\"row\"><div class=\"col-xs-12 comment-list\"><div ng-switch=\"ctrl.comments.length\"><div ng-switch-when=\"0\"><p>No comments found.</p></div><div ng-switch-default=\"\"><ul class=\"comments\"><li ng-repeat=\"comment in vm.geneTalkModel.data.comments\"><entity-comment comment-data=\"comment\" entity-model=\"vm.geneTalkModel\"></entity-comment></li></ul></div></div></div></div><div class=\"row\"><div class=\"col-xs-12 comment-form\"><entity-comment-form type=\"revision\" entity-model=\"vm.geneTalkModel\"></entity-comment-form></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/genes/talk/revisions/geneTalkRevisions.tpl.html',\n    '<div class=\"geneTalkRevisions\"><div ng-if=\"geneRevisions.data.collection.length > 0\"><div class=\"row revisions-list {{ viewOptions.styles.view.summaryBackgroundColor }}\"><div class=\"col-xs-12\"><revisions-grid changes=\"geneRevisions.data.collection\" base-state=\"events.genes.talk.revisions\"></revisions-grid></div></div><div class=\"row revisions-view {{ viewOptions.styles.view.talkBackgroundColor }}\"><div class=\"col-xs-12\"><ui-view></ui-view></div></div></div><div ng-if=\"geneRevisions.data.collection.length === 0\"><div class=\"row revisions-prompt\"><div class=\"col-xs-12\"><div class=\"jumbotron\"><h2 style=\"margin:0;padding:0;\">No suggested revisions exist for this gene.</h2><p>You may create a suggested revision by clicking on the gene name at the top of this record.</p></div></div></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/variantGroups/talk/revisions/VariantGroupTalkRevisionsView.tpl.html',\n    '<div class=\"VariantsTalkRevisionsView\"><entity-talk-revisions-view view-model=\"vm.VariantRevisionsModel\" view-options=\"vm.VariantsTalkRevisionsViewOptions\"><div class=\"row\"><div class=\"col-xs-12\"><ui-view></ui-view></div></div></entity-talk-revisions-view></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/variantGroups/talk/revisions/variantGroupTalkRevisionSummary.tpl.html',\n    '<div class=\"variantGroupTalkRevisionSummary\"><div class=\"row revision-header\"><div class=\"stripes-bg\"><div class=\"col-xs-10 name\"><h3>Revision RID<span ng-bind=\"vm.variantGroupTalkModel.data.item.id\">ID</span></h3></div><div class=\"col-xs-2 status\"><div class=\"pull-right\"><span ng-bind=\"vm.variantGroupTalkModel.data.item.status\">status</span></div></div></div></div><div class=\"row\"><div class=\"col-xs-12\"><div ng-messages=\"vm.formErrors\" class=\"revision-errors\"><div ng-message=\"500\" class=\"alert alert-danger\"><strong class=\"status\">500 <span ng-bind=\"vm.errorMessages[\\'500\\']\" class=\"message\">error msg</span></strong> - <span ng-bind=\"vm.errorPrompts[\\'500\\']\">error prompt</span></div><div ng-message=\"401\" class=\"alert alert-danger\"><strong class=\"status\">401 <span ng-bind=\"vm.errorMessages[\\'401\\']\" class=\"message\">error msg</span></strong> - <span ng-bind=\"vm.errorPrompts[\\'401\\']\">error prompt</span></div><div ng-message=\"403\" class=\"alert alert-danger\"><strong class=\"status\">403 <span ng-bind=\"vm.errorMessages[\\'403\\']\" class=\"message\">error msg</span></strong> - <span ng-bind=\"vm.errorPrompts[\\'403\\']\">error prompt</span></div><div ng-message=\"409\" class=\"alert alert-danger\"><strong class=\"status\">403 <span ng-bind=\"vm.errorMessages[\\'409\\']\" class=\"message\">error msg</span></strong> - <span ng-bind=\"vm.errorPrompts[\\'409\\']\">error prompt</span></div></div></div></div><div class=\"row\"><div class=\"col-xs-12\"><div ng-messages=\"vm.formMessages\" class=\"revision-messages\"><div ng-message=\"acceptSuccess\" class=\"alert alert-success\"><strong class=\"status\">Success</strong> - <span class=\"message\">The revision was successfully applied.</span></div><div ng-message=\"rejectSuccess\" class=\"alert alert-success\"><strong class=\"status\">Success</strong> - <span class=\"message\">The revision was successfully rejected.</span></div></div></div></div><div class=\"row\"><div class=\"col-xs-12 diffs\"><ul><li class=\"item\" ng-repeat=\"(field, diffs) in vm.variantGroupTalkModel.data.item.diffs\"><div ng-switch=\"field\"><div ng-switch-default=\"\"><div class=\"row\"><div class=\"col-xs-12\"><h4 class=\"field-name\">{{ field | capitalize}}</h4></div></div><div class=\"row\"><div class=\"col-xs-12\"><span ng-bind-html=\"diffs.diff\"></span></div></div><div class=\"row\"><div class=\"col-xs-12\"><div class=\"res\"><span ng-bind-html=\"diffs.final\"></span></div></div></div></div></div></li></ul></div></div><div class=\"row\"><div class=\"col-xs-12 admin-buttons\" ng-if=\"vm.isEditor() && vm.variantGroupTalkModel.data.item.status === \\'new\\'\"><div class=\"pull-right\"><button type=\"submit\" class=\"btn btn-default\" ng-click=\"acceptRevision()\">Accept Revision</button> <button type=\"submit\" class=\"btn btn-default\" ng-click=\"rejectRevision()\">Reject Revision</button></div></div></div><div class=\"row\"><div class=\"col-xs-12 comments-header\"><h4>Revision RID<span ng-bind=\"vm.variantGroupTalkModel.data.item.id\">ID</span> Comments</h4></div></div><div class=\"row\"><div class=\"col-xs-12 comment-list\"><div ng-switch=\"ctrl.comments.length\"><div ng-switch-when=\"0\"><p>No comments found.</p></div><div ng-switch-default=\"\"><ul class=\"comments\"><li ng-repeat=\"comment in vm.variantGroupTalkModel.data.comments\"><entity-comment comment-data=\"comment\" entity-model=\"vm.variantGroupTalkModel\"></entity-comment></li></ul></div></div></div></div><div class=\"row\"><div class=\"col-xs-12 comment-form\"><entity-comment-form type=\"revision\" entity-model=\"vm.variantGroupTalkModel\"></entity-comment-form></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/variantGroups/talk/revisions/variantGroupTalkRevisions.tpl.html',\n    '<div class=\"variantGroupTalkRevisions\"><div ng-if=\"variantGroupRevisions.data.collection.length > 0\"><div class=\"row revisions-list {{ viewOptions.styles.view.summaryBackgroundColor }}\"><div class=\"col-xs-12\"><revisions-grid changes=\"variantGroupRevisions.data.collection\" base-state=\"events.genes.summary.variantGroups.talk.revisions\"></revisions-grid></div></div><div class=\"row revisions-view {{ viewOptions.styles.view.talkBackgroundColor }}\"><div class=\"col-xs-12\"><ui-view></ui-view></div></div></div><div ng-if=\"variantGroupRevisions.data.collection.length === 0\"><div class=\"row revisions-prompt\"><div class=\"col-xs-12\"><div class=\"jumbotron\"><h2 style=\"margin:0;padding:0;\">No suggested revisions exist for this variant group.</h2><p>You may create a suggested revision by clicking on the variant group name at the top of this record.</p></div></div></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/variants/talk/revisions/VariantTalkRevisionsView.tpl.html',\n    '<div class=\"VariantsTalkRevisionsView\"><entity-talk-revisions-view view-model=\"vm.VariantRevisionsModel\" view-options=\"vm.VariantsTalkRevisionsViewOptions\"><div class=\"row\"><div class=\"col-xs-12\"><ui-view></ui-view></div></div></entity-talk-revisions-view></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/variants/talk/revisions/variantTalkRevisionSummary.tpl.html',\n    '<div class=\"variantTalkRevisionSummary\"><div class=\"row revision-header\"><div class=\"stripes-bg\"><div class=\"col-xs-10 name\"><h3>Revision RID<span ng-bind=\"vm.variantTalkModel.data.item.id\">ID</span></h3></div><div class=\"col-xs-2 status\"><div class=\"pull-right\"><span ng-bind=\"vm.variantTalkModel.data.item.status\">status</span></div></div></div></div><div class=\"row\"><div class=\"col-xs-12\"><div ng-messages=\"vm.formErrors\" class=\"revision-errors\"><div ng-message=\"500\" class=\"alert alert-danger\"><strong class=\"status\">500 <span ng-bind=\"vm.errorMessages[\\'500\\']\" class=\"message\">error msg</span></strong> - <span ng-bind=\"vm.errorPrompts[\\'500\\']\">error prompt</span></div><div ng-message=\"401\" class=\"alert alert-danger\"><strong class=\"status\">401 <span ng-bind=\"vm.errorMessages[\\'401\\']\" class=\"message\">error msg</span></strong> - <span ng-bind=\"vm.errorPrompts[\\'401\\']\">error prompt</span></div><div ng-message=\"403\" class=\"alert alert-danger\"><strong class=\"status\">403 <span ng-bind=\"vm.errorMessages[\\'403\\']\" class=\"message\">error msg</span></strong> - <span ng-bind=\"vm.errorPrompts[\\'403\\']\">error prompt</span></div><div ng-message=\"409\" class=\"alert alert-danger\"><strong class=\"status\">403 <span ng-bind=\"vm.errorMessages[\\'409\\']\" class=\"message\">error msg</span></strong> - <span ng-bind=\"vm.errorPrompts[\\'409\\']\">error prompt</span></div></div></div></div><div class=\"row\"><div class=\"col-xs-12\"><div ng-messages=\"vm.formMessages\" class=\"revision-messages\"><div ng-message=\"acceptSuccess\" class=\"alert alert-success\"><strong class=\"status\">Success</strong> - <span class=\"message\">The revision was successfully applied.</span></div><div ng-message=\"rejectSuccess\" class=\"alert alert-success\"><strong class=\"status\">Success</strong> - <span class=\"message\">The revision was successfully rejected.</span></div></div></div></div><div class=\"row\"><div class=\"col-xs-12 diffs\"><ul><li class=\"item\" ng-repeat=\"(field, diffs) in vm.variantTalkModel.data.item.diffs\"><div ng-switch=\"field\"><div ng-switch-default=\"\"><div class=\"row\"><div class=\"col-xs-12\"><h4 class=\"field-name\">{{ field | capitalize}}</h4></div></div><div class=\"row\"><div class=\"col-xs-12\"><span ng-bind-html=\"diffs.diff\"></span></div></div><div class=\"row\"><div class=\"col-xs-12\"><div class=\"res\"><span ng-bind-html=\"diffs.final\"></span></div></div></div></div></div></li></ul></div></div><div class=\"row\"><div class=\"col-xs-12 admin-buttons\" ng-if=\"vm.isEditor() && vm.variantTalkModel.data.item.status === \\'new\\'\"><div class=\"pull-right\"><button type=\"submit\" class=\"btn btn-default\" ng-click=\"acceptRevision()\">Accept Revision</button> <button type=\"submit\" class=\"btn btn-default\" ng-click=\"rejectRevision()\">Reject Revision</button></div></div></div><div class=\"row\"><div class=\"col-xs-12 comments-header\"><h4>Revision RID<span ng-bind=\"vm.variantTalkModel.data.item.id\">ID</span> Comments</h4></div></div><div class=\"row\"><div class=\"col-xs-12 comment-list\"><div ng-switch=\"ctrl.comments.length\"><div ng-switch-when=\"0\"><p>No comments found.</p></div><div ng-switch-default=\"\"><ul class=\"comments\"><li ng-repeat=\"comment in vm.variantTalkModel.data.comments\"><entity-comment comment-data=\"comment\" entity-model=\"vm.variantTalkModel\"></entity-comment></li></ul></div></div></div></div><div class=\"row\"><div class=\"col-xs-12 comment-form\"><entity-comment-form type=\"revision\" entity-model=\"vm.variantTalkModel\"></entity-comment-form></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/variants/talk/revisions/variantTalkRevisions.tpl.html',\n    '<div class=\"variantTalkRevisions\"><div ng-if=\"variantRevisions.data.collection.length > 0\"><div class=\"row revisions-list {{ viewOptions.styles.view.summaryBackgroundColor }}\"><div class=\"col-xs-12\"><revisions-grid changes=\"variantRevisions.data.collection\" base-state=\"events.genes.summary.variants.talk.revisions\"></revisions-grid></div></div><div class=\"row revisions-view {{ viewOptions.styles.view.talkBackgroundColor }}\"><div class=\"col-xs-12\"><ui-view><div class=\"alert alert-info select-prompt\">&uparrow; Click on a <strong>Revision</strong> above to view its details here.</div></ui-view></div></div></div><div ng-if=\"variantRevisions.data.collection.length === 0\"><div class=\"row revisions-prompt\"><div class=\"col-xs-12\"><div class=\"jumbotron\"><h2 style=\"margin:0;padding:0;\">No suggested revisions exist for this variant.</h2><p>You may create a suggested revision by clicking on the variant name at the top of this record.</p></div></div></div></div></div>');\n}]);\n})();\n"],"sourceRoot":"/source/"}